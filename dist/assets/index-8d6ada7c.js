function CL(e,r){for(var a=0;a<r.length;a++){const h=r[a];if(typeof h!="string"&&!Array.isArray(h)){for(const d in h)if(d!=="default"&&!(d in e)){const x=Object.getOwnPropertyDescriptor(h,d);x&&Object.defineProperty(e,d,x.get?x:{enumerable:!0,get:()=>h[d]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))h(d);new MutationObserver(d=>{for(const x of d)if(x.type==="childList")for(const E of x.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&h(E)}).observe(document,{childList:!0,subtree:!0});function a(d){const x={};return d.integrity&&(x.integrity=d.integrity),d.referrerPolicy&&(x.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?x.credentials="include":d.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function h(d){if(d.ep)return;d.ep=!0;const x=a(d);fetch(d.href,x)}})();var bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Wx(e){if(e.__esModule)return e;var r=e.default;if(typeof r=="function"){var a=function h(){if(this instanceof h){var d=[null];d.push.apply(d,arguments);var x=Function.bind.apply(r,d);return new x}return r.apply(this,arguments)};a.prototype=r.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(h){var d=Object.getOwnPropertyDescriptor(e,h);Object.defineProperty(a,h,d.get?d:{enumerable:!0,get:function(){return e[h]}})}),a}var rC={exports:{}},N_={},nC={exports:{}},dr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp=Symbol.for("react.element"),ML=Symbol.for("react.portal"),PL=Symbol.for("react.fragment"),IL=Symbol.for("react.strict_mode"),kL=Symbol.for("react.profiler"),LL=Symbol.for("react.provider"),OL=Symbol.for("react.context"),zL=Symbol.for("react.forward_ref"),RL=Symbol.for("react.suspense"),DL=Symbol.for("react.memo"),BL=Symbol.for("react.lazy"),oT=Symbol.iterator;function FL(e){return e===null||typeof e!="object"?null:(e=oT&&e[oT]||e["@@iterator"],typeof e=="function"?e:null)}var iC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oC=Object.assign,sC={};function Eh(e,r,a){this.props=e,this.context=r,this.refs=sC,this.updater=a||iC}Eh.prototype.isReactComponent={};Eh.prototype.setState=function(e,r){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,r,"setState")};Eh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aC(){}aC.prototype=Eh.prototype;function Xx(e,r,a){this.props=e,this.context=r,this.refs=sC,this.updater=a||iC}var Kx=Xx.prototype=new aC;Kx.constructor=Xx;oC(Kx,Eh.prototype);Kx.isPureReactComponent=!0;var sT=Array.isArray,lC=Object.prototype.hasOwnProperty,Yx={current:null},cC={key:!0,ref:!0,__self:!0,__source:!0};function uC(e,r,a){var h,d={},x=null,E=null;if(r!=null)for(h in r.ref!==void 0&&(E=r.ref),r.key!==void 0&&(x=""+r.key),r)lC.call(r,h)&&!cC.hasOwnProperty(h)&&(d[h]=r[h]);var s=arguments.length-2;if(s===1)d.children=a;else if(1<s){for(var A=Array(s),R=0;R<s;R++)A[R]=arguments[R+2];d.children=A}if(e&&e.defaultProps)for(h in s=e.defaultProps,s)d[h]===void 0&&(d[h]=s[h]);return{$$typeof:fp,type:e,key:x,ref:E,props:d,_owner:Yx.current}}function NL(e,r){return{$$typeof:fp,type:e.type,key:r,ref:e.ref,props:e.props,_owner:e._owner}}function Qx(e){return typeof e=="object"&&e!==null&&e.$$typeof===fp}function jL(e){var r={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(a){return r[a]})}var aT=/\/+/g;function vv(e,r){return typeof e=="object"&&e!==null&&e.key!=null?jL(""+e.key):r.toString(36)}function Ig(e,r,a,h,d){var x=typeof e;(x==="undefined"||x==="boolean")&&(e=null);var E=!1;if(e===null)E=!0;else switch(x){case"string":case"number":E=!0;break;case"object":switch(e.$$typeof){case fp:case ML:E=!0}}if(E)return E=e,d=d(E),e=h===""?"."+vv(E,0):h,sT(d)?(a="",e!=null&&(a=e.replace(aT,"$&/")+"/"),Ig(d,r,a,"",function(R){return R})):d!=null&&(Qx(d)&&(d=NL(d,a+(!d.key||E&&E.key===d.key?"":(""+d.key).replace(aT,"$&/")+"/")+e)),r.push(d)),1;if(E=0,h=h===""?".":h+":",sT(e))for(var s=0;s<e.length;s++){x=e[s];var A=h+vv(x,s);E+=Ig(x,r,a,A,d)}else if(A=FL(e),typeof A=="function")for(e=A.call(e),s=0;!(x=e.next()).done;)x=x.value,A=h+vv(x,s++),E+=Ig(x,r,a,A,d);else if(x==="object")throw r=String(e),Error("Objects are not valid as a React child (found: "+(r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return E}function tg(e,r,a){if(e==null)return e;var h=[],d=0;return Ig(e,h,"","",function(x){return r.call(a,x,d++)}),h}function UL(e){if(e._status===-1){var r=e._result;r=r(),r.then(function(a){(e._status===0||e._status===-1)&&(e._status=1,e._result=a)},function(a){(e._status===0||e._status===-1)&&(e._status=2,e._result=a)}),e._status===-1&&(e._status=0,e._result=r)}if(e._status===1)return e._result.default;throw e._result}var Ei={current:null},kg={transition:null},VL={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:kg,ReactCurrentOwner:Yx};dr.Children={map:tg,forEach:function(e,r,a){tg(e,function(){r.apply(this,arguments)},a)},count:function(e){var r=0;return tg(e,function(){r++}),r},toArray:function(e){return tg(e,function(r){return r})||[]},only:function(e){if(!Qx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};dr.Component=Eh;dr.Fragment=PL;dr.Profiler=kL;dr.PureComponent=Xx;dr.StrictMode=IL;dr.Suspense=RL;dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VL;dr.cloneElement=function(e,r,a){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var h=oC({},e.props),d=e.key,x=e.ref,E=e._owner;if(r!=null){if(r.ref!==void 0&&(x=r.ref,E=Yx.current),r.key!==void 0&&(d=""+r.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(A in r)lC.call(r,A)&&!cC.hasOwnProperty(A)&&(h[A]=r[A]===void 0&&s!==void 0?s[A]:r[A])}var A=arguments.length-2;if(A===1)h.children=a;else if(1<A){s=Array(A);for(var R=0;R<A;R++)s[R]=arguments[R+2];h.children=s}return{$$typeof:fp,type:e.type,key:d,ref:x,props:h,_owner:E}};dr.createContext=function(e){return e={$$typeof:OL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LL,_context:e},e.Consumer=e};dr.createElement=uC;dr.createFactory=function(e){var r=uC.bind(null,e);return r.type=e,r};dr.createRef=function(){return{current:null}};dr.forwardRef=function(e){return{$$typeof:zL,render:e}};dr.isValidElement=Qx;dr.lazy=function(e){return{$$typeof:BL,_payload:{_status:-1,_result:e},_init:UL}};dr.memo=function(e,r){return{$$typeof:DL,type:e,compare:r===void 0?null:r}};dr.startTransition=function(e){var r=kg.transition;kg.transition={};try{e()}finally{kg.transition=r}};dr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};dr.useCallback=function(e,r){return Ei.current.useCallback(e,r)};dr.useContext=function(e){return Ei.current.useContext(e)};dr.useDebugValue=function(){};dr.useDeferredValue=function(e){return Ei.current.useDeferredValue(e)};dr.useEffect=function(e,r){return Ei.current.useEffect(e,r)};dr.useId=function(){return Ei.current.useId()};dr.useImperativeHandle=function(e,r,a){return Ei.current.useImperativeHandle(e,r,a)};dr.useInsertionEffect=function(e,r){return Ei.current.useInsertionEffect(e,r)};dr.useLayoutEffect=function(e,r){return Ei.current.useLayoutEffect(e,r)};dr.useMemo=function(e,r){return Ei.current.useMemo(e,r)};dr.useReducer=function(e,r,a){return Ei.current.useReducer(e,r,a)};dr.useRef=function(e){return Ei.current.useRef(e)};dr.useState=function(e){return Ei.current.useState(e)};dr.useSyncExternalStore=function(e,r,a){return Ei.current.useSyncExternalStore(e,r,a)};dr.useTransition=function(){return Ei.current.useTransition()};dr.version="18.2.0";nC.exports=dr;var Xe=nC.exports;const ze=dp(Xe),x1=CL({__proto__:null,default:ze},[Xe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $L=Xe,GL=Symbol.for("react.element"),ZL=Symbol.for("react.fragment"),HL=Object.prototype.hasOwnProperty,qL=$L.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WL={key:!0,ref:!0,__self:!0,__source:!0};function hC(e,r,a){var h,d={},x=null,E=null;a!==void 0&&(x=""+a),r.key!==void 0&&(x=""+r.key),r.ref!==void 0&&(E=r.ref);for(h in r)HL.call(r,h)&&!WL.hasOwnProperty(h)&&(d[h]=r[h]);if(e&&e.defaultProps)for(h in r=e.defaultProps,r)d[h]===void 0&&(d[h]=r[h]);return{$$typeof:GL,type:e,key:x,ref:E,props:d,_owner:qL.current}}N_.Fragment=ZL;N_.jsx=hC;N_.jsxs=hC;rC.exports=N_;var we=rC.exports,b1={},dC={exports:{}},no={},fC={exports:{}},pC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function r(Oe,Et){var _t=Oe.length;Oe.push(Et);e:for(;0<_t;){var It=_t-1>>>1,qt=Oe[It];if(0<d(qt,Et))Oe[It]=Et,Oe[_t]=qt,_t=It;else break e}}function a(Oe){return Oe.length===0?null:Oe[0]}function h(Oe){if(Oe.length===0)return null;var Et=Oe[0],_t=Oe.pop();if(_t!==Et){Oe[0]=_t;e:for(var It=0,qt=Oe.length,nr=qt>>>1;It<nr;){var Lr=2*(It+1)-1,Si=Oe[Lr],wn=Lr+1,Fn=Oe[wn];if(0>d(Si,_t))wn<qt&&0>d(Fn,Si)?(Oe[It]=Fn,Oe[wn]=_t,It=wn):(Oe[It]=Si,Oe[Lr]=_t,It=Lr);else if(wn<qt&&0>d(Fn,_t))Oe[It]=Fn,Oe[wn]=_t,It=wn;else break e}}return Et}function d(Oe,Et){var _t=Oe.sortIndex-Et.sortIndex;return _t!==0?_t:Oe.id-Et.id}if(typeof performance=="object"&&typeof performance.now=="function"){var x=performance;e.unstable_now=function(){return x.now()}}else{var E=Date,s=E.now();e.unstable_now=function(){return E.now()-s}}var A=[],R=[],U=1,N=null,q=3,fe=!1,ae=!1,se=!1,ve=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Oe){for(var Et=a(R);Et!==null;){if(Et.callback===null)h(R);else if(Et.startTime<=Oe)h(R),Et.sortIndex=Et.expirationTime,r(A,Et);else break;Et=a(R)}}function Ee(Oe){if(se=!1,te(Oe),!ae)if(a(A)!==null)ae=!0,Jt(ke);else{var Et=a(R);Et!==null&&Ze(Ee,Et.startTime-Oe)}}function ke(Oe,Et){ae=!1,se&&(se=!1,J(Ve),Ve=-1),fe=!0;var _t=q;try{for(te(Et),N=a(A);N!==null&&(!(N.expirationTime>Et)||Oe&&!zt());){var It=N.callback;if(typeof It=="function"){N.callback=null,q=N.priorityLevel;var qt=It(N.expirationTime<=Et);Et=e.unstable_now(),typeof qt=="function"?N.callback=qt:N===a(A)&&h(A),te(Et)}else h(A);N=a(A)}if(N!==null)var nr=!0;else{var Lr=a(R);Lr!==null&&Ze(Ee,Lr.startTime-Et),nr=!1}return nr}finally{N=null,q=_t,fe=!1}}var Fe=!1,We=null,Ve=-1,Te=5,dt=-1;function zt(){return!(e.unstable_now()-dt<Te)}function at(){if(We!==null){var Oe=e.unstable_now();dt=Oe;var Et=!0;try{Et=We(!0,Oe)}finally{Et?vt():(Fe=!1,We=null)}}else Fe=!1}var vt;if(typeof Z=="function")vt=function(){Z(at)};else if(typeof MessageChannel<"u"){var Ot=new MessageChannel,St=Ot.port2;Ot.port1.onmessage=at,vt=function(){St.postMessage(null)}}else vt=function(){ve(at,0)};function Jt(Oe){We=Oe,Fe||(Fe=!0,vt())}function Ze(Oe,Et){Ve=ve(function(){Oe(e.unstable_now())},Et)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Oe){Oe.callback=null},e.unstable_continueExecution=function(){ae||fe||(ae=!0,Jt(ke))},e.unstable_forceFrameRate=function(Oe){0>Oe||125<Oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<Oe?Math.floor(1e3/Oe):5},e.unstable_getCurrentPriorityLevel=function(){return q},e.unstable_getFirstCallbackNode=function(){return a(A)},e.unstable_next=function(Oe){switch(q){case 1:case 2:case 3:var Et=3;break;default:Et=q}var _t=q;q=Et;try{return Oe()}finally{q=_t}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Oe,Et){switch(Oe){case 1:case 2:case 3:case 4:case 5:break;default:Oe=3}var _t=q;q=Oe;try{return Et()}finally{q=_t}},e.unstable_scheduleCallback=function(Oe,Et,_t){var It=e.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?It+_t:It):_t=It,Oe){case 1:var qt=-1;break;case 2:qt=250;break;case 5:qt=1073741823;break;case 4:qt=1e4;break;default:qt=5e3}return qt=_t+qt,Oe={id:U++,callback:Et,priorityLevel:Oe,startTime:_t,expirationTime:qt,sortIndex:-1},_t>It?(Oe.sortIndex=_t,r(R,Oe),a(A)===null&&Oe===a(R)&&(se?(J(Ve),Ve=-1):se=!0,Ze(Ee,_t-It))):(Oe.sortIndex=qt,r(A,Oe),ae||fe||(ae=!0,Jt(ke))),Oe},e.unstable_shouldYield=zt,e.unstable_wrapCallback=function(Oe){var Et=q;return function(){var _t=q;q=Et;try{return Oe.apply(this,arguments)}finally{q=_t}}}})(pC);fC.exports=pC;var XL=fC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC=Xe,ro=XL;function ct(e){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gC=new Set,Nf={};function zc(e,r){hh(e,r),hh(e+"Capture",r)}function hh(e,r){for(Nf[e]=r,e=0;e<r.length;e++)gC.add(r[e])}var na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w1=Object.prototype.hasOwnProperty,KL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lT={},cT={};function YL(e){return w1.call(cT,e)?!0:w1.call(lT,e)?!1:KL.test(e)?cT[e]=!0:(lT[e]=!0,!1)}function QL(e,r,a,h){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function JL(e,r,a,h){if(r===null||typeof r>"u"||QL(e,r,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function Ti(e,r,a,h,d,x,E){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=e,this.type=r,this.sanitizeURL=x,this.removeEmptyString=E}var Qn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Qn[e]=new Ti(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var r=e[0];Qn[r]=new Ti(r,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Qn[e]=new Ti(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Qn[e]=new Ti(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Qn[e]=new Ti(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Qn[e]=new Ti(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Qn[e]=new Ti(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Qn[e]=new Ti(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Qn[e]=new Ti(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jx=/[\-:]([a-z])/g;function eb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var r=e.replace(Jx,eb);Qn[r]=new Ti(r,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var r=e.replace(Jx,eb);Qn[r]=new Ti(r,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var r=e.replace(Jx,eb);Qn[r]=new Ti(r,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Qn[e]=new Ti(e,1,!1,e.toLowerCase(),null,!1,!1)});Qn.xlinkHref=new Ti("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Qn[e]=new Ti(e,1,!1,e.toLowerCase(),null,!0,!0)});function tb(e,r,a,h){var d=Qn.hasOwnProperty(r)?Qn[r]:null;(d!==null?d.type!==0:h||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(JL(r,a,d,h)&&(a=null),h||d===null?YL(r)&&(a===null?e.removeAttribute(r):e.setAttribute(r,""+a)):d.mustUseProperty?e[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,h=d.attributeNamespace,a===null?e.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?e.setAttributeNS(h,r,a):e.setAttribute(r,a))))}var aa=mC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rg=Symbol.for("react.element"),Uu=Symbol.for("react.portal"),Vu=Symbol.for("react.fragment"),rb=Symbol.for("react.strict_mode"),E1=Symbol.for("react.profiler"),_C=Symbol.for("react.provider"),yC=Symbol.for("react.context"),nb=Symbol.for("react.forward_ref"),T1=Symbol.for("react.suspense"),S1=Symbol.for("react.suspense_list"),ib=Symbol.for("react.memo"),Xa=Symbol.for("react.lazy"),vC=Symbol.for("react.offscreen"),uT=Symbol.iterator;function df(e){return e===null||typeof e!="object"?null:(e=uT&&e[uT]||e["@@iterator"],typeof e=="function"?e:null)}var gn=Object.assign,xv;function bf(e){if(xv===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);xv=r&&r[1]||""}return`
`+xv+e}var bv=!1;function wv(e,r){if(!e||bv)return"";bv=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(R){var h=R}Reflect.construct(e,[],r)}else{try{r.call()}catch(R){h=R}e.call(r.prototype)}else{try{throw Error()}catch(R){h=R}e()}}catch(R){if(R&&h&&typeof R.stack=="string"){for(var d=R.stack.split(`
`),x=h.stack.split(`
`),E=d.length-1,s=x.length-1;1<=E&&0<=s&&d[E]!==x[s];)s--;for(;1<=E&&0<=s;E--,s--)if(d[E]!==x[s]){if(E!==1||s!==1)do if(E--,s--,0>s||d[E]!==x[s]){var A=`
`+d[E].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=E&&0<=s);break}}}finally{bv=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?bf(e):""}function eO(e){switch(e.tag){case 5:return bf(e.type);case 16:return bf("Lazy");case 13:return bf("Suspense");case 19:return bf("SuspenseList");case 0:case 2:case 15:return e=wv(e.type,!1),e;case 11:return e=wv(e.type.render,!1),e;case 1:return e=wv(e.type,!0),e;default:return""}}function A1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vu:return"Fragment";case Uu:return"Portal";case E1:return"Profiler";case rb:return"StrictMode";case T1:return"Suspense";case S1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yC:return(e.displayName||"Context")+".Consumer";case _C:return(e._context.displayName||"Context")+".Provider";case nb:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ib:return r=e.displayName||null,r!==null?r:A1(e.type)||"Memo";case Xa:r=e._payload,e=e._init;try{return A1(e(r))}catch{}}return null}function tO(e){var r=e.type;switch(e.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=r.render,e=e.displayName||e.name||"",r.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A1(r);case 8:return r===rb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function fl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xC(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function rO(e){var r=xC(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),h=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,x=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return d.call(this)},set:function(E){h=""+E,x.call(this,E)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(E){h=""+E},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function ng(e){e._valueTracker||(e._valueTracker=rO(e))}function bC(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),h="";return e&&(h=xC(e)?e.checked?"true":"false":e.value),e=h,e!==a?(r.setValue(e),!0):!1}function Hg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function C1(e,r){var a=r.checked;return gn({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??e._wrapperState.initialChecked})}function hT(e,r){var a=r.defaultValue==null?"":r.defaultValue,h=r.checked!=null?r.checked:r.defaultChecked;a=fl(r.value!=null?r.value:a),e._wrapperState={initialChecked:h,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function wC(e,r){r=r.checked,r!=null&&tb(e,"checked",r,!1)}function M1(e,r){wC(e,r);var a=fl(r.value),h=r.type;if(a!=null)h==="number"?(a===0&&e.value===""||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if(h==="submit"||h==="reset"){e.removeAttribute("value");return}r.hasOwnProperty("value")?P1(e,r.type,a):r.hasOwnProperty("defaultValue")&&P1(e,r.type,fl(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(e.defaultChecked=!!r.defaultChecked)}function dT(e,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var h=r.type;if(!(h!=="submit"&&h!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+e._wrapperState.initialValue,a||r===e.value||(e.value=r),e.defaultValue=r}a=e.name,a!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,a!==""&&(e.name=a)}function P1(e,r,a){(r!=="number"||Hg(e.ownerDocument)!==e)&&(a==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var wf=Array.isArray;function th(e,r,a,h){if(e=e.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=r.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&h&&(e[a].defaultSelected=!0)}else{for(a=""+fl(a),r=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,h&&(e[d].defaultSelected=!0);return}r!==null||e[d].disabled||(r=e[d])}r!==null&&(r.selected=!0)}}function I1(e,r){if(r.dangerouslySetInnerHTML!=null)throw Error(ct(91));return gn({},r,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fT(e,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(ct(92));if(wf(a)){if(1<a.length)throw Error(ct(93));a=a[0]}r=a}r==null&&(r=""),a=r}e._wrapperState={initialValue:fl(a)}}function EC(e,r){var a=fl(r.value),h=fl(r.defaultValue);a!=null&&(a=""+a,a!==e.value&&(e.value=a),r.defaultValue==null&&e.defaultValue!==a&&(e.defaultValue=a)),h!=null&&(e.defaultValue=""+h)}function pT(e){var r=e.textContent;r===e._wrapperState.initialValue&&r!==""&&r!==null&&(e.value=r)}function TC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function k1(e,r){return e==null||e==="http://www.w3.org/1999/xhtml"?TC(r):e==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ig,SC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,h,d){MSApp.execUnsafeLocalFunction(function(){return e(r,a,h,d)})}:e}(function(e,r){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=r;else{for(ig=ig||document.createElement("div"),ig.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=ig.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;r.firstChild;)e.appendChild(r.firstChild)}});function jf(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var Af={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nO=["Webkit","ms","Moz","O"];Object.keys(Af).forEach(function(e){nO.forEach(function(r){r=r+e.charAt(0).toUpperCase()+e.substring(1),Af[r]=Af[e]})});function AC(e,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Af.hasOwnProperty(e)&&Af[e]?(""+r).trim():r+"px"}function CC(e,r){e=e.style;for(var a in r)if(r.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=AC(a,r[a],h);a==="float"&&(a="cssFloat"),h?e.setProperty(a,d):e[a]=d}}var iO=gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function L1(e,r){if(r){if(iO[e]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(ct(137,e));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(ct(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(ct(61))}if(r.style!=null&&typeof r.style!="object")throw Error(ct(62))}}function O1(e,r){if(e.indexOf("-")===-1)return typeof r.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z1=null;function ob(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var R1=null,rh=null,nh=null;function mT(e){if(e=gp(e)){if(typeof R1!="function")throw Error(ct(280));var r=e.stateNode;r&&(r=G_(r),R1(e.stateNode,e.type,r))}}function MC(e){rh?nh?nh.push(e):nh=[e]:rh=e}function PC(){if(rh){var e=rh,r=nh;if(nh=rh=null,mT(e),r)for(e=0;e<r.length;e++)mT(r[e])}}function IC(e,r){return e(r)}function kC(){}var Ev=!1;function LC(e,r,a){if(Ev)return e(r,a);Ev=!0;try{return IC(e,r,a)}finally{Ev=!1,(rh!==null||nh!==null)&&(kC(),PC())}}function Uf(e,r){var a=e.stateNode;if(a===null)return null;var h=G_(a);if(h===null)return null;a=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(ct(231,r,typeof a));return a}var D1=!1;if(na)try{var ff={};Object.defineProperty(ff,"passive",{get:function(){D1=!0}}),window.addEventListener("test",ff,ff),window.removeEventListener("test",ff,ff)}catch{D1=!1}function oO(e,r,a,h,d,x,E,s,A){var R=Array.prototype.slice.call(arguments,3);try{r.apply(a,R)}catch(U){this.onError(U)}}var Cf=!1,qg=null,Wg=!1,B1=null,sO={onError:function(e){Cf=!0,qg=e}};function aO(e,r,a,h,d,x,E,s,A){Cf=!1,qg=null,oO.apply(sO,arguments)}function lO(e,r,a,h,d,x,E,s,A){if(aO.apply(this,arguments),Cf){if(Cf){var R=qg;Cf=!1,qg=null}else throw Error(ct(198));Wg||(Wg=!0,B1=R)}}function Rc(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,r.flags&4098&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function OC(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function gT(e){if(Rc(e)!==e)throw Error(ct(188))}function cO(e){var r=e.alternate;if(!r){if(r=Rc(e),r===null)throw Error(ct(188));return r!==e?null:e}for(var a=e,h=r;;){var d=a.return;if(d===null)break;var x=d.alternate;if(x===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===x.child){for(x=d.child;x;){if(x===a)return gT(d),e;if(x===h)return gT(d),r;x=x.sibling}throw Error(ct(188))}if(a.return!==h.return)a=d,h=x;else{for(var E=!1,s=d.child;s;){if(s===a){E=!0,a=d,h=x;break}if(s===h){E=!0,h=d,a=x;break}s=s.sibling}if(!E){for(s=x.child;s;){if(s===a){E=!0,a=x,h=d;break}if(s===h){E=!0,h=x,a=d;break}s=s.sibling}if(!E)throw Error(ct(189))}}if(a.alternate!==h)throw Error(ct(190))}if(a.tag!==3)throw Error(ct(188));return a.stateNode.current===a?e:r}function zC(e){return e=cO(e),e!==null?RC(e):null}function RC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var r=RC(e);if(r!==null)return r;e=e.sibling}return null}var DC=ro.unstable_scheduleCallback,_T=ro.unstable_cancelCallback,uO=ro.unstable_shouldYield,hO=ro.unstable_requestPaint,bn=ro.unstable_now,dO=ro.unstable_getCurrentPriorityLevel,sb=ro.unstable_ImmediatePriority,BC=ro.unstable_UserBlockingPriority,Xg=ro.unstable_NormalPriority,fO=ro.unstable_LowPriority,FC=ro.unstable_IdlePriority,j_=null,Ss=null;function pO(e){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(j_,e,void 0,(e.current.flags&128)===128)}catch{}}var Jo=Math.clz32?Math.clz32:_O,mO=Math.log,gO=Math.LN2;function _O(e){return e>>>=0,e===0?32:31-(mO(e)/gO|0)|0}var og=64,sg=4194304;function Ef(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kg(e,r){var a=e.pendingLanes;if(a===0)return 0;var h=0,d=e.suspendedLanes,x=e.pingedLanes,E=a&268435455;if(E!==0){var s=E&~d;s!==0?h=Ef(s):(x&=E,x!==0&&(h=Ef(x)))}else E=a&~d,E!==0?h=Ef(E):x!==0&&(h=Ef(x));if(h===0)return 0;if(r!==0&&r!==h&&!(r&d)&&(d=h&-h,x=r&-r,d>=x||d===16&&(x&4194240)!==0))return r;if(h&4&&(h|=a&16),r=e.entangledLanes,r!==0)for(e=e.entanglements,r&=h;0<r;)a=31-Jo(r),d=1<<a,h|=e[a],r&=~d;return h}function yO(e,r){switch(e){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vO(e,r){for(var a=e.suspendedLanes,h=e.pingedLanes,d=e.expirationTimes,x=e.pendingLanes;0<x;){var E=31-Jo(x),s=1<<E,A=d[E];A===-1?(!(s&a)||s&h)&&(d[E]=yO(s,r)):A<=r&&(e.expiredLanes|=s),x&=~s}}function F1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function NC(){var e=og;return og<<=1,!(og&4194240)&&(og=64),e}function Tv(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function pp(e,r,a){e.pendingLanes|=r,r!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,r=31-Jo(r),e[r]=a}function xO(e,r){var a=e.pendingLanes&~r;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=r,e.mutableReadLanes&=r,e.entangledLanes&=r,r=e.entanglements;var h=e.eventTimes;for(e=e.expirationTimes;0<a;){var d=31-Jo(a),x=1<<d;r[d]=0,h[d]=-1,e[d]=-1,a&=~x}}function ab(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var h=31-Jo(a),d=1<<h;d&r|e[h]&r&&(e[h]|=r),a&=~d}}var zr=0;function jC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var UC,lb,VC,$C,GC,N1=!1,ag=[],il=null,ol=null,sl=null,Vf=new Map,$f=new Map,Qa=[],bO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yT(e,r){switch(e){case"focusin":case"focusout":il=null;break;case"dragenter":case"dragleave":ol=null;break;case"mouseover":case"mouseout":sl=null;break;case"pointerover":case"pointerout":Vf.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$f.delete(r.pointerId)}}function pf(e,r,a,h,d,x){return e===null||e.nativeEvent!==x?(e={blockedOn:r,domEventName:a,eventSystemFlags:h,nativeEvent:x,targetContainers:[d]},r!==null&&(r=gp(r),r!==null&&lb(r)),e):(e.eventSystemFlags|=h,r=e.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),e)}function wO(e,r,a,h,d){switch(r){case"focusin":return il=pf(il,e,r,a,h,d),!0;case"dragenter":return ol=pf(ol,e,r,a,h,d),!0;case"mouseover":return sl=pf(sl,e,r,a,h,d),!0;case"pointerover":var x=d.pointerId;return Vf.set(x,pf(Vf.get(x)||null,e,r,a,h,d)),!0;case"gotpointercapture":return x=d.pointerId,$f.set(x,pf($f.get(x)||null,e,r,a,h,d)),!0}return!1}function ZC(e){var r=vc(e.target);if(r!==null){var a=Rc(r);if(a!==null){if(r=a.tag,r===13){if(r=OC(a),r!==null){e.blockedOn=r,GC(e.priority,function(){VC(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lg(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=j1(e.domEventName,e.eventSystemFlags,r[0],e.nativeEvent);if(a===null){a=e.nativeEvent;var h=new a.constructor(a.type,a);z1=h,a.target.dispatchEvent(h),z1=null}else return r=gp(a),r!==null&&lb(r),e.blockedOn=a,!1;r.shift()}return!0}function vT(e,r,a){Lg(e)&&a.delete(r)}function EO(){N1=!1,il!==null&&Lg(il)&&(il=null),ol!==null&&Lg(ol)&&(ol=null),sl!==null&&Lg(sl)&&(sl=null),Vf.forEach(vT),$f.forEach(vT)}function mf(e,r){e.blockedOn===r&&(e.blockedOn=null,N1||(N1=!0,ro.unstable_scheduleCallback(ro.unstable_NormalPriority,EO)))}function Gf(e){function r(d){return mf(d,e)}if(0<ag.length){mf(ag[0],e);for(var a=1;a<ag.length;a++){var h=ag[a];h.blockedOn===e&&(h.blockedOn=null)}}for(il!==null&&mf(il,e),ol!==null&&mf(ol,e),sl!==null&&mf(sl,e),Vf.forEach(r),$f.forEach(r),a=0;a<Qa.length;a++)h=Qa[a],h.blockedOn===e&&(h.blockedOn=null);for(;0<Qa.length&&(a=Qa[0],a.blockedOn===null);)ZC(a),a.blockedOn===null&&Qa.shift()}var ih=aa.ReactCurrentBatchConfig,Yg=!0;function TO(e,r,a,h){var d=zr,x=ih.transition;ih.transition=null;try{zr=1,cb(e,r,a,h)}finally{zr=d,ih.transition=x}}function SO(e,r,a,h){var d=zr,x=ih.transition;ih.transition=null;try{zr=4,cb(e,r,a,h)}finally{zr=d,ih.transition=x}}function cb(e,r,a,h){if(Yg){var d=j1(e,r,a,h);if(d===null)zv(e,r,h,Qg,a),yT(e,h);else if(wO(d,e,r,a,h))h.stopPropagation();else if(yT(e,h),r&4&&-1<bO.indexOf(e)){for(;d!==null;){var x=gp(d);if(x!==null&&UC(x),x=j1(e,r,a,h),x===null&&zv(e,r,h,Qg,a),x===d)break;d=x}d!==null&&h.stopPropagation()}else zv(e,r,h,null,a)}}var Qg=null;function j1(e,r,a,h){if(Qg=null,e=ob(h),e=vc(e),e!==null)if(r=Rc(e),r===null)e=null;else if(a=r.tag,a===13){if(e=OC(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null);return Qg=e,null}function HC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dO()){case sb:return 1;case BC:return 4;case Xg:case fO:return 16;case FC:return 536870912;default:return 16}default:return 16}}var el=null,ub=null,Og=null;function qC(){if(Og)return Og;var e,r=ub,a=r.length,h,d="value"in el?el.value:el.textContent,x=d.length;for(e=0;e<a&&r[e]===d[e];e++);var E=a-e;for(h=1;h<=E&&r[a-h]===d[x-h];h++);return Og=d.slice(e,1<h?1-h:void 0)}function zg(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function lg(){return!0}function xT(){return!1}function io(e){function r(a,h,d,x,E){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=x,this.target=E,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(a=e[s],this[s]=a?a(x):x[s]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?lg:xT,this.isPropagationStopped=xT,this}return gn(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lg)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lg)},persist:function(){},isPersistent:lg}),r}var Th={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hb=io(Th),mp=gn({},Th,{view:0,detail:0}),AO=io(mp),Sv,Av,gf,U_=gn({},mp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:db,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gf&&(gf&&e.type==="mousemove"?(Sv=e.screenX-gf.screenX,Av=e.screenY-gf.screenY):Av=Sv=0,gf=e),Sv)},movementY:function(e){return"movementY"in e?e.movementY:Av}}),bT=io(U_),CO=gn({},U_,{dataTransfer:0}),MO=io(CO),PO=gn({},mp,{relatedTarget:0}),Cv=io(PO),IO=gn({},Th,{animationName:0,elapsedTime:0,pseudoElement:0}),kO=io(IO),LO=gn({},Th,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),OO=io(LO),zO=gn({},Th,{data:0}),wT=io(zO),RO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FO(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=BO[e])?!!r[e]:!1}function db(){return FO}var NO=gn({},mp,{key:function(e){if(e.key){var r=RO[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=zg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DO[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:db,charCode:function(e){return e.type==="keypress"?zg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jO=io(NO),UO=gn({},U_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ET=io(UO),VO=gn({},mp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:db}),$O=io(VO),GO=gn({},Th,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZO=io(GO),HO=gn({},U_,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qO=io(HO),WO=[9,13,27,32],fb=na&&"CompositionEvent"in window,Mf=null;na&&"documentMode"in document&&(Mf=document.documentMode);var XO=na&&"TextEvent"in window&&!Mf,WC=na&&(!fb||Mf&&8<Mf&&11>=Mf),TT=String.fromCharCode(32),ST=!1;function XC(e,r){switch(e){case"keyup":return WO.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $u=!1;function KO(e,r){switch(e){case"compositionend":return KC(r);case"keypress":return r.which!==32?null:(ST=!0,TT);case"textInput":return e=r.data,e===TT&&ST?null:e;default:return null}}function YO(e,r){if($u)return e==="compositionend"||!fb&&XC(e,r)?(e=qC(),Og=ub=el=null,$u=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return WC&&r.locale!=="ko"?null:r.data;default:return null}}var QO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AT(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!QO[e.type]:r==="textarea"}function YC(e,r,a,h){MC(h),r=Jg(r,"onChange"),0<r.length&&(a=new hb("onChange","change",null,a,h),e.push({event:a,listeners:r}))}var Pf=null,Zf=null;function JO(e){lM(e,0)}function V_(e){var r=Hu(e);if(bC(r))return e}function ez(e,r){if(e==="change")return r}var QC=!1;if(na){var Mv;if(na){var Pv="oninput"in document;if(!Pv){var CT=document.createElement("div");CT.setAttribute("oninput","return;"),Pv=typeof CT.oninput=="function"}Mv=Pv}else Mv=!1;QC=Mv&&(!document.documentMode||9<document.documentMode)}function MT(){Pf&&(Pf.detachEvent("onpropertychange",JC),Zf=Pf=null)}function JC(e){if(e.propertyName==="value"&&V_(Zf)){var r=[];YC(r,Zf,e,ob(e)),LC(JO,r)}}function tz(e,r,a){e==="focusin"?(MT(),Pf=r,Zf=a,Pf.attachEvent("onpropertychange",JC)):e==="focusout"&&MT()}function rz(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return V_(Zf)}function nz(e,r){if(e==="click")return V_(r)}function iz(e,r){if(e==="input"||e==="change")return V_(r)}function oz(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var rs=typeof Object.is=="function"?Object.is:oz;function Hf(e,r){if(rs(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),h=Object.keys(r);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!w1.call(r,d)||!rs(e[d],r[d]))return!1}return!0}function PT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function IT(e,r){var a=PT(e);e=0;for(var h;a;){if(a.nodeType===3){if(h=e+a.textContent.length,e<=r&&h>=r)return{node:a,offset:r-e};e=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=PT(a)}}function eM(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?eM(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function tM(){for(var e=window,r=Hg();r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=Hg(e.document)}return r}function pb(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}function sz(e){var r=tM(),a=e.focusedElem,h=e.selectionRange;if(r!==a&&a&&a.ownerDocument&&eM(a.ownerDocument.documentElement,a)){if(h!==null&&pb(a)){if(r=h.start,e=h.end,e===void 0&&(e=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(e,a.value.length);else if(e=(r=a.ownerDocument||document)&&r.defaultView||window,e.getSelection){e=e.getSelection();var d=a.textContent.length,x=Math.min(h.start,d);h=h.end===void 0?x:Math.min(h.end,d),!e.extend&&x>h&&(d=h,h=x,x=d),d=IT(a,x);var E=IT(a,h);d&&E&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==E.node||e.focusOffset!==E.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),e.removeAllRanges(),x>h?(e.addRange(r),e.extend(E.node,E.offset)):(r.setEnd(E.node,E.offset),e.addRange(r)))}}for(r=[],e=a;e=e.parentNode;)e.nodeType===1&&r.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)e=r[a],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var az=na&&"documentMode"in document&&11>=document.documentMode,Gu=null,U1=null,If=null,V1=!1;function kT(e,r,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;V1||Gu==null||Gu!==Hg(h)||(h=Gu,"selectionStart"in h&&pb(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),If&&Hf(If,h)||(If=h,h=Jg(U1,"onSelect"),0<h.length&&(r=new hb("onSelect","select",null,r,a),e.push({event:r,listeners:h}),r.target=Gu)))}function cg(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var Zu={animationend:cg("Animation","AnimationEnd"),animationiteration:cg("Animation","AnimationIteration"),animationstart:cg("Animation","AnimationStart"),transitionend:cg("Transition","TransitionEnd")},Iv={},rM={};na&&(rM=document.createElement("div").style,"AnimationEvent"in window||(delete Zu.animationend.animation,delete Zu.animationiteration.animation,delete Zu.animationstart.animation),"TransitionEvent"in window||delete Zu.transitionend.transition);function $_(e){if(Iv[e])return Iv[e];if(!Zu[e])return e;var r=Zu[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in rM)return Iv[e]=r[a];return e}var nM=$_("animationend"),iM=$_("animationiteration"),oM=$_("animationstart"),sM=$_("transitionend"),aM=new Map,LT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(e,r){aM.set(e,r),zc(r,[e])}for(var kv=0;kv<LT.length;kv++){var Lv=LT[kv],lz=Lv.toLowerCase(),cz=Lv[0].toUpperCase()+Lv.slice(1);_l(lz,"on"+cz)}_l(nM,"onAnimationEnd");_l(iM,"onAnimationIteration");_l(oM,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(sM,"onTransitionEnd");hh("onMouseEnter",["mouseout","mouseover"]);hh("onMouseLeave",["mouseout","mouseover"]);hh("onPointerEnter",["pointerout","pointerover"]);hh("onPointerLeave",["pointerout","pointerover"]);zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uz=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tf));function OT(e,r,a){var h=e.type||"unknown-event";e.currentTarget=a,lO(h,r,void 0,e),e.currentTarget=null}function lM(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var h=e[a],d=h.event;h=h.listeners;e:{var x=void 0;if(r)for(var E=h.length-1;0<=E;E--){var s=h[E],A=s.instance,R=s.currentTarget;if(s=s.listener,A!==x&&d.isPropagationStopped())break e;OT(d,s,R),x=A}else for(E=0;E<h.length;E++){if(s=h[E],A=s.instance,R=s.currentTarget,s=s.listener,A!==x&&d.isPropagationStopped())break e;OT(d,s,R),x=A}}}if(Wg)throw e=B1,Wg=!1,B1=null,e}function Wr(e,r){var a=r[q1];a===void 0&&(a=r[q1]=new Set);var h=e+"__bubble";a.has(h)||(cM(r,e,2,!1),a.add(h))}function Ov(e,r,a){var h=0;r&&(h|=4),cM(a,e,h,r)}var ug="_reactListening"+Math.random().toString(36).slice(2);function qf(e){if(!e[ug]){e[ug]=!0,gC.forEach(function(a){a!=="selectionchange"&&(uz.has(a)||Ov(a,!1,e),Ov(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[ug]||(r[ug]=!0,Ov("selectionchange",!1,r))}}function cM(e,r,a,h){switch(HC(r)){case 1:var d=TO;break;case 4:d=SO;break;default:d=cb}a=d.bind(null,r,a,e),d=void 0,!D1||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),h?d!==void 0?e.addEventListener(r,a,{capture:!0,passive:d}):e.addEventListener(r,a,!0):d!==void 0?e.addEventListener(r,a,{passive:d}):e.addEventListener(r,a,!1)}function zv(e,r,a,h,d){var x=h;if(!(r&1)&&!(r&2)&&h!==null)e:for(;;){if(h===null)return;var E=h.tag;if(E===3||E===4){var s=h.stateNode.containerInfo;if(s===d||s.nodeType===8&&s.parentNode===d)break;if(E===4)for(E=h.return;E!==null;){var A=E.tag;if((A===3||A===4)&&(A=E.stateNode.containerInfo,A===d||A.nodeType===8&&A.parentNode===d))return;E=E.return}for(;s!==null;){if(E=vc(s),E===null)return;if(A=E.tag,A===5||A===6){h=x=E;continue e}s=s.parentNode}}h=h.return}LC(function(){var R=x,U=ob(a),N=[];e:{var q=aM.get(e);if(q!==void 0){var fe=hb,ae=e;switch(e){case"keypress":if(zg(a)===0)break e;case"keydown":case"keyup":fe=jO;break;case"focusin":ae="focus",fe=Cv;break;case"focusout":ae="blur",fe=Cv;break;case"beforeblur":case"afterblur":fe=Cv;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=bT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=MO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=$O;break;case nM:case iM:case oM:fe=kO;break;case sM:fe=ZO;break;case"scroll":fe=AO;break;case"wheel":fe=qO;break;case"copy":case"cut":case"paste":fe=OO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=ET}var se=(r&4)!==0,ve=!se&&e==="scroll",J=se?q!==null?q+"Capture":null:q;se=[];for(var Z=R,te;Z!==null;){te=Z;var Ee=te.stateNode;if(te.tag===5&&Ee!==null&&(te=Ee,J!==null&&(Ee=Uf(Z,J),Ee!=null&&se.push(Wf(Z,Ee,te)))),ve)break;Z=Z.return}0<se.length&&(q=new fe(q,ae,null,a,U),N.push({event:q,listeners:se}))}}if(!(r&7)){e:{if(q=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",q&&a!==z1&&(ae=a.relatedTarget||a.fromElement)&&(vc(ae)||ae[ia]))break e;if((fe||q)&&(q=U.window===U?U:(q=U.ownerDocument)?q.defaultView||q.parentWindow:window,fe?(ae=a.relatedTarget||a.toElement,fe=R,ae=ae?vc(ae):null,ae!==null&&(ve=Rc(ae),ae!==ve||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(fe=null,ae=R),fe!==ae)){if(se=bT,Ee="onMouseLeave",J="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(se=ET,Ee="onPointerLeave",J="onPointerEnter",Z="pointer"),ve=fe==null?q:Hu(fe),te=ae==null?q:Hu(ae),q=new se(Ee,Z+"leave",fe,a,U),q.target=ve,q.relatedTarget=te,Ee=null,vc(U)===R&&(se=new se(J,Z+"enter",ae,a,U),se.target=te,se.relatedTarget=ve,Ee=se),ve=Ee,fe&&ae)t:{for(se=fe,J=ae,Z=0,te=se;te;te=ju(te))Z++;for(te=0,Ee=J;Ee;Ee=ju(Ee))te++;for(;0<Z-te;)se=ju(se),Z--;for(;0<te-Z;)J=ju(J),te--;for(;Z--;){if(se===J||J!==null&&se===J.alternate)break t;se=ju(se),J=ju(J)}se=null}else se=null;fe!==null&&zT(N,q,fe,se,!1),ae!==null&&ve!==null&&zT(N,ve,ae,se,!0)}}e:{if(q=R?Hu(R):window,fe=q.nodeName&&q.nodeName.toLowerCase(),fe==="select"||fe==="input"&&q.type==="file")var ke=ez;else if(AT(q))if(QC)ke=iz;else{ke=rz;var Fe=tz}else(fe=q.nodeName)&&fe.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ke=nz);if(ke&&(ke=ke(e,R))){YC(N,ke,a,U);break e}Fe&&Fe(e,q,R),e==="focusout"&&(Fe=q._wrapperState)&&Fe.controlled&&q.type==="number"&&P1(q,"number",q.value)}switch(Fe=R?Hu(R):window,e){case"focusin":(AT(Fe)||Fe.contentEditable==="true")&&(Gu=Fe,U1=R,If=null);break;case"focusout":If=U1=Gu=null;break;case"mousedown":V1=!0;break;case"contextmenu":case"mouseup":case"dragend":V1=!1,kT(N,a,U);break;case"selectionchange":if(az)break;case"keydown":case"keyup":kT(N,a,U)}var We;if(fb)e:{switch(e){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else $u?XC(e,a)&&(Ve="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(WC&&a.locale!=="ko"&&($u||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&$u&&(We=qC()):(el=U,ub="value"in el?el.value:el.textContent,$u=!0)),Fe=Jg(R,Ve),0<Fe.length&&(Ve=new wT(Ve,e,null,a,U),N.push({event:Ve,listeners:Fe}),We?Ve.data=We:(We=KC(a),We!==null&&(Ve.data=We)))),(We=XO?KO(e,a):YO(e,a))&&(R=Jg(R,"onBeforeInput"),0<R.length&&(U=new wT("onBeforeInput","beforeinput",null,a,U),N.push({event:U,listeners:R}),U.data=We))}lM(N,r)})}function Wf(e,r,a){return{instance:e,listener:r,currentTarget:a}}function Jg(e,r){for(var a=r+"Capture",h=[];e!==null;){var d=e,x=d.stateNode;d.tag===5&&x!==null&&(d=x,x=Uf(e,a),x!=null&&h.unshift(Wf(e,x,d)),x=Uf(e,r),x!=null&&h.push(Wf(e,x,d))),e=e.return}return h}function ju(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zT(e,r,a,h,d){for(var x=r._reactName,E=[];a!==null&&a!==h;){var s=a,A=s.alternate,R=s.stateNode;if(A!==null&&A===h)break;s.tag===5&&R!==null&&(s=R,d?(A=Uf(a,x),A!=null&&E.unshift(Wf(a,A,s))):d||(A=Uf(a,x),A!=null&&E.push(Wf(a,A,s)))),a=a.return}E.length!==0&&e.push({event:r,listeners:E})}var hz=/\r\n?/g,dz=/\u0000|\uFFFD/g;function RT(e){return(typeof e=="string"?e:""+e).replace(hz,`
`).replace(dz,"")}function hg(e,r,a){if(r=RT(r),RT(e)!==r&&a)throw Error(ct(425))}function e_(){}var $1=null,G1=null;function Z1(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var H1=typeof setTimeout=="function"?setTimeout:void 0,fz=typeof clearTimeout=="function"?clearTimeout:void 0,DT=typeof Promise=="function"?Promise:void 0,pz=typeof queueMicrotask=="function"?queueMicrotask:typeof DT<"u"?function(e){return DT.resolve(null).then(e).catch(mz)}:H1;function mz(e){setTimeout(function(){throw e})}function Rv(e,r){var a=r,h=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){e.removeChild(d),Gf(r);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);Gf(r)}function al(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return e}function BT(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}var Sh=Math.random().toString(36).slice(2),Ts="__reactFiber$"+Sh,Xf="__reactProps$"+Sh,ia="__reactContainer$"+Sh,q1="__reactEvents$"+Sh,gz="__reactListeners$"+Sh,_z="__reactHandles$"+Sh;function vc(e){var r=e[Ts];if(r)return r;for(var a=e.parentNode;a;){if(r=a[ia]||a[Ts]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=BT(e);e!==null;){if(a=e[Ts])return a;e=BT(e)}return r}e=a,a=e.parentNode}return null}function gp(e){return e=e[Ts]||e[ia],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Hu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ct(33))}function G_(e){return e[Xf]||null}var W1=[],qu=-1;function yl(e){return{current:e}}function Xr(e){0>qu||(e.current=W1[qu],W1[qu]=null,qu--)}function Gr(e,r){qu++,W1[qu]=e.current,e.current=r}var pl={},di=yl(pl),Ui=yl(!1),Ac=pl;function dh(e,r){var a=e.type.contextTypes;if(!a)return pl;var h=e.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===r)return h.__reactInternalMemoizedMaskedChildContext;var d={},x;for(x in a)d[x]=r[x];return h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=d),d}function Vi(e){return e=e.childContextTypes,e!=null}function t_(){Xr(Ui),Xr(di)}function FT(e,r,a){if(di.current!==pl)throw Error(ct(168));Gr(di,r),Gr(Ui,a)}function uM(e,r,a){var h=e.stateNode;if(r=r.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in r))throw Error(ct(108,tO(e)||"Unknown",d));return gn({},a,h)}function r_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pl,Ac=di.current,Gr(di,e),Gr(Ui,Ui.current),!0}function NT(e,r,a){var h=e.stateNode;if(!h)throw Error(ct(169));a?(e=uM(e,r,Ac),h.__reactInternalMemoizedMergedChildContext=e,Xr(Ui),Xr(di),Gr(di,e)):Xr(Ui),Gr(Ui,a)}var Js=null,Z_=!1,Dv=!1;function hM(e){Js===null?Js=[e]:Js.push(e)}function yz(e){Z_=!0,hM(e)}function vl(){if(!Dv&&Js!==null){Dv=!0;var e=0,r=zr;try{var a=Js;for(zr=1;e<a.length;e++){var h=a[e];do h=h(!0);while(h!==null)}Js=null,Z_=!1}catch(d){throw Js!==null&&(Js=Js.slice(e+1)),DC(sb,vl),d}finally{zr=r,Dv=!1}}return null}var Wu=[],Xu=0,n_=null,i_=0,vo=[],xo=0,Cc=null,ea=1,ta="";function mc(e,r){Wu[Xu++]=i_,Wu[Xu++]=n_,n_=e,i_=r}function dM(e,r,a){vo[xo++]=ea,vo[xo++]=ta,vo[xo++]=Cc,Cc=e;var h=ea;e=ta;var d=32-Jo(h)-1;h&=~(1<<d),a+=1;var x=32-Jo(r)+d;if(30<x){var E=d-d%5;x=(h&(1<<E)-1).toString(32),h>>=E,d-=E,ea=1<<32-Jo(r)+d|a<<d|h,ta=x+e}else ea=1<<x|a<<d|h,ta=e}function mb(e){e.return!==null&&(mc(e,1),dM(e,1,0))}function gb(e){for(;e===n_;)n_=Wu[--Xu],Wu[Xu]=null,i_=Wu[--Xu],Wu[Xu]=null;for(;e===Cc;)Cc=vo[--xo],vo[xo]=null,ta=vo[--xo],vo[xo]=null,ea=vo[--xo],vo[xo]=null}var eo=null,Ji=null,en=!1,Qo=null;function fM(e,r){var a=bo(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=e,r=e.deletions,r===null?(e.deletions=[a],e.flags|=16):r.push(a)}function jT(e,r){switch(e.tag){case 5:var a=e.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(e.stateNode=r,eo=e,Ji=al(r.firstChild),!0):!1;case 6:return r=e.pendingProps===""||r.nodeType!==3?null:r,r!==null?(e.stateNode=r,eo=e,Ji=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Cc!==null?{id:ea,overflow:ta}:null,e.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=bo(18,null,null,0),a.stateNode=r,a.return=e,e.child=a,eo=e,Ji=null,!0):!1;default:return!1}}function X1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function K1(e){if(en){var r=Ji;if(r){var a=r;if(!jT(e,r)){if(X1(e))throw Error(ct(418));r=al(a.nextSibling);var h=eo;r&&jT(e,r)?fM(h,a):(e.flags=e.flags&-4097|2,en=!1,eo=e)}}else{if(X1(e))throw Error(ct(418));e.flags=e.flags&-4097|2,en=!1,eo=e}}}function UT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;eo=e}function dg(e){if(e!==eo)return!1;if(!en)return UT(e),en=!0,!1;var r;if((r=e.tag!==3)&&!(r=e.tag!==5)&&(r=e.type,r=r!=="head"&&r!=="body"&&!Z1(e.type,e.memoizedProps)),r&&(r=Ji)){if(X1(e))throw pM(),Error(ct(418));for(;r;)fM(e,r),r=al(r.nextSibling)}if(UT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ct(317));e:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"){if(r===0){Ji=al(e.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}e=e.nextSibling}Ji=null}}else Ji=eo?al(e.stateNode.nextSibling):null;return!0}function pM(){for(var e=Ji;e;)e=al(e.nextSibling)}function fh(){Ji=eo=null,en=!1}function _b(e){Qo===null?Qo=[e]:Qo.push(e)}var vz=aa.ReactCurrentBatchConfig;function Xo(e,r){if(e&&e.defaultProps){r=gn({},r),e=e.defaultProps;for(var a in e)r[a]===void 0&&(r[a]=e[a]);return r}return r}var o_=yl(null),s_=null,Ku=null,yb=null;function vb(){yb=Ku=s_=null}function xb(e){var r=o_.current;Xr(o_),e._currentValue=r}function Y1(e,r,a){for(;e!==null;){var h=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),e===a)break;e=e.return}}function oh(e,r){s_=e,yb=Ku=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&r&&(ji=!0),e.firstContext=null)}function Eo(e){var r=e._currentValue;if(yb!==e)if(e={context:e,memoizedValue:r,next:null},Ku===null){if(s_===null)throw Error(ct(308));Ku=e,s_.dependencies={lanes:0,firstContext:e}}else Ku=Ku.next=e;return r}var xc=null;function bb(e){xc===null?xc=[e]:xc.push(e)}function mM(e,r,a,h){var d=r.interleaved;return d===null?(a.next=a,bb(r)):(a.next=d.next,d.next=a),r.interleaved=a,oa(e,h)}function oa(e,r){e.lanes|=r;var a=e.alternate;for(a!==null&&(a.lanes|=r),a=e,e=e.return;e!==null;)e.childLanes|=r,a=e.alternate,a!==null&&(a.childLanes|=r),a=e,e=e.return;return a.tag===3?a.stateNode:null}var Ka=!1;function wb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gM(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ra(e,r){return{eventTime:e,lane:r,tag:0,payload:null,callback:null,next:null}}function ll(e,r,a){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,gr&2){var d=h.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),h.pending=r,oa(e,a)}return d=h.interleaved,d===null?(r.next=r,bb(h)):(r.next=d.next,d.next=r),h.interleaved=r,oa(e,a)}function Rg(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var h=r.lanes;h&=e.pendingLanes,a|=h,r.lanes=a,ab(e,a)}}function VT(e,r){var a=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,x=null;if(a=a.firstBaseUpdate,a!==null){do{var E={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};x===null?d=x=E:x=x.next=E,a=a.next}while(a!==null);x===null?d=x=r:x=x.next=r}else d=x=r;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:x,shared:h.shared,effects:h.effects},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}function a_(e,r,a,h){var d=e.updateQueue;Ka=!1;var x=d.firstBaseUpdate,E=d.lastBaseUpdate,s=d.shared.pending;if(s!==null){d.shared.pending=null;var A=s,R=A.next;A.next=null,E===null?x=R:E.next=R,E=A;var U=e.alternate;U!==null&&(U=U.updateQueue,s=U.lastBaseUpdate,s!==E&&(s===null?U.firstBaseUpdate=R:s.next=R,U.lastBaseUpdate=A))}if(x!==null){var N=d.baseState;E=0,U=R=A=null,s=x;do{var q=s.lane,fe=s.eventTime;if((h&q)===q){U!==null&&(U=U.next={eventTime:fe,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var ae=e,se=s;switch(q=r,fe=a,se.tag){case 1:if(ae=se.payload,typeof ae=="function"){N=ae.call(fe,N,q);break e}N=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=se.payload,q=typeof ae=="function"?ae.call(fe,N,q):ae,q==null)break e;N=gn({},N,q);break e;case 2:Ka=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,q=d.effects,q===null?d.effects=[s]:q.push(s))}else fe={eventTime:fe,lane:q,tag:s.tag,payload:s.payload,callback:s.callback,next:null},U===null?(R=U=fe,A=N):U=U.next=fe,E|=q;if(s=s.next,s===null){if(s=d.shared.pending,s===null)break;q=s,s=q.next,q.next=null,d.lastBaseUpdate=q,d.shared.pending=null}}while(1);if(U===null&&(A=N),d.baseState=A,d.firstBaseUpdate=R,d.lastBaseUpdate=U,r=d.shared.interleaved,r!==null){d=r;do E|=d.lane,d=d.next;while(d!==r)}else x===null&&(d.shared.lanes=0);Pc|=E,e.lanes=E,e.memoizedState=N}}function $T(e,r,a){if(e=r.effects,r.effects=null,e!==null)for(r=0;r<e.length;r++){var h=e[r],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(ct(191,d));d.call(h)}}}var _M=new mC.Component().refs;function Q1(e,r,a,h){r=e.memoizedState,a=a(h,r),a=a==null?r:gn({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var H_={isMounted:function(e){return(e=e._reactInternals)?Rc(e)===e:!1},enqueueSetState:function(e,r,a){e=e._reactInternals;var h=wi(),d=ul(e),x=ra(h,d);x.payload=r,a!=null&&(x.callback=a),r=ll(e,x,d),r!==null&&(es(r,e,d,h),Rg(r,e,d))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var h=wi(),d=ul(e),x=ra(h,d);x.tag=1,x.payload=r,a!=null&&(x.callback=a),r=ll(e,x,d),r!==null&&(es(r,e,d,h),Rg(r,e,d))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=wi(),h=ul(e),d=ra(a,h);d.tag=2,r!=null&&(d.callback=r),r=ll(e,d,h),r!==null&&(es(r,e,h,a),Rg(r,e,h))}};function GT(e,r,a,h,d,x,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,x,E):r.prototype&&r.prototype.isPureReactComponent?!Hf(a,h)||!Hf(d,x):!0}function yM(e,r,a){var h=!1,d=pl,x=r.contextType;return typeof x=="object"&&x!==null?x=Eo(x):(d=Vi(r)?Ac:di.current,h=r.contextTypes,x=(h=h!=null)?dh(e,d):pl),r=new r(a,x),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=H_,e.stateNode=r,r._reactInternals=e,h&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=x),r}function ZT(e,r,a,h){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,h),r.state!==e&&H_.enqueueReplaceState(r,r.state,null)}function J1(e,r,a,h){var d=e.stateNode;d.props=a,d.state=e.memoizedState,d.refs=_M,wb(e);var x=r.contextType;typeof x=="object"&&x!==null?d.context=Eo(x):(x=Vi(r)?Ac:di.current,d.context=dh(e,x)),d.state=e.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Q1(e,r,x,a),d.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&H_.enqueueReplaceState(d,d.state,null),a_(e,a,d,h),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function _f(e,r,a){if(e=a.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(ct(309));var h=a.stateNode}if(!h)throw Error(ct(147,e));var d=h,x=""+e;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===x?r.ref:(r=function(E){var s=d.refs;s===_M&&(s=d.refs={}),E===null?delete s[x]:s[x]=E},r._stringRef=x,r)}if(typeof e!="string")throw Error(ct(284));if(!a._owner)throw Error(ct(290,e))}return e}function fg(e,r){throw e=Object.prototype.toString.call(r),Error(ct(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}function HT(e){var r=e._init;return r(e._payload)}function vM(e){function r(J,Z){if(e){var te=J.deletions;te===null?(J.deletions=[Z],J.flags|=16):te.push(Z)}}function a(J,Z){if(!e)return null;for(;Z!==null;)r(J,Z),Z=Z.sibling;return null}function h(J,Z){for(J=new Map;Z!==null;)Z.key!==null?J.set(Z.key,Z):J.set(Z.index,Z),Z=Z.sibling;return J}function d(J,Z){return J=hl(J,Z),J.index=0,J.sibling=null,J}function x(J,Z,te){return J.index=te,e?(te=J.alternate,te!==null?(te=te.index,te<Z?(J.flags|=2,Z):te):(J.flags|=2,Z)):(J.flags|=1048576,Z)}function E(J){return e&&J.alternate===null&&(J.flags|=2),J}function s(J,Z,te,Ee){return Z===null||Z.tag!==6?(Z=$v(te,J.mode,Ee),Z.return=J,Z):(Z=d(Z,te),Z.return=J,Z)}function A(J,Z,te,Ee){var ke=te.type;return ke===Vu?U(J,Z,te.props.children,Ee,te.key):Z!==null&&(Z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Xa&&HT(ke)===Z.type)?(Ee=d(Z,te.props),Ee.ref=_f(J,Z,te),Ee.return=J,Ee):(Ee=Ug(te.type,te.key,te.props,null,J.mode,Ee),Ee.ref=_f(J,Z,te),Ee.return=J,Ee)}function R(J,Z,te,Ee){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==te.containerInfo||Z.stateNode.implementation!==te.implementation?(Z=Gv(te,J.mode,Ee),Z.return=J,Z):(Z=d(Z,te.children||[]),Z.return=J,Z)}function U(J,Z,te,Ee,ke){return Z===null||Z.tag!==7?(Z=Ec(te,J.mode,Ee,ke),Z.return=J,Z):(Z=d(Z,te),Z.return=J,Z)}function N(J,Z,te){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Z=$v(""+Z,J.mode,te),Z.return=J,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case rg:return te=Ug(Z.type,Z.key,Z.props,null,J.mode,te),te.ref=_f(J,null,Z),te.return=J,te;case Uu:return Z=Gv(Z,J.mode,te),Z.return=J,Z;case Xa:var Ee=Z._init;return N(J,Ee(Z._payload),te)}if(wf(Z)||df(Z))return Z=Ec(Z,J.mode,te,null),Z.return=J,Z;fg(J,Z)}return null}function q(J,Z,te,Ee){var ke=Z!==null?Z.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return ke!==null?null:s(J,Z,""+te,Ee);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case rg:return te.key===ke?A(J,Z,te,Ee):null;case Uu:return te.key===ke?R(J,Z,te,Ee):null;case Xa:return ke=te._init,q(J,Z,ke(te._payload),Ee)}if(wf(te)||df(te))return ke!==null?null:U(J,Z,te,Ee,null);fg(J,te)}return null}function fe(J,Z,te,Ee,ke){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number")return J=J.get(te)||null,s(Z,J,""+Ee,ke);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case rg:return J=J.get(Ee.key===null?te:Ee.key)||null,A(Z,J,Ee,ke);case Uu:return J=J.get(Ee.key===null?te:Ee.key)||null,R(Z,J,Ee,ke);case Xa:var Fe=Ee._init;return fe(J,Z,te,Fe(Ee._payload),ke)}if(wf(Ee)||df(Ee))return J=J.get(te)||null,U(Z,J,Ee,ke,null);fg(Z,Ee)}return null}function ae(J,Z,te,Ee){for(var ke=null,Fe=null,We=Z,Ve=Z=0,Te=null;We!==null&&Ve<te.length;Ve++){We.index>Ve?(Te=We,We=null):Te=We.sibling;var dt=q(J,We,te[Ve],Ee);if(dt===null){We===null&&(We=Te);break}e&&We&&dt.alternate===null&&r(J,We),Z=x(dt,Z,Ve),Fe===null?ke=dt:Fe.sibling=dt,Fe=dt,We=Te}if(Ve===te.length)return a(J,We),en&&mc(J,Ve),ke;if(We===null){for(;Ve<te.length;Ve++)We=N(J,te[Ve],Ee),We!==null&&(Z=x(We,Z,Ve),Fe===null?ke=We:Fe.sibling=We,Fe=We);return en&&mc(J,Ve),ke}for(We=h(J,We);Ve<te.length;Ve++)Te=fe(We,J,Ve,te[Ve],Ee),Te!==null&&(e&&Te.alternate!==null&&We.delete(Te.key===null?Ve:Te.key),Z=x(Te,Z,Ve),Fe===null?ke=Te:Fe.sibling=Te,Fe=Te);return e&&We.forEach(function(zt){return r(J,zt)}),en&&mc(J,Ve),ke}function se(J,Z,te,Ee){var ke=df(te);if(typeof ke!="function")throw Error(ct(150));if(te=ke.call(te),te==null)throw Error(ct(151));for(var Fe=ke=null,We=Z,Ve=Z=0,Te=null,dt=te.next();We!==null&&!dt.done;Ve++,dt=te.next()){We.index>Ve?(Te=We,We=null):Te=We.sibling;var zt=q(J,We,dt.value,Ee);if(zt===null){We===null&&(We=Te);break}e&&We&&zt.alternate===null&&r(J,We),Z=x(zt,Z,Ve),Fe===null?ke=zt:Fe.sibling=zt,Fe=zt,We=Te}if(dt.done)return a(J,We),en&&mc(J,Ve),ke;if(We===null){for(;!dt.done;Ve++,dt=te.next())dt=N(J,dt.value,Ee),dt!==null&&(Z=x(dt,Z,Ve),Fe===null?ke=dt:Fe.sibling=dt,Fe=dt);return en&&mc(J,Ve),ke}for(We=h(J,We);!dt.done;Ve++,dt=te.next())dt=fe(We,J,Ve,dt.value,Ee),dt!==null&&(e&&dt.alternate!==null&&We.delete(dt.key===null?Ve:dt.key),Z=x(dt,Z,Ve),Fe===null?ke=dt:Fe.sibling=dt,Fe=dt);return e&&We.forEach(function(at){return r(J,at)}),en&&mc(J,Ve),ke}function ve(J,Z,te,Ee){if(typeof te=="object"&&te!==null&&te.type===Vu&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case rg:e:{for(var ke=te.key,Fe=Z;Fe!==null;){if(Fe.key===ke){if(ke=te.type,ke===Vu){if(Fe.tag===7){a(J,Fe.sibling),Z=d(Fe,te.props.children),Z.return=J,J=Z;break e}}else if(Fe.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===Xa&&HT(ke)===Fe.type){a(J,Fe.sibling),Z=d(Fe,te.props),Z.ref=_f(J,Fe,te),Z.return=J,J=Z;break e}a(J,Fe);break}else r(J,Fe);Fe=Fe.sibling}te.type===Vu?(Z=Ec(te.props.children,J.mode,Ee,te.key),Z.return=J,J=Z):(Ee=Ug(te.type,te.key,te.props,null,J.mode,Ee),Ee.ref=_f(J,Z,te),Ee.return=J,J=Ee)}return E(J);case Uu:e:{for(Fe=te.key;Z!==null;){if(Z.key===Fe)if(Z.tag===4&&Z.stateNode.containerInfo===te.containerInfo&&Z.stateNode.implementation===te.implementation){a(J,Z.sibling),Z=d(Z,te.children||[]),Z.return=J,J=Z;break e}else{a(J,Z);break}else r(J,Z);Z=Z.sibling}Z=Gv(te,J.mode,Ee),Z.return=J,J=Z}return E(J);case Xa:return Fe=te._init,ve(J,Z,Fe(te._payload),Ee)}if(wf(te))return ae(J,Z,te,Ee);if(df(te))return se(J,Z,te,Ee);fg(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,Z!==null&&Z.tag===6?(a(J,Z.sibling),Z=d(Z,te),Z.return=J,J=Z):(a(J,Z),Z=$v(te,J.mode,Ee),Z.return=J,J=Z),E(J)):a(J,Z)}return ve}var ph=vM(!0),xM=vM(!1),_p={},As=yl(_p),Kf=yl(_p),Yf=yl(_p);function bc(e){if(e===_p)throw Error(ct(174));return e}function Eb(e,r){switch(Gr(Yf,r),Gr(Kf,e),Gr(As,_p),e=r.nodeType,e){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:k1(null,"");break;default:e=e===8?r.parentNode:r,r=e.namespaceURI||null,e=e.tagName,r=k1(r,e)}Xr(As),Gr(As,r)}function mh(){Xr(As),Xr(Kf),Xr(Yf)}function bM(e){bc(Yf.current);var r=bc(As.current),a=k1(r,e.type);r!==a&&(Gr(Kf,e),Gr(As,a))}function Tb(e){Kf.current===e&&(Xr(As),Xr(Kf))}var pn=yl(0);function l_(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bv=[];function Sb(){for(var e=0;e<Bv.length;e++)Bv[e]._workInProgressVersionPrimary=null;Bv.length=0}var Dg=aa.ReactCurrentDispatcher,Fv=aa.ReactCurrentBatchConfig,Mc=0,mn=null,Dn=null,Gn=null,c_=!1,kf=!1,Qf=0,xz=0;function ai(){throw Error(ct(321))}function Ab(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!rs(e[a],r[a]))return!1;return!0}function Cb(e,r,a,h,d,x){if(Mc=x,mn=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Dg.current=e===null||e.memoizedState===null?Tz:Sz,e=a(h,d),kf){x=0;do{if(kf=!1,Qf=0,25<=x)throw Error(ct(301));x+=1,Gn=Dn=null,r.updateQueue=null,Dg.current=Az,e=a(h,d)}while(kf)}if(Dg.current=u_,r=Dn!==null&&Dn.next!==null,Mc=0,Gn=Dn=mn=null,c_=!1,r)throw Error(ct(300));return e}function Mb(){var e=Qf!==0;return Qf=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?mn.memoizedState=Gn=e:Gn=Gn.next=e,Gn}function To(){if(Dn===null){var e=mn.alternate;e=e!==null?e.memoizedState:null}else e=Dn.next;var r=Gn===null?mn.memoizedState:Gn.next;if(r!==null)Gn=r,Dn=e;else{if(e===null)throw Error(ct(310));Dn=e,e={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Gn===null?mn.memoizedState=Gn=e:Gn=Gn.next=e}return Gn}function Jf(e,r){return typeof r=="function"?r(e):r}function Nv(e){var r=To(),a=r.queue;if(a===null)throw Error(ct(311));a.lastRenderedReducer=e;var h=Dn,d=h.baseQueue,x=a.pending;if(x!==null){if(d!==null){var E=d.next;d.next=x.next,x.next=E}h.baseQueue=d=x,a.pending=null}if(d!==null){x=d.next,h=h.baseState;var s=E=null,A=null,R=x;do{var U=R.lane;if((Mc&U)===U)A!==null&&(A=A.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),h=R.hasEagerState?R.eagerState:e(h,R.action);else{var N={lane:U,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};A===null?(s=A=N,E=h):A=A.next=N,mn.lanes|=U,Pc|=U}R=R.next}while(R!==null&&R!==x);A===null?E=h:A.next=s,rs(h,r.memoizedState)||(ji=!0),r.memoizedState=h,r.baseState=E,r.baseQueue=A,a.lastRenderedState=h}if(e=a.interleaved,e!==null){d=e;do x=d.lane,mn.lanes|=x,Pc|=x,d=d.next;while(d!==e)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function jv(e){var r=To(),a=r.queue;if(a===null)throw Error(ct(311));a.lastRenderedReducer=e;var h=a.dispatch,d=a.pending,x=r.memoizedState;if(d!==null){a.pending=null;var E=d=d.next;do x=e(x,E.action),E=E.next;while(E!==d);rs(x,r.memoizedState)||(ji=!0),r.memoizedState=x,r.baseQueue===null&&(r.baseState=x),a.lastRenderedState=x}return[x,h]}function wM(){}function EM(e,r){var a=mn,h=To(),d=r(),x=!rs(h.memoizedState,d);if(x&&(h.memoizedState=d,ji=!0),h=h.queue,Pb(AM.bind(null,a,h,e),[e]),h.getSnapshot!==r||x||Gn!==null&&Gn.memoizedState.tag&1){if(a.flags|=2048,ep(9,SM.bind(null,a,h,d,r),void 0,null),Zn===null)throw Error(ct(349));Mc&30||TM(a,r,d)}return d}function TM(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=mn.updateQueue,r===null?(r={lastEffect:null,stores:null},mn.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function SM(e,r,a,h){r.value=a,r.getSnapshot=h,CM(r)&&MM(e)}function AM(e,r,a){return a(function(){CM(r)&&MM(e)})}function CM(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!rs(e,a)}catch{return!0}}function MM(e){var r=oa(e,1);r!==null&&es(r,e,1,-1)}function qT(e){var r=xs();return typeof e=="function"&&(e=e()),r.memoizedState=r.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jf,lastRenderedState:e},r.queue=e,e=e.dispatch=Ez.bind(null,mn,e),[r.memoizedState,e]}function ep(e,r,a,h){return e={tag:e,create:r,destroy:a,deps:h,next:null},r=mn.updateQueue,r===null?(r={lastEffect:null,stores:null},mn.updateQueue=r,r.lastEffect=e.next=e):(a=r.lastEffect,a===null?r.lastEffect=e.next=e:(h=a.next,a.next=e,e.next=h,r.lastEffect=e)),e}function PM(){return To().memoizedState}function Bg(e,r,a,h){var d=xs();mn.flags|=e,d.memoizedState=ep(1|r,a,void 0,h===void 0?null:h)}function q_(e,r,a,h){var d=To();h=h===void 0?null:h;var x=void 0;if(Dn!==null){var E=Dn.memoizedState;if(x=E.destroy,h!==null&&Ab(h,E.deps)){d.memoizedState=ep(r,a,x,h);return}}mn.flags|=e,d.memoizedState=ep(1|r,a,x,h)}function WT(e,r){return Bg(8390656,8,e,r)}function Pb(e,r){return q_(2048,8,e,r)}function IM(e,r){return q_(4,2,e,r)}function kM(e,r){return q_(4,4,e,r)}function LM(e,r){if(typeof r=="function")return e=e(),r(e),function(){r(null)};if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function OM(e,r,a){return a=a!=null?a.concat([e]):null,q_(4,4,LM.bind(null,r,e),a)}function Ib(){}function zM(e,r){var a=To();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&Ab(r,h[1])?h[0]:(a.memoizedState=[e,r],e)}function RM(e,r){var a=To();r=r===void 0?null:r;var h=a.memoizedState;return h!==null&&r!==null&&Ab(r,h[1])?h[0]:(e=e(),a.memoizedState=[e,r],e)}function DM(e,r,a){return Mc&21?(rs(a,r)||(a=NC(),mn.lanes|=a,Pc|=a,e.baseState=!0),r):(e.baseState&&(e.baseState=!1,ji=!0),e.memoizedState=a)}function bz(e,r){var a=zr;zr=a!==0&&4>a?a:4,e(!0);var h=Fv.transition;Fv.transition={};try{e(!1),r()}finally{zr=a,Fv.transition=h}}function BM(){return To().memoizedState}function wz(e,r,a){var h=ul(e);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},FM(e))NM(r,a);else if(a=mM(e,r,a,h),a!==null){var d=wi();es(a,e,h,d),jM(a,r,h)}}function Ez(e,r,a){var h=ul(e),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(FM(e))NM(r,d);else{var x=e.alternate;if(e.lanes===0&&(x===null||x.lanes===0)&&(x=r.lastRenderedReducer,x!==null))try{var E=r.lastRenderedState,s=x(E,a);if(d.hasEagerState=!0,d.eagerState=s,rs(s,E)){var A=r.interleaved;A===null?(d.next=d,bb(r)):(d.next=A.next,A.next=d),r.interleaved=d;return}}catch{}finally{}a=mM(e,r,d,h),a!==null&&(d=wi(),es(a,e,h,d),jM(a,r,h))}}function FM(e){var r=e.alternate;return e===mn||r!==null&&r===mn}function NM(e,r){kf=c_=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function jM(e,r,a){if(a&4194240){var h=r.lanes;h&=e.pendingLanes,a|=h,r.lanes=a,ab(e,a)}}var u_={readContext:Eo,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},Tz={readContext:Eo,useCallback:function(e,r){return xs().memoizedState=[e,r===void 0?null:r],e},useContext:Eo,useEffect:WT,useImperativeHandle:function(e,r,a){return a=a!=null?a.concat([e]):null,Bg(4194308,4,LM.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Bg(4194308,4,e,r)},useInsertionEffect:function(e,r){return Bg(4,2,e,r)},useMemo:function(e,r){var a=xs();return r=r===void 0?null:r,e=e(),a.memoizedState=[e,r],e},useReducer:function(e,r,a){var h=xs();return r=a!==void 0?a(r):r,h.memoizedState=h.baseState=r,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},h.queue=e,e=e.dispatch=wz.bind(null,mn,e),[h.memoizedState,e]},useRef:function(e){var r=xs();return e={current:e},r.memoizedState=e},useState:qT,useDebugValue:Ib,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=qT(!1),r=e[0];return e=bz.bind(null,e[1]),xs().memoizedState=e,[r,e]},useMutableSource:function(){},useSyncExternalStore:function(e,r,a){var h=mn,d=xs();if(en){if(a===void 0)throw Error(ct(407));a=a()}else{if(a=r(),Zn===null)throw Error(ct(349));Mc&30||TM(h,r,a)}d.memoizedState=a;var x={value:a,getSnapshot:r};return d.queue=x,WT(AM.bind(null,h,x,e),[e]),h.flags|=2048,ep(9,SM.bind(null,h,x,a,r),void 0,null),a},useId:function(){var e=xs(),r=Zn.identifierPrefix;if(en){var a=ta,h=ea;a=(h&~(1<<32-Jo(h)-1)).toString(32)+a,r=":"+r+"R"+a,a=Qf++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=xz++,r=":"+r+"r"+a.toString(32)+":";return e.memoizedState=r},unstable_isNewReconciler:!1},Sz={readContext:Eo,useCallback:zM,useContext:Eo,useEffect:Pb,useImperativeHandle:OM,useInsertionEffect:IM,useLayoutEffect:kM,useMemo:RM,useReducer:Nv,useRef:PM,useState:function(){return Nv(Jf)},useDebugValue:Ib,useDeferredValue:function(e){var r=To();return DM(r,Dn.memoizedState,e)},useTransition:function(){var e=Nv(Jf)[0],r=To().memoizedState;return[e,r]},useMutableSource:wM,useSyncExternalStore:EM,useId:BM,unstable_isNewReconciler:!1},Az={readContext:Eo,useCallback:zM,useContext:Eo,useEffect:Pb,useImperativeHandle:OM,useInsertionEffect:IM,useLayoutEffect:kM,useMemo:RM,useReducer:jv,useRef:PM,useState:function(){return jv(Jf)},useDebugValue:Ib,useDeferredValue:function(e){var r=To();return Dn===null?r.memoizedState=e:DM(r,Dn.memoizedState,e)},useTransition:function(){var e=jv(Jf)[0],r=To().memoizedState;return[e,r]},useMutableSource:wM,useSyncExternalStore:EM,useId:BM,unstable_isNewReconciler:!1};function gh(e,r){try{var a="",h=r;do a+=eO(h),h=h.return;while(h);var d=a}catch(x){d=`
Error generating stack: `+x.message+`
`+x.stack}return{value:e,source:r,stack:d,digest:null}}function Uv(e,r,a){return{value:e,source:null,stack:a??null,digest:r??null}}function ex(e,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var Cz=typeof WeakMap=="function"?WeakMap:Map;function UM(e,r,a){a=ra(-1,a),a.tag=3,a.payload={element:null};var h=r.value;return a.callback=function(){d_||(d_=!0,ux=h),ex(e,r)},a}function VM(e,r,a){a=ra(-1,a),a.tag=3;var h=e.type.getDerivedStateFromError;if(typeof h=="function"){var d=r.value;a.payload=function(){return h(d)},a.callback=function(){ex(e,r)}}var x=e.stateNode;return x!==null&&typeof x.componentDidCatch=="function"&&(a.callback=function(){ex(e,r),typeof h!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var E=r.stack;this.componentDidCatch(r.value,{componentStack:E!==null?E:""})}),a}function XT(e,r,a){var h=e.pingCache;if(h===null){h=e.pingCache=new Cz;var d=new Set;h.set(r,d)}else d=h.get(r),d===void 0&&(d=new Set,h.set(r,d));d.has(a)||(d.add(a),e=Uz.bind(null,e,r,a),r.then(e,e))}function KT(e){do{var r;if((r=e.tag===13)&&(r=e.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return e;e=e.return}while(e!==null);return null}function YT(e,r,a,h,d){return e.mode&1?(e.flags|=65536,e.lanes=d,e):(e===r?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=ra(-1,1),r.tag=2,ll(a,r,1))),a.lanes|=1),e)}var Mz=aa.ReactCurrentOwner,ji=!1;function xi(e,r,a,h){r.child=e===null?xM(r,null,a,h):ph(r,e.child,a,h)}function QT(e,r,a,h,d){a=a.render;var x=r.ref;return oh(r,d),h=Cb(e,r,a,h,x,d),a=Mb(),e!==null&&!ji?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~d,sa(e,r,d)):(en&&a&&mb(r),r.flags|=1,xi(e,r,h,d),r.child)}function JT(e,r,a,h,d){if(e===null){var x=a.type;return typeof x=="function"&&!Fb(x)&&x.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=x,$M(e,r,x,h,d)):(e=Ug(a.type,null,h,r,r.mode,d),e.ref=r.ref,e.return=r,r.child=e)}if(x=e.child,!(e.lanes&d)){var E=x.memoizedProps;if(a=a.compare,a=a!==null?a:Hf,a(E,h)&&e.ref===r.ref)return sa(e,r,d)}return r.flags|=1,e=hl(x,h),e.ref=r.ref,e.return=r,r.child=e}function $M(e,r,a,h,d){if(e!==null){var x=e.memoizedProps;if(Hf(x,h)&&e.ref===r.ref)if(ji=!1,r.pendingProps=h=x,(e.lanes&d)!==0)e.flags&131072&&(ji=!0);else return r.lanes=e.lanes,sa(e,r,d)}return tx(e,r,a,h,d)}function GM(e,r,a){var h=r.pendingProps,d=h.children,x=e!==null?e.memoizedState:null;if(h.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gr(Qu,Qi),Qi|=a;else{if(!(a&1073741824))return e=x!==null?x.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:e,cachePool:null,transitions:null},r.updateQueue=null,Gr(Qu,Qi),Qi|=e,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=x!==null?x.baseLanes:a,Gr(Qu,Qi),Qi|=h}else x!==null?(h=x.baseLanes|a,r.memoizedState=null):h=a,Gr(Qu,Qi),Qi|=h;return xi(e,r,d,a),r.child}function ZM(e,r){var a=r.ref;(e===null&&a!==null||e!==null&&e.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function tx(e,r,a,h,d){var x=Vi(a)?Ac:di.current;return x=dh(r,x),oh(r,d),a=Cb(e,r,a,h,x,d),h=Mb(),e!==null&&!ji?(r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~d,sa(e,r,d)):(en&&h&&mb(r),r.flags|=1,xi(e,r,a,d),r.child)}function eS(e,r,a,h,d){if(Vi(a)){var x=!0;r_(r)}else x=!1;if(oh(r,d),r.stateNode===null)Fg(e,r),yM(r,a,h),J1(r,a,h,d),h=!0;else if(e===null){var E=r.stateNode,s=r.memoizedProps;E.props=s;var A=E.context,R=a.contextType;typeof R=="object"&&R!==null?R=Eo(R):(R=Vi(a)?Ac:di.current,R=dh(r,R));var U=a.getDerivedStateFromProps,N=typeof U=="function"||typeof E.getSnapshotBeforeUpdate=="function";N||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(s!==h||A!==R)&&ZT(r,E,h,R),Ka=!1;var q=r.memoizedState;E.state=q,a_(r,h,E,d),A=r.memoizedState,s!==h||q!==A||Ui.current||Ka?(typeof U=="function"&&(Q1(r,a,U,h),A=r.memoizedState),(s=Ka||GT(r,a,s,h,q,A,R))?(N||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(r.flags|=4194308)):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=A),E.props=h,E.state=A,E.context=R,h=s):(typeof E.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{E=r.stateNode,gM(e,r),s=r.memoizedProps,R=r.type===r.elementType?s:Xo(r.type,s),E.props=R,N=r.pendingProps,q=E.context,A=a.contextType,typeof A=="object"&&A!==null?A=Eo(A):(A=Vi(a)?Ac:di.current,A=dh(r,A));var fe=a.getDerivedStateFromProps;(U=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(s!==N||q!==A)&&ZT(r,E,h,A),Ka=!1,q=r.memoizedState,E.state=q,a_(r,h,E,d);var ae=r.memoizedState;s!==N||q!==ae||Ui.current||Ka?(typeof fe=="function"&&(Q1(r,a,fe,h),ae=r.memoizedState),(R=Ka||GT(r,a,R,h,q,ae,A)||!1)?(U||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,ae,A),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,ae,A)),typeof E.componentDidUpdate=="function"&&(r.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof E.componentDidUpdate!="function"||s===e.memoizedProps&&q===e.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&q===e.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=ae),E.props=h,E.state=ae,E.context=A,h=R):(typeof E.componentDidUpdate!="function"||s===e.memoizedProps&&q===e.memoizedState||(r.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&q===e.memoizedState||(r.flags|=1024),h=!1)}return rx(e,r,a,h,x,d)}function rx(e,r,a,h,d,x){ZM(e,r);var E=(r.flags&128)!==0;if(!h&&!E)return d&&NT(r,a,!1),sa(e,r,x);h=r.stateNode,Mz.current=r;var s=E&&typeof a.getDerivedStateFromError!="function"?null:h.render();return r.flags|=1,e!==null&&E?(r.child=ph(r,e.child,null,x),r.child=ph(r,null,s,x)):xi(e,r,s,x),r.memoizedState=h.state,d&&NT(r,a,!0),r.child}function HM(e){var r=e.stateNode;r.pendingContext?FT(e,r.pendingContext,r.pendingContext!==r.context):r.context&&FT(e,r.context,!1),Eb(e,r.containerInfo)}function tS(e,r,a,h,d){return fh(),_b(d),r.flags|=256,xi(e,r,a,h),r.child}var nx={dehydrated:null,treeContext:null,retryLane:0};function ix(e){return{baseLanes:e,cachePool:null,transitions:null}}function qM(e,r,a){var h=r.pendingProps,d=pn.current,x=!1,E=(r.flags&128)!==0,s;if((s=E)||(s=e!==null&&e.memoizedState===null?!1:(d&2)!==0),s?(x=!0,r.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Gr(pn,d&1),e===null)return K1(r),e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(r.mode&1?e.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(E=h.children,e=h.fallback,x?(h=r.mode,x=r.child,E={mode:"hidden",children:E},!(h&1)&&x!==null?(x.childLanes=0,x.pendingProps=E):x=K_(E,h,0,null),e=Ec(e,h,a,null),x.return=r,e.return=r,x.sibling=e,r.child=x,r.child.memoizedState=ix(a),r.memoizedState=nx,e):kb(r,E));if(d=e.memoizedState,d!==null&&(s=d.dehydrated,s!==null))return Pz(e,r,E,h,s,d,a);if(x){x=h.fallback,E=r.mode,d=e.child,s=d.sibling;var A={mode:"hidden",children:h.children};return!(E&1)&&r.child!==d?(h=r.child,h.childLanes=0,h.pendingProps=A,r.deletions=null):(h=hl(d,A),h.subtreeFlags=d.subtreeFlags&14680064),s!==null?x=hl(s,x):(x=Ec(x,E,a,null),x.flags|=2),x.return=r,h.return=r,h.sibling=x,r.child=h,h=x,x=r.child,E=e.child.memoizedState,E=E===null?ix(a):{baseLanes:E.baseLanes|a,cachePool:null,transitions:E.transitions},x.memoizedState=E,x.childLanes=e.childLanes&~a,r.memoizedState=nx,h}return x=e.child,e=x.sibling,h=hl(x,{mode:"visible",children:h.children}),!(r.mode&1)&&(h.lanes=a),h.return=r,h.sibling=null,e!==null&&(a=r.deletions,a===null?(r.deletions=[e],r.flags|=16):a.push(e)),r.child=h,r.memoizedState=null,h}function kb(e,r){return r=K_({mode:"visible",children:r},e.mode,0,null),r.return=e,e.child=r}function pg(e,r,a,h){return h!==null&&_b(h),ph(r,e.child,null,a),e=kb(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Pz(e,r,a,h,d,x,E){if(a)return r.flags&256?(r.flags&=-257,h=Uv(Error(ct(422))),pg(e,r,E,h)):r.memoizedState!==null?(r.child=e.child,r.flags|=128,null):(x=h.fallback,d=r.mode,h=K_({mode:"visible",children:h.children},d,0,null),x=Ec(x,d,E,null),x.flags|=2,h.return=r,x.return=r,h.sibling=x,r.child=h,r.mode&1&&ph(r,e.child,null,E),r.child.memoizedState=ix(E),r.memoizedState=nx,x);if(!(r.mode&1))return pg(e,r,E,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var s=h.dgst;return h=s,x=Error(ct(419)),h=Uv(x,h,void 0),pg(e,r,E,h)}if(s=(E&e.childLanes)!==0,ji||s){if(h=Zn,h!==null){switch(E&-E){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(h.suspendedLanes|E)?0:d,d!==0&&d!==x.retryLane&&(x.retryLane=d,oa(e,d),es(h,e,d,-1))}return Bb(),h=Uv(Error(ct(421))),pg(e,r,E,h)}return d.data==="$?"?(r.flags|=128,r.child=e.child,r=Vz.bind(null,e),d._reactRetry=r,null):(e=x.treeContext,Ji=al(d.nextSibling),eo=r,en=!0,Qo=null,e!==null&&(vo[xo++]=ea,vo[xo++]=ta,vo[xo++]=Cc,ea=e.id,ta=e.overflow,Cc=r),r=kb(r,h.children),r.flags|=4096,r)}function rS(e,r,a){e.lanes|=r;var h=e.alternate;h!==null&&(h.lanes|=r),Y1(e.return,r,a)}function Vv(e,r,a,h,d){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=h,x.tail=a,x.tailMode=d)}function WM(e,r,a){var h=r.pendingProps,d=h.revealOrder,x=h.tail;if(xi(e,r,h.children,a),h=pn.current,h&2)h=h&1|2,r.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rS(e,a,r);else if(e.tag===19)rS(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break e;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}h&=1}if(Gr(pn,h),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)e=a.alternate,e!==null&&l_(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Vv(r,!1,d,a,x);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(e=d.alternate,e!==null&&l_(e)===null){r.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Vv(r,!0,a,null,x);break;case"together":Vv(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Fg(e,r){!(r.mode&1)&&e!==null&&(e.alternate=null,r.alternate=null,r.flags|=2)}function sa(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),Pc|=r.lanes,!(a&r.childLanes))return null;if(e!==null&&r.child!==e.child)throw Error(ct(153));if(r.child!==null){for(e=r.child,a=hl(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=hl(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function Iz(e,r,a){switch(r.tag){case 3:HM(r),fh();break;case 5:bM(r);break;case 1:Vi(r.type)&&r_(r);break;case 4:Eb(r,r.stateNode.containerInfo);break;case 10:var h=r.type._context,d=r.memoizedProps.value;Gr(o_,h._currentValue),h._currentValue=d;break;case 13:if(h=r.memoizedState,h!==null)return h.dehydrated!==null?(Gr(pn,pn.current&1),r.flags|=128,null):a&r.child.childLanes?qM(e,r,a):(Gr(pn,pn.current&1),e=sa(e,r,a),e!==null?e.sibling:null);Gr(pn,pn.current&1);break;case 19:if(h=(a&r.childLanes)!==0,e.flags&128){if(h)return WM(e,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Gr(pn,pn.current),h)break;return null;case 22:case 23:return r.lanes=0,GM(e,r,a)}return sa(e,r,a)}var XM,ox,KM,YM;XM=function(e,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)e.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};ox=function(){};KM=function(e,r,a,h){var d=e.memoizedProps;if(d!==h){e=r.stateNode,bc(As.current);var x=null;switch(a){case"input":d=C1(e,d),h=C1(e,h),x=[];break;case"select":d=gn({},d,{value:void 0}),h=gn({},h,{value:void 0}),x=[];break;case"textarea":d=I1(e,d),h=I1(e,h),x=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(e.onclick=e_)}L1(a,h);var E;a=null;for(R in d)if(!h.hasOwnProperty(R)&&d.hasOwnProperty(R)&&d[R]!=null)if(R==="style"){var s=d[R];for(E in s)s.hasOwnProperty(E)&&(a||(a={}),a[E]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(Nf.hasOwnProperty(R)?x||(x=[]):(x=x||[]).push(R,null));for(R in h){var A=h[R];if(s=d!=null?d[R]:void 0,h.hasOwnProperty(R)&&A!==s&&(A!=null||s!=null))if(R==="style")if(s){for(E in s)!s.hasOwnProperty(E)||A&&A.hasOwnProperty(E)||(a||(a={}),a[E]="");for(E in A)A.hasOwnProperty(E)&&s[E]!==A[E]&&(a||(a={}),a[E]=A[E])}else a||(x||(x=[]),x.push(R,a)),a=A;else R==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,s=s?s.__html:void 0,A!=null&&s!==A&&(x=x||[]).push(R,A)):R==="children"?typeof A!="string"&&typeof A!="number"||(x=x||[]).push(R,""+A):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(Nf.hasOwnProperty(R)?(A!=null&&R==="onScroll"&&Wr("scroll",e),x||s===A||(x=[])):(x=x||[]).push(R,A))}a&&(x=x||[]).push("style",a);var R=x;(r.updateQueue=R)&&(r.flags|=4)}};YM=function(e,r,a,h){a!==h&&(r.flags|=4)};function yf(e,r){if(!en)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function li(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,h=0;if(r)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=h,e.childLanes=a,r}function kz(e,r,a){var h=r.pendingProps;switch(gb(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return li(r),null;case 1:return Vi(r.type)&&t_(),li(r),null;case 3:return h=r.stateNode,mh(),Xr(Ui),Xr(di),Sb(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(e===null||e.child===null)&&(dg(r)?r.flags|=4:e===null||e.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Qo!==null&&(fx(Qo),Qo=null))),ox(e,r),li(r),null;case 5:Tb(r);var d=bc(Yf.current);if(a=r.type,e!==null&&r.stateNode!=null)KM(e,r,a,h,d),e.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!h){if(r.stateNode===null)throw Error(ct(166));return li(r),null}if(e=bc(As.current),dg(r)){h=r.stateNode,a=r.type;var x=r.memoizedProps;switch(h[Ts]=r,h[Xf]=x,e=(r.mode&1)!==0,a){case"dialog":Wr("cancel",h),Wr("close",h);break;case"iframe":case"object":case"embed":Wr("load",h);break;case"video":case"audio":for(d=0;d<Tf.length;d++)Wr(Tf[d],h);break;case"source":Wr("error",h);break;case"img":case"image":case"link":Wr("error",h),Wr("load",h);break;case"details":Wr("toggle",h);break;case"input":hT(h,x),Wr("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!x.multiple},Wr("invalid",h);break;case"textarea":fT(h,x),Wr("invalid",h)}L1(a,x),d=null;for(var E in x)if(x.hasOwnProperty(E)){var s=x[E];E==="children"?typeof s=="string"?h.textContent!==s&&(x.suppressHydrationWarning!==!0&&hg(h.textContent,s,e),d=["children",s]):typeof s=="number"&&h.textContent!==""+s&&(x.suppressHydrationWarning!==!0&&hg(h.textContent,s,e),d=["children",""+s]):Nf.hasOwnProperty(E)&&s!=null&&E==="onScroll"&&Wr("scroll",h)}switch(a){case"input":ng(h),dT(h,x,!0);break;case"textarea":ng(h),pT(h);break;case"select":case"option":break;default:typeof x.onClick=="function"&&(h.onclick=e_)}h=d,r.updateQueue=h,h!==null&&(r.flags|=4)}else{E=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=TC(a)),e==="http://www.w3.org/1999/xhtml"?a==="script"?(e=E.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof h.is=="string"?e=E.createElement(a,{is:h.is}):(e=E.createElement(a),a==="select"&&(E=e,h.multiple?E.multiple=!0:h.size&&(E.size=h.size))):e=E.createElementNS(e,a),e[Ts]=r,e[Xf]=h,XM(e,r,!1,!1),r.stateNode=e;e:{switch(E=O1(a,h),a){case"dialog":Wr("cancel",e),Wr("close",e),d=h;break;case"iframe":case"object":case"embed":Wr("load",e),d=h;break;case"video":case"audio":for(d=0;d<Tf.length;d++)Wr(Tf[d],e);d=h;break;case"source":Wr("error",e),d=h;break;case"img":case"image":case"link":Wr("error",e),Wr("load",e),d=h;break;case"details":Wr("toggle",e),d=h;break;case"input":hT(e,h),d=C1(e,h),Wr("invalid",e);break;case"option":d=h;break;case"select":e._wrapperState={wasMultiple:!!h.multiple},d=gn({},h,{value:void 0}),Wr("invalid",e);break;case"textarea":fT(e,h),d=I1(e,h),Wr("invalid",e);break;default:d=h}L1(a,d),s=d;for(x in s)if(s.hasOwnProperty(x)){var A=s[x];x==="style"?CC(e,A):x==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&SC(e,A)):x==="children"?typeof A=="string"?(a!=="textarea"||A!=="")&&jf(e,A):typeof A=="number"&&jf(e,""+A):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Nf.hasOwnProperty(x)?A!=null&&x==="onScroll"&&Wr("scroll",e):A!=null&&tb(e,x,A,E))}switch(a){case"input":ng(e),dT(e,h,!1);break;case"textarea":ng(e),pT(e);break;case"option":h.value!=null&&e.setAttribute("value",""+fl(h.value));break;case"select":e.multiple=!!h.multiple,x=h.value,x!=null?th(e,!!h.multiple,x,!1):h.defaultValue!=null&&th(e,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=e_)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return li(r),null;case 6:if(e&&r.stateNode!=null)YM(e,r,e.memoizedProps,h);else{if(typeof h!="string"&&r.stateNode===null)throw Error(ct(166));if(a=bc(Yf.current),bc(As.current),dg(r)){if(h=r.stateNode,a=r.memoizedProps,h[Ts]=r,(x=h.nodeValue!==a)&&(e=eo,e!==null))switch(e.tag){case 3:hg(h.nodeValue,a,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hg(h.nodeValue,a,(e.mode&1)!==0)}x&&(r.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Ts]=r,r.stateNode=h}return li(r),null;case 13:if(Xr(pn),h=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(en&&Ji!==null&&r.mode&1&&!(r.flags&128))pM(),fh(),r.flags|=98560,x=!1;else if(x=dg(r),h!==null&&h.dehydrated!==null){if(e===null){if(!x)throw Error(ct(318));if(x=r.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(ct(317));x[Ts]=r}else fh(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;li(r),x=!1}else Qo!==null&&(fx(Qo),Qo=null),x=!0;if(!x)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(h=h!==null,h!==(e!==null&&e.memoizedState!==null)&&h&&(r.child.flags|=8192,r.mode&1&&(e===null||pn.current&1?Bn===0&&(Bn=3):Bb())),r.updateQueue!==null&&(r.flags|=4),li(r),null);case 4:return mh(),ox(e,r),e===null&&qf(r.stateNode.containerInfo),li(r),null;case 10:return xb(r.type._context),li(r),null;case 17:return Vi(r.type)&&t_(),li(r),null;case 19:if(Xr(pn),x=r.memoizedState,x===null)return li(r),null;if(h=(r.flags&128)!==0,E=x.rendering,E===null)if(h)yf(x,!1);else{if(Bn!==0||e!==null&&e.flags&128)for(e=r.child;e!==null;){if(E=l_(e),E!==null){for(r.flags|=128,yf(x,!1),h=E.updateQueue,h!==null&&(r.updateQueue=h,r.flags|=4),r.subtreeFlags=0,h=a,a=r.child;a!==null;)x=a,e=h,x.flags&=14680066,E=x.alternate,E===null?(x.childLanes=0,x.lanes=e,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=E.childLanes,x.lanes=E.lanes,x.child=E.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=E.memoizedProps,x.memoizedState=E.memoizedState,x.updateQueue=E.updateQueue,x.type=E.type,e=E.dependencies,x.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Gr(pn,pn.current&1|2),r.child}e=e.sibling}x.tail!==null&&bn()>_h&&(r.flags|=128,h=!0,yf(x,!1),r.lanes=4194304)}else{if(!h)if(e=l_(E),e!==null){if(r.flags|=128,h=!0,a=e.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),yf(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!en)return li(r),null}else 2*bn()-x.renderingStartTime>_h&&a!==1073741824&&(r.flags|=128,h=!0,yf(x,!1),r.lanes=4194304);x.isBackwards?(E.sibling=r.child,r.child=E):(a=x.last,a!==null?a.sibling=E:r.child=E,x.last=E)}return x.tail!==null?(r=x.tail,x.rendering=r,x.tail=r.sibling,x.renderingStartTime=bn(),r.sibling=null,a=pn.current,Gr(pn,h?a&1|2:a&1),r):(li(r),null);case 22:case 23:return Db(),h=r.memoizedState!==null,e!==null&&e.memoizedState!==null!==h&&(r.flags|=8192),h&&r.mode&1?Qi&1073741824&&(li(r),r.subtreeFlags&6&&(r.flags|=8192)):li(r),null;case 24:return null;case 25:return null}throw Error(ct(156,r.tag))}function Lz(e,r){switch(gb(r),r.tag){case 1:return Vi(r.type)&&t_(),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return mh(),Xr(Ui),Xr(di),Sb(),e=r.flags,e&65536&&!(e&128)?(r.flags=e&-65537|128,r):null;case 5:return Tb(r),null;case 13:if(Xr(pn),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(ct(340));fh()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return Xr(pn),null;case 4:return mh(),null;case 10:return xb(r.type._context),null;case 22:case 23:return Db(),null;case 24:return null;default:return null}}var mg=!1,hi=!1,Oz=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function Yu(e,r){var a=e.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){xn(e,r,h)}else a.current=null}function sx(e,r,a){try{a()}catch(h){xn(e,r,h)}}var nS=!1;function zz(e,r){if($1=Yg,e=tM(),pb(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,x=h.focusNode;h=h.focusOffset;try{a.nodeType,x.nodeType}catch{a=null;break e}var E=0,s=-1,A=-1,R=0,U=0,N=e,q=null;t:for(;;){for(var fe;N!==a||d!==0&&N.nodeType!==3||(s=E+d),N!==x||h!==0&&N.nodeType!==3||(A=E+h),N.nodeType===3&&(E+=N.nodeValue.length),(fe=N.firstChild)!==null;)q=N,N=fe;for(;;){if(N===e)break t;if(q===a&&++R===d&&(s=E),q===x&&++U===h&&(A=E),(fe=N.nextSibling)!==null)break;N=q,q=N.parentNode}N=fe}a=s===-1||A===-1?null:{start:s,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(G1={focusedElem:e,selectionRange:a},Yg=!1,Mt=r;Mt!==null;)if(r=Mt,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Mt=e;else for(;Mt!==null;){r=Mt;try{var ae=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var se=ae.memoizedProps,ve=ae.memoizedState,J=r.stateNode,Z=J.getSnapshotBeforeUpdate(r.elementType===r.type?se:Xo(r.type,se),ve);J.__reactInternalSnapshotBeforeUpdate=Z}break;case 3:var te=r.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ct(163))}}catch(Ee){xn(r,r.return,Ee)}if(e=r.sibling,e!==null){e.return=r.return,Mt=e;break}Mt=r.return}return ae=nS,nS=!1,ae}function Lf(e,r,a){var h=r.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&e)===e){var x=d.destroy;d.destroy=void 0,x!==void 0&&sx(r,a,x)}d=d.next}while(d!==h)}}function W_(e,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var h=a.create;a.destroy=h()}a=a.next}while(a!==r)}}function ax(e){var r=e.ref;if(r!==null){var a=e.stateNode;switch(e.tag){case 5:e=a;break;default:e=a}typeof r=="function"?r(e):r.current=e}}function QM(e){var r=e.alternate;r!==null&&(e.alternate=null,QM(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&(delete r[Ts],delete r[Xf],delete r[q1],delete r[gz],delete r[_z])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function JM(e){return e.tag===5||e.tag===3||e.tag===4}function iS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lx(e,r,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(e,r):a.insertBefore(e,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(e,a)):(r=a,r.appendChild(e)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=e_));else if(h!==4&&(e=e.child,e!==null))for(lx(e,r,a),e=e.sibling;e!==null;)lx(e,r,a),e=e.sibling}function cx(e,r,a){var h=e.tag;if(h===5||h===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(h!==4&&(e=e.child,e!==null))for(cx(e,r,a),e=e.sibling;e!==null;)cx(e,r,a),e=e.sibling}var Xn=null,Yo=!1;function Za(e,r,a){for(a=a.child;a!==null;)e3(e,r,a),a=a.sibling}function e3(e,r,a){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(j_,a)}catch{}switch(a.tag){case 5:hi||Yu(a,r);case 6:var h=Xn,d=Yo;Xn=null,Za(e,r,a),Xn=h,Yo=d,Xn!==null&&(Yo?(e=Xn,a=a.stateNode,e.nodeType===8?e.parentNode.removeChild(a):e.removeChild(a)):Xn.removeChild(a.stateNode));break;case 18:Xn!==null&&(Yo?(e=Xn,a=a.stateNode,e.nodeType===8?Rv(e.parentNode,a):e.nodeType===1&&Rv(e,a),Gf(e)):Rv(Xn,a.stateNode));break;case 4:h=Xn,d=Yo,Xn=a.stateNode.containerInfo,Yo=!0,Za(e,r,a),Xn=h,Yo=d;break;case 0:case 11:case 14:case 15:if(!hi&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var x=d,E=x.destroy;x=x.tag,E!==void 0&&(x&2||x&4)&&sx(a,r,E),d=d.next}while(d!==h)}Za(e,r,a);break;case 1:if(!hi&&(Yu(a,r),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(s){xn(a,r,s)}Za(e,r,a);break;case 21:Za(e,r,a);break;case 22:a.mode&1?(hi=(h=hi)||a.memoizedState!==null,Za(e,r,a),hi=h):Za(e,r,a);break;default:Za(e,r,a)}}function oS(e){var r=e.updateQueue;if(r!==null){e.updateQueue=null;var a=e.stateNode;a===null&&(a=e.stateNode=new Oz),r.forEach(function(h){var d=$z.bind(null,e,h);a.has(h)||(a.add(h),h.then(d,d))})}}function qo(e,r){var a=r.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var x=e,E=r,s=E;e:for(;s!==null;){switch(s.tag){case 5:Xn=s.stateNode,Yo=!1;break e;case 3:Xn=s.stateNode.containerInfo,Yo=!0;break e;case 4:Xn=s.stateNode.containerInfo,Yo=!0;break e}s=s.return}if(Xn===null)throw Error(ct(160));e3(x,E,d),Xn=null,Yo=!1;var A=d.alternate;A!==null&&(A.return=null),d.return=null}catch(R){xn(d,r,R)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)t3(r,e),r=r.sibling}function t3(e,r){var a=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qo(r,e),vs(e),h&4){try{Lf(3,e,e.return),W_(3,e)}catch(se){xn(e,e.return,se)}try{Lf(5,e,e.return)}catch(se){xn(e,e.return,se)}}break;case 1:qo(r,e),vs(e),h&512&&a!==null&&Yu(a,a.return);break;case 5:if(qo(r,e),vs(e),h&512&&a!==null&&Yu(a,a.return),e.flags&32){var d=e.stateNode;try{jf(d,"")}catch(se){xn(e,e.return,se)}}if(h&4&&(d=e.stateNode,d!=null)){var x=e.memoizedProps,E=a!==null?a.memoizedProps:x,s=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{s==="input"&&x.type==="radio"&&x.name!=null&&wC(d,x),O1(s,E);var R=O1(s,x);for(E=0;E<A.length;E+=2){var U=A[E],N=A[E+1];U==="style"?CC(d,N):U==="dangerouslySetInnerHTML"?SC(d,N):U==="children"?jf(d,N):tb(d,U,N,R)}switch(s){case"input":M1(d,x);break;case"textarea":EC(d,x);break;case"select":var q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!x.multiple;var fe=x.value;fe!=null?th(d,!!x.multiple,fe,!1):q!==!!x.multiple&&(x.defaultValue!=null?th(d,!!x.multiple,x.defaultValue,!0):th(d,!!x.multiple,x.multiple?[]:"",!1))}d[Xf]=x}catch(se){xn(e,e.return,se)}}break;case 6:if(qo(r,e),vs(e),h&4){if(e.stateNode===null)throw Error(ct(162));d=e.stateNode,x=e.memoizedProps;try{d.nodeValue=x}catch(se){xn(e,e.return,se)}}break;case 3:if(qo(r,e),vs(e),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Gf(r.containerInfo)}catch(se){xn(e,e.return,se)}break;case 4:qo(r,e),vs(e);break;case 13:qo(r,e),vs(e),d=e.child,d.flags&8192&&(x=d.memoizedState!==null,d.stateNode.isHidden=x,!x||d.alternate!==null&&d.alternate.memoizedState!==null||(zb=bn())),h&4&&oS(e);break;case 22:if(U=a!==null&&a.memoizedState!==null,e.mode&1?(hi=(R=hi)||U,qo(r,e),hi=R):qo(r,e),vs(e),h&8192){if(R=e.memoizedState!==null,(e.stateNode.isHidden=R)&&!U&&e.mode&1)for(Mt=e,U=e.child;U!==null;){for(N=Mt=U;Mt!==null;){switch(q=Mt,fe=q.child,q.tag){case 0:case 11:case 14:case 15:Lf(4,q,q.return);break;case 1:Yu(q,q.return);var ae=q.stateNode;if(typeof ae.componentWillUnmount=="function"){h=q,a=q.return;try{r=h,ae.props=r.memoizedProps,ae.state=r.memoizedState,ae.componentWillUnmount()}catch(se){xn(h,a,se)}}break;case 5:Yu(q,q.return);break;case 22:if(q.memoizedState!==null){aS(N);continue}}fe!==null?(fe.return=q,Mt=fe):aS(N)}U=U.sibling}e:for(U=null,N=e;;){if(N.tag===5){if(U===null){U=N;try{d=N.stateNode,R?(x=d.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none"):(s=N.stateNode,A=N.memoizedProps.style,E=A!=null&&A.hasOwnProperty("display")?A.display:null,s.style.display=AC("display",E))}catch(se){xn(e,e.return,se)}}}else if(N.tag===6){if(U===null)try{N.stateNode.nodeValue=R?"":N.memoizedProps}catch(se){xn(e,e.return,se)}}else if((N.tag!==22&&N.tag!==23||N.memoizedState===null||N===e)&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===e)break e;for(;N.sibling===null;){if(N.return===null||N.return===e)break e;U===N&&(U=null),N=N.return}U===N&&(U=null),N.sibling.return=N.return,N=N.sibling}}break;case 19:qo(r,e),vs(e),h&4&&oS(e);break;case 21:break;default:qo(r,e),vs(e)}}function vs(e){var r=e.flags;if(r&2){try{e:{for(var a=e.return;a!==null;){if(JM(a)){var h=a;break e}a=a.return}throw Error(ct(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(jf(d,""),h.flags&=-33);var x=iS(e);cx(e,x,d);break;case 3:case 4:var E=h.stateNode.containerInfo,s=iS(e);lx(e,s,E);break;default:throw Error(ct(161))}}catch(A){xn(e,e.return,A)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Rz(e,r,a){Mt=e,r3(e)}function r3(e,r,a){for(var h=(e.mode&1)!==0;Mt!==null;){var d=Mt,x=d.child;if(d.tag===22&&h){var E=d.memoizedState!==null||mg;if(!E){var s=d.alternate,A=s!==null&&s.memoizedState!==null||hi;s=mg;var R=hi;if(mg=E,(hi=A)&&!R)for(Mt=d;Mt!==null;)E=Mt,A=E.child,E.tag===22&&E.memoizedState!==null?lS(d):A!==null?(A.return=E,Mt=A):lS(d);for(;x!==null;)Mt=x,r3(x),x=x.sibling;Mt=d,mg=s,hi=R}sS(e)}else d.subtreeFlags&8772&&x!==null?(x.return=d,Mt=x):sS(e)}}function sS(e){for(;Mt!==null;){var r=Mt;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:hi||W_(5,r);break;case 1:var h=r.stateNode;if(r.flags&4&&!hi)if(a===null)h.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Xo(r.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var x=r.updateQueue;x!==null&&$T(r,x,h);break;case 3:var E=r.updateQueue;if(E!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}$T(r,E,a)}break;case 5:var s=r.stateNode;if(a===null&&r.flags&4){a=s;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&a.focus();break;case"img":A.src&&(a.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var R=r.alternate;if(R!==null){var U=R.memoizedState;if(U!==null){var N=U.dehydrated;N!==null&&Gf(N)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ct(163))}hi||r.flags&512&&ax(r)}catch(q){xn(r,r.return,q)}}if(r===e){Mt=null;break}if(a=r.sibling,a!==null){a.return=r.return,Mt=a;break}Mt=r.return}}function aS(e){for(;Mt!==null;){var r=Mt;if(r===e){Mt=null;break}var a=r.sibling;if(a!==null){a.return=r.return,Mt=a;break}Mt=r.return}}function lS(e){for(;Mt!==null;){var r=Mt;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{W_(4,r)}catch(A){xn(r,a,A)}break;case 1:var h=r.stateNode;if(typeof h.componentDidMount=="function"){var d=r.return;try{h.componentDidMount()}catch(A){xn(r,d,A)}}var x=r.return;try{ax(r)}catch(A){xn(r,x,A)}break;case 5:var E=r.return;try{ax(r)}catch(A){xn(r,E,A)}}}catch(A){xn(r,r.return,A)}if(r===e){Mt=null;break}var s=r.sibling;if(s!==null){s.return=r.return,Mt=s;break}Mt=r.return}}var Dz=Math.ceil,h_=aa.ReactCurrentDispatcher,Lb=aa.ReactCurrentOwner,wo=aa.ReactCurrentBatchConfig,gr=0,Zn=null,In=null,Yn=0,Qi=0,Qu=yl(0),Bn=0,tp=null,Pc=0,X_=0,Ob=0,Of=null,Ni=null,zb=0,_h=1/0,Qs=null,d_=!1,ux=null,cl=null,gg=!1,tl=null,f_=0,zf=0,hx=null,Ng=-1,jg=0;function wi(){return gr&6?bn():Ng!==-1?Ng:Ng=bn()}function ul(e){return e.mode&1?gr&2&&Yn!==0?Yn&-Yn:vz.transition!==null?(jg===0&&(jg=NC()),jg):(e=zr,e!==0||(e=window.event,e=e===void 0?16:HC(e.type)),e):1}function es(e,r,a,h){if(50<zf)throw zf=0,hx=null,Error(ct(185));pp(e,a,h),(!(gr&2)||e!==Zn)&&(e===Zn&&(!(gr&2)&&(X_|=a),Bn===4&&Ja(e,Yn)),$i(e,h),a===1&&gr===0&&!(r.mode&1)&&(_h=bn()+500,Z_&&vl()))}function $i(e,r){var a=e.callbackNode;vO(e,r);var h=Kg(e,e===Zn?Yn:0);if(h===0)a!==null&&_T(a),e.callbackNode=null,e.callbackPriority=0;else if(r=h&-h,e.callbackPriority!==r){if(a!=null&&_T(a),r===1)e.tag===0?yz(cS.bind(null,e)):hM(cS.bind(null,e)),pz(function(){!(gr&6)&&vl()}),a=null;else{switch(jC(h)){case 1:a=sb;break;case 4:a=BC;break;case 16:a=Xg;break;case 536870912:a=FC;break;default:a=Xg}a=u3(a,n3.bind(null,e))}e.callbackPriority=r,e.callbackNode=a}}function n3(e,r){if(Ng=-1,jg=0,gr&6)throw Error(ct(327));var a=e.callbackNode;if(sh()&&e.callbackNode!==a)return null;var h=Kg(e,e===Zn?Yn:0);if(h===0)return null;if(h&30||h&e.expiredLanes||r)r=p_(e,h);else{r=h;var d=gr;gr|=2;var x=o3();(Zn!==e||Yn!==r)&&(Qs=null,_h=bn()+500,wc(e,r));do try{Nz();break}catch(s){i3(e,s)}while(1);vb(),h_.current=x,gr=d,In!==null?r=0:(Zn=null,Yn=0,r=Bn)}if(r!==0){if(r===2&&(d=F1(e),d!==0&&(h=d,r=dx(e,d))),r===1)throw a=tp,wc(e,0),Ja(e,h),$i(e,bn()),a;if(r===6)Ja(e,h);else{if(d=e.current.alternate,!(h&30)&&!Bz(d)&&(r=p_(e,h),r===2&&(x=F1(e),x!==0&&(h=x,r=dx(e,x))),r===1))throw a=tp,wc(e,0),Ja(e,h),$i(e,bn()),a;switch(e.finishedWork=d,e.finishedLanes=h,r){case 0:case 1:throw Error(ct(345));case 2:gc(e,Ni,Qs);break;case 3:if(Ja(e,h),(h&130023424)===h&&(r=zb+500-bn(),10<r)){if(Kg(e,0)!==0)break;if(d=e.suspendedLanes,(d&h)!==h){wi(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=H1(gc.bind(null,e,Ni,Qs),r);break}gc(e,Ni,Qs);break;case 4:if(Ja(e,h),(h&4194240)===h)break;for(r=e.eventTimes,d=-1;0<h;){var E=31-Jo(h);x=1<<E,E=r[E],E>d&&(d=E),h&=~x}if(h=d,h=bn()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Dz(h/1960))-h,10<h){e.timeoutHandle=H1(gc.bind(null,e,Ni,Qs),h);break}gc(e,Ni,Qs);break;case 5:gc(e,Ni,Qs);break;default:throw Error(ct(329))}}}return $i(e,bn()),e.callbackNode===a?n3.bind(null,e):null}function dx(e,r){var a=Of;return e.current.memoizedState.isDehydrated&&(wc(e,r).flags|=256),e=p_(e,r),e!==2&&(r=Ni,Ni=a,r!==null&&fx(r)),e}function fx(e){Ni===null?Ni=e:Ni.push.apply(Ni,e)}function Bz(e){for(var r=e;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],x=d.getSnapshot;d=d.value;try{if(!rs(x(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ja(e,r){for(r&=~Ob,r&=~X_,e.suspendedLanes|=r,e.pingedLanes&=~r,e=e.expirationTimes;0<r;){var a=31-Jo(r),h=1<<a;e[a]=-1,r&=~h}}function cS(e){if(gr&6)throw Error(ct(327));sh();var r=Kg(e,0);if(!(r&1))return $i(e,bn()),null;var a=p_(e,r);if(e.tag!==0&&a===2){var h=F1(e);h!==0&&(r=h,a=dx(e,h))}if(a===1)throw a=tp,wc(e,0),Ja(e,r),$i(e,bn()),a;if(a===6)throw Error(ct(345));return e.finishedWork=e.current.alternate,e.finishedLanes=r,gc(e,Ni,Qs),$i(e,bn()),null}function Rb(e,r){var a=gr;gr|=1;try{return e(r)}finally{gr=a,gr===0&&(_h=bn()+500,Z_&&vl())}}function Ic(e){tl!==null&&tl.tag===0&&!(gr&6)&&sh();var r=gr;gr|=1;var a=wo.transition,h=zr;try{if(wo.transition=null,zr=1,e)return e()}finally{zr=h,wo.transition=a,gr=r,!(gr&6)&&vl()}}function Db(){Qi=Qu.current,Xr(Qu)}function wc(e,r){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(a!==-1&&(e.timeoutHandle=-1,fz(a)),In!==null)for(a=In.return;a!==null;){var h=a;switch(gb(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&t_();break;case 3:mh(),Xr(Ui),Xr(di),Sb();break;case 5:Tb(h);break;case 4:mh();break;case 13:Xr(pn);break;case 19:Xr(pn);break;case 10:xb(h.type._context);break;case 22:case 23:Db()}a=a.return}if(Zn=e,In=e=hl(e.current,null),Yn=Qi=r,Bn=0,tp=null,Ob=X_=Pc=0,Ni=Of=null,xc!==null){for(r=0;r<xc.length;r++)if(a=xc[r],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,x=a.pending;if(x!==null){var E=x.next;x.next=d,h.next=E}a.pending=h}xc=null}return e}function i3(e,r){do{var a=In;try{if(vb(),Dg.current=u_,c_){for(var h=mn.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}c_=!1}if(Mc=0,Gn=Dn=mn=null,kf=!1,Qf=0,Lb.current=null,a===null||a.return===null){Bn=1,tp=r,In=null;break}e:{var x=e,E=a.return,s=a,A=r;if(r=Yn,s.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var R=A,U=s,N=U.tag;if(!(U.mode&1)&&(N===0||N===11||N===15)){var q=U.alternate;q?(U.updateQueue=q.updateQueue,U.memoizedState=q.memoizedState,U.lanes=q.lanes):(U.updateQueue=null,U.memoizedState=null)}var fe=KT(E);if(fe!==null){fe.flags&=-257,YT(fe,E,s,x,r),fe.mode&1&&XT(x,R,r),r=fe,A=R;var ae=r.updateQueue;if(ae===null){var se=new Set;se.add(A),r.updateQueue=se}else ae.add(A);break e}else{if(!(r&1)){XT(x,R,r),Bb();break e}A=Error(ct(426))}}else if(en&&s.mode&1){var ve=KT(E);if(ve!==null){!(ve.flags&65536)&&(ve.flags|=256),YT(ve,E,s,x,r),_b(gh(A,s));break e}}x=A=gh(A,s),Bn!==4&&(Bn=2),Of===null?Of=[x]:Of.push(x),x=E;do{switch(x.tag){case 3:x.flags|=65536,r&=-r,x.lanes|=r;var J=UM(x,A,r);VT(x,J);break e;case 1:s=A;var Z=x.type,te=x.stateNode;if(!(x.flags&128)&&(typeof Z.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(cl===null||!cl.has(te)))){x.flags|=65536,r&=-r,x.lanes|=r;var Ee=VM(x,s,r);VT(x,Ee);break e}}x=x.return}while(x!==null)}a3(a)}catch(ke){r=ke,In===a&&a!==null&&(In=a=a.return);continue}break}while(1)}function o3(){var e=h_.current;return h_.current=u_,e===null?u_:e}function Bb(){(Bn===0||Bn===3||Bn===2)&&(Bn=4),Zn===null||!(Pc&268435455)&&!(X_&268435455)||Ja(Zn,Yn)}function p_(e,r){var a=gr;gr|=2;var h=o3();(Zn!==e||Yn!==r)&&(Qs=null,wc(e,r));do try{Fz();break}catch(d){i3(e,d)}while(1);if(vb(),gr=a,h_.current=h,In!==null)throw Error(ct(261));return Zn=null,Yn=0,Bn}function Fz(){for(;In!==null;)s3(In)}function Nz(){for(;In!==null&&!uO();)s3(In)}function s3(e){var r=c3(e.alternate,e,Qi);e.memoizedProps=e.pendingProps,r===null?a3(e):In=r,Lb.current=null}function a3(e){var r=e;do{var a=r.alternate;if(e=r.return,r.flags&32768){if(a=Lz(a,r),a!==null){a.flags&=32767,In=a;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Bn=6,In=null;return}}else if(a=kz(a,r,Qi),a!==null){In=a;return}if(r=r.sibling,r!==null){In=r;return}In=r=e}while(r!==null);Bn===0&&(Bn=5)}function gc(e,r,a){var h=zr,d=wo.transition;try{wo.transition=null,zr=1,jz(e,r,a,h)}finally{wo.transition=d,zr=h}return null}function jz(e,r,a,h){do sh();while(tl!==null);if(gr&6)throw Error(ct(327));a=e.finishedWork;var d=e.finishedLanes;if(a===null)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(ct(177));e.callbackNode=null,e.callbackPriority=0;var x=a.lanes|a.childLanes;if(xO(e,x),e===Zn&&(In=Zn=null,Yn=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||gg||(gg=!0,u3(Xg,function(){return sh(),null})),x=(a.flags&15990)!==0,a.subtreeFlags&15990||x){x=wo.transition,wo.transition=null;var E=zr;zr=1;var s=gr;gr|=4,Lb.current=null,zz(e,a),t3(a,e),sz(G1),Yg=!!$1,G1=$1=null,e.current=a,Rz(a),hO(),gr=s,zr=E,wo.transition=x}else e.current=a;if(gg&&(gg=!1,tl=e,f_=d),x=e.pendingLanes,x===0&&(cl=null),pO(a.stateNode),$i(e,bn()),r!==null)for(h=e.onRecoverableError,a=0;a<r.length;a++)d=r[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(d_)throw d_=!1,e=ux,ux=null,e;return f_&1&&e.tag!==0&&sh(),x=e.pendingLanes,x&1?e===hx?zf++:(zf=0,hx=e):zf=0,vl(),null}function sh(){if(tl!==null){var e=jC(f_),r=wo.transition,a=zr;try{if(wo.transition=null,zr=16>e?16:e,tl===null)var h=!1;else{if(e=tl,tl=null,f_=0,gr&6)throw Error(ct(331));var d=gr;for(gr|=4,Mt=e.current;Mt!==null;){var x=Mt,E=x.child;if(Mt.flags&16){var s=x.deletions;if(s!==null){for(var A=0;A<s.length;A++){var R=s[A];for(Mt=R;Mt!==null;){var U=Mt;switch(U.tag){case 0:case 11:case 15:Lf(8,U,x)}var N=U.child;if(N!==null)N.return=U,Mt=N;else for(;Mt!==null;){U=Mt;var q=U.sibling,fe=U.return;if(QM(U),U===R){Mt=null;break}if(q!==null){q.return=fe,Mt=q;break}Mt=fe}}}var ae=x.alternate;if(ae!==null){var se=ae.child;if(se!==null){ae.child=null;do{var ve=se.sibling;se.sibling=null,se=ve}while(se!==null)}}Mt=x}}if(x.subtreeFlags&2064&&E!==null)E.return=x,Mt=E;else e:for(;Mt!==null;){if(x=Mt,x.flags&2048)switch(x.tag){case 0:case 11:case 15:Lf(9,x,x.return)}var J=x.sibling;if(J!==null){J.return=x.return,Mt=J;break e}Mt=x.return}}var Z=e.current;for(Mt=Z;Mt!==null;){E=Mt;var te=E.child;if(E.subtreeFlags&2064&&te!==null)te.return=E,Mt=te;else e:for(E=Z;Mt!==null;){if(s=Mt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:W_(9,s)}}catch(ke){xn(s,s.return,ke)}if(s===E){Mt=null;break e}var Ee=s.sibling;if(Ee!==null){Ee.return=s.return,Mt=Ee;break e}Mt=s.return}}if(gr=d,vl(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(j_,e)}catch{}h=!0}return h}finally{zr=a,wo.transition=r}}return!1}function uS(e,r,a){r=gh(a,r),r=UM(e,r,1),e=ll(e,r,1),r=wi(),e!==null&&(pp(e,1,r),$i(e,r))}function xn(e,r,a){if(e.tag===3)uS(e,e,a);else for(;r!==null;){if(r.tag===3){uS(r,e,a);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(cl===null||!cl.has(h))){e=gh(a,e),e=VM(r,e,1),r=ll(r,e,1),e=wi(),r!==null&&(pp(r,1,e),$i(r,e));break}}r=r.return}}function Uz(e,r,a){var h=e.pingCache;h!==null&&h.delete(r),r=wi(),e.pingedLanes|=e.suspendedLanes&a,Zn===e&&(Yn&a)===a&&(Bn===4||Bn===3&&(Yn&130023424)===Yn&&500>bn()-zb?wc(e,0):Ob|=a),$i(e,r)}function l3(e,r){r===0&&(e.mode&1?(r=sg,sg<<=1,!(sg&130023424)&&(sg=4194304)):r=1);var a=wi();e=oa(e,r),e!==null&&(pp(e,r,a),$i(e,a))}function Vz(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),l3(e,a)}function $z(e,r){var a=0;switch(e.tag){case 13:var h=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=e.stateNode;break;default:throw Error(ct(314))}h!==null&&h.delete(r),l3(e,a)}var c3;c3=function(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps||Ui.current)ji=!0;else{if(!(e.lanes&a)&&!(r.flags&128))return ji=!1,Iz(e,r,a);ji=!!(e.flags&131072)}else ji=!1,en&&r.flags&1048576&&dM(r,i_,r.index);switch(r.lanes=0,r.tag){case 2:var h=r.type;Fg(e,r),e=r.pendingProps;var d=dh(r,di.current);oh(r,a),d=Cb(null,r,h,e,d,a);var x=Mb();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Vi(h)?(x=!0,r_(r)):x=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,wb(r),d.updater=H_,r.stateNode=d,d._reactInternals=r,J1(r,h,e,a),r=rx(null,r,h,!0,x,a)):(r.tag=0,en&&x&&mb(r),xi(null,r,d,a),r=r.child),r;case 16:h=r.elementType;e:{switch(Fg(e,r),e=r.pendingProps,d=h._init,h=d(h._payload),r.type=h,d=r.tag=Zz(h),e=Xo(h,e),d){case 0:r=tx(null,r,h,e,a);break e;case 1:r=eS(null,r,h,e,a);break e;case 11:r=QT(null,r,h,e,a);break e;case 14:r=JT(null,r,h,Xo(h.type,e),a);break e}throw Error(ct(306,h,""))}return r;case 0:return h=r.type,d=r.pendingProps,d=r.elementType===h?d:Xo(h,d),tx(e,r,h,d,a);case 1:return h=r.type,d=r.pendingProps,d=r.elementType===h?d:Xo(h,d),eS(e,r,h,d,a);case 3:e:{if(HM(r),e===null)throw Error(ct(387));h=r.pendingProps,x=r.memoizedState,d=x.element,gM(e,r),a_(r,h,null,a);var E=r.memoizedState;if(h=E.element,x.isDehydrated)if(x={element:h,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},r.updateQueue.baseState=x,r.memoizedState=x,r.flags&256){d=gh(Error(ct(423)),r),r=tS(e,r,h,a,d);break e}else if(h!==d){d=gh(Error(ct(424)),r),r=tS(e,r,h,a,d);break e}else for(Ji=al(r.stateNode.containerInfo.firstChild),eo=r,en=!0,Qo=null,a=xM(r,null,h,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(fh(),h===d){r=sa(e,r,a);break e}xi(e,r,h,a)}r=r.child}return r;case 5:return bM(r),e===null&&K1(r),h=r.type,d=r.pendingProps,x=e!==null?e.memoizedProps:null,E=d.children,Z1(h,d)?E=null:x!==null&&Z1(h,x)&&(r.flags|=32),ZM(e,r),xi(e,r,E,a),r.child;case 6:return e===null&&K1(r),null;case 13:return qM(e,r,a);case 4:return Eb(r,r.stateNode.containerInfo),h=r.pendingProps,e===null?r.child=ph(r,null,h,a):xi(e,r,h,a),r.child;case 11:return h=r.type,d=r.pendingProps,d=r.elementType===h?d:Xo(h,d),QT(e,r,h,d,a);case 7:return xi(e,r,r.pendingProps,a),r.child;case 8:return xi(e,r,r.pendingProps.children,a),r.child;case 12:return xi(e,r,r.pendingProps.children,a),r.child;case 10:e:{if(h=r.type._context,d=r.pendingProps,x=r.memoizedProps,E=d.value,Gr(o_,h._currentValue),h._currentValue=E,x!==null)if(rs(x.value,E)){if(x.children===d.children&&!Ui.current){r=sa(e,r,a);break e}}else for(x=r.child,x!==null&&(x.return=r);x!==null;){var s=x.dependencies;if(s!==null){E=x.child;for(var A=s.firstContext;A!==null;){if(A.context===h){if(x.tag===1){A=ra(-1,a&-a),A.tag=2;var R=x.updateQueue;if(R!==null){R=R.shared;var U=R.pending;U===null?A.next=A:(A.next=U.next,U.next=A),R.pending=A}}x.lanes|=a,A=x.alternate,A!==null&&(A.lanes|=a),Y1(x.return,a,r),s.lanes|=a;break}A=A.next}}else if(x.tag===10)E=x.type===r.type?null:x.child;else if(x.tag===18){if(E=x.return,E===null)throw Error(ct(341));E.lanes|=a,s=E.alternate,s!==null&&(s.lanes|=a),Y1(E,a,r),E=x.sibling}else E=x.child;if(E!==null)E.return=x;else for(E=x;E!==null;){if(E===r){E=null;break}if(x=E.sibling,x!==null){x.return=E.return,E=x;break}E=E.return}x=E}xi(e,r,d.children,a),r=r.child}return r;case 9:return d=r.type,h=r.pendingProps.children,oh(r,a),d=Eo(d),h=h(d),r.flags|=1,xi(e,r,h,a),r.child;case 14:return h=r.type,d=Xo(h,r.pendingProps),d=Xo(h.type,d),JT(e,r,h,d,a);case 15:return $M(e,r,r.type,r.pendingProps,a);case 17:return h=r.type,d=r.pendingProps,d=r.elementType===h?d:Xo(h,d),Fg(e,r),r.tag=1,Vi(h)?(e=!0,r_(r)):e=!1,oh(r,a),yM(r,h,d),J1(r,h,d,a),rx(null,r,h,!0,e,a);case 19:return WM(e,r,a);case 22:return GM(e,r,a)}throw Error(ct(156,r.tag))};function u3(e,r){return DC(e,r)}function Gz(e,r,a,h){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(e,r,a,h){return new Gz(e,r,a,h)}function Fb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zz(e){if(typeof e=="function")return Fb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nb)return 11;if(e===ib)return 14}return 2}function hl(e,r){var a=e.alternate;return a===null?(a=bo(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&14680064,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Ug(e,r,a,h,d,x){var E=2;if(h=e,typeof e=="function")Fb(e)&&(E=1);else if(typeof e=="string")E=5;else e:switch(e){case Vu:return Ec(a.children,d,x,r);case rb:E=8,d|=8;break;case E1:return e=bo(12,a,r,d|2),e.elementType=E1,e.lanes=x,e;case T1:return e=bo(13,a,r,d),e.elementType=T1,e.lanes=x,e;case S1:return e=bo(19,a,r,d),e.elementType=S1,e.lanes=x,e;case vC:return K_(a,d,x,r);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _C:E=10;break e;case yC:E=9;break e;case nb:E=11;break e;case ib:E=14;break e;case Xa:E=16,h=null;break e}throw Error(ct(130,e==null?e:typeof e,""))}return r=bo(E,a,r,d),r.elementType=e,r.type=h,r.lanes=x,r}function Ec(e,r,a,h){return e=bo(7,e,h,r),e.lanes=a,e}function K_(e,r,a,h){return e=bo(22,e,h,r),e.elementType=vC,e.lanes=a,e.stateNode={isHidden:!1},e}function $v(e,r,a){return e=bo(6,e,null,r),e.lanes=a,e}function Gv(e,r,a){return r=bo(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function Hz(e,r,a,h,d){this.tag=r,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tv(0),this.expirationTimes=Tv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tv(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Nb(e,r,a,h,d,x,E,s,A){return e=new Hz(e,r,a,s,A),r===1?(r=1,x===!0&&(r|=8)):r=0,x=bo(3,null,null,r),e.current=x,x.stateNode=e,x.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},wb(x),e}function qz(e,r,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uu,key:h==null?null:""+h,children:e,containerInfo:r,implementation:a}}function h3(e){if(!e)return pl;e=e._reactInternals;e:{if(Rc(e)!==e||e.tag!==1)throw Error(ct(170));var r=e;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Vi(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(ct(171))}if(e.tag===1){var a=e.type;if(Vi(a))return uM(e,a,r)}return r}function d3(e,r,a,h,d,x,E,s,A){return e=Nb(a,h,!0,e,d,x,E,s,A),e.context=h3(null),a=e.current,h=wi(),d=ul(a),x=ra(h,d),x.callback=r??null,ll(a,x,d),e.current.lanes=d,pp(e,d,h),$i(e,h),e}function Y_(e,r,a,h){var d=r.current,x=wi(),E=ul(d);return a=h3(a),r.context===null?r.context=a:r.pendingContext=a,r=ra(x,E),r.payload={element:e},h=h===void 0?null:h,h!==null&&(r.callback=h),e=ll(d,r,E),e!==null&&(es(e,d,E,x),Rg(e,d,E)),E}function m_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hS(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function jb(e,r){hS(e,r),(e=e.alternate)&&hS(e,r)}function Wz(){return null}var f3=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ub(e){this._internalRoot=e}Q_.prototype.render=Ub.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(ct(409));Y_(e,r,null,null)};Q_.prototype.unmount=Ub.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;Ic(function(){Y_(null,e,null,null)}),r[ia]=null}};function Q_(e){this._internalRoot=e}Q_.prototype.unstable_scheduleHydration=function(e){if(e){var r=$C();e={blockedOn:null,target:e,priority:r};for(var a=0;a<Qa.length&&r!==0&&r<Qa[a].priority;a++);Qa.splice(a,0,e),a===0&&ZC(e)}};function Vb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function J_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dS(){}function Xz(e,r,a,h,d){if(d){if(typeof h=="function"){var x=h;h=function(){var R=m_(E);x.call(R)}}var E=d3(r,h,e,0,null,!1,!1,"",dS);return e._reactRootContainer=E,e[ia]=E.current,qf(e.nodeType===8?e.parentNode:e),Ic(),E}for(;d=e.lastChild;)e.removeChild(d);if(typeof h=="function"){var s=h;h=function(){var R=m_(A);s.call(R)}}var A=Nb(e,0,!1,null,null,!1,!1,"",dS);return e._reactRootContainer=A,e[ia]=A.current,qf(e.nodeType===8?e.parentNode:e),Ic(function(){Y_(r,A,a,h)}),A}function e0(e,r,a,h,d){var x=a._reactRootContainer;if(x){var E=x;if(typeof d=="function"){var s=d;d=function(){var A=m_(E);s.call(A)}}Y_(r,E,e,d)}else E=Xz(a,r,e,d,h);return m_(E)}UC=function(e){switch(e.tag){case 3:var r=e.stateNode;if(r.current.memoizedState.isDehydrated){var a=Ef(r.pendingLanes);a!==0&&(ab(r,a|1),$i(r,bn()),!(gr&6)&&(_h=bn()+500,vl()))}break;case 13:Ic(function(){var h=oa(e,1);if(h!==null){var d=wi();es(h,e,1,d)}}),jb(e,1)}};lb=function(e){if(e.tag===13){var r=oa(e,134217728);if(r!==null){var a=wi();es(r,e,134217728,a)}jb(e,134217728)}};VC=function(e){if(e.tag===13){var r=ul(e),a=oa(e,r);if(a!==null){var h=wi();es(a,e,r,h)}jb(e,r)}};$C=function(){return zr};GC=function(e,r){var a=zr;try{return zr=e,r()}finally{zr=a}};R1=function(e,r,a){switch(r){case"input":if(M1(e,a),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var h=a[r];if(h!==e&&h.form===e.form){var d=G_(h);if(!d)throw Error(ct(90));bC(h),M1(h,d)}}}break;case"textarea":EC(e,a);break;case"select":r=a.value,r!=null&&th(e,!!a.multiple,r,!1)}};IC=Rb;kC=Ic;var Kz={usingClientEntryPoint:!1,Events:[gp,Hu,G_,MC,PC,Rb]},vf={findFiberByHostInstance:vc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Yz={bundleType:vf.bundleType,version:vf.version,rendererPackageName:vf.rendererPackageName,rendererConfig:vf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:aa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zC(e),e===null?null:e.stateNode},findFiberByHostInstance:vf.findFiberByHostInstance||Wz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_g.isDisabled&&_g.supportsFiber)try{j_=_g.inject(Yz),Ss=_g}catch{}}no.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kz;no.createPortal=function(e,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vb(r))throw Error(ct(200));return qz(e,r,null,a)};no.createRoot=function(e,r){if(!Vb(e))throw Error(ct(299));var a=!1,h="",d=f3;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Nb(e,1,!1,null,null,a,!1,h,d),e[ia]=r.current,qf(e.nodeType===8?e.parentNode:e),new Ub(r)};no.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(ct(188)):(e=Object.keys(e).join(","),Error(ct(268,e)));return e=zC(r),e=e===null?null:e.stateNode,e};no.flushSync=function(e){return Ic(e)};no.hydrate=function(e,r,a){if(!J_(r))throw Error(ct(200));return e0(null,e,r,!0,a)};no.hydrateRoot=function(e,r,a){if(!Vb(e))throw Error(ct(405));var h=a!=null&&a.hydratedSources||null,d=!1,x="",E=f3;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(x=a.identifierPrefix),a.onRecoverableError!==void 0&&(E=a.onRecoverableError)),r=d3(r,null,e,1,a??null,d,!1,x,E),e[ia]=r.current,qf(e),h)for(e=0;e<h.length;e++)a=h[e],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new Q_(r)};no.render=function(e,r,a){if(!J_(r))throw Error(ct(200));return e0(null,e,r,!1,a)};no.unmountComponentAtNode=function(e){if(!J_(e))throw Error(ct(40));return e._reactRootContainer?(Ic(function(){e0(null,null,e,!1,function(){e._reactRootContainer=null,e[ia]=null})}),!0):!1};no.unstable_batchedUpdates=Rb;no.unstable_renderSubtreeIntoContainer=function(e,r,a,h){if(!J_(a))throw Error(ct(200));if(e==null||e._reactInternals===void 0)throw Error(ct(38));return e0(e,r,a,!1,h)};no.version="18.2.0-next-9e3b772b8-20220608";function p3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(p3)}catch(e){console.error(e)}}p3(),dC.exports=no;var $b=dC.exports,fS=$b;b1.createRoot=fS.createRoot,b1.hydrateRoot=fS.hydrateRoot;/**
 * @remix-run/router v1.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rp(){return rp=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},rp.apply(this,arguments)}var rl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(rl||(rl={}));const pS="popstate";function Qz(e){e===void 0&&(e={});function r(h,d){let{pathname:x,search:E,hash:s}=h.location;return px("",{pathname:x,search:E,hash:s},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function a(h,d){return typeof d=="string"?d:g_(d)}return e5(r,a,null,e)}function kn(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Gb(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Jz(){return Math.random().toString(36).substr(2,8)}function mS(e,r){return{usr:e.state,key:e.key,idx:r}}function px(e,r,a,h){return a===void 0&&(a=null),rp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?Ah(r):r,{state:a,key:r&&r.key||h||Jz()})}function g_(e){let{pathname:r="/",search:a="",hash:h=""}=e;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),h&&h!=="#"&&(r+=h.charAt(0)==="#"?h:"#"+h),r}function Ah(e){let r={};if(e){let a=e.indexOf("#");a>=0&&(r.hash=e.substr(a),e=e.substr(0,a));let h=e.indexOf("?");h>=0&&(r.search=e.substr(h),e=e.substr(0,h)),e&&(r.pathname=e)}return r}function e5(e,r,a,h){h===void 0&&(h={});let{window:d=document.defaultView,v5Compat:x=!1}=h,E=d.history,s=rl.Pop,A=null,R=U();R==null&&(R=0,E.replaceState(rp({},E.state,{idx:R}),""));function U(){return(E.state||{idx:null}).idx}function N(){s=rl.Pop;let ve=U(),J=ve==null?null:ve-R;R=ve,A&&A({action:s,location:se.location,delta:J})}function q(ve,J){s=rl.Push;let Z=px(se.location,ve,J);a&&a(Z,ve),R=U()+1;let te=mS(Z,R),Ee=se.createHref(Z);try{E.pushState(te,"",Ee)}catch(ke){if(ke instanceof DOMException&&ke.name==="DataCloneError")throw ke;d.location.assign(Ee)}x&&A&&A({action:s,location:se.location,delta:1})}function fe(ve,J){s=rl.Replace;let Z=px(se.location,ve,J);a&&a(Z,ve),R=U();let te=mS(Z,R),Ee=se.createHref(Z);E.replaceState(te,"",Ee),x&&A&&A({action:s,location:se.location,delta:0})}function ae(ve){let J=d.location.origin!=="null"?d.location.origin:d.location.href,Z=typeof ve=="string"?ve:g_(ve);return kn(J,"No window.location.(origin|href) available to create URL for href: "+Z),new URL(Z,J)}let se={get action(){return s},get location(){return e(d,E)},listen(ve){if(A)throw new Error("A history only accepts one active listener");return d.addEventListener(pS,N),A=ve,()=>{d.removeEventListener(pS,N),A=null}},createHref(ve){return r(d,ve)},createURL:ae,encodeLocation(ve){let J=ae(ve);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:q,replace:fe,go(ve){return E.go(ve)}};return se}var gS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gS||(gS={}));function t5(e,r,a){a===void 0&&(a="/");let h=typeof r=="string"?Ah(r):r,d=Zb(h.pathname||"/",a);if(d==null)return null;let x=m3(e);r5(x);let E=null;for(let s=0;E==null&&s<x.length;++s)E=h5(x[s],p5(d));return E}function m3(e,r,a,h){r===void 0&&(r=[]),a===void 0&&(a=[]),h===void 0&&(h="");let d=(x,E,s)=>{let A={relativePath:s===void 0?x.path||"":s,caseSensitive:x.caseSensitive===!0,childrenIndex:E,route:x};A.relativePath.startsWith("/")&&(kn(A.relativePath.startsWith(h),'Absolute route path "'+A.relativePath+'" nested under path '+('"'+h+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),A.relativePath=A.relativePath.slice(h.length));let R=dl([h,A.relativePath]),U=a.concat(A);x.children&&x.children.length>0&&(kn(x.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+R+'".')),m3(x.children,r,U,R)),!(x.path==null&&!x.index)&&r.push({path:R,score:c5(R,x.index),routesMeta:U})};return e.forEach((x,E)=>{var s;if(x.path===""||!((s=x.path)!=null&&s.includes("?")))d(x,E);else for(let A of g3(x.path))d(x,E,A)}),r}function g3(e){let r=e.split("/");if(r.length===0)return[];let[a,...h]=r,d=a.endsWith("?"),x=a.replace(/\?$/,"");if(h.length===0)return d?[x,""]:[x];let E=g3(h.join("/")),s=[];return s.push(...E.map(A=>A===""?x:[x,A].join("/"))),d&&s.push(...E),s.map(A=>e.startsWith("/")&&A===""?"/":A)}function r5(e){e.sort((r,a)=>r.score!==a.score?a.score-r.score:u5(r.routesMeta.map(h=>h.childrenIndex),a.routesMeta.map(h=>h.childrenIndex)))}const n5=/^:\w+$/,i5=3,o5=2,s5=1,a5=10,l5=-2,_S=e=>e==="*";function c5(e,r){let a=e.split("/"),h=a.length;return a.some(_S)&&(h+=l5),r&&(h+=o5),a.filter(d=>!_S(d)).reduce((d,x)=>d+(n5.test(x)?i5:x===""?s5:a5),h)}function u5(e,r){return e.length===r.length&&e.slice(0,-1).every((h,d)=>h===r[d])?e[e.length-1]-r[r.length-1]:0}function h5(e,r){let{routesMeta:a}=e,h={},d="/",x=[];for(let E=0;E<a.length;++E){let s=a[E],A=E===a.length-1,R=d==="/"?r:r.slice(d.length)||"/",U=d5({path:s.relativePath,caseSensitive:s.caseSensitive,end:A},R);if(!U)return null;Object.assign(h,U.params);let N=s.route;x.push({params:h,pathname:dl([d,U.pathname]),pathnameBase:y5(dl([d,U.pathnameBase])),route:N}),U.pathnameBase!=="/"&&(d=dl([d,U.pathnameBase]))}return x}function d5(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,h]=f5(e.path,e.caseSensitive,e.end),d=r.match(a);if(!d)return null;let x=d[0],E=x.replace(/(.)\/+$/,"$1"),s=d.slice(1);return{params:h.reduce((R,U,N)=>{if(U==="*"){let q=s[N]||"";E=x.slice(0,x.length-q.length).replace(/(.)\/+$/,"$1")}return R[U]=m5(s[N]||"",U),R},{}),pathname:x,pathnameBase:E,pattern:e}}function f5(e,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),Gb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let h=[],d="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(E,s)=>(h.push(s),"/([^\\/]+)"));return e.endsWith("*")?(h.push("*"),d+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?d+="\\/*$":e!==""&&e!=="/"&&(d+="(?:(?=\\/|$))"),[new RegExp(d,r?void 0:"i"),h]}function p5(e){try{return decodeURI(e)}catch(r){return Gb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function m5(e,r){try{return decodeURIComponent(e)}catch(a){return Gb(!1,'The value for the URL param "'+r+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+a+").")),e}}function Zb(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,h=e.charAt(a);return h&&h!=="/"?null:e.slice(a)||"/"}function g5(e,r){r===void 0&&(r="/");let{pathname:a,search:h="",hash:d=""}=typeof e=="string"?Ah(e):e;return{pathname:a?a.startsWith("/")?a:_5(a,r):r,search:v5(h),hash:x5(d)}}function _5(e,r){let a=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(d=>{d===".."?a.length>1&&a.pop():d!=="."&&a.push(d)}),a.length>1?a.join("/"):"/"}function Zv(e,r,a,h){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(h)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _3(e){return e.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function y3(e,r,a,h){h===void 0&&(h=!1);let d;typeof e=="string"?d=Ah(e):(d=rp({},e),kn(!d.pathname||!d.pathname.includes("?"),Zv("?","pathname","search",d)),kn(!d.pathname||!d.pathname.includes("#"),Zv("#","pathname","hash",d)),kn(!d.search||!d.search.includes("#"),Zv("#","search","hash",d)));let x=e===""||d.pathname==="",E=x?"/":d.pathname,s;if(h||E==null)s=a;else{let N=r.length-1;if(E.startsWith("..")){let q=E.split("/");for(;q[0]==="..";)q.shift(),N-=1;d.pathname=q.join("/")}s=N>=0?r[N]:"/"}let A=g5(d,s),R=E&&E!=="/"&&E.endsWith("/"),U=(x||E===".")&&a.endsWith("/");return!A.pathname.endsWith("/")&&(R||U)&&(A.pathname+="/"),A}const dl=e=>e.join("/").replace(/\/\/+/g,"/"),y5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),v5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,x5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function b5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const v3=["post","put","patch","delete"];new Set(v3);const w5=["get",...v3];new Set(w5);/**
 * React Router v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function __(){return __=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},__.apply(this,arguments)}const Hb=Xe.createContext(null),x3=Xe.createContext(null),Dc=Xe.createContext(null),t0=Xe.createContext(null),Bc=Xe.createContext({outlet:null,matches:[],isDataRoute:!1}),b3=Xe.createContext(null);function E5(e,r){let{relative:a}=r===void 0?{}:r;yp()||kn(!1);let{basename:h,navigator:d}=Xe.useContext(Dc),{hash:x,pathname:E,search:s}=qb(e,{relative:a}),A=E;return h!=="/"&&(A=E==="/"?h:dl([h,E])),d.createHref({pathname:A,search:s,hash:x})}function yp(){return Xe.useContext(t0)!=null}function Ch(){return yp()||kn(!1),Xe.useContext(t0).location}function w3(e){Xe.useContext(Dc).static||Xe.useLayoutEffect(e)}function E3(){let{isDataRoute:e}=Xe.useContext(Bc);return e?D5():T5()}function T5(){yp()||kn(!1);let e=Xe.useContext(Hb),{basename:r,navigator:a}=Xe.useContext(Dc),{matches:h}=Xe.useContext(Bc),{pathname:d}=Ch(),x=JSON.stringify(_3(h).map(A=>A.pathnameBase)),E=Xe.useRef(!1);return w3(()=>{E.current=!0}),Xe.useCallback(function(A,R){if(R===void 0&&(R={}),!E.current)return;if(typeof A=="number"){a.go(A);return}let U=y3(A,JSON.parse(x),d,R.relative==="path");e==null&&r!=="/"&&(U.pathname=U.pathname==="/"?r:dl([r,U.pathname])),(R.replace?a.replace:a.push)(U,R.state,R)},[r,a,x,d,e])}function qb(e,r){let{relative:a}=r===void 0?{}:r,{matches:h}=Xe.useContext(Bc),{pathname:d}=Ch(),x=JSON.stringify(_3(h).map(E=>E.pathnameBase));return Xe.useMemo(()=>y3(e,JSON.parse(x),d,a==="path"),[e,x,d,a])}function S5(e,r){return A5(e,r)}function A5(e,r,a){yp()||kn(!1);let{navigator:h}=Xe.useContext(Dc),{matches:d}=Xe.useContext(Bc),x=d[d.length-1],E=x?x.params:{};x&&x.pathname;let s=x?x.pathnameBase:"/";x&&x.route;let A=Ch(),R;if(r){var U;let se=typeof r=="string"?Ah(r):r;s==="/"||(U=se.pathname)!=null&&U.startsWith(s)||kn(!1),R=se}else R=A;let N=R.pathname||"/",q=s==="/"?N:N.slice(s.length)||"/",fe=t5(e,{pathname:q}),ae=k5(fe&&fe.map(se=>Object.assign({},se,{params:Object.assign({},E,se.params),pathname:dl([s,h.encodeLocation?h.encodeLocation(se.pathname).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?s:dl([s,h.encodeLocation?h.encodeLocation(se.pathnameBase).pathname:se.pathnameBase])})),d,a);return r&&ae?Xe.createElement(t0.Provider,{value:{location:__({pathname:"/",search:"",hash:"",state:null,key:"default"},R),navigationType:rl.Pop}},ae):ae}function C5(){let e=R5(),r=b5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,d={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},x=null;return Xe.createElement(Xe.Fragment,null,Xe.createElement("h2",null,"Unexpected Application Error!"),Xe.createElement("h3",{style:{fontStyle:"italic"}},r),a?Xe.createElement("pre",{style:d},a):null,x)}const M5=Xe.createElement(C5,null);class P5 extends Xe.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error||a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error?Xe.createElement(Bc.Provider,{value:this.props.routeContext},Xe.createElement(b3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I5(e){let{routeContext:r,match:a,children:h}=e,d=Xe.useContext(Hb);return d&&d.static&&d.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=a.route.id),Xe.createElement(Bc.Provider,{value:r},h)}function k5(e,r,a){var h;if(r===void 0&&(r=[]),a===void 0&&(a=null),e==null){var d;if((d=a)!=null&&d.errors)e=a.matches;else return null}let x=e,E=(h=a)==null?void 0:h.errors;if(E!=null){let s=x.findIndex(A=>A.route.id&&(E==null?void 0:E[A.route.id]));s>=0||kn(!1),x=x.slice(0,Math.min(x.length,s+1))}return x.reduceRight((s,A,R)=>{let U=A.route.id?E==null?void 0:E[A.route.id]:null,N=null;a&&(N=A.route.errorElement||M5);let q=r.concat(x.slice(0,R+1)),fe=()=>{let ae;return U?ae=N:A.route.Component?ae=Xe.createElement(A.route.Component,null):A.route.element?ae=A.route.element:ae=s,Xe.createElement(I5,{match:A,routeContext:{outlet:s,matches:q,isDataRoute:a!=null},children:ae})};return a&&(A.route.ErrorBoundary||A.route.errorElement||R===0)?Xe.createElement(P5,{location:a.location,revalidation:a.revalidation,component:N,error:U,children:fe(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):fe()},null)}var mx;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(mx||(mx={}));var np;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(np||(np={}));function L5(e){let r=Xe.useContext(Hb);return r||kn(!1),r}function O5(e){let r=Xe.useContext(x3);return r||kn(!1),r}function z5(e){let r=Xe.useContext(Bc);return r||kn(!1),r}function T3(e){let r=z5(),a=r.matches[r.matches.length-1];return a.route.id||kn(!1),a.route.id}function R5(){var e;let r=Xe.useContext(b3),a=O5(np.UseRouteError),h=T3(np.UseRouteError);return r||((e=a.errors)==null?void 0:e[h])}function D5(){let{router:e}=L5(mx.UseNavigateStable),r=T3(np.UseNavigateStable),a=Xe.useRef(!1);return w3(()=>{a.current=!0}),Xe.useCallback(function(d,x){x===void 0&&(x={}),a.current&&(typeof d=="number"?e.navigate(d):e.navigate(d,__({fromRouteId:r},x)))},[e,r])}function Sf(e){kn(!1)}function B5(e){let{basename:r="/",children:a=null,location:h,navigationType:d=rl.Pop,navigator:x,static:E=!1}=e;yp()&&kn(!1);let s=r.replace(/^\/*/,"/"),A=Xe.useMemo(()=>({basename:s,navigator:x,static:E}),[s,x,E]);typeof h=="string"&&(h=Ah(h));let{pathname:R="/",search:U="",hash:N="",state:q=null,key:fe="default"}=h,ae=Xe.useMemo(()=>{let se=Zb(R,s);return se==null?null:{location:{pathname:se,search:U,hash:N,state:q,key:fe},navigationType:d}},[s,R,U,N,q,fe,d]);return ae==null?null:Xe.createElement(Dc.Provider,{value:A},Xe.createElement(t0.Provider,{children:a,value:ae}))}function F5(e){let{children:r,location:a}=e;return S5(gx(r),a)}var yS;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(yS||(yS={}));new Promise(()=>{});function gx(e,r){r===void 0&&(r=[]);let a=[];return Xe.Children.forEach(e,(h,d)=>{if(!Xe.isValidElement(h))return;let x=[...r,d];if(h.type===Xe.Fragment){a.push.apply(a,gx(h.props.children,x));return}h.type!==Sf&&kn(!1),!h.props.index||!h.props.children||kn(!1);let E={id:h.props.id||x.join("-"),caseSensitive:h.props.caseSensitive,element:h.props.element,Component:h.props.Component,index:h.props.index,path:h.props.path,loader:h.props.loader,action:h.props.action,errorElement:h.props.errorElement,ErrorBoundary:h.props.ErrorBoundary,hasErrorBoundary:h.props.ErrorBoundary!=null||h.props.errorElement!=null,shouldRevalidate:h.props.shouldRevalidate,handle:h.props.handle,lazy:h.props.lazy};h.props.children&&(E.children=gx(h.props.children,x)),a.push(E)}),a}/**
 * React Router DOM v6.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function y_(){return y_=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},y_.apply(this,arguments)}function S3(e,r){if(e==null)return{};var a={},h=Object.keys(e),d,x;for(x=0;x<h.length;x++)d=h[x],!(r.indexOf(d)>=0)&&(a[d]=e[d]);return a}function N5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function j5(e,r){return e.button===0&&(!r||r==="_self")&&!N5(e)}const U5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],V5=["aria-current","caseSensitive","className","end","style","to","children"],$5="startTransition",vS=x1[$5];function G5(e){let{basename:r,children:a,future:h,window:d}=e,x=Xe.useRef();x.current==null&&(x.current=Qz({window:d,v5Compat:!0}));let E=x.current,[s,A]=Xe.useState({action:E.action,location:E.location}),{v7_startTransition:R}=h||{},U=Xe.useCallback(N=>{R&&vS?vS(()=>A(N)):A(N)},[A,R]);return Xe.useLayoutEffect(()=>E.listen(U),[E,U]),Xe.createElement(B5,{basename:r,children:a,location:s.location,navigationType:s.action,navigator:E})}const Z5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,A3=Xe.forwardRef(function(r,a){let{onClick:h,relative:d,reloadDocument:x,replace:E,state:s,target:A,to:R,preventScrollReset:U}=r,N=S3(r,U5),{basename:q}=Xe.useContext(Dc),fe,ae=!1;if(typeof R=="string"&&H5.test(R)&&(fe=R,Z5))try{let Z=new URL(window.location.href),te=R.startsWith("//")?new URL(Z.protocol+R):new URL(R),Ee=Zb(te.pathname,q);te.origin===Z.origin&&Ee!=null?R=Ee+te.search+te.hash:ae=!0}catch{}let se=E5(R,{relative:d}),ve=q5(R,{replace:E,state:s,target:A,preventScrollReset:U,relative:d});function J(Z){h&&h(Z),Z.defaultPrevented||ve(Z)}return Xe.createElement("a",y_({},N,{href:fe||se,onClick:ae||x?h:J,ref:a,target:A}))}),xS=Xe.forwardRef(function(r,a){let{"aria-current":h="page",caseSensitive:d=!1,className:x="",end:E=!1,style:s,to:A,children:R}=r,U=S3(r,V5),N=qb(A,{relative:U.relative}),q=Ch(),fe=Xe.useContext(x3),{navigator:ae}=Xe.useContext(Dc),se=ae.encodeLocation?ae.encodeLocation(N).pathname:N.pathname,ve=q.pathname,J=fe&&fe.navigation&&fe.navigation.location?fe.navigation.location.pathname:null;d||(ve=ve.toLowerCase(),J=J?J.toLowerCase():null,se=se.toLowerCase());let Z=ve===se||!E&&ve.startsWith(se)&&ve.charAt(se.length)==="/",te=J!=null&&(J===se||!E&&J.startsWith(se)&&J.charAt(se.length)==="/"),Ee=Z?h:void 0,ke;typeof x=="function"?ke=x({isActive:Z,isPending:te}):ke=[x,Z?"active":null,te?"pending":null].filter(Boolean).join(" ");let Fe=typeof s=="function"?s({isActive:Z,isPending:te}):s;return Xe.createElement(A3,y_({},U,{"aria-current":Ee,className:ke,ref:a,style:Fe,to:A}),typeof R=="function"?R({isActive:Z,isPending:te}):R)});var bS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(bS||(bS={}));var wS;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(wS||(wS={}));function q5(e,r){let{target:a,replace:h,state:d,preventScrollReset:x,relative:E}=r===void 0?{}:r,s=E3(),A=Ch(),R=qb(e,{relative:E});return Xe.useCallback(U=>{if(j5(U,a)){U.preventDefault();let N=h!==void 0?h:g_(A)===g_(R);s(e,{replace:N,state:d,preventScrollReset:x,relative:E})}},[A,s,R,h,d,a,e,x,E])}var vn={},Wb={},vp={},xp={},C3="Expected a function",ES=0/0,W5="[object Symbol]",X5=/^\s+|\s+$/g,K5=/^[-+]0x[0-9a-f]+$/i,Y5=/^0b[01]+$/i,Q5=/^0o[0-7]+$/i,J5=parseInt,e6=typeof bi=="object"&&bi&&bi.Object===Object&&bi,t6=typeof self=="object"&&self&&self.Object===Object&&self,r6=e6||t6||Function("return this")(),n6=Object.prototype,i6=n6.toString,o6=Math.max,s6=Math.min,Hv=function(){return r6.Date.now()};function a6(e,r,a){var h,d,x,E,s,A,R=0,U=!1,N=!1,q=!0;if(typeof e!="function")throw new TypeError(C3);r=TS(r)||0,v_(a)&&(U=!!a.leading,N="maxWait"in a,x=N?o6(TS(a.maxWait)||0,r):x,q="trailing"in a?!!a.trailing:q);function fe(Fe){var We=h,Ve=d;return h=d=void 0,R=Fe,E=e.apply(Ve,We),E}function ae(Fe){return R=Fe,s=setTimeout(J,r),U?fe(Fe):E}function se(Fe){var We=Fe-A,Ve=Fe-R,Te=r-We;return N?s6(Te,x-Ve):Te}function ve(Fe){var We=Fe-A,Ve=Fe-R;return A===void 0||We>=r||We<0||N&&Ve>=x}function J(){var Fe=Hv();if(ve(Fe))return Z(Fe);s=setTimeout(J,se(Fe))}function Z(Fe){return s=void 0,q&&h?fe(Fe):(h=d=void 0,E)}function te(){s!==void 0&&clearTimeout(s),R=0,h=A=d=s=void 0}function Ee(){return s===void 0?E:Z(Hv())}function ke(){var Fe=Hv(),We=ve(Fe);if(h=arguments,d=this,A=Fe,We){if(s===void 0)return ae(A);if(N)return s=setTimeout(J,r),fe(A)}return s===void 0&&(s=setTimeout(J,r)),E}return ke.cancel=te,ke.flush=Ee,ke}function l6(e,r,a){var h=!0,d=!0;if(typeof e!="function")throw new TypeError(C3);return v_(a)&&(h="leading"in a?!!a.leading:h,d="trailing"in a?!!a.trailing:d),a6(e,r,{leading:h,maxWait:r,trailing:d})}function v_(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function c6(e){return!!e&&typeof e=="object"}function u6(e){return typeof e=="symbol"||c6(e)&&i6.call(e)==W5}function TS(e){if(typeof e=="number")return e;if(u6(e))return ES;if(v_(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=v_(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(X5,"");var a=Y5.test(e);return a||Q5.test(e)?J5(e.slice(2),a?2:8):K5.test(e)?ES:+e}var h6=l6,bp={};Object.defineProperty(bp,"__esModule",{value:!0});bp.addPassiveEventListener=function(r,a,h){var d=function(){var x=!1;try{var E=Object.defineProperty({},"passive",{get:function(){x=!0}});window.addEventListener("test",null,E)}catch{}return x}();r.addEventListener(a,h,d?{passive:!0}:!1)};bp.removePassiveEventListener=function(r,a,h){r.removeEventListener(a,h)};Object.defineProperty(xp,"__esModule",{value:!0});var d6=h6,f6=m6(d6),p6=bp;function m6(e){return e&&e.__esModule?e:{default:e}}var g6=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,f6.default)(r,a)},dn={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(r,a){if(r){var h=g6(function(d){dn.scrollHandler(r)},a);dn.scrollSpyContainers.push(r),(0,p6.addPassiveEventListener)(r,"scroll",h)}},isMounted:function(r){return dn.scrollSpyContainers.indexOf(r)!==-1},currentPositionX:function(r){if(r===document){var a=window.pageYOffset!==void 0,h=(document.compatMode||"")==="CSS1Compat";return a?window.pageXOffset:h?document.documentElement.scrollLeft:document.body.scrollLeft}else return r.scrollLeft},currentPositionY:function(r){if(r===document){var a=window.pageXOffset!==void 0,h=(document.compatMode||"")==="CSS1Compat";return a?window.pageYOffset:h?document.documentElement.scrollTop:document.body.scrollTop}else return r.scrollTop},scrollHandler:function(r){var a=dn.scrollSpyContainers[dn.scrollSpyContainers.indexOf(r)].spyCallbacks||[];a.forEach(function(h){return h(dn.currentPositionX(r),dn.currentPositionY(r))})},addStateHandler:function(r){dn.spySetState.push(r)},addSpyHandler:function(r,a){var h=dn.scrollSpyContainers[dn.scrollSpyContainers.indexOf(a)];h.spyCallbacks||(h.spyCallbacks=[]),h.spyCallbacks.push(r),r(dn.currentPositionX(a),dn.currentPositionY(a))},updateStates:function(){dn.spySetState.forEach(function(r){return r()})},unmount:function(r,a){dn.scrollSpyContainers.forEach(function(h){return h.spyCallbacks&&h.spyCallbacks.length&&h.spyCallbacks.indexOf(a)>-1&&h.spyCallbacks.splice(h.spyCallbacks.indexOf(a),1)}),dn.spySetState&&dn.spySetState.length&&dn.spySetState.indexOf(r)>-1&&dn.spySetState.splice(dn.spySetState.indexOf(r),1),document.removeEventListener("scroll",dn.scrollHandler)},update:function(){return dn.scrollSpyContainers.forEach(function(r){return dn.scrollHandler(r)})}};xp.default=dn;var Mh={},wp={};Object.defineProperty(wp,"__esModule",{value:!0});var _6=function(r,a){var h=r.indexOf("#")===0?r.substring(1):r,d=h?"#"+h:"",x=window&&window.location,E=d?x.pathname+x.search+d:x.pathname+x.search;a?history.pushState(history.state,"",E):history.replaceState(history.state,"",E)},y6=function(){return window.location.hash.replace(/^#/,"")},v6=function(r){return function(a){return r.contains?r!=a&&r.contains(a):!!(r.compareDocumentPosition(a)&16)}},x6=function(r){return getComputedStyle(r).position!=="static"},qv=function(r,a){for(var h=r.offsetTop,d=r.offsetParent;d&&!a(d);)h+=d.offsetTop,d=d.offsetParent;return{offsetTop:h,offsetParent:d}},b6=function(r,a,h){if(h)return r===document?a.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(r).position!=="static"?a.offsetLeft:a.offsetLeft-r.offsetLeft;if(r===document)return a.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(x6(r)){if(a.offsetParent!==r){var d=function(U){return U===r||U===document},x=qv(a,d),E=x.offsetTop,s=x.offsetParent;if(s!==r)throw new Error("Seems containerElement is not an ancestor of the Element");return E}return a.offsetTop}if(a.offsetParent===r.offsetParent)return a.offsetTop-r.offsetTop;var A=function(U){return U===document};return qv(a,A).offsetTop-qv(r,A).offsetTop};wp.default={updateHash:_6,getHash:y6,filterElementInContainer:v6,scrollOffset:b6};var r0={},Xb={};Object.defineProperty(Xb,"__esModule",{value:!0});Xb.default={defaultEasing:function(r){return r<.5?Math.pow(r*2,2)/2:1-Math.pow((1-r)*2,2)/2},linear:function(r){return r},easeInQuad:function(r){return r*r},easeOutQuad:function(r){return r*(2-r)},easeInOutQuad:function(r){return r<.5?2*r*r:-1+(4-2*r)*r},easeInCubic:function(r){return r*r*r},easeOutCubic:function(r){return--r*r*r+1},easeInOutCubic:function(r){return r<.5?4*r*r*r:(r-1)*(2*r-2)*(2*r-2)+1},easeInQuart:function(r){return r*r*r*r},easeOutQuart:function(r){return 1- --r*r*r*r},easeInOutQuart:function(r){return r<.5?8*r*r*r*r:1-8*--r*r*r*r},easeInQuint:function(r){return r*r*r*r*r},easeOutQuint:function(r){return 1+--r*r*r*r*r},easeInOutQuint:function(r){return r<.5?16*r*r*r*r*r:1+16*--r*r*r*r*r}};var Kb={};Object.defineProperty(Kb,"__esModule",{value:!0});var w6=bp,E6=["mousedown","mousewheel","touchmove","keydown"];Kb.default={subscribe:function(r){return typeof document<"u"&&E6.forEach(function(a){return(0,w6.addPassiveEventListener)(document,a,r)})}};var Ep={};Object.defineProperty(Ep,"__esModule",{value:!0});var _x={registered:{},scrollEvent:{register:function(r,a){_x.registered[r]=a},remove:function(r){_x.registered[r]=null}}};Ep.default=_x;Object.defineProperty(r0,"__esModule",{value:!0});var T6=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},S6=wp;n0(S6);var A6=Xb,SS=n0(A6),C6=Kb,M6=n0(C6),P6=Ep,bs=n0(P6);function n0(e){return e&&e.__esModule?e:{default:e}}var M3=function(r){return SS.default[r.smooth]||SS.default.defaultEasing},I6=function(r){return typeof r=="function"?r:function(){return r}},k6=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},yx=function(){return k6()||function(e,r,a){window.setTimeout(e,a||1e3/60,new Date().getTime())}}(),P3=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},I3=function(r){var a=r.data.containerElement;if(a&&a!==document&&a!==document.body)return a.scrollLeft;var h=window.pageXOffset!==void 0,d=(document.compatMode||"")==="CSS1Compat";return h?window.pageXOffset:d?document.documentElement.scrollLeft:document.body.scrollLeft},k3=function(r){var a=r.data.containerElement;if(a&&a!==document&&a!==document.body)return a.scrollTop;var h=window.pageXOffset!==void 0,d=(document.compatMode||"")==="CSS1Compat";return h?window.pageYOffset:d?document.documentElement.scrollTop:document.body.scrollTop},L6=function(r){var a=r.data.containerElement;if(a&&a!==document&&a!==document.body)return a.scrollWidth-a.offsetWidth;var h=document.body,d=document.documentElement;return Math.max(h.scrollWidth,h.offsetWidth,d.clientWidth,d.scrollWidth,d.offsetWidth)},O6=function(r){var a=r.data.containerElement;if(a&&a!==document&&a!==document.body)return a.scrollHeight-a.offsetHeight;var h=document.body,d=document.documentElement;return Math.max(h.scrollHeight,h.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight)},z6=function e(r,a,h){var d=a.data;if(!a.ignoreCancelEvents&&d.cancel){bs.default.registered.end&&bs.default.registered.end(d.to,d.target,d.currentPositionY);return}if(d.delta=Math.round(d.targetPosition-d.startPosition),d.start===null&&(d.start=h),d.progress=h-d.start,d.percent=d.progress>=d.duration?1:r(d.progress/d.duration),d.currentPosition=d.startPosition+Math.ceil(d.delta*d.percent),d.containerElement&&d.containerElement!==document&&d.containerElement!==document.body?a.horizontal?d.containerElement.scrollLeft=d.currentPosition:d.containerElement.scrollTop=d.currentPosition:a.horizontal?window.scrollTo(d.currentPosition,0):window.scrollTo(0,d.currentPosition),d.percent<1){var x=e.bind(null,r,a);yx.call(window,x);return}bs.default.registered.end&&bs.default.registered.end(d.to,d.target,d.currentPosition)},Yb=function(r){r.data.containerElement=r?r.containerId?document.getElementById(r.containerId):r.container&&r.container.nodeType?r.container:document:null},Tp=function(r,a,h,d){if(a.data=a.data||P3(),window.clearTimeout(a.data.delayTimeout),M6.default.subscribe(function(){a.data.cancel=!0}),Yb(a),a.data.start=null,a.data.cancel=!1,a.data.startPosition=a.horizontal?I3(a):k3(a),a.data.targetPosition=a.absolute?r:r+a.data.startPosition,a.data.startPosition===a.data.targetPosition){bs.default.registered.end&&bs.default.registered.end(a.data.to,a.data.target,a.data.currentPosition);return}a.data.delta=Math.round(a.data.targetPosition-a.data.startPosition),a.data.duration=I6(a.duration)(a.data.delta),a.data.duration=isNaN(parseFloat(a.data.duration))?1e3:parseFloat(a.data.duration),a.data.to=h,a.data.target=d;var x=M3(a),E=z6.bind(null,x,a);if(a&&a.delay>0){a.data.delayTimeout=window.setTimeout(function(){bs.default.registered.begin&&bs.default.registered.begin(a.data.to,a.data.target),yx.call(window,E)},a.delay);return}bs.default.registered.begin&&bs.default.registered.begin(a.data.to,a.data.target),yx.call(window,E)},i0=function(r){return r=T6({},r),r.data=r.data||P3(),r.absolute=!0,r},R6=function(r){Tp(0,i0(r))},D6=function(r,a){Tp(r,i0(a))},B6=function(r){r=i0(r),Yb(r),Tp(r.horizontal?L6(r):O6(r),r)},F6=function(r,a){a=i0(a),Yb(a);var h=a.horizontal?I3(a):k3(a);Tp(r+h,a)};r0.default={animateTopScroll:Tp,getAnimationType:M3,scrollToTop:R6,scrollToBottom:B6,scrollTo:D6,scrollMore:F6};Object.defineProperty(Mh,"__esModule",{value:!0});var N6=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},j6=wp,U6=Qb(j6),V6=r0,$6=Qb(V6),G6=Ep,yg=Qb(G6);function Qb(e){return e&&e.__esModule?e:{default:e}}var vg={},AS=void 0;Mh.default={unmount:function(){vg={}},register:function(r,a){vg[r]=a},unregister:function(r){delete vg[r]},get:function(r){return vg[r]||document.getElementById(r)||document.getElementsByName(r)[0]||document.getElementsByClassName(r)[0]},setActiveLink:function(r){return AS=r},getActiveLink:function(){return AS},scrollTo:function(r,a){var h=this.get(r);if(!h){console.warn("target Element not found");return}a=N6({},a,{absolute:!1});var d=a.containerId,x=a.container,E=void 0;d?E=document.getElementById(d):x&&x.nodeType?E=x:E=document,a.absolute=!0;var s=a.horizontal,A=U6.default.scrollOffset(E,h,s)+(a.offset||0);if(!a.smooth){yg.default.registered.begin&&yg.default.registered.begin(r,h),E===document?a.horizontal?window.scrollTo(A,0):window.scrollTo(0,A):E.scrollTop=A,yg.default.registered.end&&yg.default.registered.end(r,h);return}$6.default.animateTopScroll(A,a,r,h)}};var L3={exports:{}},Z6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",H6=Z6,q6=H6;function O3(){}function z3(){}z3.resetWarningCache=O3;var W6=function(){function e(h,d,x,E,s,A){if(A!==q6){var R=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw R.name="Invariant Violation",R}}e.isRequired=e;function r(){return e}var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:z3,resetWarningCache:O3};return a.PropTypes=a,a};L3.exports=W6();var Ph=L3.exports,o0={};Object.defineProperty(o0,"__esModule",{value:!0});var X6=wp,Wv=K6(X6);function K6(e){return e&&e.__esModule?e:{default:e}}var Y6={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(r){this.scroller=r,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(r,a){this.containers[r]=a},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var r=this,a=this.getHash();a?window.setTimeout(function(){r.scrollTo(a,!0),r.initialized=!0},10):this.initialized=!0},scrollTo:function(r,a){var h=this.scroller,d=h.get(r);if(d&&(a||r!==h.getActiveLink())){var x=this.containers[r]||document;h.scrollTo(r,{container:x})}},getHash:function(){return Wv.default.getHash()},changeHash:function(r,a){this.isInitialized()&&Wv.default.getHash()!==r&&Wv.default.updateHash(r,a)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};o0.default=Y6;Object.defineProperty(vp,"__esModule",{value:!0});var xg=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},Q6=function(){function e(r,a){for(var h=0;h<a.length;h++){var d=a[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,h){return a&&e(r.prototype,a),h&&e(r,h),r}}(),J6=Xe,CS=Sp(J6),eR=xp,bg=Sp(eR),tR=Mh,rR=Sp(tR),nR=Ph,Qr=Sp(nR),iR=o0,Ha=Sp(iR);function Sp(e){return e&&e.__esModule?e:{default:e}}function oR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function sR(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function aR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var MS={to:Qr.default.string.isRequired,containerId:Qr.default.string,container:Qr.default.object,activeClass:Qr.default.string,activeStyle:Qr.default.object,spy:Qr.default.bool,horizontal:Qr.default.bool,smooth:Qr.default.oneOfType([Qr.default.bool,Qr.default.string]),offset:Qr.default.number,delay:Qr.default.number,isDynamic:Qr.default.bool,onClick:Qr.default.func,duration:Qr.default.oneOfType([Qr.default.number,Qr.default.func]),absolute:Qr.default.bool,onSetActive:Qr.default.func,onSetInactive:Qr.default.func,ignoreCancelEvents:Qr.default.bool,hashSpy:Qr.default.bool,saveHashHistory:Qr.default.bool,spyThrottle:Qr.default.number};vp.default=function(e,r){var a=r||rR.default,h=function(x){aR(E,x);function E(s){oR(this,E);var A=sR(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,s));return d.call(A),A.state={active:!1},A}return Q6(E,[{key:"getScrollSpyContainer",value:function(){var A=this.props.containerId,R=this.props.container;return A&&!R?document.getElementById(A):R&&R.nodeType?R:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var A=this.getScrollSpyContainer();bg.default.isMounted(A)||bg.default.mount(A,this.props.spyThrottle),this.props.hashSpy&&(Ha.default.isMounted()||Ha.default.mount(a),Ha.default.mapContainer(this.props.to,A)),bg.default.addSpyHandler(this.spyHandler,A),this.setState({container:A})}}},{key:"componentWillUnmount",value:function(){bg.default.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var A="";this.state&&this.state.active?A=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():A=this.props.className;var R={};this.state&&this.state.active?R=xg({},this.props.style,this.props.activeStyle):R=xg({},this.props.style);var U=xg({},this.props);for(var N in MS)U.hasOwnProperty(N)&&delete U[N];return U.className=A,U.style=R,U.onClick=this.handleClick,CS.default.createElement(e,U)}}]),E}(CS.default.PureComponent),d=function(){var E=this;this.scrollTo=function(s,A){a.scrollTo(s,xg({},E.state,A))},this.handleClick=function(s){E.props.onClick&&E.props.onClick(s),s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault(),E.scrollTo(E.props.to,E.props)},this.spyHandler=function(s,A){var R=E.getScrollSpyContainer();if(!(Ha.default.isMounted()&&!Ha.default.isInitialized())){var U=E.props.horizontal,N=E.props.to,q=null,fe=void 0,ae=void 0;if(U){var se=0,ve=0,J=0;if(R.getBoundingClientRect){var Z=R.getBoundingClientRect();J=Z.left}if(!q||E.props.isDynamic){if(q=a.get(N),!q)return;var te=q.getBoundingClientRect();se=te.left-J+s,ve=se+te.width}var Ee=s-E.props.offset;fe=Ee>=Math.floor(se)&&Ee<Math.floor(ve),ae=Ee<Math.floor(se)||Ee>=Math.floor(ve)}else{var ke=0,Fe=0,We=0;if(R.getBoundingClientRect){var Ve=R.getBoundingClientRect();We=Ve.top}if(!q||E.props.isDynamic){if(q=a.get(N),!q)return;var Te=q.getBoundingClientRect();ke=Te.top-We+A,Fe=ke+Te.height}var dt=A-E.props.offset;fe=dt>=Math.floor(ke)&&dt<Math.floor(Fe),ae=dt<Math.floor(ke)||dt>=Math.floor(Fe)}var zt=a.getActiveLink();if(ae){if(N===zt&&a.setActiveLink(void 0),E.props.hashSpy&&Ha.default.getHash()===N){var at=E.props.saveHashHistory,vt=at===void 0?!1:at;Ha.default.changeHash("",vt)}E.props.spy&&E.state.active&&(E.setState({active:!1}),E.props.onSetInactive&&E.props.onSetInactive(N,q))}if(fe&&(zt!==N||E.state.active===!1)){a.setActiveLink(N);var Ot=E.props.saveHashHistory,St=Ot===void 0?!1:Ot;E.props.hashSpy&&Ha.default.changeHash(N,St),E.props.spy&&(E.setState({active:!0}),E.props.onSetActive&&E.props.onSetActive(N,q))}}}};return h.propTypes=MS,h.defaultProps={offset:0},h};Object.defineProperty(Wb,"__esModule",{value:!0});var lR=Xe,PS=R3(lR),cR=vp,uR=R3(cR);function R3(e){return e&&e.__esModule?e:{default:e}}function hR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function IS(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function dR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var fR=function(e){dR(r,e);function r(){var a,h,d,x;hR(this,r);for(var E=arguments.length,s=Array(E),A=0;A<E;A++)s[A]=arguments[A];return x=(h=(d=IS(this,(a=r.__proto__||Object.getPrototypeOf(r)).call.apply(a,[this].concat(s))),d),d.render=function(){return PS.default.createElement("a",d.props,d.props.children)},h),IS(d,x)}return r}(PS.default.Component);Wb.default=(0,uR.default)(fR);var Jb={};Object.defineProperty(Jb,"__esModule",{value:!0});var pR=function(){function e(r,a){for(var h=0;h<a.length;h++){var d=a[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,h){return a&&e(r.prototype,a),h&&e(r,h),r}}(),mR=Xe,kS=D3(mR),gR=vp,_R=D3(gR);function D3(e){return e&&e.__esModule?e:{default:e}}function yR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function vR(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function xR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var bR=function(e){xR(r,e);function r(){return yR(this,r),vR(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return pR(r,[{key:"render",value:function(){return kS.default.createElement("input",this.props,this.props.children)}}]),r}(kS.default.Component);Jb.default=(0,_R.default)(bR);var ew={},s0={};Object.defineProperty(s0,"__esModule",{value:!0});var wR=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},ER=function(){function e(r,a){for(var h=0;h<a.length;h++){var d=a[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,h){return a&&e(r.prototype,a),h&&e(r,h),r}}(),TR=Xe,LS=a0(TR),SR=$b;a0(SR);var AR=Mh,OS=a0(AR),CR=Ph,zS=a0(CR);function a0(e){return e&&e.__esModule?e:{default:e}}function MR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function PR(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function IR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}s0.default=function(e){var r=function(a){IR(h,a);function h(d){MR(this,h);var x=PR(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,d));return x.childBindings={domNode:null},x}return ER(h,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(x){this.props.name!==x.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;OS.default.unregister(this.props.name)}},{key:"registerElems",value:function(x){OS.default.register(x,this.childBindings.domNode)}},{key:"render",value:function(){return LS.default.createElement(e,wR({},this.props,{parentBindings:this.childBindings}))}}]),h}(LS.default.Component);return r.propTypes={name:zS.default.string,id:zS.default.string},r};Object.defineProperty(ew,"__esModule",{value:!0});var RS=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},kR=function(){function e(r,a){for(var h=0;h<a.length;h++){var d=a[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,h){return a&&e(r.prototype,a),h&&e(r,h),r}}(),LR=Xe,DS=tw(LR),OR=s0,zR=tw(OR),RR=Ph,BS=tw(RR);function tw(e){return e&&e.__esModule?e:{default:e}}function DR(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function BR(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function FR(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var B3=function(e){FR(r,e);function r(){return DR(this,r),BR(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return kR(r,[{key:"render",value:function(){var h=this,d=RS({},this.props);return d.parentBindings&&delete d.parentBindings,DS.default.createElement("div",RS({},d,{ref:function(E){h.props.parentBindings.domNode=E}}),this.props.children)}}]),r}(DS.default.Component);B3.propTypes={name:BS.default.string,id:BS.default.string};ew.default=(0,zR.default)(B3);var Xv=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},FS=function(){function e(r,a){for(var h=0;h<a.length;h++){var d=a[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,h){return a&&e(r.prototype,a),h&&e(r,h),r}}();function NS(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function jS(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function US(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var wg=Xe,dc=xp,Kv=Mh,fn=Ph,qa=o0,VS={to:fn.string.isRequired,containerId:fn.string,container:fn.object,activeClass:fn.string,spy:fn.bool,smooth:fn.oneOfType([fn.bool,fn.string]),offset:fn.number,delay:fn.number,isDynamic:fn.bool,onClick:fn.func,duration:fn.oneOfType([fn.number,fn.func]),absolute:fn.bool,onSetActive:fn.func,onSetInactive:fn.func,ignoreCancelEvents:fn.bool,hashSpy:fn.bool,spyThrottle:fn.number},NR={Scroll:function(r,a){console.warn("Helpers.Scroll is deprecated since v1.7.0");var h=a||Kv,d=function(E){US(s,E);function s(A){NS(this,s);var R=jS(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,A));return x.call(R),R.state={active:!1},R}return FS(s,[{key:"getScrollSpyContainer",value:function(){var R=this.props.containerId,U=this.props.container;return R?document.getElementById(R):U&&U.nodeType?U:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var R=this.getScrollSpyContainer();dc.isMounted(R)||dc.mount(R,this.props.spyThrottle),this.props.hashSpy&&(qa.isMounted()||qa.mount(h),qa.mapContainer(this.props.to,R)),this.props.spy&&dc.addStateHandler(this.stateHandler),dc.addSpyHandler(this.spyHandler,R),this.setState({container:R})}}},{key:"componentWillUnmount",value:function(){dc.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var R="";this.state&&this.state.active?R=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():R=this.props.className;var U=Xv({},this.props);for(var N in VS)U.hasOwnProperty(N)&&delete U[N];return U.className=R,U.onClick=this.handleClick,wg.createElement(r,U)}}]),s}(wg.Component),x=function(){var s=this;this.scrollTo=function(A,R){h.scrollTo(A,Xv({},s.state,R))},this.handleClick=function(A){s.props.onClick&&s.props.onClick(A),A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault(),s.scrollTo(s.props.to,s.props)},this.stateHandler=function(){h.getActiveLink()!==s.props.to&&(s.state!==null&&s.state.active&&s.props.onSetInactive&&s.props.onSetInactive(),s.setState({active:!1}))},this.spyHandler=function(A){var R=s.getScrollSpyContainer();if(!(qa.isMounted()&&!qa.isInitialized())){var U=s.props.to,N=null,q=0,fe=0,ae=0;if(R.getBoundingClientRect){var se=R.getBoundingClientRect();ae=se.top}if(!N||s.props.isDynamic){if(N=h.get(U),!N)return;var ve=N.getBoundingClientRect();q=ve.top-ae+A,fe=q+ve.height}var J=A-s.props.offset,Z=J>=Math.floor(q)&&J<Math.floor(fe),te=J<Math.floor(q)||J>=Math.floor(fe),Ee=h.getActiveLink();if(te)return U===Ee&&h.setActiveLink(void 0),s.props.hashSpy&&qa.getHash()===U&&qa.changeHash(),s.props.spy&&s.state.active&&(s.setState({active:!1}),s.props.onSetInactive&&s.props.onSetInactive()),dc.updateStates();if(Z&&Ee!==U)return h.setActiveLink(U),s.props.hashSpy&&qa.changeHash(U),s.props.spy&&(s.setState({active:!0}),s.props.onSetActive&&s.props.onSetActive(U)),dc.updateStates()}}};return d.propTypes=VS,d.defaultProps={offset:0},d},Element:function(r){console.warn("Helpers.Element is deprecated since v1.7.0");var a=function(h){US(d,h);function d(x){NS(this,d);var E=jS(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,x));return E.childBindings={domNode:null},E}return FS(d,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(E){this.props.name!==E.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;Kv.unregister(this.props.name)}},{key:"registerElems",value:function(E){Kv.register(E,this.childBindings.domNode)}},{key:"render",value:function(){return wg.createElement(r,Xv({},this.props,{parentBindings:this.childBindings}))}}]),d}(wg.Component);return a.propTypes={name:fn.string,id:fn.string},a}},jR=NR;Object.defineProperty(vn,"__esModule",{value:!0});vn.Helpers=vn.ScrollElement=vn.ScrollLink=W3=vn.animateScroll=vn.scrollSpy=vn.Events=vn.scroller=vn.Element=vn.Button=vn.Link=void 0;var UR=Wb,F3=Ms(UR),VR=Jb,N3=Ms(VR),$R=ew,j3=Ms($R),GR=Mh,U3=Ms(GR),ZR=Ep,V3=Ms(ZR),HR=xp,$3=Ms(HR),qR=r0,G3=Ms(qR),WR=vp,Z3=Ms(WR),XR=s0,H3=Ms(XR),KR=jR,q3=Ms(KR);function Ms(e){return e&&e.__esModule?e:{default:e}}vn.Link=F3.default;vn.Button=N3.default;vn.Element=j3.default;vn.scroller=U3.default;vn.Events=V3.default;vn.scrollSpy=$3.default;var W3=vn.animateScroll=G3.default;vn.ScrollLink=Z3.default;vn.ScrollElement=H3.default;vn.Helpers=q3.default;vn.default={Link:F3.default,Button:N3.default,Element:j3.default,scroller:U3.default,Events:V3.default,scrollSpy:$3.default,animateScroll:G3.default,ScrollLink:Z3.default,ScrollElement:H3.default,Helpers:q3.default};const kc=({className:e,image:r,alt:a,objectCover:h,as:d,...x})=>{const E=d||"div";return we.jsx(E,{className:e,...x,children:we.jsx("img",{src:r,alt:a,className:`w-full h-full ${h}`})})},Lc=({className:e,children:r,...a})=>we.jsx("button",{...a,className:e,children:r}),vx="/assets/tree-logo-40169a3c.png",$S=[{name:"Home",url:"/"},{name:"Adopt",url:"/adopt-a-tree"},{name:"Buy",url:"/buy-a-tree"},{name:"Plant",url:"/plant-a-tree"}],GS=[{name:"Login",url:"/login"},{name:"Signup",url:"/signup"}],Eg={firstText:"ADOPT, BUY, PLANT TREES IN KENYA",secondText:"Make a difference for the environment and your community.",thirdText:"Join us in our mission to promote sustainable living and preserve the natural beauty of Kenya. Adopt a tree, buy a tree, and contribute to a greener future.",firstButton:"Adopt a Tree",secondButton:"Get Started"},Yv={firstText:"OUR SERVICES",secondText:"Discover the Services We Offer",cards:[{firstText:"Tree Adoption",secondText:"Adopt a tree and contribute to the conservation of Kenya's diverse ecosystems."},{firstText:"Tree Purchase",secondText:"Buy a tree and support sustainable forestry practices."},{firstText:"Tree Planting Events",secondText:"Participate in our tree planting events and make a hands-on impact on the environment."},{firstText:"Customized Tree Programs",secondText:"Explore customized tree programs tailored to your environmental goals."}]},ZS={firstText:"FEATURED TREES",secondText:"Explore Our Top Trees in Kenya",cards:[{country:"Acacia Tree",price:"500 KES",duration:"Adopt and nurture for a lifetime"},{country:"Baobab Tree",price:"1,000 KES",duration:"Buy and contribute to reforestation"},{country:"Jacaranda Tree",price:"800 KES",duration:"Plant in community events and beautify the surroundings"},{country:"Mango Tree",price:"700 KES",duration:"Adopt for sustainable fruit production"},{country:"Indigenous Cedar",price:"1,500 KES",duration:"Buy and protect Kenya's native tree species"},{country:"Eucalyptus Tree",price:"600 KES",duration:"Plant in designated areas for environmental benefits"}]},Wo={firstText:"Adopt, Buy, and Plant Your Tree",secondText:"Adopt and Plant a tree in 3 easy steps",listOfSteps:[{text:"On Adopt, click on a location on the map where you want to plant a tree."},{text:"Next Click on Buy tree and select a tree you would like to Plant."},{text:"Complete the payment process to make the tree yours and it will be planted for you to contribute to a greener world."}],cardOne:{name:"Adopt-a-Tree Program",date:"Available year-round  |  by Your Name",people:"Join others in adopting and planting trees for a sustainable future."},cardTwo:{status:"Available",destination:"Buy a Tree Now",completion:"Start your journey to a greener world."}},Qv={firstText:"TREE TESTIMONIALS",secondText:"What people say about our Green Initiatives.",feedBacks:[{text:"The Adopt-a-Tree program is fantastic! I adopted a tree, and it was a seamless experience. Kudos to the team for this eco-friendly initiative.",person:"Sarah Johnson",location:"New York, USA"},{text:"Buying a tree from here was the best decision. The tree arrived healthy and vibrant. I feel proud to contribute to the environment.",person:"John Smith",location:"London, UK"},{text:"Planting instructions were easy to follow. My tree is thriving, and I'm excited to see it grow. Thanks for promoting sustainability!",person:"Anna Garcia",location:"Sydney, Australia"}]},xx={firstText:"Subscribe to receive updates, eco-friendly tips, and special offers on our tree adoption and buying programs.",placeholderText:"Your email",buttonText:"Subscribe"},Jv={underLogoText:"Adopt, Buy, and Plant - Your contribution to a greener planet.",quickLinks:{caption:"Quick Links",links:[{name:"Adopt-a-Tree",url:"/adopt-a-tree"},{name:"Buy a Tree",url:"/buy-a-tree"},{name:"Buy Trees",url:"/buy-a-tree"}]}},Ju=({className:e,children:r,...a})=>we.jsx(we.Fragment,{children:we.jsx("li",{className:e,...a,children:r})}),YR=Xe.createContext({color:"currentColor",size:"1em",weight:"regular",mirrored:!1});var QR=Object.defineProperty,x_=Object.getOwnPropertySymbols,X3=Object.prototype.hasOwnProperty,K3=Object.prototype.propertyIsEnumerable,HS=(e,r,a)=>r in e?QR(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,qS=(e,r)=>{for(var a in r||(r={}))X3.call(r,a)&&HS(e,a,r[a]);if(x_)for(var a of x_(r))K3.call(r,a)&&HS(e,a,r[a]);return e},WS=(e,r)=>{var a={};for(var h in e)X3.call(e,h)&&r.indexOf(h)<0&&(a[h]=e[h]);if(e!=null&&x_)for(var h of x_(e))r.indexOf(h)<0&&K3.call(e,h)&&(a[h]=e[h]);return a};const la=Xe.forwardRef((e,r)=>{const a=e,{alt:h,color:d,size:x,weight:E,mirrored:s,children:A,weights:R}=a,U=WS(a,["alt","color","size","weight","mirrored","children","weights"]),N=Xe.useContext(YR),{color:q="currentColor",size:fe,weight:ae="regular",mirrored:se=!1}=N,ve=WS(N,["color","size","weight","mirrored"]);return ze.createElement("svg",qS(qS({ref:r,xmlns:"http://www.w3.org/2000/svg",width:x??fe,height:x??fe,fill:d??q,viewBox:"0 0 256 256",transform:s||se?"scale(-1, 1)":void 0},ve),U),!!h&&ze.createElement("title",null,h),A,R.get(E??ae))});la.displayName="IconBase";var JR=Object.defineProperty,eD=Object.defineProperties,tD=Object.getOwnPropertyDescriptors,XS=Object.getOwnPropertySymbols,rD=Object.prototype.hasOwnProperty,nD=Object.prototype.propertyIsEnumerable,KS=(e,r,a)=>r in e?JR(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,iD=(e,r)=>{for(var a in r||(r={}))rD.call(r,a)&&KS(e,a,r[a]);if(XS)for(var a of XS(r))nD.call(r,a)&&KS(e,a,r[a]);return e},oD=(e,r)=>eD(e,tD(r));const sD=new Map([["bold",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M128,20A108,108,0,1,0,236,128,108.12,108.12,0,0,0,128,20Zm0,192a84,84,0,1,1,84-84A84.09,84.09,0,0,1,128,212Zm48.49-92.49a12,12,0,0,1,0,17l-32,32a12,12,0,1,1-17-17L139,140H88a12,12,0,0,1,0-24h51l-11.52-11.51a12,12,0,1,1,17-17Z"}))],["duotone",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M224,128a96,96,0,1,1-96-96A96,96,0,0,1,224,128Z",opacity:"0.2"}),ze.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm45.66-93.66a8,8,0,0,1,0,11.32l-32,32a8,8,0,0,1-11.32-11.32L148.69,136H88a8,8,0,0,1,0-16h60.69l-18.35-18.34a8,8,0,0,1,11.32-11.32Z"}))],["fill",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm45.66,109.66-32,32a8,8,0,0,1-11.32-11.32L148.69,136H88a8,8,0,0,1,0-16h60.69l-18.35-18.34a8,8,0,0,1,11.32-11.32l32,32A8,8,0,0,1,173.66,133.66Z"}))],["light",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M128,26A102,102,0,1,0,230,128,102.12,102.12,0,0,0,128,26Zm0,192a90,90,0,1,1,90-90A90.1,90.1,0,0,1,128,218Zm44.24-94.24a6,6,0,0,1,0,8.48l-32,32a6,6,0,0,1-8.48-8.48L153.51,134H88a6,6,0,0,1,0-12h65.51l-21.75-21.76a6,6,0,0,1,8.48-8.48Z"}))],["regular",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm45.66-93.66a8,8,0,0,1,0,11.32l-32,32a8,8,0,0,1-11.32-11.32L148.69,136H88a8,8,0,0,1,0-16h60.69l-18.35-18.34a8,8,0,0,1,11.32-11.32Z"}))],["thin",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M128,28A100,100,0,1,0,228,128,100.11,100.11,0,0,0,128,28Zm0,192a92,92,0,1,1,92-92A92.1,92.1,0,0,1,128,220Zm42.83-94.83a4,4,0,0,1,0,5.66l-32,32a4,4,0,0,1-5.66-5.66L158.34,132H88a4,4,0,0,1,0-8h70.34L133.17,98.83a4,4,0,0,1,5.66-5.66Z"}))]]),Y3=Xe.forwardRef((e,r)=>ze.createElement(la,oD(iD({ref:r},e),{weights:sD})));Y3.displayName="ArrowCircleRight";var aD=Object.defineProperty,lD=Object.defineProperties,cD=Object.getOwnPropertyDescriptors,YS=Object.getOwnPropertySymbols,uD=Object.prototype.hasOwnProperty,hD=Object.prototype.propertyIsEnumerable,QS=(e,r,a)=>r in e?aD(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,dD=(e,r)=>{for(var a in r||(r={}))uD.call(r,a)&&QS(e,a,r[a]);if(YS)for(var a of YS(r))hD.call(r,a)&&QS(e,a,r[a]);return e},fD=(e,r)=>lD(e,cD(r));const pD=new Map([["bold",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"}))],["duotone",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M208,96l-80,80L48,96Z",opacity:"0.2"}),ze.createElement("path",{d:"M215.39,92.94A8,8,0,0,0,208,88H48a8,8,0,0,0-5.66,13.66l80,80a8,8,0,0,0,11.32,0l80-80A8,8,0,0,0,215.39,92.94ZM128,164.69,67.31,104H188.69Z"}))],["fill",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,48,88H208a8,8,0,0,1,5.66,13.66Z"}))],["light",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M212.24,100.24l-80,80a6,6,0,0,1-8.48,0l-80-80a6,6,0,0,1,8.48-8.48L128,167.51l75.76-75.75a6,6,0,0,1,8.48,8.48Z"}))],["regular",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"}))],["thin",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M210.83,98.83l-80,80a4,4,0,0,1-5.66,0l-80-80a4,4,0,0,1,5.66-5.66L128,170.34l77.17-77.17a4,4,0,1,1,5.66,5.66Z"}))]]),Q3=Xe.forwardRef((e,r)=>ze.createElement(la,fD(dD({ref:r},e),{weights:pD})));Q3.displayName="CaretDown";var mD=Object.defineProperty,gD=Object.defineProperties,_D=Object.getOwnPropertyDescriptors,JS=Object.getOwnPropertySymbols,yD=Object.prototype.hasOwnProperty,vD=Object.prototype.propertyIsEnumerable,eA=(e,r,a)=>r in e?mD(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,xD=(e,r)=>{for(var a in r||(r={}))yD.call(r,a)&&eA(e,a,r[a]);if(JS)for(var a of JS(r))vD.call(r,a)&&eA(e,a,r[a]);return e},bD=(e,r)=>gD(e,_D(r));const wD=new Map([["bold",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M216.49,168.49a12,12,0,0,1-17,0L128,97,56.49,168.49a12,12,0,0,1-17-17l80-80a12,12,0,0,1,17,0l80,80A12,12,0,0,1,216.49,168.49Z"}))],["duotone",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M208,160H48l80-80Z",opacity:"0.2"}),ze.createElement("path",{d:"M213.66,154.34l-80-80a8,8,0,0,0-11.32,0l-80,80A8,8,0,0,0,48,168H208a8,8,0,0,0,5.66-13.66ZM67.31,152,128,91.31,188.69,152Z"}))],["fill",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M215.39,163.06A8,8,0,0,1,208,168H48a8,8,0,0,1-5.66-13.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,215.39,163.06Z"}))],["light",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M212.24,164.24a6,6,0,0,1-8.48,0L128,88.49,52.24,164.24a6,6,0,0,1-8.48-8.48l80-80a6,6,0,0,1,8.48,0l80,80A6,6,0,0,1,212.24,164.24Z"}))],["regular",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M213.66,165.66a8,8,0,0,1-11.32,0L128,91.31,53.66,165.66a8,8,0,0,1-11.32-11.32l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,213.66,165.66Z"}))],["thin",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M210.83,162.83a4,4,0,0,1-5.66,0L128,85.66,50.83,162.83a4,4,0,0,1-5.66-5.66l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,210.83,162.83Z"}))]]),J3=Xe.forwardRef((e,r)=>ze.createElement(la,bD(xD({ref:r},e),{weights:wD})));J3.displayName="CaretUp";var ED=Object.defineProperty,TD=Object.defineProperties,SD=Object.getOwnPropertyDescriptors,tA=Object.getOwnPropertySymbols,AD=Object.prototype.hasOwnProperty,CD=Object.prototype.propertyIsEnumerable,rA=(e,r,a)=>r in e?ED(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,MD=(e,r)=>{for(var a in r||(r={}))AD.call(r,a)&&rA(e,a,r[a]);if(tA)for(var a of tA(r))CD.call(r,a)&&rA(e,a,r[a]);return e},PD=(e,r)=>TD(e,SD(r));const ID=new Map([["bold",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M224,44H32A12,12,0,0,0,20,56V192a20,20,0,0,0,20,20H216a20,20,0,0,0,20-20V56A12,12,0,0,0,224,44Zm-96,83.72L62.85,68h130.3ZM92.79,128,44,172.72V83.28Zm17.76,16.28,9.34,8.57a12,12,0,0,0,16.22,0l9.34-8.57L193.15,188H62.85ZM163.21,128,212,83.28v89.44Z"}))],["duotone",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M224,56l-96,88L32,56Z",opacity:"0.2"}),ze.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"}))],["fill",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"}))],["light",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M224,50H32a6,6,0,0,0-6,6V192a14,14,0,0,0,14,14H216a14,14,0,0,0,14-14V56A6,6,0,0,0,224,50Zm-96,85.86L47.42,62H208.58ZM101.67,128,38,186.36V69.64Zm8.88,8.14L124,148.42a6,6,0,0,0,8.1,0l13.4-12.28L208.58,194H47.43ZM154.33,128,218,69.64V186.36Z"}))],["regular",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M224,48H32a8,8,0,0,0-8,8V192a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A8,8,0,0,0,224,48Zm-96,85.15L52.57,64H203.43ZM98.71,128,40,181.81V74.19Zm11.84,10.85,12,11.05a8,8,0,0,0,10.82,0l12-11.05,58,53.15H52.57ZM157.29,128,216,74.18V181.82Z"}))],["thin",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M224,52H32a4,4,0,0,0-4,4V192a12,12,0,0,0,12,12H216a12,12,0,0,0,12-12V56A4,4,0,0,0,224,52Zm-96,86.57L42.28,60H213.72ZM104.63,128,36,190.91V65.09Zm5.92,5.43L125.3,147a4,4,0,0,0,5.4,0l14.75-13.52L213.72,196H42.28ZM151.37,128,220,65.09V190.91Z"}))]]),eP=Xe.forwardRef((e,r)=>ze.createElement(la,PD(MD({ref:r},e),{weights:ID})));eP.displayName="Envelope";var kD=Object.defineProperty,LD=Object.defineProperties,OD=Object.getOwnPropertyDescriptors,nA=Object.getOwnPropertySymbols,zD=Object.prototype.hasOwnProperty,RD=Object.prototype.propertyIsEnumerable,iA=(e,r,a)=>r in e?kD(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,DD=(e,r)=>{for(var a in r||(r={}))zD.call(r,a)&&iA(e,a,r[a]);if(nA)for(var a of nA(r))RD.call(r,a)&&iA(e,a,r[a]);return e},BD=(e,r)=>LD(e,OD(r));const FD=new Map([["bold",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M201.18,59.63a80,80,0,0,0-146.36,0A76.29,76.29,0,0,0,12,127.79c-.11,41,33.1,75.15,74,76.19a75.84,75.84,0,0,0,30-5.31V232a12,12,0,0,0,24,0V198.67A75.79,75.79,0,0,0,168,204l2,0c40.94-1,74.15-35.22,74-76.19A76.29,76.29,0,0,0,201.18,59.63ZM169.35,180A51.51,51.51,0,0,1,140,171.8V135.42l41.37-20.69a12,12,0,1,0-10.74-21.46L140,108.58V88a12,12,0,0,0-24,0v44.58L85.37,117.27a12,12,0,0,0-10.74,21.46L116,159.42V171.8A51.43,51.43,0,0,1,86.65,180,52,52,0,0,1,66.27,80.76,20,20,0,0,0,76.34,70.34a56,56,0,0,1,103.32,0,20,20,0,0,0,10.07,10.42A52,52,0,0,1,169.35,180Z"}))],["duotone",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M232,127.82a64,64,0,0,1-99.52,53.41,8,8,0,0,0-9,0A64,64,0,1,1,61.25,69.86a8,8,0,0,0,4-4.17,68,68,0,0,1,125.44,0,8,8,0,0,0,4,4.17A64,64,0,0,1,232,127.82Z",opacity:"0.2"}),ze.createElement("path",{d:"M198.1,62.6a76,76,0,0,0-140.2,0A72.29,72.29,0,0,0,16,127.8C15.89,166.62,47.36,199,86.14,200A71.68,71.68,0,0,0,120,192.49V232a8,8,0,0,0,16,0V192.49A71.45,71.45,0,0,0,168,200l1.86,0c38.78-1,70.25-33.36,70.14-72.18A72.26,72.26,0,0,0,198.1,62.6ZM169.45,184a55.7,55.7,0,0,1-32.52-9.4q-.47-.3-.93-.57V132.94l43.58-21.78a8,8,0,1,0-7.16-14.32L136,115.06V88a8,8,0,0,0-16,0v51.06L83.58,120.84a8,8,0,1,0-7.16,14.32L120,156.94V174c-.31.18-.62.37-.92.57A55.73,55.73,0,0,1,86.55,184a56,56,0,0,1-22-106.86,15.9,15.9,0,0,0,8.05-8.33,60,60,0,0,1,110.7,0,15.9,15.9,0,0,0,8.05,8.33,56,56,0,0,1-22,106.86Z"}))],["fill",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M128,187.88s0,0-.06,0a71.3,71.3,0,0,1-8,4.61V232a8,8,0,0,0,16,0V192.49a71.3,71.3,0,0,1-8-4.61Z"}),ze.createElement("path",{d:"M198.1,62.6a76,76,0,0,0-140.2,0A72.29,72.29,0,0,0,16,127.8C15.89,166.62,47.36,199,86.14,200A71.68,71.68,0,0,0,120,192.49V156.94L76.42,135.16a8,8,0,1,1,7.16-14.32L120,139.06V88a8,8,0,0,1,16,0v27.06l36.42-18.22a8,8,0,1,1,7.16,14.32L136,132.94v59.55A71.45,71.45,0,0,0,168,200l1.86,0c38.78-1,70.25-33.36,70.14-72.18A72.26,72.26,0,0,0,198.1,62.6Z"}))],["light",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M197.26,64.41a2,2,0,0,1-1-1,74,74,0,0,0-136.52,0,2,2,0,0,1-1,1A70.25,70.25,0,0,0,18,127.8C17.9,165.54,48.49,197,86.2,198a69.4,69.4,0,0,0,35.8-8.8V232a6,6,0,0,0,12,0V189.18A69.54,69.54,0,0,0,168,198l1.81,0c37.7-1,68.29-32.44,68.19-70.18A70.27,70.27,0,0,0,197.26,64.41ZM169.5,186a57.58,57.58,0,0,1-33.69-9.74,14.77,14.77,0,0,0-1.81-1v-43.5l44.68-22.34a6,6,0,1,0-5.36-10.74L134,118.29V88a6,6,0,0,0-12,0v54.29L82.68,122.63a6,6,0,0,0-5.36,10.74L122,155.71v19.5a14.77,14.77,0,0,0-1.81,1A57.51,57.51,0,0,1,86.5,186,58,58,0,0,1,63.76,75.31,14,14,0,0,0,70.81,68a62,62,0,0,1,114.38,0,14,14,0,0,0,7.05,7.29A58,58,0,0,1,169.5,186Z"}))],["regular",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M198.1,62.6a76,76,0,0,0-140.2,0A72.27,72.27,0,0,0,16,127.8C15.89,166.62,47.36,199,86.14,200A71.68,71.68,0,0,0,120,192.49V232a8,8,0,0,0,16,0V192.49A71.45,71.45,0,0,0,168,200l1.86,0c38.78-1,70.25-33.36,70.14-72.18A72.26,72.26,0,0,0,198.1,62.6ZM169.45,184a55.61,55.61,0,0,1-32.52-9.4q-.47-.3-.93-.57V132.94l43.58-21.78a8,8,0,1,0-7.16-14.32L136,115.06V88a8,8,0,0,0-16,0v51.06L83.58,120.84a8,8,0,1,0-7.16,14.32L120,156.94V174q-.47.27-.93.57A55.7,55.7,0,0,1,86.55,184a56,56,0,0,1-22-106.86,15.9,15.9,0,0,0,8.05-8.33,60,60,0,0,1,110.7,0,15.9,15.9,0,0,0,8.05,8.33,56,56,0,0,1-22,106.86Z"}))],["thin",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M196.42,66.23a4,4,0,0,1-2-2.09,72,72,0,0,0-132.82,0,4,4,0,0,1-2,2.09A68.23,68.23,0,0,0,20,127.81c-.1,36.66,29.62,67.24,66.25,68.17A67.74,67.74,0,0,0,124,185.67V232a4,4,0,0,0,8,0V185.67A67.47,67.47,0,0,0,168,196l1.76,0c36.62-.93,66.34-31.51,66.24-68.17A68.23,68.23,0,0,0,196.42,66.23ZM169.55,188A59.43,59.43,0,0,1,134.7,177.9a12.39,12.39,0,0,0-2.7-1.35V130.47l45.79-22.89a4,4,0,1,0-3.58-7.16L132,121.53V88a4,4,0,0,0-8,0v57.53L81.79,124.42a4,4,0,1,0-3.58,7.16L124,154.47v22.08a12.39,12.39,0,0,0-2.7,1.35A59.36,59.36,0,0,1,86.45,188,60,60,0,0,1,62.93,73.49a11.92,11.92,0,0,0,6-6.25,64,64,0,0,1,118.08,0,11.92,11.92,0,0,0,6,6.25A60,60,0,0,1,169.55,188Z"}))]]),bx=Xe.forwardRef((e,r)=>ze.createElement(la,BD(DD({ref:r},e),{weights:FD})));bx.displayName="Tree";var ND=Object.defineProperty,jD=Object.defineProperties,UD=Object.getOwnPropertyDescriptors,oA=Object.getOwnPropertySymbols,VD=Object.prototype.hasOwnProperty,$D=Object.prototype.propertyIsEnumerable,sA=(e,r,a)=>r in e?ND(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,GD=(e,r)=>{for(var a in r||(r={}))VD.call(r,a)&&sA(e,a,r[a]);if(oA)for(var a of oA(r))$D.call(r,a)&&sA(e,a,r[a]);return e},ZD=(e,r)=>jD(e,UD(r));const HD=new Map([["bold",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M233.47,184.63,192.54,132H208a12,12,0,0,0,9.51-19.32l-80-104a12,12,0,0,0-19,0l-80,104A12,12,0,0,0,48,132H63.46L22.53,184.63A12,12,0,0,0,32,204h84v36a12,12,0,0,0,24,0V204h84a12,12,0,0,0,9.47-19.37ZM56.54,180l40.93-52.63A12,12,0,0,0,88,108H72.37L128,35.68,183.63,108H168a12,12,0,0,0-9.47,19.37L199.46,180Z"}))],["duotone",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M32,192l56-72H48L128,16l80,104H168l56,72Z",opacity:"0.2"}),ze.createElement("path",{d:"M230.31,187.09,184.36,128H208a8,8,0,0,0,6.34-12.88l-80-104a8,8,0,0,0-12.68,0l-80,104A8,8,0,0,0,48,128H71.64L25.69,187.09A8,8,0,0,0,32,200h88v40a8,8,0,0,0,16,0V200h88a8,8,0,0,0,6.31-12.91ZM48.36,184l46-59.09A8,8,0,0,0,88,112H64.25L128,29.12,191.75,112H168a8,8,0,0,0-6.31,12.91L207.64,184Z"}))],["fill",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M231.19,195.51A8,8,0,0,1,224,200H136v40a8,8,0,0,1-16,0V200H32a8,8,0,0,1-6.31-12.91l46-59.09H48a8,8,0,0,1-6.34-12.88l80-104a8,8,0,0,1,12.68,0l80,104A8,8,0,0,1,208,128H184.36l45.95,59.09A8,8,0,0,1,231.19,195.51Z"}))],["light",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M228.74,188.32,180.27,126H208a6,6,0,0,0,4.76-9.66l-80-104a6,6,0,0,0-9.52,0l-80,104A6,6,0,0,0,48,126H75.73L27.26,188.32A6,6,0,0,0,32,198h90v42a6,6,0,0,0,12,0V198h90a6,6,0,0,0,4.74-9.68ZM44.27,186l48.47-62.32A6,6,0,0,0,88,114H60.19L128,25.84,195.81,114H168a6,6,0,0,0-4.74,9.68L211.73,186Z"}))],["regular",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M230.32,187.09l-46-59.09H208a8,8,0,0,0,6.34-12.88l-80-104a8,8,0,0,0-12.68,0l-80,104A8,8,0,0,0,48,128H71.64l-46,59.09A8,8,0,0,0,32,200h88v40a8,8,0,0,0,16,0V200h88a8,8,0,0,0,6.32-12.91ZM48.36,184l46-59.09A8,8,0,0,0,88,112H64.25L128,29.12,191.75,112H168a8,8,0,0,0-6.31,12.91L207.64,184Z"}))],["thin",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M227.16,189.54l-51-65.54H208a4,4,0,0,0,3.17-6.44l-80-104a4,4,0,0,0-6.34,0l-80,104A4,4,0,0,0,48,124H79.82l-51,65.54A4,4,0,0,0,32,196h92v44a4,4,0,0,0,8,0V196h92a4,4,0,0,0,3.16-6.46ZM40.18,188l51-65.54A4,4,0,0,0,88,116H56.12L128,22.56,199.88,116H168a4,4,0,0,0-3.16,6.46l51,65.54Z"}))]]),wx=Xe.forwardRef((e,r)=>ze.createElement(la,ZD(GD({ref:r},e),{weights:HD})));wx.displayName="TreeEvergreen";var qD=Object.defineProperty,WD=Object.defineProperties,XD=Object.getOwnPropertyDescriptors,aA=Object.getOwnPropertySymbols,KD=Object.prototype.hasOwnProperty,YD=Object.prototype.propertyIsEnumerable,lA=(e,r,a)=>r in e?qD(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,QD=(e,r)=>{for(var a in r||(r={}))KD.call(r,a)&&lA(e,a,r[a]);if(aA)for(var a of aA(r))YD.call(r,a)&&lA(e,a,r[a]);return e},JD=(e,r)=>WD(e,XD(r));const e8=new Map([["bold",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M240.69,50.47a70.87,70.87,0,0,0-103.54,0A76.58,76.58,0,0,0,128,62.19a76.58,76.58,0,0,0-9.15-11.72,70.87,70.87,0,0,0-103.54,0,12,12,0,0,0,3.9,19.28L66,90.12a75.45,75.45,0,0,0-43.43,89,12,12,0,0,0,18.85,6.41L116,128.75V224a12,12,0,0,0,24,0V128.75l74.54,56.79a12,12,0,0,0,18.85-6.41,75.45,75.45,0,0,0-43.43-89l46.83-20.37a12,12,0,0,0,3.9-19.28ZM67.08,52a47.16,47.16,0,0,1,34.38,15A52.41,52.41,0,0,1,112.3,84.08L48,56.1A46.28,46.28,0,0,1,67.08,52ZM44.39,153.15a51.72,51.72,0,0,1,38.14-43.38A52.83,52.83,0,0,1,96.09,108a50.4,50.4,0,0,1,7,.47ZM205,133.81a51.14,51.14,0,0,1,6.57,19.34L153,108.46a52.21,52.21,0,0,1,20.51,1.31A51.61,51.61,0,0,1,205,133.81ZM143.7,84.08A52.41,52.41,0,0,1,154.54,67a47.16,47.16,0,0,1,34.38-15A46.28,46.28,0,0,1,208,56.1Z"}))],["duotone",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M232,58.75,128,104a65.47,65.47,0,0,1,17.84-45.25,58.87,58.87,0,0,1,86.16,0ZM176.56,98.18A64.2,64.2,0,0,0,128,104.52L221.81,176a63,63,0,0,0-6.39-48.22A63.73,63.73,0,0,0,176.56,98.18Zm-66.4-39.43a58.87,58.87,0,0,0-86.16,0L128,104A65.47,65.47,0,0,0,110.16,58.75ZM79.44,98.18a63.73,63.73,0,0,0-38.86,29.6A63,63,0,0,0,34.19,176L128,104.52A64.2,64.2,0,0,0,79.44,98.18Z",opacity:"0.2"}),ze.createElement("path",{d:"M237.79,53.23a66.86,66.86,0,0,0-97.74,0,72.21,72.21,0,0,0-12.05,17,72.21,72.21,0,0,0-12-17,66.86,66.86,0,0,0-97.74,0,8,8,0,0,0,2.6,12.85L77,90.55a71.42,71.42,0,0,0-43.36,33.21,70.64,70.64,0,0,0-7.2,54.32A8,8,0,0,0,39,182.36l81-61.68V224a8,8,0,0,0,16,0V120.68l81,61.68a8,8,0,0,0,12.57-4.28,70.64,70.64,0,0,0-7.2-54.32A71.42,71.42,0,0,0,179,90.55l56.22-24.47a8,8,0,0,0,2.6-12.85ZM67.08,48a51.13,51.13,0,0,1,37.28,16.26,56.53,56.53,0,0,1,14.26,26.93L39,56.53A50.5,50.5,0,0,1,67.08,48ZM40,161.5a54.82,54.82,0,0,1,7.47-29.7,55.55,55.55,0,0,1,34-25.89A56.52,56.52,0,0,1,96.1,104a55.82,55.82,0,0,1,16.23,2.41ZM208.5,131.8A54.82,54.82,0,0,1,216,161.5l-72.3-55.1a56.3,56.3,0,0,1,64.83,25.4ZM137.38,91.19a56.53,56.53,0,0,1,14.26-26.93A51.13,51.13,0,0,1,188.92,48,50.5,50.5,0,0,1,217,56.53Z"}))],["fill",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M239.84,60.33a8,8,0,0,1-4.65,5.75L179,90.55a71.42,71.42,0,0,1,43.36,33.21,70.64,70.64,0,0,1,7.2,54.32A8,8,0,0,1,217,182.36l-81-61.68V224a8,8,0,0,1-16,0V120.68L39,182.36a8,8,0,0,1-12.57-4.28,70.64,70.64,0,0,1,7.2-54.32A71.42,71.42,0,0,1,77,90.55L20.81,66.08a8,8,0,0,1-2.6-12.85,66.86,66.86,0,0,1,97.74,0,72.21,72.21,0,0,1,12,17,72.21,72.21,0,0,1,12.05-17,66.86,66.86,0,0,1,97.74,0A8,8,0,0,1,239.84,60.33Z"}))],["light",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M236.35,54.61a64.87,64.87,0,0,0-94.85,0A70,70,0,0,0,128,75a70,70,0,0,0-13.5-20.37,64.87,64.87,0,0,0-94.85,0,6,6,0,0,0,2,9.64l61.83,26.9c-1.85.34-3.7.74-5.54,1.23a69.42,69.42,0,0,0-42.5,32.39,68.65,68.65,0,0,0-7,52.79,6,6,0,0,0,3.86,4.12,6.1,6.1,0,0,0,1.93.32,6,6,0,0,0,3.64-1.23L122,116.64V224a6,6,0,0,0,12,0V116.64l84.17,64.13a6,6,0,0,0,3.64,1.23,6.1,6.1,0,0,0,1.93-.32,6,6,0,0,0,3.86-4.12,68.65,68.65,0,0,0-7-52.79,69.42,69.42,0,0,0-42.5-32.39c-1.84-.49-3.69-.89-5.54-1.23l61.83-26.9a6,6,0,0,0,2-9.64ZM67.08,46a53.16,53.16,0,0,1,38.73,16.88,58.77,58.77,0,0,1,15.47,31.65L34.93,57A52.59,52.59,0,0,1,67.08,46ZM38.29,165.33a56.77,56.77,0,0,1,7.48-34.53A57.58,57.58,0,0,1,81,104a58.79,58.79,0,0,1,15.12-2,57.67,57.67,0,0,1,20.43,3.73ZM210.23,130.8a56.77,56.77,0,0,1,7.48,34.53l-78.24-59.61a58.24,58.24,0,0,1,70.76,25.08ZM134.72,94.53a58.77,58.77,0,0,1,15.47-31.65A53.16,53.16,0,0,1,188.92,46a52.59,52.59,0,0,1,32.15,11Z"}))],["regular",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M237.79,53.23a66.86,66.86,0,0,0-97.74,0,72.21,72.21,0,0,0-12.05,17,72.21,72.21,0,0,0-12-17,66.86,66.86,0,0,0-97.74,0,8,8,0,0,0,2.6,12.85L77,90.55a71.42,71.42,0,0,0-43.36,33.21,70.64,70.64,0,0,0-7.2,54.32A8,8,0,0,0,39,182.36l81-61.68V224a8,8,0,0,0,16,0V120.68l81,61.68a8,8,0,0,0,12.57-4.28,70.64,70.64,0,0,0-7.2-54.32A71.42,71.42,0,0,0,179,90.55l56.22-24.47a8,8,0,0,0,2.6-12.85ZM67.08,48a51.13,51.13,0,0,1,37.28,16.26,56.53,56.53,0,0,1,14.26,26.93L39,56.53A50.5,50.5,0,0,1,67.08,48ZM40,161.5a54.82,54.82,0,0,1,7.47-29.7,55.55,55.55,0,0,1,34-25.89A56.52,56.52,0,0,1,96.1,104a55.82,55.82,0,0,1,16.23,2.41ZM208.5,131.8A54.82,54.82,0,0,1,216,161.5l-72.3-55.1a56.3,56.3,0,0,1,64.83,25.4ZM137.38,91.19a56.53,56.53,0,0,1,14.26-26.93A51.13,51.13,0,0,1,188.92,48,50.5,50.5,0,0,1,217,56.53Z"}))],["thin",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M234.9,56a62.86,62.86,0,0,0-92,0A68.16,68.16,0,0,0,128,80.44a68.16,68.16,0,0,0-15-24.45A62.86,62.86,0,0,0,21.1,56a4,4,0,0,0,1.3,6.42L90.86,92.2a68.66,68.66,0,0,0-12.45,2.11,67.49,67.49,0,0,0-41.28,31.46A66.72,66.72,0,0,0,30.33,177a4,4,0,0,0,2.57,2.75,4.1,4.1,0,0,0,1.29.21,4,4,0,0,0,2.43-.82L124,112.6V224a4,4,0,0,0,8,0V112.6l87.38,66.58a4,4,0,0,0,2.43.82,4.1,4.1,0,0,0,1.29-.21,4,4,0,0,0,2.57-2.75,66.72,66.72,0,0,0-6.8-51.27,67.49,67.49,0,0,0-41.28-31.46,68.66,68.66,0,0,0-12.45-2.11L233.6,62.41A4,4,0,0,0,234.9,56ZM67.08,44a55.13,55.13,0,0,1,40.18,17.5A60.86,60.86,0,0,1,123.7,97.77L31.12,57.48A54.75,54.75,0,0,1,67.08,44ZM36.77,169A58.72,58.72,0,0,1,44,129.79,59.57,59.57,0,0,1,80.47,102,61,61,0,0,1,96.1,100a59.71,59.71,0,0,1,24.41,5.22ZM212,129.79A58.72,58.72,0,0,1,219.23,169L135.49,105.2A60.24,60.24,0,0,1,212,129.79Zm-79.66-32A60.86,60.86,0,0,1,148.74,61.5a54.8,54.8,0,0,1,76.14-4Z"}))]]),Ex=Xe.forwardRef((e,r)=>ze.createElement(la,JD(QD({ref:r},e),{weights:e8})));Ex.displayName="TreePalm";var t8=Object.defineProperty,r8=Object.defineProperties,n8=Object.getOwnPropertyDescriptors,cA=Object.getOwnPropertySymbols,i8=Object.prototype.hasOwnProperty,o8=Object.prototype.propertyIsEnumerable,uA=(e,r,a)=>r in e?t8(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,s8=(e,r)=>{for(var a in r||(r={}))i8.call(r,a)&&uA(e,a,r[a]);if(cA)for(var a of cA(r))o8.call(r,a)&&uA(e,a,r[a]);return e},a8=(e,r)=>r8(e,n8(r));const l8=new Map([["bold",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M168,116h48a20,20,0,0,0,20-20V48a20,20,0,0,0-20-20H168a20,20,0,0,0-20,20V60h-4a36,36,0,0,0-36,36v20H84v-4A20,20,0,0,0,64,92H32a20,20,0,0,0-20,20v32a20,20,0,0,0,20,20H64a20,20,0,0,0,20-20v-4h24v20a36,36,0,0,0,36,36h4v12a20,20,0,0,0,20,20h48a20,20,0,0,0,20-20V160a20,20,0,0,0-20-20H168a20,20,0,0,0-20,20v12h-4a12,12,0,0,1-12-12V96a12,12,0,0,1,12-12h4V96A20,20,0,0,0,168,116ZM60,140H36V116H60Zm112,24h40v40H172Zm0-112h40V92H172Z"}))],["duotone",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M72,112v32a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V112a8,8,0,0,1,8-8H64A8,8,0,0,1,72,112ZM216,40H168a8,8,0,0,0-8,8V96a8,8,0,0,0,8,8h48a8,8,0,0,0,8-8V48A8,8,0,0,0,216,40Zm0,112H168a8,8,0,0,0-8,8v48a8,8,0,0,0,8,8h48a8,8,0,0,0,8-8V160A8,8,0,0,0,216,152Z",opacity:"0.2"}),ze.createElement("path",{d:"M168,112h48a16,16,0,0,0,16-16V48a16,16,0,0,0-16-16H168a16,16,0,0,0-16,16V64h-8a32,32,0,0,0-32,32v24H80v-8A16,16,0,0,0,64,96H32a16,16,0,0,0-16,16v32a16,16,0,0,0,16,16H64a16,16,0,0,0,16-16v-8h32v24a32,32,0,0,0,32,32h8v16a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V160a16,16,0,0,0-16-16H168a16,16,0,0,0-16,16v16h-8a16,16,0,0,1-16-16V96a16,16,0,0,1,16-16h8V96A16,16,0,0,0,168,112ZM64,144H32V112H64v32Zm104,16h48v48H168Zm0-112h48V96H168Z"}))],["fill",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M152,96V80h-8a16,16,0,0,0-16,16v64a16,16,0,0,0,16,16h8V160a16,16,0,0,1,16-16h48a16,16,0,0,1,16,16v48a16,16,0,0,1-16,16H168a16,16,0,0,1-16-16V192h-8a32,32,0,0,1-32-32V136H80v8a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V112A16,16,0,0,1,32,96H64a16,16,0,0,1,16,16v8h32V96a32,32,0,0,1,32-32h8V48a16,16,0,0,1,16-16h48a16,16,0,0,1,16,16V96a16,16,0,0,1-16,16H168A16,16,0,0,1,152,96Z"}))],["light",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M168,110h48a14,14,0,0,0,14-14V48a14,14,0,0,0-14-14H168a14,14,0,0,0-14,14V66H144a30,30,0,0,0-30,30v26H78V112A14,14,0,0,0,64,98H32a14,14,0,0,0-14,14v32a14,14,0,0,0,14,14H64a14,14,0,0,0,14-14V134h36v26a30,30,0,0,0,30,30h10v18a14,14,0,0,0,14,14h48a14,14,0,0,0,14-14V160a14,14,0,0,0-14-14H168a14,14,0,0,0-14,14v18H144a18,18,0,0,1-18-18V96a18,18,0,0,1,18-18h10V96A14,14,0,0,0,168,110ZM66,144a2,2,0,0,1-2,2H32a2,2,0,0,1-2-2V112a2,2,0,0,1,2-2H64a2,2,0,0,1,2,2Zm100,16a2,2,0,0,1,2-2h48a2,2,0,0,1,2,2v48a2,2,0,0,1-2,2H168a2,2,0,0,1-2-2Zm0-112a2,2,0,0,1,2-2h48a2,2,0,0,1,2,2V96a2,2,0,0,1-2,2H168a2,2,0,0,1-2-2Z"}))],["regular",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M168,112h48a16,16,0,0,0,16-16V48a16,16,0,0,0-16-16H168a16,16,0,0,0-16,16V64h-8a32,32,0,0,0-32,32v24H80v-8A16,16,0,0,0,64,96H32a16,16,0,0,0-16,16v32a16,16,0,0,0,16,16H64a16,16,0,0,0,16-16v-8h32v24a32,32,0,0,0,32,32h8v16a16,16,0,0,0,16,16h48a16,16,0,0,0,16-16V160a16,16,0,0,0-16-16H168a16,16,0,0,0-16,16v16h-8a16,16,0,0,1-16-16V96a16,16,0,0,1,16-16h8V96A16,16,0,0,0,168,112ZM64,144H32V112H64v32Zm104,16h48v48H168Zm0-112h48V96H168Z"}))],["thin",ze.createElement(ze.Fragment,null,ze.createElement("path",{d:"M168,108h48a12,12,0,0,0,12-12V48a12,12,0,0,0-12-12H168a12,12,0,0,0-12,12V68H144a28,28,0,0,0-28,28v28H76V112a12,12,0,0,0-12-12H32a12,12,0,0,0-12,12v32a12,12,0,0,0,12,12H64a12,12,0,0,0,12-12V132h40v28a28,28,0,0,0,28,28h12v20a12,12,0,0,0,12,12h48a12,12,0,0,0,12-12V160a12,12,0,0,0-12-12H168a12,12,0,0,0-12,12v20H144a20,20,0,0,1-20-20V96a20,20,0,0,1,20-20h12V96A12,12,0,0,0,168,108ZM68,144a4,4,0,0,1-4,4H32a4,4,0,0,1-4-4V112a4,4,0,0,1,4-4H64a4,4,0,0,1,4,4Zm96,16a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4v48a4,4,0,0,1-4,4H168a4,4,0,0,1-4-4Zm0-112a4,4,0,0,1,4-4h48a4,4,0,0,1,4,4V96a4,4,0,0,1-4,4H168a4,4,0,0,1-4-4Z"}))]]),tP=Xe.forwardRef((e,r)=>ze.createElement(la,a8(s8({ref:r},e),{weights:l8})));tP.displayName="TreeStructure";function c8(e){if(e.sheet)return e.sheet;for(var r=0;r<document.styleSheets.length;r++)if(document.styleSheets[r].ownerNode===e)return document.styleSheets[r]}function u8(e){var r=document.createElement("style");return r.setAttribute("data-emotion",e.key),e.nonce!==void 0&&r.setAttribute("nonce",e.nonce),r.appendChild(document.createTextNode("")),r.setAttribute("data-s",""),r}var h8=function(){function e(a){var h=this;this._insertTag=function(d){var x;h.tags.length===0?h.insertionPoint?x=h.insertionPoint.nextSibling:h.prepend?x=h.container.firstChild:x=h.before:x=h.tags[h.tags.length-1].nextSibling,h.container.insertBefore(d,x),h.tags.push(d)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var r=e.prototype;return r.hydrate=function(h){h.forEach(this._insertTag)},r.insert=function(h){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(u8(this));var d=this.tags[this.tags.length-1];if(this.isSpeedy){var x=c8(d);try{x.insertRule(h,x.cssRules.length)}catch{}}else d.appendChild(document.createTextNode(h));this.ctr++},r.flush=function(){this.tags.forEach(function(h){return h.parentNode&&h.parentNode.removeChild(h)}),this.tags=[],this.ctr=0},e}(),ci="-ms-",b_="-moz-",Pr="-webkit-",rP="comm",rw="rule",nw="decl",d8="@import",nP="@keyframes",f8="@layer",p8=Math.abs,l0=String.fromCharCode,m8=Object.assign;function g8(e,r){return Kn(e,0)^45?(((r<<2^Kn(e,0))<<2^Kn(e,1))<<2^Kn(e,2))<<2^Kn(e,3):0}function iP(e){return e.trim()}function _8(e,r){return(e=r.exec(e))?e[0]:e}function Ir(e,r,a){return e.replace(r,a)}function Tx(e,r){return e.indexOf(r)}function Kn(e,r){return e.charCodeAt(r)|0}function ip(e,r,a){return e.slice(r,a)}function ws(e){return e.length}function iw(e){return e.length}function Tg(e,r){return r.push(e),e}function y8(e,r){return e.map(r).join("")}var c0=1,yh=1,oP=0,Gi=0,Pn=0,Ih="";function u0(e,r,a,h,d,x,E){return{value:e,root:r,parent:a,type:h,props:d,children:x,line:c0,column:yh,length:E,return:""}}function xf(e,r){return m8(u0("",null,null,"",null,null,0),e,{length:-e.length},r)}function v8(){return Pn}function x8(){return Pn=Gi>0?Kn(Ih,--Gi):0,yh--,Pn===10&&(yh=1,c0--),Pn}function to(){return Pn=Gi<oP?Kn(Ih,Gi++):0,yh++,Pn===10&&(yh=1,c0++),Pn}function Cs(){return Kn(Ih,Gi)}function Vg(){return Gi}function Ap(e,r){return ip(Ih,e,r)}function op(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function sP(e){return c0=yh=1,oP=ws(Ih=e),Gi=0,[]}function aP(e){return Ih="",e}function $g(e){return iP(Ap(Gi-1,Sx(e===91?e+2:e===40?e+1:e)))}function b8(e){for(;(Pn=Cs())&&Pn<33;)to();return op(e)>2||op(Pn)>3?"":" "}function w8(e,r){for(;--r&&to()&&!(Pn<48||Pn>102||Pn>57&&Pn<65||Pn>70&&Pn<97););return Ap(e,Vg()+(r<6&&Cs()==32&&to()==32))}function Sx(e){for(;to();)switch(Pn){case e:return Gi;case 34:case 39:e!==34&&e!==39&&Sx(Pn);break;case 40:e===41&&Sx(e);break;case 92:to();break}return Gi}function E8(e,r){for(;to()&&e+Pn!==47+10;)if(e+Pn===42+42&&Cs()===47)break;return"/*"+Ap(r,Gi-1)+"*"+l0(e===47?e:to())}function T8(e){for(;!op(Cs());)to();return Ap(e,Gi)}function S8(e){return aP(Gg("",null,null,null,[""],e=sP(e),0,[0],e))}function Gg(e,r,a,h,d,x,E,s,A){for(var R=0,U=0,N=E,q=0,fe=0,ae=0,se=1,ve=1,J=1,Z=0,te="",Ee=d,ke=x,Fe=h,We=te;ve;)switch(ae=Z,Z=to()){case 40:if(ae!=108&&Kn(We,N-1)==58){Tx(We+=Ir($g(Z),"&","&\f"),"&\f")!=-1&&(J=-1);break}case 34:case 39:case 91:We+=$g(Z);break;case 9:case 10:case 13:case 32:We+=b8(ae);break;case 92:We+=w8(Vg()-1,7);continue;case 47:switch(Cs()){case 42:case 47:Tg(A8(E8(to(),Vg()),r,a),A);break;default:We+="/"}break;case 123*se:s[R++]=ws(We)*J;case 125*se:case 59:case 0:switch(Z){case 0:case 125:ve=0;case 59+U:J==-1&&(We=Ir(We,/\f/g,"")),fe>0&&ws(We)-N&&Tg(fe>32?dA(We+";",h,a,N-1):dA(Ir(We," ","")+";",h,a,N-2),A);break;case 59:We+=";";default:if(Tg(Fe=hA(We,r,a,R,U,d,s,te,Ee=[],ke=[],N),x),Z===123)if(U===0)Gg(We,r,Fe,Fe,Ee,x,N,s,ke);else switch(q===99&&Kn(We,3)===110?100:q){case 100:case 108:case 109:case 115:Gg(e,Fe,Fe,h&&Tg(hA(e,Fe,Fe,0,0,d,s,te,d,Ee=[],N),ke),d,ke,N,s,h?Ee:ke);break;default:Gg(We,Fe,Fe,Fe,[""],ke,0,s,ke)}}R=U=fe=0,se=J=1,te=We="",N=E;break;case 58:N=1+ws(We),fe=ae;default:if(se<1){if(Z==123)--se;else if(Z==125&&se++==0&&x8()==125)continue}switch(We+=l0(Z),Z*se){case 38:J=U>0?1:(We+="\f",-1);break;case 44:s[R++]=(ws(We)-1)*J,J=1;break;case 64:Cs()===45&&(We+=$g(to())),q=Cs(),U=N=ws(te=We+=T8(Vg())),Z++;break;case 45:ae===45&&ws(We)==2&&(se=0)}}return x}function hA(e,r,a,h,d,x,E,s,A,R,U){for(var N=d-1,q=d===0?x:[""],fe=iw(q),ae=0,se=0,ve=0;ae<h;++ae)for(var J=0,Z=ip(e,N+1,N=p8(se=E[ae])),te=e;J<fe;++J)(te=iP(se>0?q[J]+" "+Z:Ir(Z,/&\f/g,q[J])))&&(A[ve++]=te);return u0(e,r,a,d===0?rw:s,A,R,U)}function A8(e,r,a){return u0(e,r,a,rP,l0(v8()),ip(e,2,-2),0)}function dA(e,r,a,h){return u0(e,r,a,nw,ip(e,0,h),ip(e,h+1,-1),h)}function ah(e,r){for(var a="",h=iw(e),d=0;d<h;d++)a+=r(e[d],d,e,r)||"";return a}function C8(e,r,a,h){switch(e.type){case f8:if(e.children.length)break;case d8:case nw:return e.return=e.return||e.value;case rP:return"";case nP:return e.return=e.value+"{"+ah(e.children,h)+"}";case rw:e.value=e.props.join(",")}return ws(a=ah(e.children,h))?e.return=e.value+"{"+a+"}":""}function M8(e){var r=iw(e);return function(a,h,d,x){for(var E="",s=0;s<r;s++)E+=e[s](a,h,d,x)||"";return E}}function P8(e){return function(r){r.root||(r=r.return)&&e(r)}}function I8(e){var r=Object.create(null);return function(a){return r[a]===void 0&&(r[a]=e(a)),r[a]}}var k8=function(r,a,h){for(var d=0,x=0;d=x,x=Cs(),d===38&&x===12&&(a[h]=1),!op(x);)to();return Ap(r,Gi)},L8=function(r,a){var h=-1,d=44;do switch(op(d)){case 0:d===38&&Cs()===12&&(a[h]=1),r[h]+=k8(Gi-1,a,h);break;case 2:r[h]+=$g(d);break;case 4:if(d===44){r[++h]=Cs()===58?"&\f":"",a[h]=r[h].length;break}default:r[h]+=l0(d)}while(d=to());return r},O8=function(r,a){return aP(L8(sP(r),a))},fA=new WeakMap,z8=function(r){if(!(r.type!=="rule"||!r.parent||r.length<1)){for(var a=r.value,h=r.parent,d=r.column===h.column&&r.line===h.line;h.type!=="rule";)if(h=h.parent,!h)return;if(!(r.props.length===1&&a.charCodeAt(0)!==58&&!fA.get(h))&&!d){fA.set(r,!0);for(var x=[],E=O8(a,x),s=h.props,A=0,R=0;A<E.length;A++)for(var U=0;U<s.length;U++,R++)r.props[R]=x[A]?E[A].replace(/&\f/g,s[U]):s[U]+" "+E[A]}}},R8=function(r){if(r.type==="decl"){var a=r.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(r.return="",r.value="")}};function lP(e,r){switch(g8(e,r)){case 5103:return Pr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Pr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Pr+e+b_+e+ci+e+e;case 6828:case 4268:return Pr+e+ci+e+e;case 6165:return Pr+e+ci+"flex-"+e+e;case 5187:return Pr+e+Ir(e,/(\w+).+(:[^]+)/,Pr+"box-$1$2"+ci+"flex-$1$2")+e;case 5443:return Pr+e+ci+"flex-item-"+Ir(e,/flex-|-self/,"")+e;case 4675:return Pr+e+ci+"flex-line-pack"+Ir(e,/align-content|flex-|-self/,"")+e;case 5548:return Pr+e+ci+Ir(e,"shrink","negative")+e;case 5292:return Pr+e+ci+Ir(e,"basis","preferred-size")+e;case 6060:return Pr+"box-"+Ir(e,"-grow","")+Pr+e+ci+Ir(e,"grow","positive")+e;case 4554:return Pr+Ir(e,/([^-])(transform)/g,"$1"+Pr+"$2")+e;case 6187:return Ir(Ir(Ir(e,/(zoom-|grab)/,Pr+"$1"),/(image-set)/,Pr+"$1"),e,"")+e;case 5495:case 3959:return Ir(e,/(image-set\([^]*)/,Pr+"$1$`$1");case 4968:return Ir(Ir(e,/(.+:)(flex-)?(.*)/,Pr+"box-pack:$3"+ci+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Pr+e+e;case 4095:case 3583:case 4068:case 2532:return Ir(e,/(.+)-inline(.+)/,Pr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ws(e)-1-r>6)switch(Kn(e,r+1)){case 109:if(Kn(e,r+4)!==45)break;case 102:return Ir(e,/(.+:)(.+)-([^]+)/,"$1"+Pr+"$2-$3$1"+b_+(Kn(e,r+3)==108?"$3":"$2-$3"))+e;case 115:return~Tx(e,"stretch")?lP(Ir(e,"stretch","fill-available"),r)+e:e}break;case 4949:if(Kn(e,r+1)!==115)break;case 6444:switch(Kn(e,ws(e)-3-(~Tx(e,"!important")&&10))){case 107:return Ir(e,":",":"+Pr)+e;case 101:return Ir(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Pr+(Kn(e,14)===45?"inline-":"")+"box$3$1"+Pr+"$2$3$1"+ci+"$2box$3")+e}break;case 5936:switch(Kn(e,r+11)){case 114:return Pr+e+ci+Ir(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Pr+e+ci+Ir(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Pr+e+ci+Ir(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Pr+e+ci+e+e}return e}var D8=function(r,a,h,d){if(r.length>-1&&!r.return)switch(r.type){case nw:r.return=lP(r.value,r.length);break;case nP:return ah([xf(r,{value:Ir(r.value,"@","@"+Pr)})],d);case rw:if(r.length)return y8(r.props,function(x){switch(_8(x,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ah([xf(r,{props:[Ir(x,/:(read-\w+)/,":"+b_+"$1")]})],d);case"::placeholder":return ah([xf(r,{props:[Ir(x,/:(plac\w+)/,":"+Pr+"input-$1")]}),xf(r,{props:[Ir(x,/:(plac\w+)/,":"+b_+"$1")]}),xf(r,{props:[Ir(x,/:(plac\w+)/,ci+"input-$1")]})],d)}return""})}},B8=[D8],F8=function(r){var a=r.key;if(a==="css"){var h=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(h,function(se){var ve=se.getAttribute("data-emotion");ve.indexOf(" ")!==-1&&(document.head.appendChild(se),se.setAttribute("data-s",""))})}var d=r.stylisPlugins||B8,x={},E,s=[];E=r.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(se){for(var ve=se.getAttribute("data-emotion").split(" "),J=1;J<ve.length;J++)x[ve[J]]=!0;s.push(se)});var A,R=[z8,R8];{var U,N=[C8,P8(function(se){U.insert(se)})],q=M8(R.concat(d,N)),fe=function(ve){return ah(S8(ve),q)};A=function(ve,J,Z,te){U=Z,fe(ve?ve+"{"+J.styles+"}":J.styles),te&&(ae.inserted[J.name]=!0)}}var ae={key:a,sheet:new h8({key:a,container:E,nonce:r.nonce,speedy:r.speedy,prepend:r.prepend,insertionPoint:r.insertionPoint}),nonce:r.nonce,inserted:x,registered:{},insert:A};return ae.sheet.hydrate(s),ae},cP={exports:{}},Rr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hn=typeof Symbol=="function"&&Symbol.for,ow=Hn?Symbol.for("react.element"):60103,sw=Hn?Symbol.for("react.portal"):60106,h0=Hn?Symbol.for("react.fragment"):60107,d0=Hn?Symbol.for("react.strict_mode"):60108,f0=Hn?Symbol.for("react.profiler"):60114,p0=Hn?Symbol.for("react.provider"):60109,m0=Hn?Symbol.for("react.context"):60110,aw=Hn?Symbol.for("react.async_mode"):60111,g0=Hn?Symbol.for("react.concurrent_mode"):60111,_0=Hn?Symbol.for("react.forward_ref"):60112,y0=Hn?Symbol.for("react.suspense"):60113,N8=Hn?Symbol.for("react.suspense_list"):60120,v0=Hn?Symbol.for("react.memo"):60115,x0=Hn?Symbol.for("react.lazy"):60116,j8=Hn?Symbol.for("react.block"):60121,U8=Hn?Symbol.for("react.fundamental"):60117,V8=Hn?Symbol.for("react.responder"):60118,$8=Hn?Symbol.for("react.scope"):60119;function oo(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case ow:switch(e=e.type,e){case aw:case g0:case h0:case f0:case d0:case y0:return e;default:switch(e=e&&e.$$typeof,e){case m0:case _0:case x0:case v0:case p0:return e;default:return r}}case sw:return r}}}function uP(e){return oo(e)===g0}Rr.AsyncMode=aw;Rr.ConcurrentMode=g0;Rr.ContextConsumer=m0;Rr.ContextProvider=p0;Rr.Element=ow;Rr.ForwardRef=_0;Rr.Fragment=h0;Rr.Lazy=x0;Rr.Memo=v0;Rr.Portal=sw;Rr.Profiler=f0;Rr.StrictMode=d0;Rr.Suspense=y0;Rr.isAsyncMode=function(e){return uP(e)||oo(e)===aw};Rr.isConcurrentMode=uP;Rr.isContextConsumer=function(e){return oo(e)===m0};Rr.isContextProvider=function(e){return oo(e)===p0};Rr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ow};Rr.isForwardRef=function(e){return oo(e)===_0};Rr.isFragment=function(e){return oo(e)===h0};Rr.isLazy=function(e){return oo(e)===x0};Rr.isMemo=function(e){return oo(e)===v0};Rr.isPortal=function(e){return oo(e)===sw};Rr.isProfiler=function(e){return oo(e)===f0};Rr.isStrictMode=function(e){return oo(e)===d0};Rr.isSuspense=function(e){return oo(e)===y0};Rr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===h0||e===g0||e===f0||e===d0||e===y0||e===N8||typeof e=="object"&&e!==null&&(e.$$typeof===x0||e.$$typeof===v0||e.$$typeof===p0||e.$$typeof===m0||e.$$typeof===_0||e.$$typeof===U8||e.$$typeof===V8||e.$$typeof===$8||e.$$typeof===j8)};Rr.typeOf=oo;cP.exports=Rr;var G8=cP.exports,hP=G8,Z8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},H8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dP={};dP[hP.ForwardRef]=Z8;dP[hP.Memo]=H8;var q8=!0;function fP(e,r,a){var h="";return a.split(" ").forEach(function(d){e[d]!==void 0?r.push(e[d]+";"):h+=d+" "}),h}var lw=function(r,a,h){var d=r.key+"-"+a.name;(h===!1||q8===!1)&&r.registered[d]===void 0&&(r.registered[d]=a.styles)},pP=function(r,a,h){lw(r,a,h);var d=r.key+"-"+a.name;if(r.inserted[a.name]===void 0){var x=a;do r.insert(a===x?"."+d:"",x,r.sheet,!0),x=x.next;while(x!==void 0)}};function W8(e){for(var r=0,a,h=0,d=e.length;d>=4;++h,d-=4)a=e.charCodeAt(h)&255|(e.charCodeAt(++h)&255)<<8|(e.charCodeAt(++h)&255)<<16|(e.charCodeAt(++h)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,r=(a&65535)*1540483477+((a>>>16)*59797<<16)^(r&65535)*1540483477+((r>>>16)*59797<<16);switch(d){case 3:r^=(e.charCodeAt(h+2)&255)<<16;case 2:r^=(e.charCodeAt(h+1)&255)<<8;case 1:r^=e.charCodeAt(h)&255,r=(r&65535)*1540483477+((r>>>16)*59797<<16)}return r^=r>>>13,r=(r&65535)*1540483477+((r>>>16)*59797<<16),((r^r>>>15)>>>0).toString(36)}var X8={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},K8=/[A-Z]|^ms/g,Y8=/_EMO_([^_]+?)_([^]*?)_EMO_/g,mP=function(r){return r.charCodeAt(1)===45},pA=function(r){return r!=null&&typeof r!="boolean"},e1=I8(function(e){return mP(e)?e:e.replace(K8,"-$&").toLowerCase()}),mA=function(r,a){switch(r){case"animation":case"animationName":if(typeof a=="string")return a.replace(Y8,function(h,d,x){return Es={name:d,styles:x,next:Es},d})}return X8[r]!==1&&!mP(r)&&typeof a=="number"&&a!==0?a+"px":a};function sp(e,r,a){if(a==null)return"";if(a.__emotion_styles!==void 0)return a;switch(typeof a){case"boolean":return"";case"object":{if(a.anim===1)return Es={name:a.name,styles:a.styles,next:Es},a.name;if(a.styles!==void 0){var h=a.next;if(h!==void 0)for(;h!==void 0;)Es={name:h.name,styles:h.styles,next:Es},h=h.next;var d=a.styles+";";return d}return Q8(e,r,a)}case"function":{if(e!==void 0){var x=Es,E=a(e);return Es=x,sp(e,r,E)}break}}if(r==null)return a;var s=r[a];return s!==void 0?s:a}function Q8(e,r,a){var h="";if(Array.isArray(a))for(var d=0;d<a.length;d++)h+=sp(e,r,a[d])+";";else for(var x in a){var E=a[x];if(typeof E!="object")r!=null&&r[E]!==void 0?h+=x+"{"+r[E]+"}":pA(E)&&(h+=e1(x)+":"+mA(x,E)+";");else if(Array.isArray(E)&&typeof E[0]=="string"&&(r==null||r[E[0]]===void 0))for(var s=0;s<E.length;s++)pA(E[s])&&(h+=e1(x)+":"+mA(x,E[s])+";");else{var A=sp(e,r,E);switch(x){case"animation":case"animationName":{h+=e1(x)+":"+A+";";break}default:h+=x+"{"+A+"}"}}}return h}var gA=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Es,cw=function(r,a,h){if(r.length===1&&typeof r[0]=="object"&&r[0]!==null&&r[0].styles!==void 0)return r[0];var d=!0,x="";Es=void 0;var E=r[0];E==null||E.raw===void 0?(d=!1,x+=sp(h,a,E)):x+=E[0];for(var s=1;s<r.length;s++)x+=sp(h,a,r[s]),d&&(x+=E[s]);gA.lastIndex=0;for(var A="",R;(R=gA.exec(x))!==null;)A+="-"+R[1];var U=W8(x)+A;return{name:U,styles:x,next:Es}},J8=function(r){return r()},eB=x1["useInsertionEffect"]?x1["useInsertionEffect"]:!1,gP=eB||J8,uw={}.hasOwnProperty,_P=Xe.createContext(typeof HTMLElement<"u"?F8({key:"css"}):null);_P.Provider;var yP=function(r){return Xe.forwardRef(function(a,h){var d=Xe.useContext(_P);return r(a,d,h)})},vP=Xe.createContext({}),Ax="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",tB=function(r,a){var h={};for(var d in a)uw.call(a,d)&&(h[d]=a[d]);return h[Ax]=r,h},rB=function(r){var a=r.cache,h=r.serialized,d=r.isStringTag;return lw(a,h,d),gP(function(){return pP(a,h,d)}),null},nB=yP(function(e,r,a){var h=e.css;typeof h=="string"&&r.registered[h]!==void 0&&(h=r.registered[h]);var d=e[Ax],x=[h],E="";typeof e.className=="string"?E=fP(r.registered,x,e.className):e.className!=null&&(E=e.className+" ");var s=cw(x,void 0,Xe.useContext(vP));E+=r.key+"-"+s.name;var A={};for(var R in e)uw.call(e,R)&&R!=="css"&&R!==Ax&&(A[R]=e[R]);return A.ref=a,A.className=E,Xe.createElement(Xe.Fragment,null,Xe.createElement(rB,{cache:r,serialized:s,isStringTag:typeof d=="string"}),Xe.createElement(d,A))}),iB=nB,oB=we.Fragment;function Rn(e,r,a){return uw.call(r,"css")?we.jsx(iB,tB(e,r),a):we.jsx(e,r,a)}function xP(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return cw(r)}var gt=function(){var r=xP.apply(void 0,arguments),a="animation-"+r.name;return{name:a,styles:"@keyframes "+a+"{"+r.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},sB=function e(r){for(var a=r.length,h=0,d="";h<a;h++){var x=r[h];if(x!=null){var E=void 0;switch(typeof x){case"boolean":break;case"object":{if(Array.isArray(x))E=e(x);else{E="";for(var s in x)x[s]&&s&&(E&&(E+=" "),E+=s)}break}default:E=x}E&&(d&&(d+=" "),d+=E)}}return d};function aB(e,r,a){var h=[],d=fP(e,h,a);return h.length<2?a:d+r(h)}var lB=function(r){var a=r.cache,h=r.serializedArr;return gP(function(){for(var d=0;d<h.length;d++)pP(a,h[d],!1)}),null},t1=yP(function(e,r){var a=!1,h=[],d=function(){for(var R=arguments.length,U=new Array(R),N=0;N<R;N++)U[N]=arguments[N];var q=cw(U,r.registered);return h.push(q),lw(r,q,!1),r.key+"-"+q.name},x=function(){for(var R=arguments.length,U=new Array(R),N=0;N<R;N++)U[N]=arguments[N];return aB(r.registered,d,sB(U))},E={css:d,cx:x,theme:Xe.useContext(vP)},s=e.children(E);return a=!0,Xe.createElement(Xe.Fragment,null,Xe.createElement(lB,{cache:r,serializedArr:h}),s)}),cB=Object.defineProperty,uB=(e,r,a)=>r in e?cB(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,Sg=(e,r,a)=>(uB(e,typeof r!="symbol"?r+"":r,a),a),Cx=new Map,Ag=new WeakMap,_A=0,hB=void 0;function dB(e){return e?(Ag.has(e)||(_A+=1,Ag.set(e,_A.toString())),Ag.get(e)):"0"}function fB(e){return Object.keys(e).sort().filter(r=>e[r]!==void 0).map(r=>`${r}_${r==="root"?dB(e.root):e[r]}`).toString()}function pB(e){let r=fB(e),a=Cx.get(r);if(!a){const h=new Map;let d;const x=new IntersectionObserver(E=>{E.forEach(s=>{var A;const R=s.isIntersecting&&d.some(U=>s.intersectionRatio>=U);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=R),(A=h.get(s.target))==null||A.forEach(U=>{U(R,s)})})},e);d=x.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),a={id:r,observer:x,elements:h},Cx.set(r,a)}return a}function bP(e,r,a={},h=hB){if(typeof window.IntersectionObserver>"u"&&h!==void 0){const A=e.getBoundingClientRect();return r(h,{isIntersecting:h,target:e,intersectionRatio:typeof a.threshold=="number"?a.threshold:0,time:0,boundingClientRect:A,intersectionRect:A,rootBounds:A}),()=>{}}const{id:d,observer:x,elements:E}=pB(a);let s=E.get(e)||[];return E.has(e)||E.set(e,s),s.push(r),x.observe(e),function(){s.splice(s.indexOf(r),1),s.length===0&&(E.delete(e),x.unobserve(e)),E.size===0&&(x.disconnect(),Cx.delete(d))}}function mB(e){return typeof e.children!="function"}var yA=class extends Xe.Component{constructor(e){super(e),Sg(this,"node",null),Sg(this,"_unobserveCb",null),Sg(this,"handleNode",r=>{this.node&&(this.unobserve(),!r&&!this.props.triggerOnce&&!this.props.skip&&this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=r||null,this.observeNode()}),Sg(this,"handleChange",(r,a)=>{r&&this.props.triggerOnce&&this.unobserve(),mB(this.props)||this.setState({inView:r,entry:a}),this.props.onChange&&this.props.onChange(r,a)}),this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold||e.skip!==this.props.skip||e.trackVisibility!==this.props.trackVisibility||e.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:r,rootMargin:a,trackVisibility:h,delay:d,fallbackInView:x}=this.props;this._unobserveCb=bP(this.node,this.handleChange,{threshold:e,root:r,rootMargin:a,trackVisibility:h,delay:d},x)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){const{children:e}=this.props;if(typeof e=="function"){const{inView:fe,entry:ae}=this.state;return e({inView:fe,entry:ae,ref:this.handleNode})}const{as:r,triggerOnce:a,threshold:h,root:d,rootMargin:x,onChange:E,skip:s,trackVisibility:A,delay:R,initialInView:U,fallbackInView:N,...q}=this.props;return Xe.createElement(r||"div",{ref:this.handleNode,...q},e)}};function wP({threshold:e,delay:r,trackVisibility:a,rootMargin:h,root:d,triggerOnce:x,skip:E,initialInView:s,fallbackInView:A,onChange:R}={}){var U;const[N,q]=Xe.useState(null),fe=Xe.useRef(),[ae,se]=Xe.useState({inView:!!s,entry:void 0});fe.current=R,Xe.useEffect(()=>{if(E||!N)return;let te;return te=bP(N,(Ee,ke)=>{se({inView:Ee,entry:ke}),fe.current&&fe.current(Ee,ke),ke.isIntersecting&&x&&te&&(te(),te=void 0)},{root:d,rootMargin:h,threshold:e,trackVisibility:a,delay:r},A),()=>{te&&te()}},[Array.isArray(e)?e.toString():e,N,d,h,x,E,a,A,r]);const ve=(U=ae.entry)==null?void 0:U.target,J=Xe.useRef();!N&&ve&&!x&&!E&&J.current!==ve&&(J.current=ve,se({inView:!!s,entry:void 0}));const Z=[q,ae.inView,ae.entry];return Z.ref=Z[0],Z.inView=Z[1],Z.entry=Z[2],Z}var EP={exports:{}},Dr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw=Symbol.for("react.element"),dw=Symbol.for("react.portal"),b0=Symbol.for("react.fragment"),w0=Symbol.for("react.strict_mode"),E0=Symbol.for("react.profiler"),T0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),gB=Symbol.for("react.server_context"),A0=Symbol.for("react.forward_ref"),C0=Symbol.for("react.suspense"),M0=Symbol.for("react.suspense_list"),P0=Symbol.for("react.memo"),I0=Symbol.for("react.lazy"),_B=Symbol.for("react.offscreen"),TP;TP=Symbol.for("react.module.reference");function So(e){if(typeof e=="object"&&e!==null){var r=e.$$typeof;switch(r){case hw:switch(e=e.type,e){case b0:case E0:case w0:case C0:case M0:return e;default:switch(e=e&&e.$$typeof,e){case gB:case S0:case A0:case I0:case P0:case T0:return e;default:return r}}case dw:return r}}}Dr.ContextConsumer=S0;Dr.ContextProvider=T0;Dr.Element=hw;Dr.ForwardRef=A0;Dr.Fragment=b0;Dr.Lazy=I0;Dr.Memo=P0;Dr.Portal=dw;Dr.Profiler=E0;Dr.StrictMode=w0;Dr.Suspense=C0;Dr.SuspenseList=M0;Dr.isAsyncMode=function(){return!1};Dr.isConcurrentMode=function(){return!1};Dr.isContextConsumer=function(e){return So(e)===S0};Dr.isContextProvider=function(e){return So(e)===T0};Dr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hw};Dr.isForwardRef=function(e){return So(e)===A0};Dr.isFragment=function(e){return So(e)===b0};Dr.isLazy=function(e){return So(e)===I0};Dr.isMemo=function(e){return So(e)===P0};Dr.isPortal=function(e){return So(e)===dw};Dr.isProfiler=function(e){return So(e)===E0};Dr.isStrictMode=function(e){return So(e)===w0};Dr.isSuspense=function(e){return So(e)===C0};Dr.isSuspenseList=function(e){return So(e)===M0};Dr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===b0||e===E0||e===w0||e===C0||e===M0||e===_B||typeof e=="object"&&e!==null&&(e.$$typeof===I0||e.$$typeof===P0||e.$$typeof===T0||e.$$typeof===S0||e.$$typeof===A0||e.$$typeof===TP||e.getModuleId!==void 0)};Dr.typeOf=So;EP.exports=Dr;var yB=EP.exports;gt`
  from,
  20%,
  53%,
  to {
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
    transform: translate3d(0, 0, 0);
  }

  40%,
  43% {
    animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
    transform: translate3d(0, -30px, 0) scaleY(1.1);
  }

  70% {
    animation-timing-function: cubic-bezier(0.755, 0.05, 0.855, 0.06);
    transform: translate3d(0, -15px, 0) scaleY(1.05);
  }

  80% {
    transition-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
    transform: translate3d(0, 0, 0) scaleY(0.95);
  }

  90% {
    transform: translate3d(0, -4px, 0) scaleY(1.02);
  }
`;gt`
  from,
  50%,
  to {
    opacity: 1;
  }

  25%,
  75% {
    opacity: 0;
  }
`;gt`
  0% {
    transform: translateX(0);
  }

  6.5% {
    transform: translateX(-6px) rotateY(-9deg);
  }

  18.5% {
    transform: translateX(5px) rotateY(7deg);
  }

  31.5% {
    transform: translateX(-3px) rotateY(-5deg);
  }

  43.5% {
    transform: translateX(2px) rotateY(3deg);
  }

  50% {
    transform: translateX(0);
  }
`;gt`
  0% {
    transform: scale(1);
  }

  14% {
    transform: scale(1.3);
  }

  28% {
    transform: scale(1);
  }

  42% {
    transform: scale(1.3);
  }

  70% {
    transform: scale(1);
  }
`;gt`
  from,
  11.1%,
  to {
    transform: translate3d(0, 0, 0);
  }

  22.2% {
    transform: skewX(-12.5deg) skewY(-12.5deg);
  }

  33.3% {
    transform: skewX(6.25deg) skewY(6.25deg);
  }

  44.4% {
    transform: skewX(-3.125deg) skewY(-3.125deg);
  }

  55.5% {
    transform: skewX(1.5625deg) skewY(1.5625deg);
  }

  66.6% {
    transform: skewX(-0.78125deg) skewY(-0.78125deg);
  }

  77.7% {
    transform: skewX(0.390625deg) skewY(0.390625deg);
  }

  88.8% {
    transform: skewX(-0.1953125deg) skewY(-0.1953125deg);
  }
`;gt`
  from {
    transform: scale3d(1, 1, 1);
  }

  50% {
    transform: scale3d(1.05, 1.05, 1.05);
  }

  to {
    transform: scale3d(1, 1, 1);
  }
`;gt`
  from {
    transform: scale3d(1, 1, 1);
  }

  30% {
    transform: scale3d(1.25, 0.75, 1);
  }

  40% {
    transform: scale3d(0.75, 1.25, 1);
  }

  50% {
    transform: scale3d(1.15, 0.85, 1);
  }

  65% {
    transform: scale3d(0.95, 1.05, 1);
  }

  75% {
    transform: scale3d(1.05, 0.95, 1);
  }

  to {
    transform: scale3d(1, 1, 1);
  }
`;gt`
  from,
  to {
    transform: translate3d(0, 0, 0);
  }

  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translate3d(-10px, 0, 0);
  }

  20%,
  40%,
  60%,
  80% {
    transform: translate3d(10px, 0, 0);
  }
`;gt`
  from,
  to {
    transform: translate3d(0, 0, 0);
  }

  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translate3d(-10px, 0, 0);
  }

  20%,
  40%,
  60%,
  80% {
    transform: translate3d(10px, 0, 0);
  }
`;gt`
  from,
  to {
    transform: translate3d(0, 0, 0);
  }

  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translate3d(0, -10px, 0);
  }

  20%,
  40%,
  60%,
  80% {
    transform: translate3d(0, 10px, 0);
  }
`;gt`
  20% {
    transform: rotate3d(0, 0, 1, 15deg);
  }

  40% {
    transform: rotate3d(0, 0, 1, -10deg);
  }

  60% {
    transform: rotate3d(0, 0, 1, 5deg);
  }

  80% {
    transform: rotate3d(0, 0, 1, -5deg);
  }

  to {
    transform: rotate3d(0, 0, 1, 0deg);
  }
`;gt`
  from {
    transform: scale3d(1, 1, 1);
  }

  10%,
  20% {
    transform: scale3d(0.9, 0.9, 0.9) rotate3d(0, 0, 1, -3deg);
  }

  30%,
  50%,
  70%,
  90% {
    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, 3deg);
  }

  40%,
  60%,
  80% {
    transform: scale3d(1.1, 1.1, 1.1) rotate3d(0, 0, 1, -3deg);
  }

  to {
    transform: scale3d(1, 1, 1);
  }
`;gt`
  from {
    transform: translate3d(0, 0, 0);
  }

  15% {
    transform: translate3d(-25%, 0, 0) rotate3d(0, 0, 1, -5deg);
  }

  30% {
    transform: translate3d(20%, 0, 0) rotate3d(0, 0, 1, 3deg);
  }

  45% {
    transform: translate3d(-15%, 0, 0) rotate3d(0, 0, 1, -3deg);
  }

  60% {
    transform: translate3d(10%, 0, 0) rotate3d(0, 0, 1, 2deg);
  }

  75% {
    transform: translate3d(-5%, 0, 0) rotate3d(0, 0, 1, -1deg);
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`;const vB=gt`
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
`,xB=gt`
  from {
    opacity: 0;
    transform: translate3d(-100%, 100%, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,bB=gt`
  from {
    opacity: 0;
    transform: translate3d(100%, 100%, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,wB=gt`
  from {
    opacity: 0;
    transform: translate3d(0, -100%, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,EB=gt`
  from {
    opacity: 0;
    transform: translate3d(0, -2000px, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,fw=gt`
  from {
    opacity: 0;
    transform: translate3d(-100%, 0, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,TB=gt`
  from {
    opacity: 0;
    transform: translate3d(-2000px, 0, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,SB=gt`
  from {
    opacity: 0;
    transform: translate3d(100%, 0, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,AB=gt`
  from {
    opacity: 0;
    transform: translate3d(2000px, 0, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,CB=gt`
  from {
    opacity: 0;
    transform: translate3d(-100%, -100%, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,MB=gt`
  from {
    opacity: 0;
    transform: translate3d(100%, -100%, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,PB=gt`
  from {
    opacity: 0;
    transform: translate3d(0, 100%, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`,IB=gt`
  from {
    opacity: 0;
    transform: translate3d(0, 2000px, 0);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`;function kB({duration:e=1e3,delay:r=0,timingFunction:a="ease",keyframes:h=fw,iterationCount:d=1}){return xP`
    animation-duration: ${e}ms;
    animation-timing-function: ${a};
    animation-delay: ${r}ms;
    animation-name: ${h};
    animation-direction: normal;
    animation-fill-mode: both;
    animation-iteration-count: ${d};

    @media (prefers-reduced-motion: reduce) {
      animation: none;
    }
  `}function LB(e){return e==null}function OB(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"}function SP(e,r){return a=>a?e():r()}function ap(e){return SP(e,()=>null)}function Mx(e){return ap(()=>({opacity:0}))(e)}const pw=e=>{const{cascade:r=!1,damping:a=.5,delay:h=0,duration:d=1e3,fraction:x=0,keyframes:E=fw,triggerOnce:s=!1,className:A,style:R,childClassName:U,childStyle:N,children:q,onVisibilityChange:fe}=e,ae=Xe.useMemo(()=>kB({keyframes:E,duration:d}),[d,E]);return LB(q)?null:OB(q)?Rn(RB,{...e,animationStyles:ae,children:String(q)}):yB.isFragment(q)?Rn(AP,{...e,animationStyles:ae}):Rn(oB,{children:Xe.Children.map(q,(se,ve)=>{if(!Xe.isValidElement(se))return null;const J=h+(r?ve*d*a:0);switch(se.type){case"ol":case"ul":return Rn(t1,{children:({cx:Z})=>Rn(se.type,{...se.props,className:Z(A,se.props.className),style:Object.assign({},R,se.props.style),children:Rn(pw,{...e,children:se.props.children})})});case"li":return Rn(yA,{threshold:x,triggerOnce:s,onChange:fe,children:({inView:Z,ref:te})=>Rn(t1,{children:({cx:Ee})=>Rn(se.type,{...se.props,ref:te,className:Ee(U,se.props.className),css:ap(()=>ae)(Z),style:Object.assign({},N,se.props.style,Mx(!Z),{animationDelay:J+"ms"})})})});default:return Rn(yA,{threshold:x,triggerOnce:s,onChange:fe,children:({inView:Z,ref:te})=>Rn("div",{ref:te,className:A,css:ap(()=>ae)(Z),style:Object.assign({},R,Mx(!Z),{animationDelay:J+"ms"}),children:Rn(t1,{children:({cx:Ee})=>Rn(se.type,{...se.props,className:Ee(U,se.props.className),style:Object.assign({},N,se.props.style)})})})})}})})},zB={display:"inline-block",whiteSpace:"pre"},RB=e=>{const{animationStyles:r,cascade:a=!1,damping:h=.5,delay:d=0,duration:x=1e3,fraction:E=0,triggerOnce:s=!1,className:A,style:R,children:U,onVisibilityChange:N}=e,{ref:q,inView:fe}=wP({triggerOnce:s,threshold:E,onChange:N});return SP(()=>Rn("div",{ref:q,className:A,style:Object.assign({},R,zB),children:U.split("").map((ae,se)=>Rn("span",{css:ap(()=>r)(fe),style:{animationDelay:d+se*x*h+"ms"},children:ae},se))}),()=>Rn(AP,{...e,children:U}))(a)},AP=e=>{const{animationStyles:r,fraction:a=0,triggerOnce:h=!1,className:d,style:x,children:E,onVisibilityChange:s}=e,{ref:A,inView:R}=wP({triggerOnce:h,threshold:a,onChange:s});return Rn("div",{ref:A,className:d,css:ap(()=>r)(R),style:Object.assign({},x,Mx(!R)),children:E})};gt`
  from,
  20%,
  40%,
  60%,
  80%,
  to {
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  0% {
    opacity: 0;
    transform: scale3d(0.3, 0.3, 0.3);
  }

  20% {
    transform: scale3d(1.1, 1.1, 1.1);
  }

  40% {
    transform: scale3d(0.9, 0.9, 0.9);
  }

  60% {
    opacity: 1;
    transform: scale3d(1.03, 1.03, 1.03);
  }

  80% {
    transform: scale3d(0.97, 0.97, 0.97);
  }

  to {
    opacity: 1;
    transform: scale3d(1, 1, 1);
  }
`;gt`
  from,
  60%,
  75%,
  90%,
  to {
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  0% {
    opacity: 0;
    transform: translate3d(0, -3000px, 0) scaleY(3);
  }

  60% {
    opacity: 1;
    transform: translate3d(0, 25px, 0) scaleY(0.9);
  }

  75% {
    transform: translate3d(0, -10px, 0) scaleY(0.95);
  }

  90% {
    transform: translate3d(0, 5px, 0) scaleY(0.985);
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`;gt`
  from,
  60%,
  75%,
  90%,
  to {
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  0% {
    opacity: 0;
    transform: translate3d(-3000px, 0, 0) scaleX(3);
  }

  60% {
    opacity: 1;
    transform: translate3d(25px, 0, 0) scaleX(1);
  }

  75% {
    transform: translate3d(-10px, 0, 0) scaleX(0.98);
  }

  90% {
    transform: translate3d(5px, 0, 0) scaleX(0.995);
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`;gt`
  from,
  60%,
  75%,
  90%,
  to {
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  from {
    opacity: 0;
    transform: translate3d(3000px, 0, 0) scaleX(3);
  }

  60% {
    opacity: 1;
    transform: translate3d(-25px, 0, 0) scaleX(1);
  }

  75% {
    transform: translate3d(10px, 0, 0) scaleX(0.98);
  }

  90% {
    transform: translate3d(-5px, 0, 0) scaleX(0.995);
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`;gt`
  from,
  60%,
  75%,
  90%,
  to {
    animation-timing-function: cubic-bezier(0.215, 0.61, 0.355, 1);
  }

  from {
    opacity: 0;
    transform: translate3d(0, 3000px, 0) scaleY(5);
  }

  60% {
    opacity: 1;
    transform: translate3d(0, -20px, 0) scaleY(0.9);
  }

  75% {
    transform: translate3d(0, 10px, 0) scaleY(0.95);
  }

  90% {
    transform: translate3d(0, -5px, 0) scaleY(0.985);
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`;gt`
  20% {
    transform: scale3d(0.9, 0.9, 0.9);
  }

  50%,
  55% {
    opacity: 1;
    transform: scale3d(1.1, 1.1, 1.1);
  }

  to {
    opacity: 0;
    transform: scale3d(0.3, 0.3, 0.3);
  }
`;gt`
  20% {
    transform: translate3d(0, 10px, 0) scaleY(0.985);
  }

  40%,
  45% {
    opacity: 1;
    transform: translate3d(0, -20px, 0) scaleY(0.9);
  }

  to {
    opacity: 0;
    transform: translate3d(0, 2000px, 0) scaleY(3);
  }
`;gt`
  20% {
    opacity: 1;
    transform: translate3d(20px, 0, 0) scaleX(0.9);
  }

  to {
    opacity: 0;
    transform: translate3d(-2000px, 0, 0) scaleX(2);
  }
`;gt`
  20% {
    opacity: 1;
    transform: translate3d(-20px, 0, 0) scaleX(0.9);
  }

  to {
    opacity: 0;
    transform: translate3d(2000px, 0, 0) scaleX(2);
  }
`;gt`
  20% {
    transform: translate3d(0, -10px, 0) scaleY(0.985);
  }

  40%,
  45% {
    opacity: 1;
    transform: translate3d(0, 20px, 0) scaleY(0.9);
  }

  to {
    opacity: 0;
    transform: translate3d(0, -2000px, 0) scaleY(3);
  }
`;const DB=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
  }
`,BB=gt`
  from {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }

  to {
    opacity: 0;
    transform: translate3d(-100%, 100%, 0);
  }
`,FB=gt`
  from {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }

  to {
    opacity: 0;
    transform: translate3d(100%, 100%, 0);
  }
`,NB=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(0, 100%, 0);
  }
`,jB=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(0, 2000px, 0);
  }
`,UB=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(-100%, 0, 0);
  }
`,VB=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(-2000px, 0, 0);
  }
`,$B=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(100%, 0, 0);
  }
`,GB=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(2000px, 0, 0);
  }
`,ZB=gt`
  from {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }

  to {
    opacity: 0;
    transform: translate3d(-100%, -100%, 0);
  }
`,HB=gt`
  from {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }

  to {
    opacity: 0;
    transform: translate3d(100%, -100%, 0);
  }
`,qB=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(0, -100%, 0);
  }
`,WB=gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(0, -2000px, 0);
  }
`;function XB(e,r,a){switch(a){case"bottom-left":return r?BB:xB;case"bottom-right":return r?FB:bB;case"down":return e?r?jB:EB:r?NB:wB;case"left":return e?r?VB:TB:r?UB:fw;case"right":return e?r?GB:AB:r?$B:SB;case"top-left":return r?ZB:CB;case"top-right":return r?HB:MB;case"up":return e?r?WB:IB:r?qB:PB;default:return r?DB:vB}}const Rf=e=>{const{big:r=!1,direction:a,reverse:h=!1,...d}=e,x=Xe.useMemo(()=>XB(r,h,a),[r,a,h]);return Rn(pw,{keyframes:x,...d})};gt`
  from {
    transform: perspective(400px) scale3d(1, 1, 1) translate3d(0, 0, 0) rotate3d(0, 1, 0, -360deg);
    animation-timing-function: ease-out;
  }

  40% {
    transform: perspective(400px) scale3d(1, 1, 1) translate3d(0, 0, 150px)
      rotate3d(0, 1, 0, -190deg);
    animation-timing-function: ease-out;
  }

  50% {
    transform: perspective(400px) scale3d(1, 1, 1) translate3d(0, 0, 150px)
      rotate3d(0, 1, 0, -170deg);
    animation-timing-function: ease-in;
  }

  80% {
    transform: perspective(400px) scale3d(0.95, 0.95, 0.95) translate3d(0, 0, 0)
      rotate3d(0, 1, 0, 0deg);
    animation-timing-function: ease-in;
  }

  to {
    transform: perspective(400px) scale3d(1, 1, 1) translate3d(0, 0, 0) rotate3d(0, 1, 0, 0deg);
    animation-timing-function: ease-in;
  }
`;gt`
  from {
    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    animation-timing-function: ease-in;
    opacity: 0;
  }

  40% {
    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    animation-timing-function: ease-in;
  }

  60% {
    transform: perspective(400px) rotate3d(1, 0, 0, 10deg);
    opacity: 1;
  }

  80% {
    transform: perspective(400px) rotate3d(1, 0, 0, -5deg);
  }

  to {
    transform: perspective(400px);
  }
`;gt`
  from {
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    animation-timing-function: ease-in;
    opacity: 0;
  }

  40% {
    transform: perspective(400px) rotate3d(0, 1, 0, -20deg);
    animation-timing-function: ease-in;
  }

  60% {
    transform: perspective(400px) rotate3d(0, 1, 0, 10deg);
    opacity: 1;
  }

  80% {
    transform: perspective(400px) rotate3d(0, 1, 0, -5deg);
  }

  to {
    transform: perspective(400px);
  }
`;gt`
  from {
    transform: perspective(400px);
  }

  30% {
    transform: perspective(400px) rotate3d(1, 0, 0, -20deg);
    opacity: 1;
  }

  to {
    transform: perspective(400px) rotate3d(1, 0, 0, 90deg);
    opacity: 0;
  }
`;gt`
  from {
    transform: perspective(400px);
  }

  30% {
    transform: perspective(400px) rotate3d(0, 1, 0, -15deg);
    opacity: 1;
  }

  to {
    transform: perspective(400px) rotate3d(0, 1, 0, 90deg);
    opacity: 0;
  }
`;gt`
  0% {
    animation-timing-function: ease-in-out;
  }

  20%,
  60% {
    transform: rotate3d(0, 0, 1, 80deg);
    animation-timing-function: ease-in-out;
  }

  40%,
  80% {
    transform: rotate3d(0, 0, 1, 60deg);
    animation-timing-function: ease-in-out;
    opacity: 1;
  }

  to {
    transform: translate3d(0, 700px, 0);
    opacity: 0;
  }
`;gt`
  from {
    opacity: 0;
    transform: scale(0.1) rotate(30deg);
    transform-origin: center bottom;
  }

  50% {
    transform: rotate(-10deg);
  }

  70% {
    transform: rotate(3deg);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
`;gt`
  from {
    opacity: 0;
    transform: translate3d(-100%, 0, 0) rotate3d(0, 0, 1, -120deg);
  }

  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
`;gt`
  from {
    opacity: 1;
  }

  to {
    opacity: 0;
    transform: translate3d(100%, 0, 0) rotate3d(0, 0, 1, 120deg);
  }
`;gt`
  from {
    transform: rotate3d(0, 0, 1, -200deg);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
`;gt`
  from {
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
`;gt`
  from {
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
`;gt`
  from {
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
`;gt`
  from {
    transform: rotate3d(0, 0, 1, -90deg);
    opacity: 0;
  }

  to {
    transform: translate3d(0, 0, 0);
    opacity: 1;
  }
`;gt`
  from {
    opacity: 1;
  }

  to {
    transform: rotate3d(0, 0, 1, 200deg);
    opacity: 0;
  }
`;gt`
  from {
    opacity: 1;
  }

  to {
    transform: rotate3d(0, 0, 1, 45deg);
    opacity: 0;
  }
`;gt`
  from {
    opacity: 1;
  }

  to {
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }
`;gt`
  from {
    opacity: 1;
  }

  to {
    transform: rotate3d(0, 0, 1, -45deg);
    opacity: 0;
  }
`;gt`
  from {
    opacity: 1;
  }

  to {
    transform: rotate3d(0, 0, 1, 90deg);
    opacity: 0;
  }
`;const KB=gt`
  from {
    transform: translate3d(0, -100%, 0);
    visibility: visible;
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`,YB=gt`
  from {
    transform: translate3d(-100%, 0, 0);
    visibility: visible;
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`,QB=gt`
  from {
    transform: translate3d(100%, 0, 0);
    visibility: visible;
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`,JB=gt`
  from {
    transform: translate3d(0, 100%, 0);
    visibility: visible;
  }

  to {
    transform: translate3d(0, 0, 0);
  }
`,eF=gt`
  from {
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    transform: translate3d(0, 100%, 0);
  }
`,tF=gt`
  from {
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    transform: translate3d(-100%, 0, 0);
  }
`,rF=gt`
  from {
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    transform: translate3d(100%, 0, 0);
  }
`,nF=gt`
  from {
    transform: translate3d(0, 0, 0);
  }

  to {
    visibility: hidden;
    transform: translate3d(0, -100%, 0);
  }
`;function iF(e,r){switch(r){case"down":return e?eF:KB;case"right":return e?rF:QB;case"up":return e?nF:JB;case"left":default:return e?tF:YB}}const CP=e=>{const{direction:r,reverse:a=!1,...h}=e,d=Xe.useMemo(()=>iF(a,r),[r,a]);return Rn(pw,{keyframes:d,...h})};gt`
  from {
    opacity: 0;
    transform: scale3d(0.3, 0.3, 0.3);
  }

  50% {
    opacity: 1;
  }
`;gt`
  from {
    opacity: 0;
    transform: scale3d(0.1, 0.1, 0.1) translate3d(0, -1000px, 0);
    animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
  }

  60% {
    opacity: 1;
    transform: scale3d(0.475, 0.475, 0.475) translate3d(0, 60px, 0);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
  }
`;gt`
  from {
    opacity: 0;
    transform: scale3d(0.1, 0.1, 0.1) translate3d(-1000px, 0, 0);
    animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
  }

  60% {
    opacity: 1;
    transform: scale3d(0.475, 0.475, 0.475) translate3d(10px, 0, 0);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
  }
`;gt`
  from {
    opacity: 0;
    transform: scale3d(0.1, 0.1, 0.1) translate3d(1000px, 0, 0);
    animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
  }

  60% {
    opacity: 1;
    transform: scale3d(0.475, 0.475, 0.475) translate3d(-10px, 0, 0);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
  }
`;gt`
  from {
    opacity: 0;
    transform: scale3d(0.1, 0.1, 0.1) translate3d(0, 1000px, 0);
    animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
  }

  60% {
    opacity: 1;
    transform: scale3d(0.475, 0.475, 0.475) translate3d(0, -60px, 0);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
  }
`;gt`
  from {
    opacity: 1;
  }

  50% {
    opacity: 0;
    transform: scale3d(0.3, 0.3, 0.3);
  }

  to {
    opacity: 0;
  }
`;gt`
  40% {
    opacity: 1;
    transform: scale3d(0.475, 0.475, 0.475) translate3d(0, -60px, 0);
    animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
  }

  to {
    opacity: 0;
    transform: scale3d(0.1, 0.1, 0.1) translate3d(0, 2000px, 0);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
  }
`;gt`
  40% {
    opacity: 1;
    transform: scale3d(0.475, 0.475, 0.475) translate3d(42px, 0, 0);
  }

  to {
    opacity: 0;
    transform: scale(0.1) translate3d(-2000px, 0, 0);
  }
`;gt`
  40% {
    opacity: 1;
    transform: scale3d(0.475, 0.475, 0.475) translate3d(-42px, 0, 0);
  }

  to {
    opacity: 0;
    transform: scale(0.1) translate3d(2000px, 0, 0);
  }
`;gt`
  40% {
    opacity: 1;
    transform: scale3d(0.475, 0.475, 0.475) translate3d(0, 60px, 0);
    animation-timing-function: cubic-bezier(0.55, 0.055, 0.675, 0.19);
  }

  to {
    opacity: 0;
    transform: scale3d(0.1, 0.1, 0.1) translate3d(0, -2000px, 0);
    animation-timing-function: cubic-bezier(0.175, 0.885, 0.32, 1);
  }
`;const oF=()=>{const e=E3(),[r,a]=Xe.useState(!1),[h,d]=Xe.useState(!1),x=()=>{a(!r)},E=()=>{window.scrollY>10?d(!0):d(!1)};return Xe.useEffect(()=>(window.addEventListener("scroll",E),()=>{window.removeEventListener("scroll",E)}),[]),we.jsxs("header",{className:"w-full h-auto bg-transparent overflow-x-hidden fixed z-50 top-0 left-0",children:[we.jsx(CP,{direction:"down",children:we.jsxs("nav",{className:`w-full md:h-24 h-20 ${h?"bg-white":"bg-transparent"} lg:px-24 md:px-12 px-8 flex justify-between items-center`,children:[we.jsx(kc,{as:"a",href:"/",className:"md:h-20 h-30",image:vx,alt:"Logo"}),we.jsxs("div",{className:"lg:flex hidden items-center gap-20",children:[we.jsx("ul",{className:"flex items-center justify-center gap-8",children:$S.map((s,A)=>we.jsx(Ju,{className:"w-full text-base",children:we.jsx(xS,{to:s.url,className:"relative inline-block overflow-hidden pt-2 pl-2 before:w-2 before:h-2 before:bg-color2 before:absolute before:top-2 before:-left-10 before:rounded-full before:transition-all before:duration-200 before:ease-in hover:before:left-0.5 after:w-0.5 after:h-3 after:bg-color2 after:absolute after:left-1 after:-top-10 hover:after:top-3.5 after:transition-all after:duration-200 after:ease-in",children:s.name})},A))}),we.jsx("ul",{className:"flex items-center justify-center gap-6",children:GS.map((s,A)=>we.jsx(Ju,{className:"w-full",children:we.jsx(Lc,{onClick:()=>e(s.url),type:"button",className:`${s.name==="Signup"?"border-2 border-gray-950 before:top-0":"before:bottom-0 border-b-2 border-transparent hover:border-gray-950"} py-2 px-8 relative z-10 before:content-[''] before:absolute before:left-0 before:w-full before:h-0 before:bg-color2 before:-z-10 hover:before:h-full before:transition-all before:duration-300 before:ease-in text-base`,children:s.name})},A))})]})]})}),we.jsx("nav",{className:`flex justify-end lg:hidden h-screen w-full bg-gray-950/90 fixed top-0  ${r?"right-0":"-right-[120vw]"} transition-all duration-500 ease-out`,children:we.jsxs("div",{className:`w-[70%] h-screen bg-white flex flex-col justify-between items-center relative ${r?"right-0":"-right-[120vw]"} transition-all duration-500 ease-out delay-300`,children:[we.jsxs("section",{className:"w-full px-4 py-6 flex flex-col gap-16",children:[we.jsxs("div",{className:"w-full flex justify-between items-center",children:[we.jsx(kc,{as:"a",href:"/",className:"md:h-10 h-8",image:vx,alt:"Logo"}),we.jsx("div",{className:"hamburger text-gray-950 cursor-pointer",onClick:x,children:we.jsx(Y3,{size:25,color:"currentColor",weight:"fill"})})]}),we.jsx("ul",{className:"flex flex-col gap-3 pl-2",children:$S.map((s,A)=>we.jsx(Ju,{className:"w-full text-base",children:we.jsx(xS,{to:s.url,onClick:x,className:"relative overflow-hidden inline-block before:w-full before:h-0.5 before:bg-color2 before:absolute before:bottom-0 before:-left-full before:rounded-full before:transition-all before:duration-200 before:ease-in hover:before:left-0 ",children:s.name})},A))})]}),we.jsx("ul",{className:"w-full flex items-center justify-center pb-24 gap-4",children:GS.map((s,A)=>we.jsx(Ju,{className:"w-auto",children:we.jsx(Lc,{onClick:()=>e(s.url),type:"button",className:`${s.name==="Signup"?"border-2 border-gray-950 before:top-0":"before:bottom-0 border-b-2 border-white hover:border-gray-950"} py-1.5 px-5 relative z-10 before:content-[''] before:absolute before:left-0 before:w-full before:h-0 before:bg-color2 before:-z-10 hover:before:h-full before:transition-all before:duration-300 before:ease-in text-base`,children:s.name})},A))})]})})]})},mr=({className:e,children:r,as:a})=>{const h=a||"div";return we.jsx(h,{className:e,children:r})},Fi=({cardClass:e,imageWrapperClass:r,imageAlt:a,imageSrc:h,textWrapperClass:d,children:x,cover:E,...s})=>we.jsxs("div",{className:e,...s,children:[we.jsx(kc,{className:r,objectCover:E,alt:a,image:h}),we.jsx("div",{className:d,children:x})]}),vA="/assets/herov-9e7a728d.jpg",MP=()=>{const e=Xe.useCallback(r=>{switch(r){case 0:return we.jsx(bx,{size:15,color:"currentColor",weight:"fill"});case 1:return we.jsx(Ex,{size:15,color:"currentColor",weight:"fill"});case 2:return we.jsx(wx,{size:15,color:"currentColor",weight:"fill"});default:return""}},[]);return we.jsxs("section",{className:"w-full h-auto flex flex-col items-start justify-center relative lg:px-24 md:px-10 px-6 my-28 gap-5",children:[we.jsx(mr,{as:"p",className:"font-light text-base text-color3/80 tracking-widest",children:Wo.firstText}),we.jsxs("main",{className:"w-full grid md:grid-cols-2 lg:gap-6 gap-12 md:gap-5",children:[we.jsxs("div",{className:"w-full flex flex-col gap-6 order-2 md:order-1",children:[we.jsx(mr,{as:"h1",className:"lg:text-5xl md:text-3xl text-4xl text-color3 font-medium",children:Wo.secondText}),we.jsx("ul",{className:"flex flex-col gap-8 lg:mt-5 mt-3",children:Wo.listOfSteps.map((r,a)=>we.jsxs(Ju,{className:"flex gap-5 items-center justify-start",children:[we.jsx(mr,{as:"p",className:`text-white ${a===0?"bg-color2":a===1?"bg-color1":"bg-color3"} p-2 rounded-md`,children:e(a)}),we.jsx(mr,{as:"p",className:"text-sm text-color3 font-light",children:r.text})]},a))})]}),we.jsxs("div",{className:"w-full flex flex-col justify-center lg:items-center items-start relative order-1 md:order-2",children:[we.jsxs(Fi,{cardClass:"lg:w-[70%] md:w-[80%] w-[90%] shadow-2xl shadow-sky-500/70 p-4 rounded-xl flex flex-col gap-4",imageAlt:Wo.cardOne.name,imageSrc:vA,imageWrapperClass:"h-[150px] overflow-hidden rounded-xl shadow",cover:"object-cover object-top",textWrapperClass:"flex flex-col gap-3",children:[we.jsx(mr,{as:"h4",className:"text-base font-medium text-color3",children:Wo.cardOne.name}),we.jsx(mr,{as:"p",className:"text-sm font-light text-color3",children:Wo.cardOne.date}),we.jsxs("div",{className:"flex items-center gap-6",children:[we.jsx(mr,{as:"span",className:"text-color3 font-light bg-color3/5 p-2.5 rounded-full",children:we.jsx(bx,{size:18,color:"currentColor",weight:"light"})}),we.jsx(mr,{as:"span",className:"text-color3 font-light bg-color3/5 p-2.5 rounded-full",children:we.jsx(wx,{size:18,color:"currentColor",weight:"light"})}),we.jsx(mr,{as:"span",className:"text-color3 font-light bg-color3/5 p-2.5 rounded-full",children:we.jsx(Ex,{size:18,color:"currentColor",weight:"light"})})]}),we.jsxs(mr,{as:"p",className:"text-sm font-light text-color3 flex items-center gap-3",children:[we.jsx(tP,{size:18,color:"currentColor",weight:"light"}),Wo.cardOne.people]})]}),we.jsxs(Fi,{cardClass:"flex gap-3 justify-start items-start absolute lg:right-0 -right-4 bottom-10 bg-white py-3 px-4 border-2 border-color3/5 shadow-md rounded-xl",imageAlt:Wo.cardTwo.destination,imageSrc:vA,cover:"object-cover object-top",imageWrapperClass:"h-16 w-16 rounded-full overflow-hidden",textWrapperClass:"flex flex-col gap-2",children:[we.jsx(mr,{as:"p",className:"text-xs font-light text-color3",children:Wo.cardTwo.status}),we.jsx(mr,{as:"h4",className:"text-base font-medium text-color3",children:Wo.cardTwo.destination}),we.jsx(mr,{as:"p",className:"text-xs font-light text-color3 pb-2 relative before:w-[40%] before:h-1 before:absolute before:bottom-0 before:left-0 before:bg-color1",children:Wo.cardTwo.completion})]})]})]})]})},sF="/assets/heroimg-4668e38a.jpg",PP=()=>we.jsx("section",{className:"w-full lg:h-screen md:h-[550px] h-[830px] relative overflow-x-hidden flex justify-end",children:we.jsxs("main",{className:"w-full lg:h-full h-auto grid md:grid-cols-2 absolute top-0 left-0 lg:px-24 md:px-8 px-5 pt-24 md:pt-32 lg:pt-0",children:[we.jsxs("div",{className:"flex flex-col justify-center md:gap-6 gap-3 md:order-1 order-2",children:[we.jsx(mr,{as:"p",className:"text-color1 uppercase tracking-widest lg:text-base  text-sm font-normal text-green-700 text-bold",children:we.jsx(Rf,{children:Eg.firstText})}),we.jsx(mr,{as:"h1",className:" text-color3 lg:text-7xl md:text-5xl text-3xl font-medium",children:we.jsx(Rf,{children:Eg.secondText})}),we.jsx(mr,{as:"p",className:"text-color3 md:text-base text-sm text-justify font-light",children:we.jsx(Rf,{children:Eg.thirdText})}),we.jsx("div",{className:"w-full flex md:justify-start justify-between items-center lg:gap-12 md:gap-6 gap-0",children:we.jsx(Lc,{type:"button",className:"outline-none border-none lg:px-7 px-5 py-3 bg-green-700 text-white font-extralight rounded-lg",id:"hero-button",onClick:()=>{window.location.href="/adopt-a-tree"},children:Eg.firstButton})})]}),we.jsx("div",{className:"flex flex-col items-center justify-end md:order-2 order-1",children:we.jsx(CP,{direction:"right",children:we.jsx(kc,{image:sF,alt:"Hero Image",className:" lg:h-[85%] lg:w-[90%] md:h-[100%] md:w-full w-[90%] h-[50vh]"})})})]})}),aF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOQAAACrCAYAAAB2WTA0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAXASURBVHgB7d2xjhNXFAbgY+zCilaRC4otKKxoCwokKCn3EahpQt6ANwiPkDcIVZK3yJaUlCmQ2DIFiigoLPDG8cUzWeO11zjxzBzvfp80stfXaMbHvvbMneH+EQAAAAAAAAAAQPN61zXOhsPx5zuTyfv5E99HfsPqdlotXRtUSzGJHNQosTvXtn769HtMp29jMHgeh+FxtdyNHO7FYnseRR5qlNidANLQISERHRISqQ+mYxZxGv3++IvWXm+0aJw9nPX7z75ou7g4mw/0nEd3yjHQYEPbaM1j76LZQYzhmvUeVbdlO49X2soARtMDZWp0YP4dZZ13uJfzDvj9V//L2eyH3sXFy+hOGQQY7fD819Hsm1u2ZZeBibItr6NZanRg7LLCoZj/ar6dDQaz+fIiDsNptRxHDuNYbM/jyOM01Cgtv5CQiA4JieiQkMjg2tZe73w+mlpGVA9l6Lm+FjLDNZpF2Y5J5LpGU40AAAAAAAAAAAAAAAAAAAAAgJuqH80r09l/W93/GN0r09mXbSpT2H+IHNRou2w1asQgmncSizf4PHK8uWU6+/vV/T8jBzXaLluNGmEaSEhEh4REdEhIZN/HkCXAZbRhHeWgfLjSVo5PmpyEuaz7ZOWx5W24v9JWJu19E81So+2y1ag1++6QpYibUpWO4jKcs9Z0EdeFgC5bFxDa9IdNjbbLVqPW7LtD1tPCLxsutU3XPL9pq9sziMvXPdny3Cao0XYZa9SKXjSv5P7Vw9Xn0b3yzVvvhp1FDmq0XbYaNcKgDiSiQ0IiOiQk0salc++q9WS53KkMFmS5HKymRttlqxEAAAAAAAAAAAAAAAAAAAAAAAAA7KiNKIF1SlhKmdKvZDK0Oa1fvd5JtJNR8d89mY0Gw3hU7k5/651FfsO4zN/IEn5TJ2jlf78rbczLuk6JPyvFKnN//hHteRAHkg/R/yaezG9+rv7s6otzFyUPZByLD/6ryOFRdVs+Y9nmmV3LzOWQiA4JieiQkEgbx5Algno18bY++C+Pj1faSobDPgZ61q23fr2jBte7u2fzAZyP8Xzl0Yf1ncHT2Yvlht4s3n/6tfdTdKe8f6sJx/UASqnxeKWtjayQ47gadV7bFIOebqCnrQ65Szx1KdK+OuSm9Y7iaob9vta7u8l8W+7Ej9c844u2v3ufB6S67pDjDW3rOmQZdW2jQ442tN2tlmVlm25lh+wqnvqgYrFnV0d9R73qA7baNv+FPI9uravtdTHobcWy7/J+p9TVcHoZju7itMfBxGL3n86e9arTHtNfeodw2mMc+U57nFa3TnsAu9MhIREdEhLp6tK5Dyu3ba73MK5rnJ/amH9dnsXhKDXNNnJZX1N7ENexAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsHELM2f9Vou9KBF1JSH4T3SvBoSfV/deRY5p7NUqiq2yPNg2rJctrLdsxjFzUKAnpV5CIDgmJ3LRd1uWc+3Vtq7tBbWTPD9dsx6a2ounjJTVK7KYN6tyfL8c7PL/p7PnyYXq8w/PLB+1VNEuNErPLConctF/Io7i6O1Z+Ecq3cEnTPV9pK4nKTe6ODaptWjaaL+Pqfvn1Wd79mkbzqdJqlNhNO4a87o2qI7fbNF2zzuVjoi4iwNUoMbuskIgOCYnokJDIbbiWtT4eaeN82tdYPg+Y5dhIjQAAAAAAAAAAAAAAAAAAAA5NP2jDg/nyXSz+Z/5f0b0yzWJJvLoXi8SrDLMEZKtRJ25D+lUG9RT9meqdLV0qY41aZ5IrSESHhETssu6fdKntMtYohdswDWTbxnGZS/E1zuNqnsa+ncZuzqJZ48hXoxTsskIifiH3bxhXd7lOYpHwtC5dahLN7yKOVv4+qrapWE2XKpoO3MlYoxQcQ+7fug/PdKmt7XSp2LLOLtKlMtYoBbuskIgOCYnokMCtk/XSuUyXz7l0DgAAAAAAAAAAAAA69A9RYFSwaPkREQAAAABJRU5ErkJggg==",lF="/assets/Icon1-2956f2d4.png",cF="/assets/Icon2-11962db4.png",uF="/assets/Icon3-7840fda7.png",hF="/assets/Icon4-75650268.png",IP=()=>{const e=Xe.useCallback(r=>{switch(r){case 0:return lF;case 1:return cF;case 2:return uF;case 3:return hF;default:return""}},[]);return we.jsxs("section",{className:"w-full h-auto flex flex-col items-center justify-center relative lg:px-24 md:px-20 px-6",children:[we.jsx(kc,{image:aF,alt:"Vector",className:"absolute top-0 right-4 lg:h-36 h-24"}),we.jsxs("main",{className:"w-full pt-32 flex flex-col gap-3 items-center justify-center",children:[we.jsx(mr,{as:"p",className:"font-light text-base text-color3/80 tracking-widest",children:we.jsx(Rf,{children:Yv.firstText})}),we.jsx(mr,{as:"h2",className:"md:text-4xl text-2xl font-medium capitalize text-color3",children:we.jsx(Rf,{children:Yv.secondText})}),we.jsx("div",{className:"w-full h-auto grid lg:grid-cols-4 md:grid-cols-2 lg:gap-7 md:gap-10 gap-7 my-12 z-20 px-8 md:px-0",children:Yv.cards.map((r,a)=>we.jsxs(Fi,{cardClass:"w-full bg-white flex flex-col items-center justify-center py-6 cursor-pointer transition duration-300 hover:shadow-xl px-5 rounded-xl cardPseudo after:bg-color1",imageWrapperClass:"w-28 h-28 relative z-10 before:content-[''] before:absolute before:top-3 before:right-3 before:w-16 before:h-16 before:bg-color2/30 before:-z-10 before:rounded-tl-3xl before:rounded-br-3xl",cover:"object-cover",imageAlt:r.firstText,imageSrc:e(a),textWrapperClass:"w-full flex flex-col items-center gap-2",children:[we.jsx(mr,{as:"h4",className:"text-base rounded font-medium text-color3",children:r.firstText}),we.jsx(mr,{as:"p",className:"text-sm  font-light text-center text-color3",children:r.secondText})]},a))})]})]})},dF=()=>we.jsxs(we.Fragment,{children:[we.jsx(PP,{}),we.jsx(IP,{}),we.jsx(MP,{})]});var kP={exports:{}};(function(e,r){(function(a,h){e.exports=h()})(bi,function(){var a,h,d;function x(s,A){if(!a)a=A;else if(!h)h=A;else{var R="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+a+")(sharedChunk); ("+h+")(sharedChunk); self.onerror = null;",U={};a(U),d=A(U),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(d.workerUrl=window.URL.createObjectURL(new Blob([R],{type:"text/javascript"})))}}x(["exports"],function(s){var A=typeof self<"u"?self:{},R="2.15.0";let U;const N={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(U==null){const n=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{U={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):n}catch{U=n}}return U},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!N.API_URL)return null;try{const n=new URL(N.API_URL);return n.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":n.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},q={supported:!1,testSupport:function(n){!se&&ae&&(ve?J(n):fe=n)}};let fe,ae,se=!1,ve=!1;function J(n){const t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);try{if(n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,ae),n.isContextLost())return;q.supported=!0}catch{}n.deleteTexture(t),se=!0}A.document&&(ae=A.document.createElement("img"),ae.onload=function(){fe&&J(fe),fe=null,ve=!0},ae.onerror=function(){se=!0,fe=null},ae.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Z="01";function te(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ee=ke;function ke(n,t,i,l){this.cx=3*n,this.bx=3*(i-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=t,this.p2x=i,this.p2y=l}ke.prototype={sampleCurveX:function(n){return((this.ax*n+this.bx)*n+this.cx)*n},sampleCurveY:function(n){return((this.ay*n+this.by)*n+this.cy)*n},sampleCurveDerivativeX:function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},solveCurveX:function(n,t){if(t===void 0&&(t=1e-6),n<0)return 0;if(n>1)return 1;for(var i=n,l=0;l<8;l++){var u=this.sampleCurveX(i)-n;if(Math.abs(u)<t)return i;var p=this.sampleCurveDerivativeX(i);if(Math.abs(p)<1e-6)break;i-=u/p}var g=0,y=1;for(i=n,l=0;l<20&&(u=this.sampleCurveX(i),!(Math.abs(u-n)<t));l++)n>u?g=i:y=i,i=.5*(y-g)+g;return i},solve:function(n,t){return this.sampleCurveY(this.solveCurveX(n,t))}};var Fe=te(Ee),We=Ve;function Ve(n,t){this.x=n,this.y=t}Ve.prototype={clone:function(){return new Ve(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,t){return this.clone()._rotateAround(n,t)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var t=n.x-this.x,i=n.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,t){return Math.atan2(this.x*t-this.y*n,this.x*n+this.y*t)},_matMult:function(n){var t=n[2]*this.x+n[3]*this.y;return this.x=n[0]*this.x+n[1]*this.y,this.y=t,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var t=Math.cos(n),i=Math.sin(n),l=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=l,this},_rotateAround:function(n,t){var i=Math.cos(n),l=Math.sin(n),u=t.y+l*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-l*(this.y-t.y),this.y=u,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ve.convert=function(n){return n instanceof Ve?n:Array.isArray(n)?new Ve(n[0],n[1]):n};var Te=te(We);const dt=Math.PI/180,zt=180/Math.PI;function at(n){return n*dt}function vt(n){return n*zt}const Ot=[[0,0],[1,0],[1,1],[0,1]];function St(n){if(n<=0)return 0;if(n>=1)return 1;const t=n*n,i=t*n;return 4*(n<.5?i:3*(n-t)+i-.75)}function Jt(n,t,i,l){const u=new Fe(n,t,i,l);return function(p){return u.solve(p)}}const Ze=Jt(.25,.1,.25,1);function Oe(n,t,i){return Math.min(i,Math.max(t,n))}function Et(n,t,i){return(i=Oe((i-n)/(t-n),0,1))*i*(3-2*i)}function _t(n,t,i){const l=i-t,u=((n-t)%l+l)%l+t;return u===t?i:u}function It(n,t,i){if(!n.length)return i(null,[]);let l=n.length;const u=new Array(n.length);let p=null;n.forEach((g,y)=>{t(g,(b,w)=>{b&&(p=b),u[y]=w,--l==0&&i(p,u)})})}function qt(n){const t=[];for(const i in n)t.push(n[i]);return t}function nr(n,...t){for(const i of t)for(const l in i)n[l]=i[l];return n}let Lr=1;function Si(){return Lr++}function wn(){return function n(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,n)}()}function Fn(n){return n<=1?1:Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Fc(n){return!!n&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n)}function Ps(n,t){n.forEach(i=>{t[i]&&(t[i]=t[i].bind(t))})}function ca(n,t){return n.indexOf(t,n.length-t.length)!==-1}function er(n,t,i){const l={};for(const u in n)l[u]=t.call(i||this,n[u],u,n);return l}function ua(n,t,i){const l={};for(const u in n)t.call(i||this,n[u],u,n)&&(l[u]=n[u]);return l}function pi(n){return Array.isArray(n)?n.map(pi):typeof n=="object"&&n?er(n,pi):n}const xl={};function jr(n){xl[n]||(typeof console<"u"&&console.warn(n),xl[n]=!0)}function Ai(n,t,i){return(i.y-n.y)*(t.x-n.x)>(t.y-n.y)*(i.x-n.x)}function Nc(n){let t=0;for(let i,l,u=0,p=n.length,g=p-1;u<p;g=u++)i=n[u],l=n[g],t+=(l.x-i.x)*(i.y+l.y);return t}function Ao(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function mi(n){const t={};if(n.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(i,l,u,p)=>{const g=u||p;return t[l]=!g||g.toLowerCase(),""}),t["max-age"]){const i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}let bl=null;function ha(n){if(bl==null){const t=n.navigator?n.navigator.userAgent:null;bl=!!n.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return bl}function wl(n){try{const t=A[n];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch{return!1}}function os(n,t){return[n[4*t],n[4*t+1],n[4*t+2],n[4*t+3]]}const da="mapbox-tiles";let jc=500,Uc=50,Ci,ss;function El(){try{return A.caches}catch{}}function Is(){El()&&!Ci&&(Ci=A.caches.open(da))}function fa(n){const t=n.indexOf("?");if(t<0)return n;const i=function(u){const p=u.indexOf("?");return p>0?u.slice(p+1).split("&"):[]}(n),l=i.filter(u=>{const p=u.split("=");return p[0]==="language"||p[0]==="worldview"});return l.length?`${n.slice(0,t)}?${l.join("&")}`:n.slice(0,t)}let Tl=1/0;const ks={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ks);class as extends Error{constructor(t,i,l){i===401&&Ae(l)&&(t+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(t),this.status=i,this.url=l}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ls=Ao()?()=>self.worker&&self.worker.referrer:()=>(A.location.protocol==="blob:"?A.parent:A).location.href,Os=function(n,t){if(!(/^file:/.test(i=n.url)||/^file:/.test(Ls())&&!/^\w+:/.test(i))){if(A.fetch&&A.Request&&A.AbortController&&A.Request.prototype.hasOwnProperty("signal"))return function(l,u){const p=new A.AbortController,g=new A.Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,referrer:Ls(),referrerPolicy:l.referrerPolicy,signal:p.signal});let y=!1,b=!1;const w=(C=g.url).indexOf("sku=")>0&&Ae(C);var C;l.type==="json"&&g.headers.set("Accept","application/json");const P=(O,z,F)=>{if(b)return;if(O&&O.message!=="SecurityError"&&jr(O.toString()),z&&F)return I(z);const G=Date.now();A.fetch(g).then(Q=>{if(Q.ok){const ce=w?Q.clone():null;return I(Q,ce,G)}return u(new as(Q.statusText,Q.status,l.url))}).catch(Q=>{Q.name!=="AbortError"&&u(new Error(`${Q.message} ${l.url}`))})},I=(O,z,F)=>{(l.type==="arrayBuffer"?O.arrayBuffer():l.type==="json"?O.json():O.text()).then(G=>{b||(z&&F&&function(Q,ce,ee){if(Is(),!Ci)return;const oe={status:ce.status,statusText:ce.statusText,headers:new A.Headers};ce.headers.forEach((Le,Me)=>oe.headers.set(Me,Le));const he=mi(ce.headers.get("Cache-Control")||"");if(he["no-store"])return;he["max-age"]&&oe.headers.set("Expires",new Date(ee+1e3*he["max-age"]).toUTCString());const ue=oe.headers.get("Expires");ue&&(new Date(ue).getTime()-ee<42e4||function(Le,Me){if(ss===void 0)try{new Response(new ReadableStream),ss=!0}catch{ss=!1}ss?Me(Le.body):Le.blob().then(Me)}(ce,Le=>{const Me=new A.Response(Le,oe);Is(),Ci&&Ci.then(Ue=>Ue.put(fa(Q.url),Me)).catch(Ue=>jr(Ue.message))}))}(g,z,F),y=!0,u(null,G,O.headers.get("Cache-Control"),O.headers.get("Expires")))}).catch(G=>{b||u(new Error(G.message))})};return w?function(O,z){if(Is(),!Ci)return z(null);const F=fa(O.url);Ci.then(G=>{G.match(F).then(Q=>{const ce=function(ee){if(!ee)return!1;const oe=new Date(ee.headers.get("Expires")||0),he=mi(ee.headers.get("Cache-Control")||"");return oe>Date.now()&&!he["no-cache"]}(Q);G.delete(F),ce&&G.put(F,Q.clone()),z(null,Q,ce)}).catch(z)}).catch(z)}(g,P):P(null,null),{cancel:()=>{b=!0,y||p.abort()}}}(n,t);if(Ao()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",n,t,void 0,!0)}var i;return function(l,u){const p=new A.XMLHttpRequest;p.open(l.method||"GET",l.url,!0),l.type==="arrayBuffer"&&(p.responseType="arraybuffer");for(const g in l.headers)p.setRequestHeader(g,l.headers[g]);return l.type==="json"&&(p.responseType="text",p.setRequestHeader("Accept","application/json")),p.withCredentials=l.credentials==="include",p.onerror=()=>{u(new Error(p.statusText))},p.onload=()=>{if((p.status>=200&&p.status<300||p.status===0)&&p.response!==null){let g=p.response;if(l.type==="json")try{g=JSON.parse(p.response)}catch(y){return u(y)}u(null,g,p.getResponseHeader("Cache-Control"),p.getResponseHeader("Expires"))}else u(new as(p.statusText,p.status,l.url))},p.send(l.body),{cancel:()=>p.abort()}}(n,t)},pa=function(n,t){return Os(nr(n,{type:"arrayBuffer"}),t)};function Vc(n){const t=A.document.createElement("a");return t.href=n,t.protocol===A.document.location.protocol&&t.host===A.document.location.host}const le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let j,V;j=[],V=0;const ie=function(n,t){if(q.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),V>=N.MAX_PARALLEL_IMAGE_REQUESTS){const p={requestParameters:n,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return j.push(p),p}V++;let i=!1;const l=()=>{if(!i)for(i=!0,V--;j.length&&V<N.MAX_PARALLEL_IMAGE_REQUESTS;){const p=j.shift(),{requestParameters:g,callback:y,cancelled:b}=p;b||(p.cancel=ie(g,y).cancel)}},u=pa(n,(p,g,y,b)=>{l(),p?t(p):g&&(A.createImageBitmap?function(w,C){const P=new A.Blob([new Uint8Array(w)],{type:"image/png"});A.createImageBitmap(P).then(I=>{C(null,I)}).catch(I=>{C(new Error(`Could not load image because of ${I.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(g,(w,C)=>t(w,C,y,b)):function(w,C){const P=new A.Image,I=A.URL;P.onload=()=>{C(null,P),I.revokeObjectURL(P.src),P.onload=null,A.requestAnimationFrame(()=>{P.src=le})},P.onerror=()=>C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const O=new A.Blob([new Uint8Array(w)],{type:"image/png"});P.src=w.byteLength?I.createObjectURL(O):le}(g,(w,C)=>t(w,C,y,b)))});return{cancel:()=>{u.cancel(),l()}}},de="NO_ACCESS_TOKEN";function ye(n){return n.indexOf("mapbox:")===0}function Ae(n){return N.API_URL_REGEX.test(n)}function Se(n){return N.API_CDN_URL_REGEX.test(n)}function _e(n){return N.API_STYLE_REGEX.test(n)&&!Be(n)}function Be(n){return N.API_SPRITE_REGEX.test(n)}const st=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function lt(n){const t=n.match(st);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function nt(n){const t=n.params.length?`?${n.params.join("&")}`:"";return`${n.protocol}://${n.authority}${n.path}${t}`}const Nt="mapbox.eventData";function Gt(n){if(!n)return null;const t=n.split(".");if(!t||t.length!==3)return null;try{return JSON.parse(decodeURIComponent(A.atob(t[1]).split("").map(i=>"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class jt{constructor(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const i=Gt(N.ACCESS_TOKEN);let l="";return l=i&&i.u?A.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(u,p)=>String.fromCharCode(+("0x"+p)))):N.ACCESS_TOKEN||"",t?`${Nt}.${t}:${l}`:`${Nt}:${l}`}fetchEventData(){const t=wl("localStorage"),i=this.getStorageKey(),l=this.getStorageKey("uuid");if(t)try{const u=A.localStorage.getItem(i);u&&(this.eventData=JSON.parse(u));const p=A.localStorage.getItem(l);p&&(this.anonId=p)}catch{jr("Unable to read from LocalStorage")}}saveEventData(){const t=wl("localStorage"),i=this.getStorageKey(),l=this.getStorageKey("uuid");if(t)try{A.localStorage.setItem(l,this.anonId),Object.keys(this.eventData).length>=1&&A.localStorage.setItem(i,JSON.stringify(this.eventData))}catch{jr("Unable to write to LocalStorage")}}processRequests(t){}postEvent(t,i,l,u){if(!N.EVENTS_URL)return;const p=lt(N.EVENTS_URL);p.params.push(`access_token=${u||N.ACCESS_TOKEN||""}`);const g={event:this.type,created:new Date(t).toISOString()},y=i?nr(g,i):g,b={url:nt(p),headers:{"Content-Type":"text/plain"},body:JSON.stringify([y])};this.pendingRequest=function(w,C){return Os(nr(w,{method:"POST"}),C)}(b,w=>{this.pendingRequest=null,l(w),this.saveEventData(),this.processRequests(u)})}queueRequest(t,i){this.queue.push(t),this.processRequests(i)}}const Zt=new class extends jt{constructor(n){super("appUserTurnstile"),this._customAccessToken=n}postTurnstileEvent(n,t){N.EVENTS_URL&&N.ACCESS_TOKEN&&Array.isArray(n)&&n.some(i=>ye(i)||Ae(i))&&this.queueRequest(Date.now(),t)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Gt(N.ACCESS_TOKEN),i=t?t.u:N.ACCESS_TOKEN;let l=i!==this.eventData.tokenU;Fc(this.anonId)||(this.anonId=wn(),l=!0);const u=this.queue.shift();if(this.eventData.lastSuccess){const p=new Date(this.eventData.lastSuccess),g=new Date(u),y=(u-this.eventData.lastSuccess)/864e5;l=l||y>=1||y<-1||p.getDate()!==g.getDate()}else l=!0;l?this.postEvent(u,{sdkIdentifier:"mapbox-gl-js",sdkVersion:R,skuId:Z,"enabled.telemetry":!1,userId:this.anonId},p=>{p||(this.eventData.lastSuccess=u,this.eventData.tokenU=i)},n):this.processRequests()}},tr=Zt.postTurnstileEvent.bind(Zt),Ur=new class extends jt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(n,t,i,l){this.skuToken=t,this.errorCb=l,N.EVENTS_URL&&(i||N.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},i):this.errorCb(new Error(de)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:t,timestamp:i}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),Fc(this.anonId)||(this.anonId=wn()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:R,skuId:Z,skuToken:this.skuToken,userId:this.anonId},l=>{l?this.errorCb(l):t&&(this.success[t]=!0)},n))}},tn=Ur.postMapLoadEvent.bind(Ur),Nn=new class extends jt{constructor(){super("gljs.performance")}postPerformanceEvent(n,t){N.EVENTS_URL&&(n||N.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},n)}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:t,performanceData:i}=this.queue.shift(),l=function(u){const p=A.performance.getEntriesByType("resource"),g=A.performance.getEntriesByType("mark"),y=function(I){const O={};if(I){for(const z in I)if(z!=="other")for(const F of I[z]){const G=`${z}ResolveRangeMin`,Q=`${z}ResolveRangeMax`,ce=`${z}RequestCount`,ee=`${z}RequestCachedCount`;O[G]=Math.min(O[G]||1/0,F.startTime),O[Q]=Math.max(O[Q]||-1/0,F.responseEnd);const oe=he=>{O[he]===void 0&&(O[he]=0),++O[he]};F.transferSize!==void 0&&F.transferSize===0&&oe(ee),oe(ce)}}return O}(function(I,O){const z={};if(I)for(const F of I){const G=O(F);z[G]===void 0&&(z[G]=[]),z[G].push(F)}return z}(p,Ip)),b=A.devicePixelRatio,w=A.navigator.connection||A.navigator.mozConnection||A.navigator.webkitConnection,C={counters:[],metadata:[],attributes:[]},P=(I,O,z)=>{z!=null&&I.push({name:O,value:z.toString()})};for(const I in y)P(C.counters,I,y[I]);if(u.interactionRange[0]!==1/0&&u.interactionRange[1]!==-1/0&&(P(C.counters,"interactionRangeMin",u.interactionRange[0]),P(C.counters,"interactionRangeMax",u.interactionRange[1])),g)for(const I of Object.keys(ma)){const O=ma[I],z=g.find(F=>F.name===O);z&&P(C.counters,O,z.startTime)}return P(C.counters,"visibilityHidden",u.visibilityHidden),P(C.attributes,"style",function(I){if(I)for(const O of I){const z=O.name.split("?")[0];if(_e(z)){const F=z.split("/").slice(-2);if(F.length===2)return`mapbox://styles/${F[0]}/${F[1]}`}}}(p)),P(C.attributes,"terrainEnabled",u.terrainEnabled?"true":"false"),P(C.attributes,"fogEnabled",u.fogEnabled?"true":"false"),P(C.attributes,"projection",u.projection),P(C.attributes,"zoom",u.zoom),P(C.metadata,"devicePixelRatio",b),P(C.metadata,"connectionEffectiveType",w?w.effectiveType:void 0),P(C.metadata,"navigatorUserAgent",A.navigator.userAgent),P(C.metadata,"screenWidth",A.screen.width),P(C.metadata,"screenHeight",A.screen.height),P(C.metadata,"windowWidth",A.innerWidth),P(C.metadata,"windowHeight",A.innerHeight),P(C.metadata,"mapWidth",u.width/b),P(C.metadata,"mapHeight",u.height/b),P(C.metadata,"webglRenderer",u.renderer),P(C.metadata,"webglVendor",u.vendor),P(C.metadata,"sdkVersion",R),P(C.metadata,"sdkIdentifier","mapbox-gl-js"),C}(i);for(const u of l.metadata);for(const u of l.counters);for(const u of l.attributes);this.postEvent(t,l,()=>{},n)}},_n=Nn.postPerformanceEvent.bind(Nn),so=new class extends jt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(n,t,i,l){if(!N.API_URL||!N.SESSION_PATH)return;const u=lt(N.API_URL+N.SESSION_PATH);u.params.push(`sku=${t||""}`),u.params.push(`access_token=${l||N.ACCESS_TOKEN||""}`);const p={url:nt(u),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(g,y){return Os(nr(g,{method:"GET"}),y)}(p,g=>{this.pendingRequest=null,i(g),this.saveEventData(),this.processRequests(l)})}getSessionAPI(n,t,i,l){this.skuToken=t,this.errorCb=l,N.SESSION_PATH&&N.API_URL&&(i||N.ACCESS_TOKEN?this.queueRequest({id:n,timestamp:Date.now()},i):this.errorCb(new Error(de)))}processRequests(n){if(this.pendingRequest||this.queue.length===0)return;const{id:t,timestamp:i}=this.queue.shift();t&&this.success[t]||this.getSession(i,this.skuToken,l=>{l?this.errorCb(l):t&&(this.success[t]=!0)},n)}},En=so.getSessionAPI.bind(so),qn=new Set,ma={create:"create",load:"load",fullLoad:"fullLoad"},j0={mark(n){A.performance.mark(n)},measure(n,t,i){A.performance.measure(n,t,i)}};function Ip(n){const t=n.name.split("?")[0];return Se(t)&&t.includes("mapbox-gl.js")?"javascript":Se(t)&&t.includes("mapbox-gl.css")?"css":function(i){return N.API_FONTS_REGEX.test(i)}(t)?"fontRange":Be(t)?"sprite":_e(t)?"style":function(i){return N.API_TILEJSON_REGEX.test(i)}(t)?"tilejson":"other"}const ur=A.performance;function zh(n){const t=n?n.url.toString():void 0;return ur.getEntriesByName(t)}let Sl,Rh,$c,ao;const Co={now:()=>$c!==void 0?$c:A.performance.now(),setNow(n){$c=n},restoreNow(){$c=void 0},frame(n){const t=A.requestAnimationFrame(n);return{cancel:()=>A.cancelAnimationFrame(t)}},getImageData(n,t=0){const{width:i,height:l}=n;ao||(ao=A.document.createElement("canvas"));const u=ao.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return(i>ao.width||l>ao.height)&&(ao.width=i,ao.height=l),u.clearRect(-t,-t,i+2*t,l+2*t),u.drawImage(n,0,0,i,l),u.getImageData(-t,-t,i+2*t,l+2*t)},resolveURL:n=>(Sl||(Sl=A.document.createElement("a")),Sl.href=n,Sl.href),get devicePixelRatio(){return A.devicePixelRatio},get prefersReducedMotion(){return!!A.matchMedia&&(Rh==null&&(Rh=A.matchMedia("(prefers-reduced-motion: reduce)")),Rh.matches)}};function Dh(n,t,i){i[n]&&i[n].indexOf(t)!==-1||(i[n]=i[n]||[],i[n].push(t))}function Bh(n,t,i){if(i&&i[n]){const l=i[n].indexOf(t);l!==-1&&i[n].splice(l,1)}}class zs{constructor(t,i={}){nr(this,i),this.type=t}}class Mo extends zs{constructor(t,i={}){super("error",nr({error:t},i))}}class Al{on(t,i){return this._listeners=this._listeners||{},Dh(t,i,this._listeners),this}off(t,i){return Bh(t,i,this._listeners),Bh(t,i,this._oneTimeListeners),this}once(t,i){return i?(this._oneTimeListeners=this._oneTimeListeners||{},Dh(t,i,this._oneTimeListeners),this):new Promise(l=>this.once(t,l))}fire(t,i){typeof t=="string"&&(t=new zs(t,i||{}));const l=t.type;if(this.listens(l)){t.target=this;const u=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const y of u)y.call(this,t);const p=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const y of p)Bh(l,y,this._oneTimeListeners),y.call(this,t);const g=this._eventedParent;g&&(nr(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),g.fire(t))}else t instanceof Mo&&console.error(t.error);return this}listens(t){return!!(this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t))}setEventedParent(t,i){return this._eventedParent=t,this._eventedParentData=i,this}}var je=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Po(n,...t){for(const i of t)for(const l in i)n[l]=i[l];return n}function rn(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}function Tn(n){if(Array.isArray(n))return n.map(Tn);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){const t={};for(const i in n)t[i]=Tn(n[i]);return t}return rn(n)}class kp extends Error{constructor(t,i){super(i),this.message=i,this.key=t}}var lo=kp;class Fh{constructor(t,i=[]){this.parent=t,this.bindings={};for(const[l,u]of i)this.bindings[l]=u}concat(t){return new Fh(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}var Lp=Fh;const ga={kind:"null"},pt={kind:"number"},Qt={kind:"string"},Wt={kind:"boolean"},gi={kind:"color"},Hi={kind:"object"},Xt={kind:"value"},_i={kind:"collator"},Cl={kind:"formatted"},Rs={kind:"resolvedImage"};function Mi(n,t){return{kind:"array",itemType:n,N:t}}function Br(n){if(n.kind==="array"){const t=Br(n.itemType);return typeof n.N=="number"?`array<${t}, ${n.N}>`:n.itemType.kind==="value"?"array":`array<${t}>`}return n.kind}const Op=[ga,pt,Qt,Wt,gi,Cl,Hi,Mi(Xt),Rs];function Io(n,t){if(t.kind==="error")return null;if(n.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Io(n.itemType,t.itemType))&&(typeof n.N!="number"||n.N===t.N))return null}else{if(n.kind===t.kind)return null;if(n.kind==="value"){for(const i of Op)if(!Io(i,t))return null}}return`Expected ${Br(n)} but found ${Br(t)} instead.`}function Ml(n,t){return t.some(i=>i.kind===n.kind)}function Pl(n,t){return t.some(i=>i==="null"?n===null:i==="array"?Array.isArray(n):i==="object"?n&&!Array.isArray(n)&&typeof n=="object":i===typeof n)}var Nh,zp={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Il(n){return(n=Math.round(n))<0?0:n>255?255:n}function kl(n){return Il(n[n.length-1]==="%"?parseFloat(n)/100*255:parseInt(n))}function Gc(n){return(t=n[n.length-1]==="%"?parseFloat(n)/100:parseFloat(n))<0?0:t>1?1:t;var t}function _a(n,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?n+(t-n)*i*6:2*i<1?t:3*i<2?n+(t-n)*(2/3-i)*6:n}try{Nh={}.parseCSSColor=function(n){var t,i=n.replace(/ /g,"").toLowerCase();if(i in zp)return zp[i].slice();if(i[0]==="#")return i.length===4?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:i.length===7&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=i.indexOf("("),u=i.indexOf(")");if(l!==-1&&u+1===i.length){var p=i.substr(0,l),g=i.substr(l+1,u-(l+1)).split(","),y=1;switch(p){case"rgba":if(g.length!==4)return null;y=Gc(g.pop());case"rgb":return g.length!==3?null:[kl(g[0]),kl(g[1]),kl(g[2]),y];case"hsla":if(g.length!==4)return null;y=Gc(g.pop());case"hsl":if(g.length!==3)return null;var b=(parseFloat(g[0])%360+360)%360/360,w=Gc(g[1]),C=Gc(g[2]),P=C<=.5?C*(w+1):C+w-C*w,I=2*C-P;return[Il(255*_a(I,P,b+1/3)),Il(255*_a(I,P,b)),Il(255*_a(I,P,b-1/3)),y];default:return null}}return null}}catch{}class Jn{constructor(t,i,l,u=1){this.r=t,this.g=i,this.b=l,this.a=u}static parse(t){if(!t)return;if(t instanceof Jn)return t;if(typeof t!="string")return;const i=Nh(t);return i?new Jn(i[0]/255*i[3],i[1]/255*i[3],i[2]/255*i[3],i[3]):void 0}toString(){const[t,i,l,u]=this.toArray();return`rgba(${Math.round(t)},${Math.round(i)},${Math.round(l)},${u})`}toArray(){const{r:t,g:i,b:l,a:u}=this;return u===0?[0,0,0,0]:[255*t/u,255*i/u,255*l/u,u]}toArray01(){const{r:t,g:i,b:l,a:u}=this;return u===0?[0,0,0,0]:[t/u,i/u,l/u,u]}toArray01PremultipliedAlpha(){const{r:t,g:i,b:l,a:u}=this;return[t,i,l,u]}}Jn.black=new Jn(0,0,0,1),Jn.white=new Jn(1,1,1,1),Jn.transparent=new Jn(0,0,0,0),Jn.red=new Jn(1,0,0,1),Jn.blue=new Jn(0,0,1,1);var Kr=Jn;class jh{constructor(t,i,l){this.sensitivity=t?i?"variant":"case":i?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,i){return this.collator.compare(t,i)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Uh{constructor(t,i,l,u,p){this.text=t.normalize?t.normalize():t,this.image=i,this.scale=l,this.fontStack=u,this.textColor=p}}class ei{constructor(t){this.sections=t}static fromString(t){return new ei([new Uh(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof ei?t:ei.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}serialize(){const t=["format"];for(const i of this.sections){if(i.image){t.push(["image",i.image.name]);continue}t.push(i.text);const l={};i.fontStack&&(l["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(l["font-scale"]=i.scale),i.textColor&&(l["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(l)}return t}}class Pi{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new Pi({name:t,available:!1}):null}serialize(){return["image",this.name]}}function Rp(n,t,i,l){return typeof n=="number"&&n>=0&&n<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof i=="number"&&i>=0&&i<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[n,t,i,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[n,t,i,l]:[n,t,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ll(n){if(n===null||typeof n=="string"||typeof n=="boolean"||typeof n=="number"||n instanceof Kr||n instanceof jh||n instanceof ei||n instanceof Pi)return!0;if(Array.isArray(n)){for(const t of n)if(!Ll(t))return!1;return!0}if(typeof n=="object"){for(const t in n)if(!Ll(n[t]))return!1;return!0}return!1}function Hr(n){if(n===null)return ga;if(typeof n=="string")return Qt;if(typeof n=="boolean")return Wt;if(typeof n=="number")return pt;if(n instanceof Kr)return gi;if(n instanceof jh)return _i;if(n instanceof ei)return Cl;if(n instanceof Pi)return Rs;if(Array.isArray(n)){const t=n.length;let i;for(const l of n){const u=Hr(l);if(i){if(i===u)continue;i=Xt;break}i=u}return Mi(i||Xt,t)}return Hi}function Ol(n){const t=typeof n;return n===null?"":t==="string"||t==="number"||t==="boolean"?String(n):n instanceof Kr||n instanceof ei||n instanceof Pi?n.toString():JSON.stringify(n)}class Vh{constructor(t,i){this.type=t,this.value=i}static parse(t,i){if(t.length!==2)return i.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Ll(t[1]))return i.error("invalid value");const l=t[1];let u=Hr(l);const p=i.expectedType;return u.kind!=="array"||u.N!==0||!p||p.kind!=="array"||typeof p.N=="number"&&p.N!==0||(u=p),new Vh(u,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Kr?["rgba"].concat(this.value.toArray()):this.value instanceof ei?this.value.serialize():this.value}}var Ds=Vh,Ln=class{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}};const $h={string:Qt,number:pt,boolean:Wt,object:Hi};class Gh{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");let l,u=1;const p=t[0];if(p==="array"){let y,b;if(t.length>2){const w=t[1];if(typeof w!="string"||!(w in $h)||w==="object")return i.error('The item type argument of "array" must be one of string, number, boolean',1);y=$h[w],u++}else y=Xt;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return i.error('The length argument to "array" must be a positive integer literal',2);b=t[2],u++}l=Mi(y,b)}else l=$h[p];const g=[];for(;u<t.length;u++){const y=i.parse(t[u],u,Xt);if(!y)return null;g.push(y)}return new Gh(l,g)}evaluate(t){for(let i=0;i<this.args.length;i++){const l=this.args[i].evaluate(t);if(!Io(this.type,Hr(l)))return l;if(i===this.args.length-1)throw new Ln(`Expected value to be of type ${Br(this.type)}, but found ${Br(Hr(l))} instead.`)}return null}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=this.type,i=[t.kind];if(t.kind==="array"){const l=t.itemType;if(l.kind==="string"||l.kind==="number"||l.kind==="boolean"){i.push(l.kind);const u=t.N;(typeof u=="number"||this.args.length>1)&&i.push(u)}}return i.concat(this.args.map(l=>l.serialize()))}}var ko=Gh;class ls{constructor(t){this.type=Cl,this.sections=t}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");const l=t[1];if(!Array.isArray(l)&&typeof l=="object")return i.error("First argument must be an image or text section.");const u=[];let p=!1;for(let g=1;g<=t.length-1;++g){const y=t[g];if(p&&typeof y=="object"&&!Array.isArray(y)){p=!1;let b=null;if(y["font-scale"]&&(b=i.parse(y["font-scale"],1,pt),!b))return null;let w=null;if(y["text-font"]&&(w=i.parse(y["text-font"],1,Mi(Qt)),!w))return null;let C=null;if(y["text-color"]&&(C=i.parse(y["text-color"],1,gi),!C))return null;const P=u[u.length-1];P.scale=b,P.font=w,P.textColor=C}else{const b=i.parse(t[g],1,Xt);if(!b)return null;const w=b.type.kind;if(w!=="string"&&w!=="value"&&w!=="null"&&w!=="resolvedImage")return i.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");p=!0,u.push({content:b,scale:null,font:null,textColor:null})}}return new ls(u)}evaluate(t){return new ei(this.sections.map(i=>{const l=i.content.evaluate(t);return Hr(l)===Rs?new Uh("",l,null,null,null):new Uh(Ol(l),null,i.scale?i.scale.evaluate(t):null,i.font?i.font.evaluate(t).join(","):null,i.textColor?i.textColor.evaluate(t):null)}))}eachChild(t){for(const i of this.sections)t(i.content),i.scale&&t(i.scale),i.font&&t(i.font),i.textColor&&t(i.textColor)}outputDefined(){return!1}serialize(){const t=["format"];for(const i of this.sections){t.push(i.content.serialize());const l={};i.scale&&(l["font-scale"]=i.scale.serialize()),i.font&&(l["text-font"]=i.font.serialize()),i.textColor&&(l["text-color"]=i.textColor.serialize()),t.push(l)}return t}}class Zc{constructor(t){this.type=Rs,this.input=t}static parse(t,i){if(t.length!==2)return i.error("Expected two arguments.");const l=i.parse(t[1],1,Qt);return l?new Zc(l):i.error("No image name provided.")}evaluate(t){const i=this.input.evaluate(t),l=Pi.fromString(i);return l&&t.availableImages&&(l.available=t.availableImages.indexOf(i)>-1),l}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const U0={"to-boolean":Wt,"to-color":gi,"to-number":pt,"to-string":Qt};class Zh{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expected at least one argument.");const l=t[0];if((l==="to-boolean"||l==="to-string")&&t.length!==2)return i.error("Expected one argument.");const u=U0[l],p=[];for(let g=1;g<t.length;g++){const y=i.parse(t[g],g,Xt);if(!y)return null;p.push(y)}return new Zh(u,p)}evaluate(t){if(this.type.kind==="boolean")return!!this.args[0].evaluate(t);if(this.type.kind==="color"){let i,l;for(const u of this.args){if(i=u.evaluate(t),l=null,i instanceof Kr)return i;if(typeof i=="string"){const p=t.parseColor(i);if(p)return p}else if(Array.isArray(i)&&(l=i.length<3||i.length>4?`Invalid rbga value ${JSON.stringify(i)}: expected an array containing either three or four numeric values.`:Rp(i[0],i[1],i[2],i[3]),!l))return new Kr(i[0]/255,i[1]/255,i[2]/255,i[3])}throw new Ln(l||`Could not parse color from value '${typeof i=="string"?i:String(JSON.stringify(i))}'`)}if(this.type.kind==="number"){let i=null;for(const l of this.args){if(i=l.evaluate(t),i===null)return 0;const u=Number(i);if(!isNaN(u))return u}throw new Ln(`Could not convert ${JSON.stringify(i)} to number.`)}return this.type.kind==="formatted"?ei.fromString(Ol(this.args[0].evaluate(t))):this.type.kind==="resolvedImage"?Pi.fromString(Ol(this.args[0].evaluate(t))):Ol(this.args[0].evaluate(t))}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ls([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Zc(this.args[0]).serialize();const t=[`to-${this.type.kind}`];return this.eachChild(i=>{t.push(i.serialize())}),t}}var ya=Zh;const co=["Unknown","Point","LineString","Polygon"];var Hh=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?co[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const n=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:i,y:l}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(i*t-n[0])+this.featureDistanceData.bearing[1]*(l*t-n[1])}return 0}parseColor(n){let t=this._parseColorCache[n];return t||(t=this._parseColorCache[n]=Kr.parse(n)),t}};class Bs{constructor(t,i,l,u){this.name=t,this.type=i,this._evaluate=l,this.args=u}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(t=>t.serialize()))}static parse(t,i){const l=t[0],u=Bs.definitions[l];if(!u)return i.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const p=Array.isArray(u)?u[0]:u.type,g=Array.isArray(u)?[[u[1],u[2]]]:u.overloads,y=g.filter(([w])=>!Array.isArray(w)||w.length===t.length-1);let b=null;for(const[w,C]of y){b=new Qh(i.registry,i.path,null,i.scope);const P=[];let I=!1;for(let O=1;O<t.length;O++){const z=t[O],F=Array.isArray(w)?w[O-1]:w.type,G=b.parse(z,1+P.length,F);if(!G){I=!0;break}P.push(G)}if(!I)if(Array.isArray(w)&&w.length!==P.length)b.error(`Expected ${w.length} arguments, but found ${P.length} instead.`);else{for(let O=0;O<P.length;O++){const z=Array.isArray(w)?w[O]:w.type,F=P[O];b.concat(O+1).checkSubtype(z,F.type)}if(b.errors.length===0)return new Bs(l,p,C,P)}}if(y.length===1)i.errors.push(...b.errors);else{const w=(y.length?y:g).map(([P])=>{return I=P,Array.isArray(I)?`(${I.map(Br).join(", ")})`:`(${Br(I.type)}...)`;var I}).join(" | "),C=[];for(let P=1;P<t.length;P++){const I=i.parse(t[P],1+C.length);if(!I)return null;C.push(Br(I.type))}i.error(`Expected arguments of type ${w}, but found (${C.join(", ")}) instead.`)}return null}static register(t,i){Bs.definitions=i;for(const l in i)t[l]=Bs}}var Lo=Bs;class zl{constructor(t,i,l){this.type=_i,this.locale=l,this.caseSensitive=t,this.diacriticSensitive=i}static parse(t,i){if(t.length!==2)return i.error("Expected one argument.");const l=t[1];if(typeof l!="object"||Array.isArray(l))return i.error("Collator options argument must be an object.");const u=i.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Wt);if(!u)return null;const p=i.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Wt);if(!p)return null;let g=null;return l.locale&&(g=i.parse(l.locale,1,Qt),!g)?null:new zl(u,p,g)}evaluate(t){return new jh(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}serialize(){const t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]}}const Oo=8192;function Hc(n,t){n[0]=Math.min(n[0],t[0]),n[1]=Math.min(n[1],t[1]),n[2]=Math.max(n[2],t[0]),n[3]=Math.max(n[3],t[1])}function va(n,t){return!(n[0]<=t[0]||n[2]>=t[2]||n[1]<=t[1]||n[3]>=t[3])}function Rl(n,t){const i=(180+n[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n[1]*Math.PI/360)))/360,u=Math.pow(2,t.z);return[Math.round(i*u*Oo),Math.round(l*u*Oo)]}function Dp(n,t,i){const l=n[0]-t[0],u=n[1]-t[1],p=n[0]-i[0],g=n[1]-i[1];return l*g-p*u==0&&l*p<=0&&u*g<=0}function qc(n,t){let i=!1;for(let g=0,y=t.length;g<y;g++){const b=t[g];for(let w=0,C=b.length;w<C-1;w++){if(Dp(n,b[w],b[w+1]))return!1;(u=b[w])[1]>(l=n)[1]!=(p=b[w+1])[1]>l[1]&&l[0]<(p[0]-u[0])*(l[1]-u[1])/(p[1]-u[1])+u[0]&&(i=!i)}}var l,u,p;return i}function qh(n,t){for(let i=0;i<t.length;i++)if(qc(n,t[i]))return!0;return!1}function Wh(n,t,i,l){const u=l[0]-i[0],p=l[1]-i[1],g=(n[0]-i[0])*p-u*(n[1]-i[1]),y=(t[0]-i[0])*p-u*(t[1]-i[1]);return g>0&&y<0||g<0&&y>0}function xa(n,t,i){for(const w of i)for(let C=0;C<w.length-1;++C)if((y=[(g=w[C+1])[0]-(p=w[C])[0],g[1]-p[1]])[0]*(b=[(u=t)[0]-(l=n)[0],u[1]-l[1]])[1]-y[1]*b[0]!=0&&Wh(l,u,p,g)&&Wh(p,g,l,u))return!0;var l,u,p,g,y,b;return!1}function hr(n,t){for(let i=0;i<n.length;++i)if(!qc(n[i],t))return!1;for(let i=0;i<n.length-1;++i)if(xa(n[i],n[i+1],t))return!1;return!0}function V0(n,t){for(let i=0;i<t.length;i++)if(hr(n,t[i]))return!0;return!1}function Xh(n,t,i){const l=[];for(let u=0;u<n.length;u++){const p=[];for(let g=0;g<n[u].length;g++){const y=Rl(n[u][g],i);Hc(t,y),p.push(y)}l.push(p)}return l}function Bp(n,t,i){const l=[];for(let u=0;u<n.length;u++){const p=Xh(n[u],t,i);l.push(p)}return l}function Kh(n,t,i,l){if(n[0]<i[0]||n[0]>i[2]){const u=.5*l;let p=n[0]-i[0]>u?-l:i[0]-n[0]>u?l:0;p===0&&(p=n[0]-i[2]>u?-l:i[2]-n[0]>u?l:0),n[0]+=p}Hc(t,n)}function Fp(n,t,i,l){const u=Math.pow(2,l.z)*Oo,p=[l.x*Oo,l.y*Oo],g=[];if(!n)return g;for(const y of n)for(const b of y){const w=[b.x+p[0],b.y+p[1]];Kh(w,t,i,u),g.push(w)}return g}function Yh(n,t,i,l){const u=Math.pow(2,l.z)*Oo,p=[l.x*Oo,l.y*Oo],g=[];if(!n)return g;for(const b of n){const w=[];for(const C of b){const P=[C.x+p[0],C.y+p[1]];Hc(t,P),w.push(P)}g.push(w)}if(t[2]-t[0]<=u/2){(y=t)[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(const b of g)for(const w of b)Kh(w,t,i,u)}var y;return g}class ba{constructor(t,i){this.type=Wt,this.geojson=t,this.geometries=i}static parse(t,i){if(t.length!==2)return i.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Ll(t[1])){const l=t[1];if(l.type==="FeatureCollection")for(let u=0;u<l.features.length;++u){const p=l.features[u].geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new ba(l,l.features[u].geometry)}else if(l.type==="Feature"){const u=l.geometry.type;if(u==="Polygon"||u==="MultiPolygon")return new ba(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new ba(l,l)}return i.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(i,l){const u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],g=i.canonicalID();if(!g)return!1;if(l.type==="Polygon"){const y=Xh(l.coordinates,p,g),b=Fp(i.geometry(),u,p,g);if(!va(u,p))return!1;for(const w of b)if(!qc(w,y))return!1}if(l.type==="MultiPolygon"){const y=Bp(l.coordinates,p,g),b=Fp(i.geometry(),u,p,g);if(!va(u,p))return!1;for(const w of b)if(!qh(w,y))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(i,l){const u=[1/0,1/0,-1/0,-1/0],p=[1/0,1/0,-1/0,-1/0],g=i.canonicalID();if(!g)return!1;if(l.type==="Polygon"){const y=Xh(l.coordinates,p,g),b=Yh(i.geometry(),u,p,g);if(!va(u,p))return!1;for(const w of b)if(!hr(w,y))return!1}if(l.type==="MultiPolygon"){const y=Bp(l.coordinates,p,g),b=Yh(i.geometry(),u,p,g);if(!va(u,p))return!1;for(const w of b)if(!V0(w,y))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Wc=ba;function wa(n){if(n instanceof Lo&&(n.name==="get"&&n.args.length===1||n.name==="feature-state"||n.name==="has"&&n.args.length===1||n.name==="properties"||n.name==="geometry-type"||n.name==="id"||/^filter-/.test(n.name))||n instanceof Wc)return!1;let t=!0;return n.eachChild(i=>{t&&!wa(i)&&(t=!1)}),t}function zo(n){if(n instanceof Lo&&n.name==="feature-state")return!1;let t=!0;return n.eachChild(i=>{t&&!zo(i)&&(t=!1)}),t}function Fs(n,t){if(n instanceof Lo&&t.indexOf(n.name)>=0)return!1;let i=!0;return n.eachChild(l=>{i&&!Fs(l,t)&&(i=!1)}),i}class Xc{constructor(t,i){this.type=i.type,this.name=t,this.boundExpression=i}static parse(t,i){if(t.length!==2||typeof t[1]!="string")return i.error("'var' expression requires exactly one string literal argument.");const l=t[1];return i.scope.has(l)?new Xc(l,i.scope.get(l)):i.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Np=Xc;class Dl{constructor(t,i=[],l,u=new Lp,p=[]){this.registry=t,this.path=i,this.key=i.map(g=>`[${g}]`).join(""),this.scope=u,this.errors=p,this.expectedType=l}parse(t,i,l,u,p={}){return i?this.concat(i,l,u)._parse(t,p):this._parse(t,p)}_parse(t,i){function l(u,p,g){return g==="assert"?new ko(p,[u]):g==="coerce"?new ya(p,[u]):u}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const u=t[0];if(typeof u!="string")return this.error(`Expression name must be a string, but found ${typeof u} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const p=this.registry[u];if(p){let g=p.parse(t,this);if(!g)return null;if(this.expectedType){const y=this.expectedType,b=g.type;if(y.kind!=="string"&&y.kind!=="number"&&y.kind!=="boolean"&&y.kind!=="object"&&y.kind!=="array"||b.kind!=="value")if(y.kind!=="color"&&y.kind!=="formatted"&&y.kind!=="resolvedImage"||b.kind!=="value"&&b.kind!=="string"){if(this.checkSubtype(y,b))return null}else g=l(g,y,i.typeAnnotation||"coerce");else g=l(g,y,i.typeAnnotation||"assert")}if(!(g instanceof Ds)&&g.type.kind!=="resolvedImage"&&Jh(g)){const y=new Hh;try{g=new Ds(g.type,g.evaluate(y))}catch(b){return this.error(b.message),null}}return g}return this.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,i,l){const u=typeof t=="number"?this.path.concat(t):this.path,p=l?this.scope.concat(l):this.scope;return new Dl(this.registry,u,i||null,p,this.errors)}error(t,...i){const l=`${this.key}${i.map(u=>`[${u}]`).join("")}`;this.errors.push(new lo(l,t))}checkSubtype(t,i){const l=Io(t,i);return l&&this.error(l),l}}var Qh=Dl;function Jh(n){if(n instanceof Np)return Jh(n.boundExpression);if(n instanceof Lo&&n.name==="error"||n instanceof zl||n instanceof Wc)return!1;const t=n instanceof ya||n instanceof ko;let i=!0;return n.eachChild(l=>{i=t?i&&Jh(l):i&&l instanceof Ds}),!!i&&wa(n)&&Fs(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Kc(n,t){const i=n.length-1;let l,u,p=0,g=i,y=0;for(;p<=g;)if(y=Math.floor((p+g)/2),l=n[y],u=n[y+1],l<=t){if(y===i||t<u)return y;p=y+1}else{if(!(l>t))throw new Ln("Input is not a number.");g=y-1}return 0}class Yc{constructor(t,i,l){this.type=t,this.input=i,this.labels=[],this.outputs=[];for(const[u,p]of l)this.labels.push(u),this.outputs.push(p)}static parse(t,i){if(t.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");const l=i.parse(t[1],1,pt);if(!l)return null;const u=[];let p=null;i.expectedType&&i.expectedType.kind!=="value"&&(p=i.expectedType);for(let g=1;g<t.length;g+=2){const y=g===1?-1/0:t[g],b=t[g+1],w=g,C=g+1;if(typeof y!="number")return i.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',w);if(u.length&&u[u.length-1][0]>=y)return i.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',w);const P=i.parse(b,C,p);if(!P)return null;p=p||P.type,u.push([y,P])}return new Yc(p,l,u)}evaluate(t){const i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(t);const u=this.input.evaluate(t);if(u<=i[0])return l[0].evaluate(t);const p=i.length;return u>=i[p-1]?l[p-1].evaluate(t):l[Kc(i,u)].evaluate(t)}eachChild(t){t(this.input);for(const i of this.outputs)t(i)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){const t=["step",this.input.serialize()];for(let i=0;i<this.labels.length;i++)i>0&&t.push(this.labels[i]),t.push(this.outputs[i].serialize());return t}}var ed=Yc;function rr(n,t,i){return n*(1-i)+t*i}var Bl=Object.freeze({__proto__:null,array:function(n,t,i){return n.map((l,u)=>rr(l,t[u],i))},color:function(n,t,i){return new Kr(rr(n.r,t.r,i),rr(n.g,t.g,i),rr(n.b,t.b,i),rr(n.a,t.a,i))},number:rr});const jp=.95047,td=1.08883,Up=4/29,Ns=6/29,rd=3*Ns*Ns,$0=Ns*Ns*Ns,G0=Math.PI/180,Z0=180/Math.PI;function nd(n){return n>$0?Math.pow(n,1/3):n/rd+Up}function id(n){return n>Ns?n*n*n:rd*(n-Up)}function od(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Qc(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Vp(n){const t=Qc(n.r),i=Qc(n.g),l=Qc(n.b),u=nd((.4124564*t+.3575761*i+.1804375*l)/jp),p=nd((.2126729*t+.7151522*i+.072175*l)/1);return{l:116*p-16,a:500*(u-p),b:200*(p-nd((.0193339*t+.119192*i+.9503041*l)/td)),alpha:n.a}}function $p(n){let t=(n.l+16)/116,i=isNaN(n.a)?t:t+n.a/500,l=isNaN(n.b)?t:t-n.b/200;return t=1*id(t),i=jp*id(i),l=td*id(l),new Kr(od(3.2404542*i-1.5371385*t-.4985314*l),od(-.969266*i+1.8760108*t+.041556*l),od(.0556434*i-.2040259*t+1.0572252*l),n.alpha)}function H0(n,t,i){const l=t-n;return n+i*(l>180||l<-180?l-360*Math.round(l/360):l)}const Fl={forward:Vp,reverse:$p,interpolate:function(n,t,i){return{l:rr(n.l,t.l,i),a:rr(n.a,t.a,i),b:rr(n.b,t.b,i),alpha:rr(n.alpha,t.alpha,i)}}},Ea={forward:function(n){const{l:t,a:i,b:l}=Vp(n),u=Math.atan2(l,i)*Z0;return{h:u<0?u+360:u,c:Math.sqrt(i*i+l*l),l:t,alpha:n.a}},reverse:function(n){const t=n.h*G0,i=n.c;return $p({l:n.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:n.alpha})},interpolate:function(n,t,i){return{h:H0(n.h,t.h,i),c:rr(n.c,t.c,i),l:rr(n.l,t.l,i),alpha:rr(n.alpha,t.alpha,i)}}};var sd=Object.freeze({__proto__:null,hcl:Ea,lab:Fl});class Nl{constructor(t,i,l,u,p){this.type=t,this.operator=i,this.interpolation=l,this.input=u,this.labels=[],this.outputs=[];for(const[g,y]of p)this.labels.push(g),this.outputs.push(y)}static interpolationFactor(t,i,l,u){let p=0;if(t.name==="exponential")p=ad(i,t.base,l,u);else if(t.name==="linear")p=ad(i,1,l,u);else if(t.name==="cubic-bezier"){const g=t.controlPoints;p=new Fe(g[0],g[1],g[2],g[3]).solve(ad(i,1,l,u))}return p}static parse(t,i){let[l,u,p,...g]=t;if(!Array.isArray(u)||u.length===0)return i.error("Expected an interpolation type expression.",1);if(u[0]==="linear")u={name:"linear"};else if(u[0]==="exponential"){const w=u[1];if(typeof w!="number")return i.error("Exponential interpolation requires a numeric base.",1,1);u={name:"exponential",base:w}}else{if(u[0]!=="cubic-bezier")return i.error(`Unknown interpolation type ${String(u[0])}`,1,0);{const w=u.slice(1);if(w.length!==4||w.some(C=>typeof C!="number"||C<0||C>1))return i.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);u={name:"cubic-bezier",controlPoints:w}}}if(t.length-1<4)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return i.error("Expected an even number of arguments.");if(p=i.parse(p,2,pt),!p)return null;const y=[];let b=null;l==="interpolate-hcl"||l==="interpolate-lab"?b=gi:i.expectedType&&i.expectedType.kind!=="value"&&(b=i.expectedType);for(let w=0;w<g.length;w+=2){const C=g[w],P=g[w+1],I=w+3,O=w+4;if(typeof C!="number")return i.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(y.length&&y[y.length-1][0]>=C)return i.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const z=i.parse(P,O,b);if(!z)return null;b=b||z.type,y.push([C,z])}return b.kind==="number"||b.kind==="color"||b.kind==="array"&&b.itemType.kind==="number"&&typeof b.N=="number"?new Nl(b,l,u,p,y):i.error(`Type ${Br(b)} is not interpolatable.`)}evaluate(t){const i=this.labels,l=this.outputs;if(i.length===1)return l[0].evaluate(t);const u=this.input.evaluate(t);if(u<=i[0])return l[0].evaluate(t);const p=i.length;if(u>=i[p-1])return l[p-1].evaluate(t);const g=Kc(i,u),y=Nl.interpolationFactor(this.interpolation,u,i[g],i[g+1]),b=l[g].evaluate(t),w=l[g+1].evaluate(t);return this.operator==="interpolate"?Bl[this.type.kind.toLowerCase()](b,w,y):this.operator==="interpolate-hcl"?Ea.reverse(Ea.interpolate(Ea.forward(b),Ea.forward(w),y)):Fl.reverse(Fl.interpolate(Fl.forward(b),Fl.forward(w),y))}eachChild(t){t(this.input);for(const i of this.outputs)t(i)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}serialize(){let t;t=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const i=[this.operator,t,this.input.serialize()];for(let l=0;l<this.labels.length;l++)i.push(this.labels[l],this.outputs[l].serialize());return i}}function ad(n,t,i,l){const u=l-i,p=n-i;return u===0?0:t===1?p/u:(Math.pow(t,p)-1)/(Math.pow(t,u)-1)}var uo=Nl;class Jc{constructor(t,i){this.type=t,this.args=i}static parse(t,i){if(t.length<2)return i.error("Expectected at least one argument.");let l=null;const u=i.expectedType;u&&u.kind!=="value"&&(l=u);const p=[];for(const y of t.slice(1)){const b=i.parse(y,1+p.length,l,void 0,{typeAnnotation:"omit"});if(!b)return null;l=l||b.type,p.push(b)}const g=u&&p.some(y=>Io(u,y.type));return new Jc(g?Xt:l,p)}evaluate(t){let i,l=null,u=0;for(const p of this.args){if(u++,l=p.evaluate(t),l&&l instanceof Pi&&!l.available&&(i||(i=l),l=null,u===this.args.length))return i;if(l!==null)break}return l}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}serialize(){const t=["coalesce"];return this.eachChild(i=>{t.push(i.serialize())}),t}}var ld=Jc;class eu{constructor(t,i){this.type=i.type,this.bindings=[].concat(t),this.result=i}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const i of this.bindings)t(i[1]);t(this.result)}static parse(t,i){if(t.length<4)return i.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const l=[];for(let p=1;p<t.length-1;p+=2){const g=t[p];if(typeof g!="string")return i.error(`Expected string, but found ${typeof g} instead.`,p);if(/[^a-zA-Z0-9_]/.test(g))return i.error("Variable names must contain only alphanumeric characters or '_'.",p);const y=i.parse(t[p+1],p+1);if(!y)return null;l.push([g,y])}const u=i.parse(t[t.length-1],t.length-1,i.expectedType,l);return u?new eu(l,u):null}outputDefined(){return this.result.outputDefined()}serialize(){const t=["let"];for(const[i,l]of this.bindings)t.push(i,l.serialize());return t.push(this.result.serialize()),t}}var Gp=eu;class cd{constructor(t,i,l){this.type=t,this.index=i,this.input=l}static parse(t,i){if(t.length!==3)return i.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=i.parse(t[1],1,pt),u=i.parse(t[2],2,Mi(i.expectedType||Xt));return l&&u?new cd(u.type.itemType,l,u):null}evaluate(t){const i=this.index.evaluate(t),l=this.input.evaluate(t);if(i<0)throw new Ln(`Array index out of bounds: ${i} < 0.`);if(i>=l.length)throw new Ln(`Array index out of bounds: ${i} > ${l.length-1}.`);if(i!==Math.floor(i))throw new Ln(`Array index must be an integer, but found ${i} instead.`);return l[i]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var q0=cd;class ud{constructor(t,i){this.type=Wt,this.needle=t,this.haystack=i}static parse(t,i){if(t.length!==3)return i.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=i.parse(t[1],1,Xt),u=i.parse(t[2],2,Xt);return l&&u?Ml(l.type,[Wt,Qt,pt,ga,Xt])?new ud(l,u):i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Br(l.type)} instead`):null}evaluate(t){const i=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(l==null)return!1;if(!Pl(i,["boolean","string","number","null"]))throw new Ln(`Expected first argument to be of type boolean, string, number or null, but found ${Br(Hr(i))} instead.`);if(!Pl(l,["string","array"]))throw new Ln(`Expected second argument to be of type array or string, but found ${Br(Hr(l))} instead.`);return l.indexOf(i)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var tu=ud;class jl{constructor(t,i,l){this.type=pt,this.needle=t,this.haystack=i,this.fromIndex=l}static parse(t,i){if(t.length<=2||t.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=i.parse(t[1],1,Xt),u=i.parse(t[2],2,Xt);if(!l||!u)return null;if(!Ml(l.type,[Wt,Qt,pt,ga,Xt]))return i.error(`Expected first argument to be of type boolean, string, number or null, but found ${Br(l.type)} instead`);if(t.length===4){const p=i.parse(t[3],3,pt);return p?new jl(l,u,p):null}return new jl(l,u)}evaluate(t){const i=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!Pl(i,["boolean","string","number","null"]))throw new Ln(`Expected first argument to be of type boolean, string, number or null, but found ${Br(Hr(i))} instead.`);if(!Pl(l,["string","array"]))throw new Ln(`Expected second argument to be of type array or string, but found ${Br(Hr(l))} instead.`);if(this.fromIndex){const u=this.fromIndex.evaluate(t);return l.indexOf(i,u)}return l.indexOf(i)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Zp=jl;class hd{constructor(t,i,l,u,p,g){this.inputType=t,this.type=i,this.input=l,this.cases=u,this.outputs=p,this.otherwise=g}static parse(t,i){if(t.length<5)return i.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return i.error("Expected an even number of arguments.");let l,u;i.expectedType&&i.expectedType.kind!=="value"&&(u=i.expectedType);const p={},g=[];for(let w=2;w<t.length-1;w+=2){let C=t[w];const P=t[w+1];Array.isArray(C)||(C=[C]);const I=i.concat(w);if(C.length===0)return I.error("Expected at least one branch label.");for(const z of C){if(typeof z!="number"&&typeof z!="string")return I.error("Branch labels must be numbers or strings.");if(typeof z=="number"&&Math.abs(z)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof z=="number"&&Math.floor(z)!==z)return I.error("Numeric branch labels must be integer values.");if(l){if(I.checkSubtype(l,Hr(z)))return null}else l=Hr(z);if(p[String(z)]!==void 0)return I.error("Branch labels must be unique.");p[String(z)]=g.length}const O=i.parse(P,w,u);if(!O)return null;u=u||O.type,g.push(O)}const y=i.parse(t[1],1,Xt);if(!y)return null;const b=i.parse(t[t.length-1],t.length-1,u);return b?y.type.kind!=="value"&&i.concat(1).checkSubtype(l,y.type)?null:new hd(l,u,y,p,g,b):null}evaluate(t){const i=this.input.evaluate(t);return(Hr(i)===this.inputType&&this.outputs[this.cases[i]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),l=[],u={};for(const g of i){const y=u[this.cases[g]];y===void 0?(u[this.cases[g]]=l.length,l.push([this.cases[g],[g]])):l[y][1].push(g)}const p=g=>this.inputType.kind==="number"?Number(g):g;for(const[g,y]of l)t.push(y.length===1?p(y[0]):y.map(p)),t.push(this.outputs[g].serialize());return t.push(this.otherwise.serialize()),t}}var W0=hd;class dd{constructor(t,i,l){this.type=t,this.branches=i,this.otherwise=l}static parse(t,i){if(t.length<4)return i.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return i.error("Expected an odd number of arguments.");let l;i.expectedType&&i.expectedType.kind!=="value"&&(l=i.expectedType);const u=[];for(let g=1;g<t.length-1;g+=2){const y=i.parse(t[g],g,Wt);if(!y)return null;const b=i.parse(t[g+1],g+1,l);if(!b)return null;u.push([y,b]),l=l||b.type}const p=i.parse(t[t.length-1],t.length-1,l);return p?new dd(l,u,p):null}evaluate(t){for(const[i,l]of this.branches)if(i.evaluate(t))return l.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[i,l]of this.branches)t(i),t(l);t(this.otherwise)}outputDefined(){return this.branches.every(([t,i])=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const t=["case"];return this.eachChild(i=>{t.push(i.serialize())}),t}}var Hp=dd;class Ul{constructor(t,i,l,u){this.type=t,this.input=i,this.beginIndex=l,this.endIndex=u}static parse(t,i){if(t.length<=2||t.length>=5)return i.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=i.parse(t[1],1,Xt),u=i.parse(t[2],2,pt);if(!l||!u)return null;if(!Ml(l.type,[Mi(Xt),Qt,Xt]))return i.error(`Expected first argument to be of type array or string, but found ${Br(l.type)} instead`);if(t.length===4){const p=i.parse(t[3],3,pt);return p?new Ul(l.type,l,u,p):null}return new Ul(l.type,l,u)}evaluate(t){const i=this.input.evaluate(t),l=this.beginIndex.evaluate(t);if(!Pl(i,["string","array"]))throw new Ln(`Expected first argument to be of type array or string, but found ${Br(Hr(i))} instead.`);if(this.endIndex){const u=this.endIndex.evaluate(t);return i.slice(l,u)}return i.slice(l)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var qp=Ul;function ru(n,t){return n==="=="||n==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Wp(n,t,i,l){return l.compare(t,i)===0}function Ta(n,t,i){const l=n!=="=="&&n!=="!=";return class LP{constructor(p,g,y){this.type=Wt,this.lhs=p,this.rhs=g,this.collator=y,this.hasUntypedArgument=p.type.kind==="value"||g.type.kind==="value"}static parse(p,g){if(p.length!==3&&p.length!==4)return g.error("Expected two or three arguments.");const y=p[0];let b=g.parse(p[1],1,Xt);if(!b)return null;if(!ru(y,b.type))return g.concat(1).error(`"${y}" comparisons are not supported for type '${Br(b.type)}'.`);let w=g.parse(p[2],2,Xt);if(!w)return null;if(!ru(y,w.type))return g.concat(2).error(`"${y}" comparisons are not supported for type '${Br(w.type)}'.`);if(b.type.kind!==w.type.kind&&b.type.kind!=="value"&&w.type.kind!=="value")return g.error(`Cannot compare types '${Br(b.type)}' and '${Br(w.type)}'.`);l&&(b.type.kind==="value"&&w.type.kind!=="value"?b=new ko(w.type,[b]):b.type.kind!=="value"&&w.type.kind==="value"&&(w=new ko(b.type,[w])));let C=null;if(p.length===4){if(b.type.kind!=="string"&&w.type.kind!=="string"&&b.type.kind!=="value"&&w.type.kind!=="value")return g.error("Cannot use collator to compare non-string types.");if(C=g.parse(p[3],3,_i),!C)return null}return new LP(b,w,C)}evaluate(p){const g=this.lhs.evaluate(p),y=this.rhs.evaluate(p);if(l&&this.hasUntypedArgument){const b=Hr(g),w=Hr(y);if(b.kind!==w.kind||b.kind!=="string"&&b.kind!=="number")throw new Ln(`Expected arguments for "${n}" to be (string, string) or (number, number), but found (${b.kind}, ${w.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const b=Hr(g),w=Hr(y);if(b.kind!=="string"||w.kind!=="string")return t(p,g,y)}return this.collator?i(p,g,y,this.collator.evaluate(p)):t(p,g,y)}eachChild(p){p(this.lhs),p(this.rhs),this.collator&&p(this.collator)}outputDefined(){return!0}serialize(){const p=[n];return this.eachChild(g=>{p.push(g.serialize())}),p}}}const X0=Ta("==",function(n,t,i){return t===i},Wp),K0=Ta("!=",function(n,t,i){return t!==i},function(n,t,i,l){return!Wp(0,t,i,l)}),Y0=Ta("<",function(n,t,i){return t<i},function(n,t,i,l){return l.compare(t,i)<0}),Q0=Ta(">",function(n,t,i){return t>i},function(n,t,i,l){return l.compare(t,i)>0}),J0=Ta("<=",function(n,t,i){return t<=i},function(n,t,i,l){return l.compare(t,i)<=0}),Xp=Ta(">=",function(n,t,i){return t>=i},function(n,t,i,l){return l.compare(t,i)>=0});class nu{constructor(t,i,l,u,p,g){this.type=Qt,this.number=t,this.locale=i,this.currency=l,this.unit=u,this.minFractionDigits=p,this.maxFractionDigits=g}static parse(t,i){if(t.length!==3)return i.error("Expected two arguments.");const l=i.parse(t[1],1,pt);if(!l)return null;const u=t[2];if(typeof u!="object"||Array.isArray(u))return i.error("NumberFormat options argument must be an object.");let p=null;if(u.locale&&(p=i.parse(u.locale,1,Qt),!p))return null;let g=null;if(u.currency&&(g=i.parse(u.currency,1,Qt),!g))return null;let y=null;if(u.unit&&(y=i.parse(u.unit,1,Qt),!y))return null;let b=null;if(u["min-fraction-digits"]&&(b=i.parse(u["min-fraction-digits"],1,pt),!b))return null;let w=null;return u["max-fraction-digits"]&&(w=i.parse(u["max-fraction-digits"],1,pt),!w)?null:new nu(l,p,g,y,b,w)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]}}class Sa{constructor(t){this.type=pt,this.input=t}static parse(t,i){if(t.length!==2)return i.error(`Expected 1 argument, but found ${t.length-1} instead.`);const l=i.parse(t[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?i.error(`Expected argument of type string or array, but found ${Br(l.type)} instead.`):new Sa(l):null}evaluate(t){const i=this.input.evaluate(t);if(typeof i=="string"||Array.isArray(i))return i.length;throw new Ln(`Expected value to be of type string or array, but found ${Br(Hr(i))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}serialize(){const t=["length"];return this.eachChild(i=>{t.push(i.serialize())}),t}}const Kp={"==":X0,"!=":K0,">":Q0,"<":Y0,">=":Xp,"<=":J0,array:ko,at:q0,boolean:ko,case:Hp,coalesce:ld,collator:zl,format:ls,image:Zc,in:tu,"index-of":Zp,interpolate:uo,"interpolate-hcl":uo,"interpolate-lab":uo,length:Sa,let:Gp,literal:Ds,match:W0,number:ko,"number-format":nu,object:ko,slice:qp,step:ed,string:ko,"to-boolean":ya,"to-color":ya,"to-number":ya,"to-string":ya,var:Np,within:Wc};function Yp(n,[t,i,l,u]){t=t.evaluate(n),i=i.evaluate(n),l=l.evaluate(n);const p=u?u.evaluate(n):1,g=Rp(t,i,l,p);if(g)throw new Ln(g);return new Kr(t/255*p,i/255*p,l/255*p,p)}function Ro(n,t){return n in t}function iu(n,t){const i=t[n];return i===void 0?null:i}function Ii(n){return{type:n}}Lo.register(Kp,{error:[{kind:"error"},[Qt],(n,[t])=>{throw new Ln(t.evaluate(n))}],typeof:[Qt,[Xt],(n,[t])=>Br(Hr(t.evaluate(n)))],"to-rgba":[Mi(pt,4),[gi],(n,[t])=>t.evaluate(n).toArray()],rgb:[gi,[pt,pt,pt],Yp],rgba:[gi,[pt,pt,pt,pt],Yp],has:{type:Wt,overloads:[[[Qt],(n,[t])=>Ro(t.evaluate(n),n.properties())],[[Qt,Hi],(n,[t,i])=>Ro(t.evaluate(n),i.evaluate(n))]]},get:{type:Xt,overloads:[[[Qt],(n,[t])=>iu(t.evaluate(n),n.properties())],[[Qt,Hi],(n,[t,i])=>iu(t.evaluate(n),i.evaluate(n))]]},"feature-state":[Xt,[Qt],(n,[t])=>iu(t.evaluate(n),n.featureState||{})],properties:[Hi,[],n=>n.properties()],"geometry-type":[Qt,[],n=>n.geometryType()],id:[Xt,[],n=>n.id()],zoom:[pt,[],n=>n.globals.zoom],pitch:[pt,[],n=>n.globals.pitch||0],"distance-from-center":[pt,[],n=>n.distanceFromCenter()],"heatmap-density":[pt,[],n=>n.globals.heatmapDensity||0],"line-progress":[pt,[],n=>n.globals.lineProgress||0],"sky-radial-progress":[pt,[],n=>n.globals.skyRadialProgress||0],accumulated:[Xt,[],n=>n.globals.accumulated===void 0?null:n.globals.accumulated],"+":[pt,Ii(pt),(n,t)=>{let i=0;for(const l of t)i+=l.evaluate(n);return i}],"*":[pt,Ii(pt),(n,t)=>{let i=1;for(const l of t)i*=l.evaluate(n);return i}],"-":{type:pt,overloads:[[[pt,pt],(n,[t,i])=>t.evaluate(n)-i.evaluate(n)],[[pt],(n,[t])=>-t.evaluate(n)]]},"/":[pt,[pt,pt],(n,[t,i])=>t.evaluate(n)/i.evaluate(n)],"%":[pt,[pt,pt],(n,[t,i])=>t.evaluate(n)%i.evaluate(n)],ln2:[pt,[],()=>Math.LN2],pi:[pt,[],()=>Math.PI],e:[pt,[],()=>Math.E],"^":[pt,[pt,pt],(n,[t,i])=>Math.pow(t.evaluate(n),i.evaluate(n))],sqrt:[pt,[pt],(n,[t])=>Math.sqrt(t.evaluate(n))],log10:[pt,[pt],(n,[t])=>Math.log(t.evaluate(n))/Math.LN10],ln:[pt,[pt],(n,[t])=>Math.log(t.evaluate(n))],log2:[pt,[pt],(n,[t])=>Math.log(t.evaluate(n))/Math.LN2],sin:[pt,[pt],(n,[t])=>Math.sin(t.evaluate(n))],cos:[pt,[pt],(n,[t])=>Math.cos(t.evaluate(n))],tan:[pt,[pt],(n,[t])=>Math.tan(t.evaluate(n))],asin:[pt,[pt],(n,[t])=>Math.asin(t.evaluate(n))],acos:[pt,[pt],(n,[t])=>Math.acos(t.evaluate(n))],atan:[pt,[pt],(n,[t])=>Math.atan(t.evaluate(n))],min:[pt,Ii(pt),(n,t)=>Math.min(...t.map(i=>i.evaluate(n)))],max:[pt,Ii(pt),(n,t)=>Math.max(...t.map(i=>i.evaluate(n)))],abs:[pt,[pt],(n,[t])=>Math.abs(t.evaluate(n))],round:[pt,[pt],(n,[t])=>{const i=t.evaluate(n);return i<0?-Math.round(-i):Math.round(i)}],floor:[pt,[pt],(n,[t])=>Math.floor(t.evaluate(n))],ceil:[pt,[pt],(n,[t])=>Math.ceil(t.evaluate(n))],"filter-==":[Wt,[Qt,Xt],(n,[t,i])=>n.properties()[t.value]===i.value],"filter-id-==":[Wt,[Xt],(n,[t])=>n.id()===t.value],"filter-type-==":[Wt,[Qt],(n,[t])=>n.geometryType()===t.value],"filter-<":[Wt,[Qt,Xt],(n,[t,i])=>{const l=n.properties()[t.value],u=i.value;return typeof l==typeof u&&l<u}],"filter-id-<":[Wt,[Xt],(n,[t])=>{const i=n.id(),l=t.value;return typeof i==typeof l&&i<l}],"filter->":[Wt,[Qt,Xt],(n,[t,i])=>{const l=n.properties()[t.value],u=i.value;return typeof l==typeof u&&l>u}],"filter-id->":[Wt,[Xt],(n,[t])=>{const i=n.id(),l=t.value;return typeof i==typeof l&&i>l}],"filter-<=":[Wt,[Qt,Xt],(n,[t,i])=>{const l=n.properties()[t.value],u=i.value;return typeof l==typeof u&&l<=u}],"filter-id-<=":[Wt,[Xt],(n,[t])=>{const i=n.id(),l=t.value;return typeof i==typeof l&&i<=l}],"filter->=":[Wt,[Qt,Xt],(n,[t,i])=>{const l=n.properties()[t.value],u=i.value;return typeof l==typeof u&&l>=u}],"filter-id->=":[Wt,[Xt],(n,[t])=>{const i=n.id(),l=t.value;return typeof i==typeof l&&i>=l}],"filter-has":[Wt,[Xt],(n,[t])=>t.value in n.properties()],"filter-has-id":[Wt,[],n=>n.id()!==null&&n.id()!==void 0],"filter-type-in":[Wt,[Mi(Qt)],(n,[t])=>t.value.indexOf(n.geometryType())>=0],"filter-id-in":[Wt,[Mi(Xt)],(n,[t])=>t.value.indexOf(n.id())>=0],"filter-in-small":[Wt,[Qt,Mi(Xt)],(n,[t,i])=>i.value.indexOf(n.properties()[t.value])>=0],"filter-in-large":[Wt,[Qt,Mi(Xt)],(n,[t,i])=>function(l,u,p,g){for(;p<=g;){const y=p+g>>1;if(u[y]===l)return!0;u[y]>l?g=y-1:p=y+1}return!1}(n.properties()[t.value],i.value,0,i.value.length-1)],all:{type:Wt,overloads:[[[Wt,Wt],(n,[t,i])=>t.evaluate(n)&&i.evaluate(n)],[Ii(Wt),(n,t)=>{for(const i of t)if(!i.evaluate(n))return!1;return!0}]]},any:{type:Wt,overloads:[[[Wt,Wt],(n,[t,i])=>t.evaluate(n)||i.evaluate(n)],[Ii(Wt),(n,t)=>{for(const i of t)if(i.evaluate(n))return!0;return!1}]]},"!":[Wt,[Wt],(n,[t])=>!t.evaluate(n)],"is-supported-script":[Wt,[Qt],(n,[t])=>{const i=n.globals&&n.globals.isSupportedScript;return!i||i(t.evaluate(n))}],upcase:[Qt,[Qt],(n,[t])=>t.evaluate(n).toUpperCase()],downcase:[Qt,[Qt],(n,[t])=>t.evaluate(n).toLowerCase()],concat:[Qt,Ii(Xt),(n,t)=>t.map(i=>Ol(i.evaluate(n))).join("")],"resolved-locale":[Qt,[_i],(n,[t])=>t.evaluate(n).resolvedLocale()]});var Vl=Kp;function Qp(n){return{result:"success",value:n}}function js(n){return{result:"error",value:n}}function Aa(n){return n["property-type"]==="data-driven"}function ou(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}function su(n){return!!n.expression&&n.expression.interpolated}function ir(n){return n instanceof Number?"number":n instanceof String?"string":n instanceof Boolean?"boolean":Array.isArray(n)?"array":n===null?"null":typeof n}function $l(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Jp(n){return n}function au(n,t){const i=t.type==="color",l=n.stops&&typeof n.stops[0][0]=="object",u=l||!(l||n.property!==void 0),p=n.type||(su(t)?"exponential":"interval");if(i&&((n=Po({},n)).stops&&(n.stops=n.stops.map(w=>[w[0],Kr.parse(w[1])])),n.default=Kr.parse(n.default?n.default:t.default)),n.colorSpace&&n.colorSpace!=="rgb"&&!sd[n.colorSpace])throw new Error(`Unknown color space: ${n.colorSpace}`);let g,y,b;if(p==="exponential")g=Do;else if(p==="interval")g=lu;else if(p==="categorical"){g=em,y=Object.create(null);for(const w of n.stops)y[w[0]]=w[1];b=typeof n.stops[0][0]}else{if(p!=="identity")throw new Error(`Unknown function type "${p}"`);g=tm}if(l){const w={},C=[];for(let O=0;O<n.stops.length;O++){const z=n.stops[O],F=z[0].zoom;w[F]===void 0&&(w[F]={zoom:F,type:n.type,property:n.property,default:n.default,stops:[]},C.push(F)),w[F].stops.push([z[0].value,z[1]])}const P=[];for(const O of C)P.push([w[O].zoom,au(w[O],t)]);const I={name:"linear"};return{kind:"composite",interpolationType:I,interpolationFactor:uo.interpolationFactor.bind(void 0,I),zoomStops:P.map(O=>O[0]),evaluate:({zoom:O},z)=>Do({stops:P,base:n.base},t,O).evaluate(O,z)}}if(u){const w=p==="exponential"?{name:"exponential",base:n.base!==void 0?n.base:1}:null;return{kind:"camera",interpolationType:w,interpolationFactor:uo.interpolationFactor.bind(void 0,w),zoomStops:n.stops.map(C=>C[0]),evaluate:({zoom:C})=>g(n,t,C,y,b)}}return{kind:"source",evaluate(w,C){const P=C&&C.properties?C.properties[n.property]:void 0;return P===void 0?Ca(n.default,t.default):g(n,t,P,y,b)}}}function Ca(n,t,i){return n!==void 0?n:t!==void 0?t:i!==void 0?i:void 0}function em(n,t,i,l,u){return Ca(typeof i===u?l[i]:void 0,n.default,t.default)}function lu(n,t,i){if(ir(i)!=="number")return Ca(n.default,t.default);const l=n.stops.length;if(l===1||i<=n.stops[0][0])return n.stops[0][1];if(i>=n.stops[l-1][0])return n.stops[l-1][1];const u=Kc(n.stops.map(p=>p[0]),i);return n.stops[u][1]}function Do(n,t,i){const l=n.base!==void 0?n.base:1;if(ir(i)!=="number")return Ca(n.default,t.default);const u=n.stops.length;if(u===1||i<=n.stops[0][0])return n.stops[0][1];if(i>=n.stops[u-1][0])return n.stops[u-1][1];const p=Kc(n.stops.map(C=>C[0]),i),g=function(C,P,I,O){const z=O-I,F=C-I;return z===0?0:P===1?F/z:(Math.pow(P,F)-1)/(Math.pow(P,z)-1)}(i,l,n.stops[p][0],n.stops[p+1][0]),y=n.stops[p][1],b=n.stops[p+1][1];let w=Bl[t.type]||Jp;if(n.colorSpace&&n.colorSpace!=="rgb"){const C=sd[n.colorSpace];w=(P,I)=>C.reverse(C.interpolate(C.forward(P),C.forward(I),g))}return typeof y.evaluate=="function"?{evaluate(...C){const P=y.evaluate.apply(void 0,C),I=b.evaluate.apply(void 0,C);if(P!==void 0&&I!==void 0)return w(P,I,g)}}:w(y,b,g)}function tm(n,t,i){return t.type==="color"?i=Kr.parse(i):t.type==="formatted"?i=ei.fromString(i.toString()):t.type==="resolvedImage"?i=Pi.fromString(i.toString()):ir(i)===t.type||t.type==="enum"&&t.values[i]||(i=void 0),Ca(i,n.default,t.default)}class cu{constructor(t,i){this.expression=t,this._warningHistory={},this._evaluator=new Hh,this._defaultValue=i?function(l){return l.type==="color"&&($l(l.default)||Array.isArray(l.default))?new Kr(0,0,0,0):l.type==="color"?Kr.parse(l.default)||null:l.default===void 0?null:l.default}(i):null,this._enumValues=i&&i.type==="enum"?i.values:null}evaluateWithoutErrorHandling(t,i,l,u,p,g,y,b){return this._evaluator.globals=t,this._evaluator.feature=i,this._evaluator.featureState=l,this._evaluator.canonical=u||null,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=g,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=b||null,this.expression.evaluate(this._evaluator)}evaluate(t,i,l,u,p,g,y,b){this._evaluator.globals=t,this._evaluator.feature=i||null,this._evaluator.featureState=l||null,this._evaluator.canonical=u||null,this._evaluator.availableImages=p||null,this._evaluator.formattedSection=g||null,this._evaluator.featureTileCoord=y||null,this._evaluator.featureDistanceData=b||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Ln(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Ma(n){return Array.isArray(n)&&n.length>0&&typeof n[0]=="string"&&n[0]in Vl}function Pa(n,t){const i=new Qh(Vl,[],t?function(u){const p={color:gi,string:Qt,number:pt,enum:Qt,boolean:Wt,formatted:Cl,resolvedImage:Rs};return u.type==="array"?Mi(p[u.value]||Xt,u.length):p[u.type]}(t):void 0),l=i.parse(n,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?Qp(new cu(l,t)):js(i.errors)}class fd{constructor(t,i){this.kind=t,this._styleExpression=i,this.isStateDependent=t!=="constant"&&!zo(i.expression)}evaluateWithoutErrorHandling(t,i,l,u,p,g){return this._styleExpression.evaluateWithoutErrorHandling(t,i,l,u,p,g)}evaluate(t,i,l,u,p,g){return this._styleExpression.evaluate(t,i,l,u,p,g)}}class Gl{constructor(t,i,l,u){this.kind=t,this.zoomStops=l,this._styleExpression=i,this.isStateDependent=t!=="camera"&&!zo(i.expression),this.interpolationType=u}evaluateWithoutErrorHandling(t,i,l,u,p,g){return this._styleExpression.evaluateWithoutErrorHandling(t,i,l,u,p,g)}evaluate(t,i,l,u,p,g){return this._styleExpression.evaluate(t,i,l,u,p,g)}interpolationFactor(t,i,l){return this.interpolationType?uo.interpolationFactor(this.interpolationType,t,i,l):0}}function Zl(n,t){if((n=Pa(n,t)).result==="error")return n;const i=n.value.expression,l=wa(i);if(!l&&!Aa(t))return js([new lo("","data expressions not supported")]);const u=Fs(i,["zoom","pitch","distance-from-center"]);if(!u&&!ou(t))return js([new lo("","zoom expressions not supported")]);const p=hu(i);return p||u?p instanceof lo?js([p]):p instanceof uo&&!su(t)?js([new lo("",'"interpolate" expressions cannot be used with this property')]):Qp(p?new Gl(l?"camera":"composite",n.value,p.labels,p instanceof uo?p.interpolation:void 0):new fd(l?"constant":"source",n.value)):js([new lo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class uu{constructor(t,i){this._parameters=t,this._specification=i,Po(this,au(this._parameters,this._specification))}static deserialize(t){return new uu(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function hu(n){let t=null;if(n instanceof Gp)t=hu(n.result);else if(n instanceof ld){for(const i of n.args)if(t=hu(i),t)break}else(n instanceof ed||n instanceof uo)&&n.input instanceof Lo&&n.input.name==="zoom"&&(t=n);return t instanceof lo||n.eachChild(i=>{const l=hu(i);l instanceof lo?t=l:!t&&l?t=new lo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&l&&t!==l&&(t=new lo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}class mt{constructor(t,i,l,u){this.message=(t?`${t}: `:"")+l,u&&(this.identifier=u),i!=null&&i.__line__&&(this.line=i.__line__)}}function qi(n){const t=n.key,i=n.value,l=n.valueSpec||{},u=n.objectElementValidators||{},p=n.style,g=n.styleSpec;let y=[];const b=ir(i);if(b!=="object")return[new mt(t,i,`object expected, ${b} found`)];for(const w in i){const C=w.split(".")[0];let P;u[C]?P=u[C]:l[C]?P=jn:u["*"]?P=u["*"]:l["*"]&&(P=jn),P?y=y.concat(P({key:(t&&`${t}.`)+w,value:i[w],valueSpec:l[C]||l["*"],style:p,styleSpec:g,object:i,objectKey:w},i)):y.push(new mt(t,i[w],`unknown property "${w}"`))}for(const w in l)u[w]||l[w].required&&l[w].default===void 0&&i[w]===void 0&&y.push(new mt(t,i,`missing required property "${w}"`));return y}function rm(n){const t=n.value,i=n.valueSpec,l=n.style,u=n.styleSpec,p=n.key,g=n.arrayElementValidator||jn;if(ir(t)!=="array")return[new mt(p,t,`array expected, ${ir(t)} found`)];if(i.length&&t.length!==i.length)return[new mt(p,t,`array length ${i.length} expected, length ${t.length} found`)];if(i["min-length"]&&t.length<i["min-length"])return[new mt(p,t,`array length at least ${i["min-length"]} expected, length ${t.length} found`)];let y={type:i.value,values:i.values,minimum:i.minimum,maximum:i.maximum,function:void 0};u.$version<7&&(y.function=i.function),ir(i.value)==="object"&&(y=i.value);let b=[];for(let w=0;w<t.length;w++)b=b.concat(g({array:t,arrayIndex:w,value:t[w],valueSpec:y,style:l,styleSpec:u,key:`${p}[${w}]`}));return b}function Hl(n){const t=n.key,i=n.value,l=n.valueSpec;let u=ir(i);if(u==="number"&&i!=i&&(u="NaN"),u!=="number")return[new mt(t,i,`number expected, ${u} found`)];if("minimum"in l){let p=l.minimum;if(ir(l.minimum)==="array"&&(p=l.minimum[n.arrayIndex]),i<p)return[new mt(t,i,`${i} is less than the minimum value ${p}`)]}if("maximum"in l){let p=l.maximum;if(ir(l.maximum)==="array"&&(p=l.maximum[n.arrayIndex]),i>p)return[new mt(t,i,`${i} is greater than the maximum value ${p}`)]}return[]}function ql(n){const t=n.valueSpec,i=rn(n.value.type);let l,u,p,g={};const y=i!=="categorical"&&n.value.property===void 0,b=!y,w=ir(n.value.stops)==="array"&&ir(n.value.stops[0])==="array"&&ir(n.value.stops[0][0])==="object",C=qi({key:n.key,value:n.value,valueSpec:n.styleSpec.function,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{stops:function(O){if(i==="identity")return[new mt(O.key,O.value,'identity function may not have a "stops" property')];let z=[];const F=O.value;return z=z.concat(rm({key:O.key,value:F,valueSpec:O.valueSpec,style:O.style,styleSpec:O.styleSpec,arrayElementValidator:P})),ir(F)==="array"&&F.length===0&&z.push(new mt(O.key,F,"array must have at least one stop")),z},default:function(O){return jn({key:O.key,value:O.value,valueSpec:t,style:O.style,styleSpec:O.styleSpec})}}});return i==="identity"&&y&&C.push(new mt(n.key,n.value,'missing required property "property"')),i==="identity"||n.value.stops||C.push(new mt(n.key,n.value,'missing required property "stops"')),i==="exponential"&&n.valueSpec.expression&&!su(n.valueSpec)&&C.push(new mt(n.key,n.value,"exponential functions not supported")),n.styleSpec.$version>=8&&(b&&!Aa(n.valueSpec)?C.push(new mt(n.key,n.value,"property functions not supported")):y&&!ou(n.valueSpec)&&C.push(new mt(n.key,n.value,"zoom functions not supported"))),i!=="categorical"&&!w||n.value.property!==void 0||C.push(new mt(n.key,n.value,'"property" property is required')),C;function P(O){let z=[];const F=O.value,G=O.key;if(ir(F)!=="array")return[new mt(G,F,`array expected, ${ir(F)} found`)];if(F.length!==2)return[new mt(G,F,`array length 2 expected, length ${F.length} found`)];if(w){if(ir(F[0])!=="object")return[new mt(G,F,`object expected, ${ir(F[0])} found`)];if(F[0].zoom===void 0)return[new mt(G,F,"object stop key must have zoom")];if(F[0].value===void 0)return[new mt(G,F,"object stop key must have value")];const Q=rn(F[0].zoom);if(typeof Q!="number")return[new mt(G,F[0].zoom,"stop zoom values must be numbers")];if(p&&p>Q)return[new mt(G,F[0].zoom,"stop zoom values must appear in ascending order")];Q!==p&&(p=Q,u=void 0,g={}),z=z.concat(qi({key:`${G}[0]`,value:F[0],valueSpec:{zoom:{}},style:O.style,styleSpec:O.styleSpec,objectElementValidators:{zoom:Hl,value:I}}))}else z=z.concat(I({key:`${G}[0]`,value:F[0],valueSpec:{},style:O.style,styleSpec:O.styleSpec},F));return Ma(Tn(F[1]))?z.concat([new mt(`${G}[1]`,F[1],"expressions are not allowed in function stops.")]):z.concat(jn({key:`${G}[1]`,value:F[1],valueSpec:t,style:O.style,styleSpec:O.styleSpec}))}function I(O,z){const F=ir(O.value),G=rn(O.value),Q=O.value!==null?O.value:z;if(l){if(F!==l)return[new mt(O.key,Q,`${F} stop domain type must match previous stop domain type ${l}`)]}else l=F;if(F!=="number"&&F!=="string"&&F!=="boolean"&&typeof G!="number"&&typeof G!="string"&&typeof G!="boolean")return[new mt(O.key,Q,"stop domain value must be a number, string, or boolean")];if(F!=="number"&&i!=="categorical"){let ce=`number expected, ${F} found`;return Aa(t)&&i===void 0&&(ce+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mt(O.key,Q,ce)]}return i!=="categorical"||F!=="number"||typeof G=="number"&&isFinite(G)&&Math.floor(G)===G?i!=="categorical"&&F==="number"&&typeof G=="number"&&typeof u=="number"&&u!==void 0&&G<u?[new mt(O.key,Q,"stop domain values must appear in ascending order")]:(u=G,i==="categorical"&&G in g?[new mt(O.key,Q,"stop domain values must be unique")]:(g[G]=!0,[])):[new mt(O.key,Q,`integer expected, found ${String(G)}`)]}}function Sn(n){const t=(n.expressionContext==="property"?Zl:Pa)(Tn(n.value),n.valueSpec);if(t.result==="error")return t.value.map(l=>new mt(`${n.key}${l.key}`,n.value,l.message));const i=t.value.expression||t.value._styleExpression.expression;if(n.expressionContext==="property"&&n.propertyKey==="text-font"&&!i.outputDefined())return[new mt(n.key,n.value,`Invalid data expression for "${n.propertyKey}". Output values must be contained as literals within the expression.`)];if(n.expressionContext==="property"&&n.propertyType==="layout"&&!zo(i))return[new mt(n.key,n.value,'"feature-state" data expressions are not supported with layout properties.')];if(n.expressionContext==="filter")return Wl(i,n);if(n.expressionContext&&n.expressionContext.indexOf("cluster")===0){if(!Fs(i,["zoom","feature-state"]))return[new mt(n.key,n.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(n.expressionContext==="cluster-initial"&&!wa(i))return[new mt(n.key,n.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Wl(n,t){const i=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const u of t.valueSpec.expression.parameters)i.delete(u);if(i.size===0)return[];const l=[];return n instanceof Lo&&i.has(n.name)?[new mt(t.key,t.value,`["${n.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(n.eachChild(u=>{l.push(...Wl(u,t))}),l)}function du(n){const t=n.key,i=n.value,l=n.valueSpec,u=[];return Array.isArray(l.values)?l.values.indexOf(rn(i))===-1&&u.push(new mt(t,i,`expected one of [${l.values.join(", ")}], ${JSON.stringify(i)} found`)):Object.keys(l.values).indexOf(rn(i))===-1&&u.push(new mt(t,i,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(i)} found`)),u}function pd(n){if(n===!0||n===!1)return!0;if(!Array.isArray(n)||n.length===0)return!1;switch(n[0]){case"has":return n.length>=2&&n[1]!=="$id"&&n[1]!=="$type";case"in":return n.length>=3&&(typeof n[1]!="string"||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return n.length!==3||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(const t of n.slice(1))if(!pd(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function fu(n,t="fill"){if(n==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};pd(n)||(n=ka(n));const i=n;let l=!0;try{l=function(w){if(!Ia(w))return w;let C=Tn(w);return pu(C),C=nm(C),C}(i)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(i,null,2)}
        `)}const u=je[`filter_${t}`],p=Pa(l,u);let g=null;if(p.result==="error")throw new Error(p.value.map(w=>`${w.key}: ${w.message}`).join(", "));g=(w,C,P)=>p.value.evaluate(w,C,{},P);let y=null,b=null;if(l!==i){const w=Pa(i,u);if(w.result==="error")throw new Error(w.value.map(C=>`${C.key}: ${C.message}`).join(", "));y=(C,P,I,O,z)=>w.value.evaluate(C,P,{},I,void 0,void 0,O,z),b=!wa(w.value.expression)}return{filter:g,dynamicFilter:y||void 0,needGeometry:im(l),needFeature:!!b}}function nm(n){if(!Array.isArray(n))return n;const t=function(i){if(md.has(i[0])){for(let l=1;l<i.length;l++)if(Ia(i[l]))return!0}return i}(n);return t===!0?t:t.map(i=>nm(i))}function pu(n){let t=!1;const i=[];if(n[0]==="case"){for(let l=1;l<n.length-1;l+=2)t=t||Ia(n[l]),i.push(n[l+1]);i.push(n[n.length-1])}else if(n[0]==="match"){t=t||Ia(n[1]);for(let l=2;l<n.length-1;l+=2)i.push(n[l+1]);i.push(n[n.length-1])}else if(n[0]==="step"){t=t||Ia(n[1]);for(let l=1;l<n.length-1;l+=2)i.push(n[l+1])}t&&(n.length=0,n.push("any",...i));for(let l=1;l<n.length;l++)pu(n[l])}function Ia(n){if(!Array.isArray(n))return!1;if((t=n[0])==="pitch"||t==="distance-from-center")return!0;var t;for(let i=1;i<n.length;i++)if(Ia(n[i]))return!0;return!1}const md=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function ey(n,t){return n<t?-1:n>t?1:0}function im(n){if(!Array.isArray(n))return!1;if(n[0]==="within")return!0;for(let t=1;t<n.length;t++)if(im(n[t]))return!0;return!1}function ka(n){if(!n)return!0;const t=n[0];return n.length<=1?t!=="any":t==="=="?gd(n[1],n[2],"=="):t==="!="?mu(gd(n[1],n[2],"==")):t==="<"||t===">"||t==="<="||t===">="?gd(n[1],n[2],t):t==="any"?(i=n.slice(1),["any"].concat(i.map(ka))):t==="all"?["all"].concat(n.slice(1).map(ka)):t==="none"?["all"].concat(n.slice(1).map(ka).map(mu)):t==="in"?_d(n[1],n.slice(2)):t==="!in"?mu(_d(n[1],n.slice(2))):t==="has"?yd(n[1]):t==="!has"?mu(yd(n[1])):t!=="within"||n;var i}function gd(n,t,i){switch(n){case"$type":return[`filter-type-${i}`,t];case"$id":return[`filter-id-${i}`,t];default:return[`filter-${i}`,n,t]}}function _d(n,t){if(t.length===0)return!1;switch(n){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(i=>typeof i!=typeof t[0])?["filter-in-large",n,["literal",t.sort(ey)]]:["filter-in-small",n,["literal",t]]}}function yd(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function mu(n){return["!",n]}function Xl(n){return pd(Tn(n.value))?Sn(Po({},n,{expressionContext:"filter",valueSpec:n.styleSpec[`filter_${n.layerType||"fill"}`]})):Kl(n)}function Kl(n){const t=n.value,i=n.key;if(ir(t)!=="array")return[new mt(i,t,`array expected, ${ir(t)} found`)];const l=n.styleSpec;let u,p=[];if(t.length<1)return[new mt(i,t,"filter array must have at least 1 element")];switch(p=p.concat(du({key:`${i}[0]`,value:t[0],valueSpec:l.filter_operator,style:n.style,styleSpec:n.styleSpec})),rn(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&rn(t[1])==="$type"&&p.push(new mt(i,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&p.push(new mt(i,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(u=ir(t[1]),u!=="string"&&p.push(new mt(`${i}[1]`,t[1],`string expected, ${u} found`)));for(let g=2;g<t.length;g++)u=ir(t[g]),rn(t[1])==="$type"?p=p.concat(du({key:`${i}[${g}]`,value:t[g],valueSpec:l.geometry_type,style:n.style,styleSpec:n.styleSpec})):u!=="string"&&u!=="number"&&u!=="boolean"&&p.push(new mt(`${i}[${g}]`,t[g],`string, number, or boolean expected, ${u} found`));break;case"any":case"all":case"none":for(let g=1;g<t.length;g++)p=p.concat(Kl({key:`${i}[${g}]`,value:t[g],style:n.style,styleSpec:n.styleSpec}));break;case"has":case"!has":u=ir(t[1]),t.length!==2?p.push(new mt(i,t,`filter array for "${t[0]}" operator must have 2 elements`)):u!=="string"&&p.push(new mt(`${i}[1]`,t[1],`string expected, ${u} found`));break;case"within":u=ir(t[1]),t.length!==2?p.push(new mt(i,t,`filter array for "${t[0]}" operator must have 2 elements`)):u!=="object"&&p.push(new mt(`${i}[1]`,t[1],`object expected, ${u} found`))}return p}function vd(n,t){const i=n.key,l=n.style,u=n.styleSpec,p=n.value,g=n.objectKey,y=u[`${t}_${n.layerType}`];if(!y)return[];const b=g.match(/^(.*)-transition$/);if(t==="paint"&&b&&y[b[1]]&&y[b[1]].transition)return jn({key:i,value:p,valueSpec:u.transition,style:l,styleSpec:u});const w=n.valueSpec||y[g];if(!w)return[new mt(i,p,`unknown property "${g}"`)];let C;if(ir(p)==="string"&&Aa(w)&&!w.tokens&&(C=/^{([^}]+)}$/.exec(p))){const I=`\`{ "type": "identity", "property": ${C?JSON.stringify(C[1]):'"_"'} }\``;return[new mt(i,p,`"${g}" does not support interpolation syntax
Use an identity property function instead: ${I}.`)]}const P=[];return n.layerType==="symbol"&&(g==="text-field"&&l&&!l.glyphs&&P.push(new mt(i,p,'use of "text-field" requires a style "glyphs" property')),g==="text-font"&&$l(Tn(p))&&rn(p.type)==="identity"&&P.push(new mt(i,p,'"text-font" does not support identity functions'))),P.concat(jn({key:n.key,value:p,valueSpec:w,style:l,styleSpec:u,expressionContext:"property",propertyType:t,propertyKey:g}))}function om(n){return vd(n,"paint")}function xd(n){return vd(n,"layout")}function sm(n){let t=[];const i=n.value,l=n.key,u=n.style,p=n.styleSpec;i.type||i.ref||t.push(new mt(l,i,'either "type" or "ref" is required'));let g=rn(i.type);const y=rn(i.ref);if(i.id){const b=rn(i.id);for(let w=0;w<n.arrayIndex;w++){const C=u.layers[w];rn(C.id)===b&&t.push(new mt(l,i.id,`duplicate layer id "${i.id}", previously used at line ${C.id.__line__}`))}}if("ref"in i){let b;["type","source","source-layer","filter","layout"].forEach(w=>{w in i&&t.push(new mt(l,i[w],`"${w}" is prohibited for ref layers`))}),u.layers.forEach(w=>{rn(w.id)===y&&(b=w)}),b?b.ref?t.push(new mt(l,i.ref,"ref cannot reference another ref layer")):g=rn(b.type):typeof y=="string"&&t.push(new mt(l,i.ref,`ref layer "${y}" not found`))}else if(g!=="background"&&g!=="sky")if(i.source){const b=u.sources&&u.sources[i.source],w=b&&rn(b.type);b?w==="vector"&&g==="raster"?t.push(new mt(l,i.source,`layer "${i.id}" requires a raster source`)):w==="raster"&&g!=="raster"?t.push(new mt(l,i.source,`layer "${i.id}" requires a vector source`)):w!=="vector"||i["source-layer"]?w==="raster-dem"&&g!=="hillshade"?t.push(new mt(l,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):g!=="line"||!i.paint||!i.paint["line-gradient"]&&!i.paint["line-trim-offset"]||w==="geojson"&&b.lineMetrics||t.push(new mt(l,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new mt(l,i,`layer "${i.id}" must specify a "source-layer"`)):t.push(new mt(l,i.source,`source "${i.source}" not found`))}else t.push(new mt(l,i,'missing required property "source"'));return t=t.concat(qi({key:l,value:i,valueSpec:p.layer,style:n.style,styleSpec:n.styleSpec,objectElementValidators:{"*":()=>[],type:()=>jn({key:`${l}.type`,value:i.type,valueSpec:p.layer.type,style:n.style,styleSpec:n.styleSpec,object:i,objectKey:"type"}),filter:b=>Xl(Po({layerType:g},b)),layout:b=>qi({layer:i,key:b.key,value:b.value,valueSpec:{},style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":w=>xd(Po({layerType:g},w))}}),paint:b=>qi({layer:i,key:b.key,value:b.value,valueSpec:{},style:b.style,styleSpec:b.styleSpec,objectElementValidators:{"*":w=>om(Po({layerType:g},w))}})}})),t}function cs(n){const t=n.value,i=n.key,l=ir(t);return l!=="string"?[new mt(i,t,`string expected, ${l} found`)]:[]}const am={promoteId:function({key:n,value:t}){if(ir(t)==="string")return cs({key:n,value:t});{const i=[];for(const l in t)i.push(...cs({key:`${n}.${l}`,value:t[l]}));return i}}};function lm(n){const t=n.value,i=n.key,l=n.styleSpec,u=n.style;if(!t.type)return[new mt(i,t,'"type" is required')];const p=rn(t.type);let g;switch(p){case"vector":case"raster":case"raster-dem":return g=qi({key:i,value:t,valueSpec:l[`source_${p.replace("-","_")}`],style:n.style,styleSpec:l,objectElementValidators:am}),g;case"geojson":if(g=qi({key:i,value:t,valueSpec:l.source_geojson,style:u,styleSpec:l,objectElementValidators:am}),t.cluster)for(const y in t.clusterProperties){const[b,w]=t.clusterProperties[y],C=typeof b=="string"?[b,["accumulated"],["get",y]]:b;g.push(...Sn({key:`${i}.${y}.map`,value:w,expressionContext:"cluster-map"})),g.push(...Sn({key:`${i}.${y}.reduce`,value:C,expressionContext:"cluster-reduce"}))}return g;case"video":return qi({key:i,value:t,valueSpec:l.source_video,style:u,styleSpec:l});case"image":return qi({key:i,value:t,valueSpec:l.source_image,style:u,styleSpec:l});case"canvas":return[new mt(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return du({key:`${i}.type`,value:t.type,valueSpec:{values:ty(l)},style:u,styleSpec:l})}}function ty(n){return n.source.reduce((t,i)=>{const l=n[i];return l.type.type==="enum"&&(t=t.concat(Object.keys(l.type.values))),t},[])}function cm(n){const t=n.value,i=n.styleSpec,l=i.light,u=n.style;let p=[];const g=ir(t);if(t===void 0)return p;if(g!=="object")return p=p.concat([new mt("light",t,`object expected, ${g} found`)]),p;for(const y in t){const b=y.match(/^(.*)-transition$/);p=p.concat(b&&l[b[1]]&&l[b[1]].transition?jn({key:y,value:t[y],valueSpec:i.transition,style:u,styleSpec:i}):l[y]?jn({key:y,value:t[y],valueSpec:l[y],style:u,styleSpec:i}):[new mt(y,t[y],`unknown property "${y}"`)])}return p}function bd(n){const t=n.value,i=n.key,l=n.style,u=n.styleSpec,p=u.terrain;let g=[];const y=ir(t);if(t===void 0)return g;if(y!=="object")return g=g.concat([new mt("terrain",t,`object expected, ${y} found`)]),g;for(const b in t){const w=b.match(/^(.*)-transition$/);g=g.concat(w&&p[w[1]]&&p[w[1]].transition?jn({key:b,value:t[b],valueSpec:u.transition,style:l,styleSpec:u}):p[b]?jn({key:b,value:t[b],valueSpec:p[b],style:l,styleSpec:u}):[new mt(b,t[b],`unknown property "${b}"`)])}if(t.source){const b=l.sources&&l.sources[t.source],w=b&&rn(b.type);b?w!=="raster-dem"&&g.push(new mt(i,t.source,`terrain cannot be used with a source of type ${String(w)}, it only be used with a "raster-dem" source type`)):g.push(new mt(i,t.source,`source "${t.source}" not found`))}else g.push(new mt(i,t,'terrain is missing required property "source"'));return g}function um(n){const t=n.value,i=n.style,l=n.styleSpec,u=l.fog;let p=[];const g=ir(t);if(t===void 0)return p;if(g!=="object")return p=p.concat([new mt("fog",t,`object expected, ${g} found`)]),p;for(const y in t){const b=y.match(/^(.*)-transition$/);p=p.concat(b&&u[b[1]]&&u[b[1]].transition?jn({key:y,value:t[y],valueSpec:l.transition,style:i,styleSpec:l}):u[y]?jn({key:y,value:t[y],valueSpec:u[y],style:i,styleSpec:l}):[new mt(y,t[y],`unknown property "${y}"`)])}return p}const hm={"*":()=>[],array:rm,boolean:function(n){const t=n.value,i=n.key,l=ir(t);return l!=="boolean"?[new mt(i,t,`boolean expected, ${l} found`)]:[]},number:Hl,color:function(n){const t=n.key,i=n.value,l=ir(i);return l!=="string"?[new mt(t,i,`color expected, ${l} found`)]:Nh(i)===null?[new mt(t,i,`color expected, "${i}" found`)]:[]},enum:du,filter:Xl,function:ql,layer:sm,object:qi,source:lm,light:cm,terrain:bd,fog:um,string:cs,formatted:function(n){return cs(n).length===0?[]:Sn(n)},resolvedImage:function(n){return cs(n).length===0?[]:Sn(n)},projection:function(n){const t=n.value,i=n.styleSpec,l=i.projection,u=n.style;let p=[];const g=ir(t);if(g==="object")for(const y in t)p=p.concat(jn({key:y,value:t[y],valueSpec:l[y],style:u,styleSpec:i}));else g!=="string"&&(p=p.concat([new mt("projection",t,`object or string expected, ${g} found`)]));return p}};function jn(n){const t=n.value,i=n.valueSpec,l=n.styleSpec;return i.expression&&$l(rn(t))?ql(n):i.expression&&Ma(Tn(t))?Sn(n):i.type&&hm[i.type]?hm[i.type](n):qi(Po({},n,{valueSpec:i.type?l[i.type]:i}))}function ry(n){const t=n.value,i=n.key,l=cs(n);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new mt(i,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new mt(i,t,'"glyphs" url must include a "{range}" token'))),l}function dm(n,t=je){return ki(jn({key:"",value:n,valueSpec:t.$root,styleSpec:t,style:n,objectElementValidators:{glyphs:ry,"*":()=>[]}}))}const ny=n=>ki(om(n)),iy=n=>ki(xd(n));function ki(n){return n.slice().sort((t,i)=>t.line&&i.line?t.line-i.line:0)}function fm(n,t){let i=!1;if(t&&t.length)for(const l of t)n.fire(new Mo(new Error(l.message))),i=!0;return i}var oy=ho,Wi=3;function ho(n,t,i){var l=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;var u=new Int32Array(this.arrayBuffer);n=u[0],this.d=(t=u[1])+2*(i=u[2]);for(var p=0;p<this.d*this.d;p++){var g=u[Wi+p],y=u[Wi+p+1];l.push(g===y?null:u.subarray(g,y))}var b=u[Wi+l.length+1];this.keys=u.subarray(u[Wi+l.length],b),this.bboxes=u.subarray(b),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var w=0;w<this.d*this.d;w++)l.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=n,this.padding=i,this.scale=t/n,this.uid=0;var C=i/t*n;this.min=-C,this.max=n+C}ho.prototype.insert=function(n,t,i,l,u){this._forEachCell(t,i,l,u,this._insertCell,this.uid++),this.keys.push(n),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(l),this.bboxes.push(u)},ho.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ho.prototype._insertCell=function(n,t,i,l,u,p){this.cells[u].push(p)},ho.prototype.query=function(n,t,i,l,u){var p=this.min,g=this.max;if(n<=p&&t<=p&&g<=i&&g<=l&&!u)return Array.prototype.slice.call(this.keys);var y=[];return this._forEachCell(n,t,i,l,this._queryCell,y,{},u),y},ho.prototype._queryCell=function(n,t,i,l,u,p,g,y){var b=this.cells[u];if(b!==null)for(var w=this.keys,C=this.bboxes,P=0;P<b.length;P++){var I=b[P];if(g[I]===void 0){var O=4*I;(y?y(C[O+0],C[O+1],C[O+2],C[O+3]):n<=C[O+2]&&t<=C[O+3]&&i>=C[O+0]&&l>=C[O+1])?(g[I]=!0,p.push(w[I])):g[I]=!1}}},ho.prototype._forEachCell=function(n,t,i,l,u,p,g,y){for(var b=this._convertToCellCoord(n),w=this._convertToCellCoord(t),C=this._convertToCellCoord(i),P=this._convertToCellCoord(l),I=b;I<=C;I++)for(var O=w;O<=P;O++){var z=this.d*O+I;if((!y||y(this._convertFromCellCoord(I),this._convertFromCellCoord(O),this._convertFromCellCoord(I+1),this._convertFromCellCoord(O+1)))&&u.call(this,n,t,i,l,z,p,g,y))return}},ho.prototype._convertFromCellCoord=function(n){return(n-this.padding)/this.scale},ho.prototype._convertToCellCoord=function(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))},ho.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var n=this.cells,t=Wi+this.cells.length+1+1,i=0,l=0;l<this.cells.length;l++)i+=this.cells[l].length;var u=new Int32Array(t+i+this.keys.length+this.bboxes.length);u[0]=this.extent,u[1]=this.n,u[2]=this.padding;for(var p=t,g=0;g<n.length;g++){var y=n[g];u[Wi+g]=p,u.set(y,p),p+=y.length}return u[Wi+n.length]=p,u.set(this.keys,p),u[Wi+n.length+1]=p+=this.keys.length,u.set(this.bboxes,p),p+=this.bboxes.length,u.buffer};var Us=te(oy);const gu={};function yt(n,t,i={}){Object.defineProperty(n,"_classRegistryKey",{value:t,writeable:!1}),gu[t]={klass:n,omit:i.omit||[]}}yt(Object,"Object"),Us.serialize=function(n,t){const i=n.toArrayBuffer();return t&&t.push(i),{buffer:i}},Us.deserialize=function(n){return new Us(n.buffer)},Object.defineProperty(Us,"name",{value:"Grid"}),yt(Us,"Grid"),yt(Kr,"Color"),yt(Error,"Error"),yt(as,"AJAXError"),yt(Pi,"ResolvedImage"),yt(uu,"StylePropertyFunction"),yt(cu,"StyleExpression",{omit:["_evaluator"]}),yt(Gl,"ZoomDependentExpression"),yt(fd,"ZoomConstantExpression"),yt(Lo,"CompoundExpression",{omit:["_evaluate"]});for(const n in Vl)gu[Vl[n]._classRegistryKey]||yt(Vl[n],`Expression${n}`);function wd(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}function Ed(n){return A.ImageBitmap&&n instanceof A.ImageBitmap}function La(n,t){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp)return n;if(wd(n)||Ed(n))return t&&t.push(n),n;if(ArrayBuffer.isView(n)){const i=n;return t&&t.push(i.buffer),i}if(n instanceof A.ImageData)return t&&t.push(n.data.buffer),n;if(Array.isArray(n)){const i=[];for(const l of n)i.push(La(l,t));return i}if(typeof n=="object"){const i=n.constructor,l=i._classRegistryKey;if(!l)throw new Error(`can't serialize object of unregistered class ${l}`);const u=i.serialize?i.serialize(n,t):{};if(!i.serialize){for(const p in n)n.hasOwnProperty(p)&&(gu[l].omit.indexOf(p)>=0||(u[p]=La(n[p],t)));n instanceof Error&&(u.message=n.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof n)}function Vs(n){if(n==null||typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n instanceof Boolean||n instanceof Number||n instanceof String||n instanceof Date||n instanceof RegExp||wd(n)||Ed(n)||ArrayBuffer.isView(n)||n instanceof A.ImageData)return n;if(Array.isArray(n))return n.map(Vs);if(typeof n=="object"){const t=n.$name||"Object",{klass:i}=gu[t];if(!i)throw new Error(`can't deserialize unregistered class ${t}`);if(i.deserialize)return i.deserialize(n);const l=Object.create(i.prototype);for(const u of Object.keys(n))u!=="$name"&&(l[u]=Vs(n[u]));return l}throw new Error("can't deserialize object of type "+typeof n)}const ft={"Latin-1 Supplement":n=>n>=128&&n<=255,Arabic:n=>n>=1536&&n<=1791,"Arabic Supplement":n=>n>=1872&&n<=1919,"Arabic Extended-A":n=>n>=2208&&n<=2303,"Hangul Jamo":n=>n>=4352&&n<=4607,"Unified Canadian Aboriginal Syllabics":n=>n>=5120&&n<=5759,Khmer:n=>n>=6016&&n<=6143,"Unified Canadian Aboriginal Syllabics Extended":n=>n>=6320&&n<=6399,"General Punctuation":n=>n>=8192&&n<=8303,"Letterlike Symbols":n=>n>=8448&&n<=8527,"Number Forms":n=>n>=8528&&n<=8591,"Miscellaneous Technical":n=>n>=8960&&n<=9215,"Control Pictures":n=>n>=9216&&n<=9279,"Optical Character Recognition":n=>n>=9280&&n<=9311,"Enclosed Alphanumerics":n=>n>=9312&&n<=9471,"Geometric Shapes":n=>n>=9632&&n<=9727,"Miscellaneous Symbols":n=>n>=9728&&n<=9983,"Miscellaneous Symbols and Arrows":n=>n>=11008&&n<=11263,"CJK Radicals Supplement":n=>n>=11904&&n<=12031,"Kangxi Radicals":n=>n>=12032&&n<=12255,"Ideographic Description Characters":n=>n>=12272&&n<=12287,"CJK Symbols and Punctuation":n=>n>=12288&&n<=12351,Hiragana:n=>n>=12352&&n<=12447,Katakana:n=>n>=12448&&n<=12543,Bopomofo:n=>n>=12544&&n<=12591,"Hangul Compatibility Jamo":n=>n>=12592&&n<=12687,Kanbun:n=>n>=12688&&n<=12703,"Bopomofo Extended":n=>n>=12704&&n<=12735,"CJK Strokes":n=>n>=12736&&n<=12783,"Katakana Phonetic Extensions":n=>n>=12784&&n<=12799,"Enclosed CJK Letters and Months":n=>n>=12800&&n<=13055,"CJK Compatibility":n=>n>=13056&&n<=13311,"CJK Unified Ideographs Extension A":n=>n>=13312&&n<=19903,"Yijing Hexagram Symbols":n=>n>=19904&&n<=19967,"CJK Unified Ideographs":n=>n>=19968&&n<=40959,"Yi Syllables":n=>n>=40960&&n<=42127,"Yi Radicals":n=>n>=42128&&n<=42191,"Hangul Jamo Extended-A":n=>n>=43360&&n<=43391,"Hangul Syllables":n=>n>=44032&&n<=55215,"Hangul Jamo Extended-B":n=>n>=55216&&n<=55295,"Private Use Area":n=>n>=57344&&n<=63743,"CJK Compatibility Ideographs":n=>n>=63744&&n<=64255,"Arabic Presentation Forms-A":n=>n>=64336&&n<=65023,"Vertical Forms":n=>n>=65040&&n<=65055,"CJK Compatibility Forms":n=>n>=65072&&n<=65103,"Small Form Variants":n=>n>=65104&&n<=65135,"Arabic Presentation Forms-B":n=>n>=65136&&n<=65279,"Halfwidth and Fullwidth Forms":n=>n>=65280&&n<=65519};function Td(n){for(const t of n)if(Sd(t.charCodeAt(0)))return!0;return!1}function sy(n){for(const t of n)if(!pm(t.charCodeAt(0)))return!1;return!0}function pm(n){return!(ft.Arabic(n)||ft["Arabic Supplement"](n)||ft["Arabic Extended-A"](n)||ft["Arabic Presentation Forms-A"](n)||ft["Arabic Presentation Forms-B"](n))}function Sd(n){return!(n!==746&&n!==747&&(n<4352||!(ft["Bopomofo Extended"](n)||ft.Bopomofo(n)||ft["CJK Compatibility Forms"](n)&&!(n>=65097&&n<=65103)||ft["CJK Compatibility Ideographs"](n)||ft["CJK Compatibility"](n)||ft["CJK Radicals Supplement"](n)||ft["CJK Strokes"](n)||!(!ft["CJK Symbols and Punctuation"](n)||n>=12296&&n<=12305||n>=12308&&n<=12319||n===12336)||ft["CJK Unified Ideographs Extension A"](n)||ft["CJK Unified Ideographs"](n)||ft["Enclosed CJK Letters and Months"](n)||ft["Hangul Compatibility Jamo"](n)||ft["Hangul Jamo Extended-A"](n)||ft["Hangul Jamo Extended-B"](n)||ft["Hangul Jamo"](n)||ft["Hangul Syllables"](n)||ft.Hiragana(n)||ft["Ideographic Description Characters"](n)||ft.Kanbun(n)||ft["Kangxi Radicals"](n)||ft["Katakana Phonetic Extensions"](n)||ft.Katakana(n)&&n!==12540||!(!ft["Halfwidth and Fullwidth Forms"](n)||n===65288||n===65289||n===65293||n>=65306&&n<=65310||n===65339||n===65341||n===65343||n>=65371&&n<=65503||n===65507||n>=65512&&n<=65519)||!(!ft["Small Form Variants"](n)||n>=65112&&n<=65118||n>=65123&&n<=65126)||ft["Unified Canadian Aboriginal Syllabics"](n)||ft["Unified Canadian Aboriginal Syllabics Extended"](n)||ft["Vertical Forms"](n)||ft["Yijing Hexagram Symbols"](n)||ft["Yi Syllables"](n)||ft["Yi Radicals"](n))))}function mm(n){return!(Sd(n)||function(t){return!!(ft["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||ft["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||ft["Letterlike Symbols"](t)||ft["Number Forms"](t)||ft["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||ft["Control Pictures"](t)&&t!==9251||ft["Optical Character Recognition"](t)||ft["Enclosed Alphanumerics"](t)||ft["Geometric Shapes"](t)||ft["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ft["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ft["CJK Symbols and Punctuation"](t)||ft.Katakana(t)||ft["Private Use Area"](t)||ft["CJK Compatibility Forms"](t)||ft["Small Form Variants"](t)||ft["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(n))}function gm(n){return n>=1424&&n<=2303||ft["Arabic Presentation Forms-A"](n)||ft["Arabic Presentation Forms-B"](n)}function ay(n,t){return!(!t&&gm(n)||n>=2304&&n<=3583||n>=3840&&n<=4255||ft.Khmer(n))}function ly(n){for(const t of n)if(gm(t.charCodeAt(0)))return!0;return!1}const Ad="deferred",Cd="loading",Md="loaded";let Oa=null,f="unavailable",o=null;const c=function(n){n&&typeof n=="string"&&n.indexOf("NetworkError")>-1&&(f="error"),Oa&&Oa(n)};function m(){_.fire(new zs("pluginStateChange",{pluginStatus:f,pluginURL:o}))}const _=new Al,v=function(){return f},T=function(){if(f!==Ad||!o)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");f=Cd,m(),o&&pa({url:o},n=>{n?c(n):(f=Md,m())})},S={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>f===Md||S.applyArabicShaping!=null,isLoading:()=>f===Cd,setState(n){f=n.pluginStatus,o=n.pluginURL},isParsed:()=>S.applyArabicShaping!=null&&S.processBidirectionalText!=null&&S.processStyledBidirectionalText!=null,getPluginURL:()=>o};class M{constructor(t,i){this.zoom=t,i?(this.now=i.now,this.fadeDuration=i.fadeDuration,this.transition=i.transition,this.pitch=i.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(t){return function(i,l){for(const u of i)if(!ay(u.charCodeAt(0),l))return!1;return!0}(t,S.isLoaded())}}class L{constructor(t,i){this.property=t,this.value=i,this.expression=function(l,u){if($l(l))return new uu(l,u);if(Ma(l)){const p=Zl(l,u);if(p.result==="error")throw new Error(p.value.map(g=>`${g.key}: ${g.message}`).join(", "));return p.value}{let p=l;return typeof l=="string"&&u.type==="color"&&(p=Kr.parse(l)),{kind:"constant",evaluate:()=>p}}}(i===void 0?t.specification.default:i,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,i,l){return this.property.possiblyEvaluate(this,t,i,l)}}class k{constructor(t){this.property=t,this.value=new L(t,void 0)}transitioned(t,i){return new $(this.property,this.value,i,nr({},t.transition,this.transition),t.now)}untransitioned(){return new $(this.property,this.value,null,{},0)}}class D{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return pi(this._values[t].value.value)}setValue(t,i){this._values.hasOwnProperty(t)||(this._values[t]=new k(this._values[t].property)),this._values[t].value=new L(this._values[t].property,i===null?void 0:pi(i))}getTransition(t){return pi(this._values[t].transition)}setTransition(t,i){this._values.hasOwnProperty(t)||(this._values[t]=new k(this._values[t].property)),this._values[t].transition=pi(i)||void 0}serialize(){const t={};for(const i of Object.keys(this._values)){const l=this.getValue(i);l!==void 0&&(t[i]=l);const u=this.getTransition(i);u!==void 0&&(t[`${i}-transition`]=u)}return t}transitioned(t,i){const l=new W(this._properties);for(const u of Object.keys(this._values))l._values[u]=this._values[u].transitioned(t,i._values[u]);return l}untransitioned(){const t=new W(this._properties);for(const i of Object.keys(this._values))t._values[i]=this._values[i].untransitioned();return t}}class ${constructor(t,i,l,u,p){const g=u.delay||0,y=u.duration||0;p=p||0,this.property=t,this.value=i,this.begin=p+g,this.end=this.begin+y,t.specification.transition&&(u.delay||u.duration)&&(this.prior=l)}possiblyEvaluate(t,i,l){const u=t.now||0,p=this.value.possiblyEvaluate(t,i,l),g=this.prior;if(g){if(u>this.end)return this.prior=null,p;if(this.value.isDataDriven())return this.prior=null,p;if(u<this.begin)return g.possiblyEvaluate(t,i,l);{const y=(u-this.begin)/(this.end-this.begin);return this.property.interpolate(g.possiblyEvaluate(t,i,l),p,St(y))}}return p}}class W{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,i,l){const u=new Y(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].possiblyEvaluate(t,i,l);return u}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class K{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}getValue(t){return pi(this._values[t].value)}setValue(t,i){this._values[t]=new L(this._values[t].property,i===null?void 0:pi(i))}serialize(){const t={};for(const i of Object.keys(this._values)){const l=this.getValue(i);l!==void 0&&(t[i]=l)}return t}possiblyEvaluate(t,i,l){const u=new Y(this._properties);for(const p of Object.keys(this._values))u._values[p]=this._values[p].possiblyEvaluate(t,i,l);return u}}class X{constructor(t,i,l){this.property=t,this.value=i,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,i,l,u){return this.property.evaluate(this.value,this.parameters,t,i,l,u)}}class Y{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class B{constructor(t){this.specification=t}possiblyEvaluate(t,i){return t.expression.evaluate(i)}interpolate(t,i,l){const u=Bl[this.specification.type];return u?u(t,i,l):t}}class H{constructor(t,i){this.specification=t,this.overrides=i}possiblyEvaluate(t,i,l,u){return new X(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(i,null,{},l,u)}:t.expression,i)}interpolate(t,i,l){if(t.value.kind!=="constant"||i.value.kind!=="constant")return t;if(t.value.value===void 0||i.value.value===void 0)return new X(this,{kind:"constant",value:void 0},t.parameters);const u=Bl[this.specification.type];return u?new X(this,{kind:"constant",value:u(t.value.value,i.value.value,l)},t.parameters):t}evaluate(t,i,l,u,p,g){return t.kind==="constant"?t.value:t.evaluate(i,l,u,p,g)}}class re{constructor(t){this.specification=t}possiblyEvaluate(t,i,l,u){return!!t.expression.evaluate(i,null,{},l,u)}interpolate(){return!1}}class ne{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const i=new M(0,{});for(const l in t){const u=t[l];u.specification.overridable&&this.overridableProperties.push(l);const p=this.defaultPropertyValues[l]=new L(u,void 0),g=this.defaultTransitionablePropertyValues[l]=new k(u);this.defaultTransitioningPropertyValues[l]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=p.possiblyEvaluate(i)}}}function pe(n,t){return 256*(n=Oe(Math.floor(n),0,255))+Oe(Math.floor(t),0,255)}yt(H,"DataDrivenProperty"),yt(B,"DataConstantProperty"),yt(re,"ColorRampProperty");const ge={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class me{constructor(t,i){this._structArray=t,this._pos1=i*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class be{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,i){return t._trim(),i&&(t.isTransferred=!0,i.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const i=Object.create(this.prototype);return i.arrayBuffer=t.arrayBuffer,i.length=t.length,i.capacity=t.arrayBuffer.byteLength/i.bytesPerElement,i._refreshViews(),i}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const i=this.uint8;this._refreshViews(),i&&this.uint8.set(i)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function xe(n,t=1){let i=0,l=0;return{members:n.map(u=>{const p=ge[u.type].BYTES_PER_ELEMENT,g=i=Ie(i,Math.max(t,p)),y=u.components||1;return l=Math.max(l,p),i+=p*y,{name:u.name,type:u.type,components:y,offset:g}}),size:Ie(i,Math.max(l,t)),alignment:t}}function Ie(n,t){return Math.ceil(n/t)*t}class Je extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i){const l=this.length;return this.resize(l+1),this.emplace(l,t,i)}emplace(t,i,l){const u=2*t;return this.int16[u+0]=i,this.int16[u+1]=l,t}}Je.prototype.bytesPerElement=4,yt(Je,"StructArrayLayout2i4");class Ce extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,i,l)}emplace(t,i,l,u){const p=3*t;return this.int16[p+0]=i,this.int16[p+1]=l,this.int16[p+2]=u,t}}Ce.prototype.bytesPerElement=6,yt(Ce,"StructArrayLayout3i6");class Ge extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,i,l,u)}emplace(t,i,l,u,p){const g=4*t;return this.int16[g+0]=i,this.int16[g+1]=l,this.int16[g+2]=u,this.int16[g+3]=p,t}}Ge.prototype.bytesPerElement=8,yt(Ge,"StructArrayLayout4i8");class Re extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,t,i,l,u,p,g,y)}emplace(t,i,l,u,p,g,y,b){const w=6*t,C=12*t,P=3*t;return this.int16[w+0]=i,this.int16[w+1]=l,this.uint8[C+4]=u,this.uint8[C+5]=p,this.uint8[C+6]=g,this.uint8[C+7]=y,this.float32[P+2]=b,t}}Re.prototype.bytesPerElement=12,yt(Re,"StructArrayLayout2i4ub1f12");class Qe extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,i,l,u)}emplace(t,i,l,u,p){const g=4*t;return this.float32[g+0]=i,this.float32[g+1]=l,this.float32[g+2]=u,this.float32[g+3]=p,t}}Qe.prototype.bytesPerElement=16,yt(Qe,"StructArrayLayout4f16");class Pe extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,i,l,u,p)}emplace(t,i,l,u,p,g){const y=6*t,b=3*t;return this.uint16[y+0]=i,this.uint16[y+1]=l,this.uint16[y+2]=u,this.uint16[y+3]=p,this.float32[b+2]=g,t}}Pe.prototype.bytesPerElement=12,yt(Pe,"StructArrayLayout4ui1f12");class $e extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,i,l,u)}emplace(t,i,l,u,p){const g=4*t;return this.uint16[g+0]=i,this.uint16[g+1]=l,this.uint16[g+2]=u,this.uint16[g+3]=p,t}}$e.prototype.bytesPerElement=8,yt($e,"StructArrayLayout4ui8");class tt extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p,g){const y=this.length;return this.resize(y+1),this.emplace(y,t,i,l,u,p,g)}emplace(t,i,l,u,p,g,y){const b=6*t;return this.int16[b+0]=i,this.int16[b+1]=l,this.int16[b+2]=u,this.int16[b+3]=p,this.int16[b+4]=g,this.int16[b+5]=y,t}}tt.prototype.bytesPerElement=12,yt(tt,"StructArrayLayout6i12");class Ke extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p,g,y,b,w,C,P,I){const O=this.length;return this.resize(O+1),this.emplace(O,t,i,l,u,p,g,y,b,w,C,P,I)}emplace(t,i,l,u,p,g,y,b,w,C,P,I,O){const z=12*t;return this.int16[z+0]=i,this.int16[z+1]=l,this.int16[z+2]=u,this.int16[z+3]=p,this.uint16[z+4]=g,this.uint16[z+5]=y,this.uint16[z+6]=b,this.uint16[z+7]=w,this.int16[z+8]=C,this.int16[z+9]=P,this.int16[z+10]=I,this.int16[z+11]=O,t}}Ke.prototype.bytesPerElement=24,yt(Ke,"StructArrayLayout4i4ui4i24");class rt extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p,g){const y=this.length;return this.resize(y+1),this.emplace(y,t,i,l,u,p,g)}emplace(t,i,l,u,p,g,y){const b=10*t,w=5*t;return this.int16[b+0]=i,this.int16[b+1]=l,this.int16[b+2]=u,this.float32[w+2]=p,this.float32[w+3]=g,this.float32[w+4]=y,t}}rt.prototype.bytesPerElement=20,yt(rt,"StructArrayLayout3i3f20");class At extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.uint32[1*t+0]=i,t}}At.prototype.bytesPerElement=4,yt(At,"StructArrayLayout1ul4");class Rt extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p,g,y,b,w,C,P,I,O){const z=this.length;return this.resize(z+1),this.emplace(z,t,i,l,u,p,g,y,b,w,C,P,I,O)}emplace(t,i,l,u,p,g,y,b,w,C,P,I,O,z){const F=20*t,G=10*t;return this.int16[F+0]=i,this.int16[F+1]=l,this.int16[F+2]=u,this.int16[F+3]=p,this.int16[F+4]=g,this.float32[G+3]=y,this.float32[G+4]=b,this.float32[G+5]=w,this.float32[G+6]=C,this.int16[F+14]=P,this.uint32[G+8]=I,this.uint16[F+18]=O,this.uint16[F+19]=z,t}}Rt.prototype.bytesPerElement=40,yt(Rt,"StructArrayLayout5i4f1i1ul2ui40");class xt extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p,g,y){const b=this.length;return this.resize(b+1),this.emplace(b,t,i,l,u,p,g,y)}emplace(t,i,l,u,p,g,y,b){const w=8*t;return this.int16[w+0]=i,this.int16[w+1]=l,this.int16[w+2]=u,this.int16[w+4]=p,this.int16[w+5]=g,this.int16[w+6]=y,this.int16[w+7]=b,t}}xt.prototype.bytesPerElement=16,yt(xt,"StructArrayLayout3i2i2i16");class kt extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,i,l,u,p)}emplace(t,i,l,u,p,g){const y=4*t,b=8*t;return this.float32[y+0]=i,this.float32[y+1]=l,this.float32[y+2]=u,this.int16[b+6]=p,this.int16[b+7]=g,t}}kt.prototype.bytesPerElement=16,yt(kt,"StructArrayLayout2f1f2i16");class Kt extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,i,l,u)}emplace(t,i,l,u,p){const g=12*t,y=3*t;return this.uint8[g+0]=i,this.uint8[g+1]=l,this.float32[y+1]=u,this.float32[y+2]=p,t}}Kt.prototype.bytesPerElement=12,yt(Kt,"StructArrayLayout2ub2f12");class Ht extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,i,l)}emplace(t,i,l,u){const p=3*t;return this.float32[p+0]=i,this.float32[p+1]=l,this.float32[p+2]=u,t}}Ht.prototype.bytesPerElement=12,yt(Ht,"StructArrayLayout3f12");class Tt extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l){const u=this.length;return this.resize(u+1),this.emplace(u,t,i,l)}emplace(t,i,l,u){const p=3*t;return this.uint16[p+0]=i,this.uint16[p+1]=l,this.uint16[p+2]=u,t}}Tt.prototype.bytesPerElement=6,yt(Tt,"StructArrayLayout3ui6");class fr extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p,g,y,b,w,C,P,I,O,z,F,G,Q,ce,ee,oe,he){const ue=this.length;return this.resize(ue+1),this.emplace(ue,t,i,l,u,p,g,y,b,w,C,P,I,O,z,F,G,Q,ce,ee,oe,he)}emplace(t,i,l,u,p,g,y,b,w,C,P,I,O,z,F,G,Q,ce,ee,oe,he,ue){const Le=30*t,Me=15*t,Ue=60*t;return this.int16[Le+0]=i,this.int16[Le+1]=l,this.int16[Le+2]=u,this.float32[Me+2]=p,this.float32[Me+3]=g,this.uint16[Le+8]=y,this.uint16[Le+9]=b,this.uint32[Me+5]=w,this.uint32[Me+6]=C,this.uint32[Me+7]=P,this.uint16[Le+16]=I,this.uint16[Le+17]=O,this.uint16[Le+18]=z,this.float32[Me+10]=F,this.float32[Me+11]=G,this.uint8[Ue+48]=Q,this.uint8[Ue+49]=ce,this.uint8[Ue+50]=ee,this.uint32[Me+13]=oe,this.int16[Le+28]=he,this.uint8[Ue+58]=ue,t}}fr.prototype.bytesPerElement=60,yt(fr,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class _r extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p,g,y,b,w,C,P,I,O,z,F,G,Q,ce,ee,oe,he,ue,Le,Me,Ue,et,De,He,qe,Ye){const it=this.length;return this.resize(it+1),this.emplace(it,t,i,l,u,p,g,y,b,w,C,P,I,O,z,F,G,Q,ce,ee,oe,he,ue,Le,Me,Ue,et,De,He,qe,Ye)}emplace(t,i,l,u,p,g,y,b,w,C,P,I,O,z,F,G,Q,ce,ee,oe,he,ue,Le,Me,Ue,et,De,He,qe,Ye,it){const Ne=38*t,ut=19*t;return this.int16[Ne+0]=i,this.int16[Ne+1]=l,this.int16[Ne+2]=u,this.float32[ut+2]=p,this.float32[ut+3]=g,this.int16[Ne+8]=y,this.int16[Ne+9]=b,this.int16[Ne+10]=w,this.int16[Ne+11]=C,this.int16[Ne+12]=P,this.int16[Ne+13]=I,this.uint16[Ne+14]=O,this.uint16[Ne+15]=z,this.uint16[Ne+16]=F,this.uint16[Ne+17]=G,this.uint16[Ne+18]=Q,this.uint16[Ne+19]=ce,this.uint16[Ne+20]=ee,this.uint16[Ne+21]=oe,this.uint16[Ne+22]=he,this.uint16[Ne+23]=ue,this.uint16[Ne+24]=Le,this.uint16[Ne+25]=Me,this.uint16[Ne+26]=Ue,this.uint16[Ne+27]=et,this.uint16[Ne+28]=De,this.uint32[ut+15]=He,this.float32[ut+16]=qe,this.float32[ut+17]=Ye,this.float32[ut+18]=it,t}}_r.prototype.bytesPerElement=76,yt(_r,"StructArrayLayout3i2f6i15ui1ul3f76");class yr extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.float32[1*t+0]=i,t}}yr.prototype.bytesPerElement=4,yt(yr,"StructArrayLayout1f4");class vr extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i,l,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,t,i,l,u,p)}emplace(t,i,l,u,p,g){const y=5*t;return this.float32[y+0]=i,this.float32[y+1]=l,this.float32[y+2]=u,this.float32[y+3]=p,this.float32[y+4]=g,t}}vr.prototype.bytesPerElement=20,yt(vr,"StructArrayLayout5f20");class Un extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i,l,u){const p=this.length;return this.resize(p+1),this.emplace(p,t,i,l,u)}emplace(t,i,l,u,p){const g=6*t;return this.uint32[3*t+0]=i,this.uint16[g+2]=l,this.uint16[g+3]=u,this.uint16[g+4]=p,t}}Un.prototype.bytesPerElement=12,yt(Un,"StructArrayLayout1ul3ui12");class An extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,i){const l=this.length;return this.resize(l+1),this.emplace(l,t,i)}emplace(t,i,l){const u=2*t;return this.uint16[u+0]=i,this.uint16[u+1]=l,t}}An.prototype.bytesPerElement=4,yt(An,"StructArrayLayout2ui4");class Li extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const i=this.length;return this.resize(i+1),this.emplace(i,t)}emplace(t,i){return this.uint16[1*t+0]=i,t}}Li.prototype.bytesPerElement=2,yt(Li,"StructArrayLayout1ui2");class fo extends be{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,i){const l=this.length;return this.resize(l+1),this.emplace(l,t,i)}emplace(t,i,l){const u=2*t;return this.float32[u+0]=i,this.float32[u+1]=l,t}}fo.prototype.bytesPerElement=8,yt(fo,"StructArrayLayout2f8");class Fr extends me{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Fr.prototype.size=40;class xr extends Rt{get(t){return new Fr(this,t)}}yt(xr,"CollisionBoxArray");class sr extends me{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(t){this._structArray.uint8[this._pos1+49]=t}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(t){this._structArray.uint8[this._pos1+50]=t}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(t){this._structArray.uint32[this._pos4+13]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(t){this._structArray.uint8[this._pos1+58]=t}}sr.prototype.size=60;class nn extends fr{get(t){return new sr(this,t)}}yt(nn,"PlacedSymbolArray");class Wn extends me{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(t){this._structArray.uint32[this._pos4+15]=t}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Wn.prototype.size=76;class Or extends _r{get(t){return new Wn(this,t)}}yt(Or,"SymbolInstanceArray");class ti extends yr{getoffsetX(t){return this.float32[1*t+0]}}yt(ti,"GlyphOffsetArray");class _u extends Je{getx(t){return this.int16[2*t+0]}gety(t){return this.int16[2*t+1]}}yt(_u,"SymbolLineVertexArray");class $s extends me{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}$s.prototype.size=12;class Yl extends Un{get(t){return new $s(this,t)}}yt(Yl,"FeatureIndexArray");class Bo extends An{geta_centroid_pos0(t){return this.uint16[2*t+0]}geta_centroid_pos1(t){return this.uint16[2*t+1]}}yt(Bo,"FillExtrusionCentroidArray");const us=xe([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Gs=xe([{name:"a_dash",components:4,type:"Uint16"}]);var yu={exports:{}},Ql={exports:{}};Ql.exports=function(n,t){var i,l,u,p,g,y,b,w;for(l=n.length-(i=3&n.length),u=t,g=3432918353,y=461845907,w=0;w<l;)b=255&n.charCodeAt(w)|(255&n.charCodeAt(++w))<<8|(255&n.charCodeAt(++w))<<16|(255&n.charCodeAt(++w))<<24,++w,u=27492+(65535&(p=5*(65535&(u=(u^=b=(65535&(b=(b=(65535&b)*g+(((b>>>16)*g&65535)<<16)&4294967295)<<15|b>>>17))*y+(((b>>>16)*y&65535)<<16)&4294967295)<<13|u>>>19))+((5*(u>>>16)&65535)<<16)&4294967295))+((58964+(p>>>16)&65535)<<16);switch(b=0,i){case 3:b^=(255&n.charCodeAt(w+2))<<16;case 2:b^=(255&n.charCodeAt(w+1))<<8;case 1:u^=b=(65535&(b=(b=(65535&(b^=255&n.charCodeAt(w)))*g+(((b>>>16)*g&65535)<<16)&4294967295)<<15|b>>>17))*y+(((b>>>16)*y&65535)<<16)&4294967295}return u^=n.length,u=2246822507*(65535&(u^=u>>>16))+((2246822507*(u>>>16)&65535)<<16)&4294967295,u=3266489909*(65535&(u^=u>>>13))+((3266489909*(u>>>16)&65535)<<16)&4294967295,(u^=u>>>16)>>>0};var Pd=Ql.exports,Pw={exports:{}};Pw.exports=function(n,t){for(var i,l=n.length,u=t^l,p=0;l>=4;)i=1540483477*(65535&(i=255&n.charCodeAt(p)|(255&n.charCodeAt(++p))<<8|(255&n.charCodeAt(++p))<<16|(255&n.charCodeAt(++p))<<24))+((1540483477*(i>>>16)&65535)<<16),u=1540483477*(65535&u)+((1540483477*(u>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),l-=4,++p;switch(l){case 3:u^=(255&n.charCodeAt(p+2))<<16;case 2:u^=(255&n.charCodeAt(p+1))<<8;case 1:u=1540483477*(65535&(u^=255&n.charCodeAt(p)))+((1540483477*(u>>>16)&65535)<<16)}return u=1540483477*(65535&(u^=u>>>13))+((1540483477*(u>>>16)&65535)<<16),(u^=u>>>15)>>>0};var Iw=Pd,JI=Pw.exports;yu.exports=Iw,yu.exports.murmur3=Iw,yu.exports.murmur2=JI;var cy=te(yu.exports);class _m{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,i,l,u){this.ids.push(kw(t)),this.positions.push(i,l,u)}getPositions(t){const i=kw(t);let l=0,u=this.ids.length-1;for(;l<u;){const g=l+u>>1;this.ids[g]>=i?u=g:l=g+1}const p=[];for(;this.ids[l]===i;)p.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return p}static serialize(t,i){const l=new Float64Array(t.ids),u=new Uint32Array(t.positions);return uy(l,u,0,l.length-1),i&&i.push(l.buffer,u.buffer),{ids:l,positions:u}}static deserialize(t){const i=new _m;return i.ids=t.ids,i.positions=t.positions,i.indexed=!0,i}}function kw(n){const t=+n;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:cy(String(n))}function uy(n,t,i,l){for(;i<l;){const u=n[i+l>>1];let p=i-1,g=l+1;for(;;){do p++;while(n[p]<u);do g--;while(n[g]>u);if(p>=g)break;ym(n,p,g),ym(t,3*p,3*g),ym(t,3*p+1,3*g+1),ym(t,3*p+2,3*g+2)}g-i<l-g?(uy(n,t,i,g),i=g+1):(uy(n,t,g+1,l),l=g)}}function ym(n,t,i){const l=n[t];n[t]=n[i],n[i]=l}yt(_m,"FeaturePositionMap");class Zs{constructor(t){this.gl=t.gl,this.initialized=!1}fetchUniformLocation(t,i){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(t,i),this.initialized=!0),!!this.location}}class vm extends Zs{constructor(t){super(t),this.current=0}set(t,i,l){this.fetchUniformLocation(t,i)&&this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Lw extends Zs{constructor(t){super(t),this.current=[0,0,0,0]}set(t,i,l){this.fetchUniformLocation(t,i)&&(l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3])))}}class Ow extends Zs{constructor(t){super(t),this.current=Kr.transparent}set(t,i,l){this.fetchUniformLocation(t,i)&&(l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a)))}}const ek=new Float32Array(16),tk=new Float32Array(9),rk=new Float32Array(4);function hy(n){return[pe(255*n.r,255*n.g),pe(255*n.b,255*n.a)]}class Id{constructor(t,i,l){this.value=t,this.uniformNames=i.map(u=>`u_${u}`),this.type=l}setUniform(t,i,l,u,p){i.set(t,p,u.constantOr(this.value))}getBinding(t,i){return this.type==="color"?new Ow(t):new vm(t)}}class vu{constructor(t,i){this.uniformNames=i.map(l=>`u_${l}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(t){this.pixelRatio=t.pixelRatio||1,this.pattern=t.tl.concat(t.br)}setUniform(t,i,l,u,p){const g=p==="u_pattern"||p==="u_dash"?this.pattern:p==="u_pixel_ratio"?this.pixelRatio:null;g&&i.set(t,p,g)}getBinding(t,i){return i==="u_pattern"||i==="u_dash"?new Lw(t):new vm(t)}}class Hs{constructor(t,i,l,u){this.expression=t,this.type=l,this.maxValue=0,this.paintVertexAttributes=i.map(p=>({name:`a_${p}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new u}populatePaintArray(t,i,l,u,p,g){const y=this.paintVertexArray.length,b=this.expression.evaluate(new M(0),i,{},p,u,g);this.paintVertexArray.resize(t),this._setPaintValue(y,t,b)}updatePaintArray(t,i,l,u,p){const g=this.expression.evaluate({zoom:0},l,u,void 0,p);this._setPaintValue(t,i,g)}_setPaintValue(t,i,l){if(this.type==="color"){const u=hy(l);for(let p=t;p<i;p++)this.paintVertexArray.emplace(p,u[0],u[1])}else{for(let u=t;u<i;u++)this.paintVertexArray.emplace(u,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Fo{constructor(t,i,l,u,p,g){this.expression=t,this.uniformNames=i.map(y=>`u_${y}_t`),this.type=l,this.useIntegerZoom=u,this.zoom=p,this.maxValue=0,this.paintVertexAttributes=i.map(y=>({name:`a_${y}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new g}populatePaintArray(t,i,l,u,p,g){const y=this.expression.evaluate(new M(this.zoom),i,{},p,u,g),b=this.expression.evaluate(new M(this.zoom+1),i,{},p,u,g),w=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(w,t,y,b)}updatePaintArray(t,i,l,u,p){const g=this.expression.evaluate({zoom:this.zoom},l,u,void 0,p),y=this.expression.evaluate({zoom:this.zoom+1},l,u,void 0,p);this._setPaintValue(t,i,g,y)}_setPaintValue(t,i,l,u){if(this.type==="color"){const p=hy(l),g=hy(u);for(let y=t;y<i;y++)this.paintVertexArray.emplace(y,p[0],p[1],g[0],g[1])}else{for(let p=t;p<i;p++)this.paintVertexArray.emplace(p,l,u);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,i,l,u,p){const g=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,y=Oe(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);i.set(t,p,y)}getBinding(t,i){return new vm(t)}}class za{constructor(t,i,l,u,p){this.expression=t,this.layerId=p,this.paintVertexAttributes=(l==="array"?Gs:us).members;for(let g=0;g<i.length;++g);this.paintVertexArray=new u}populatePaintArray(t,i,l){const u=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValues(u,t,i.patterns&&i.patterns[this.layerId],l)}updatePaintArray(t,i,l,u,p,g){this._setPaintValues(t,i,l.patterns&&l.patterns[this.layerId],g)}_setPaintValues(t,i,l,u){if(!u||!l)return;const p=u[l];if(!p)return;const{tl:g,br:y,pixelRatio:b}=p;for(let w=t;w<i;w++)this.paintVertexArray.emplace(w,g[0],g[1],y[0],y[1],b)}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ra{constructor(t,i,l=()=>!0){this.binders={},this._buffers=[];const u=[];for(const p in t.paint._values){if(!l(p))continue;const g=t.paint.get(p);if(!(g instanceof X&&Aa(g.property.specification)))continue;const y=ik(p,t.type),b=g.value,w=g.property.specification.type,C=!!g.property.useIntegerZoom,P=p==="line-dasharray"||p.endsWith("pattern"),I=p==="line-dasharray"&&t.layout.get("line-cap").value.kind!=="constant";if(b.kind!=="constant"||I)if(b.kind==="source"||I||P){const O=zw(p,w,"source");this.binders[p]=P?new za(b,y,w,O,t.id):new Hs(b,y,w,O),u.push(`/a_${p}`)}else{const O=zw(p,w,"composite");this.binders[p]=new Fo(b,y,w,C,i,O),u.push(`/z_${p}`)}else this.binders[p]=P?new vu(b.value,y):new Id(b.value,y,w),u.push(`/u_${p}`)}this.cacheKey=u.sort().join("")}getMaxValue(t){const i=this.binders[t];return i instanceof Hs||i instanceof Fo?i.maxValue:0}populatePaintArrays(t,i,l,u,p,g){for(const y in this.binders){const b=this.binders[y];(b instanceof Hs||b instanceof Fo||b instanceof za)&&b.populatePaintArray(t,i,l,u,p,g)}}setConstantPatternPositions(t){for(const i in this.binders){const l=this.binders[i];l instanceof vu&&l.setConstantPatternPositions(t)}}updatePaintArrays(t,i,l,u,p,g){let y=!1;for(const b in t){const w=i.getPositions(b);for(const C of w){const P=l.feature(C.index);for(const I in this.binders){const O=this.binders[I];if((O instanceof Hs||O instanceof Fo||O instanceof za)&&O.expression.isStateDependent===!0){const z=u.paint.get(I);O.expression=z.value,O.updatePaintArray(C.start,C.end,P,t[b],p,g),y=!0}}}}return y}defines(){const t=[];for(const i in this.binders){const l=this.binders[i];(l instanceof Id||l instanceof vu)&&t.push(...l.uniformNames.map(u=>`#define HAS_UNIFORM_${u}`))}return t}getBinderAttributes(){const t=[];for(const i in this.binders){const l=this.binders[i];if(l instanceof Hs||l instanceof Fo||l instanceof za)for(let u=0;u<l.paintVertexAttributes.length;u++)t.push(l.paintVertexAttributes[u].name)}return t}getBinderUniforms(){const t=[];for(const i in this.binders){const l=this.binders[i];if(l instanceof Id||l instanceof vu||l instanceof Fo)for(const u of l.uniformNames)t.push(u)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t){const i=[];for(const l in this.binders){const u=this.binders[l];if(u instanceof Id||u instanceof vu||u instanceof Fo)for(const p of u.uniformNames)i.push({name:p,property:l,binding:u.getBinding(t,p)})}return i}setUniforms(t,i,l,u,p){for(const{name:g,property:y,binding:b}of l)this.binders[y].setUniform(t,b,p,u.get(y),g)}updatePaintBuffers(){this._buffers=[];for(const t in this.binders){const i=this.binders[t];(i instanceof Hs||i instanceof Fo||i instanceof za)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(t){for(const i in this.binders){const l=this.binders[i];(l instanceof Hs||l instanceof Fo||l instanceof za)&&l.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const i=this.binders[t];(i instanceof Hs||i instanceof Fo||i instanceof za)&&i.destroy()}}}class Jl{constructor(t,i,l=()=>!0){this.programConfigurations={};for(const u of t)this.programConfigurations[u.id]=new Ra(u,i,l);this.needsUpload=!1,this._featureMap=new _m,this._bufferOffset=0}populatePaintArrays(t,i,l,u,p,g,y){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(t,i,u,p,g,y);i.id!==void 0&&this._featureMap.add(i.id,l,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,i,l,u,p){for(const g of l)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(t,this._featureMap,i,g,u,p)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const i in this.programConfigurations)this.programConfigurations[i].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}const nk={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function ik(n,t){return nk[n]||[n.replace(`${t}-`,"").replace(/-/g,"_")]}const ok={"line-pattern":{source:Pe,composite:Pe},"fill-pattern":{source:Pe,composite:Pe},"fill-extrusion-pattern":{source:Pe,composite:Pe},"line-dasharray":{source:$e,composite:$e}},sk={color:{source:fo,composite:Qe},number:{source:yr,composite:fo}};function zw(n,t,i){const l=ok[n];return l&&l[i]||sk[t][i]}yt(Id,"ConstantBinder"),yt(vu,"PatternConstantBinder"),yt(Hs,"SourceExpressionBinder"),yt(za,"PatternCompositeBinder"),yt(Fo,"CompositeExpressionBinder"),yt(Ra,"ProgramConfiguration",{omit:["_buffers"]}),yt(Jl,"ProgramConfigurationSet");const Rw="-transition";class No extends Al{constructor(t,i){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&t.type!=="sky"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),i.layout&&(this._unevaluatedLayout=new K(i.layout)),i.paint)){this._transitionablePaint=new D(i.paint);for(const l in t.paint)this.setPaintProperty(l,t.paint[l],{validate:!1});for(const l in t.layout)this.setLayoutProperty(l,t.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Y(i.paint)}}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,i,l={}){i!=null&&this._validate(iy,`layers.${this.id}.layout.${t}`,t,i,l)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,i):this.visibility=i)}getPaintProperty(t){return ca(t,Rw)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,i,l={}){if(i!=null&&this._validate(ny,`layers.${this.id}.paint.${t}`,t,i,l))return!1;if(ca(t,Rw))return this._transitionablePaint.setTransition(t.slice(0,-11),i||void 0),!1;{const u=this._transitionablePaint._values[t],p=u.value.isDataDriven(),g=u.value;this._transitionablePaint.setValue(t,i),this._handleSpecialPaintPropertyUpdate(t);const y=this._transitionablePaint._values[t].value,b=y.isDataDriven(),w=ca(t,"pattern")||t==="line-dasharray";return b||p||w||this._handleOverridablePaintPropertyUpdate(t,g,y)}}_handleSpecialPaintPropertyUpdate(t){}getProgramIds(){return null}getProgramConfiguration(t){return null}_handleOverridablePaintPropertyUpdate(t,i,l){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,i){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,i)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,i)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),ua(t,(i,l)=>!(i===void 0||l==="layout"&&!Object.keys(i).length||l==="paint"&&!Object.keys(i).length))}_validate(t,i,l,u,p={}){return(!p||p.validate!==!1)&&fm(this,t.call(dm,{key:i,layerType:this.type,objectKey:l,value:u,styleSpec:je,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const i=this.paint.get(t);if(i instanceof X&&Aa(i.property.specification)&&(i.value.kind==="source"||i.value.kind==="composite")&&i.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=fu(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ak=xe([{name:"a_pos",components:2,type:"Int16"}],4),lk=xe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class on{constructor(t=[]){this.segments=t}prepareSegment(t,i,l,u){let p=this.segments[this.segments.length-1];return t>on.MAX_VERTEX_ARRAY_LENGTH&&jr(`Max vertices per segment is ${on.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!p||p.vertexLength+t>on.MAX_VERTEX_ARRAY_LENGTH||p.sortKey!==u)&&(p={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},u!==void 0&&(p.sortKey=u),this.segments.push(p)),p}get(){return this.segments}destroy(){for(const t of this.segments)for(const i in t.vaos)t.vaos[i].destroy()}static simpleSegment(t,i,l,u){return new on([{vertexOffset:t,primitiveOffset:i,vertexLength:l,primitiveLength:u,vaos:{},sortKey:0}])}}on.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yt(on,"SegmentVector");var Pt=8192;class Da{constructor(t,i){t&&(i?this.setSouthWest(t).setNorthEast(i):t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}setNorthEast(t){return this._ne=t instanceof br?new br(t.lng,t.lat):br.convert(t),this}setSouthWest(t){return this._sw=t instanceof br?new br(t.lng,t.lat):br.convert(t),this}extend(t){const i=this._sw,l=this._ne;let u,p;if(t instanceof br)u=t,p=t;else{if(!(t instanceof Da))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Da.convert(t)):this.extend(br.convert(t)):typeof t=="object"&&t!==null&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(br.convert(t)):this;if(u=t._sw,p=t._ne,!u||!p)return this}return i||l?(i.lng=Math.min(u.lng,i.lng),i.lat=Math.min(u.lat,i.lat),l.lng=Math.max(p.lng,l.lng),l.lat=Math.max(p.lat,l.lat)):(this._sw=new br(u.lng,u.lat),this._ne=new br(p.lng,p.lat)),this}getCenter(){return new br((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new br(this.getWest(),this.getNorth())}getSouthEast(){return new br(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:i,lat:l}=br.convert(t);let u=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=l&&l<=this._ne.lat&&u}static convert(t){return!t||t instanceof Da?t:new Da(t)}}var xm=1e-6,Oi=typeof Float32Array<"u"?Float32Array:Array;function Dw(){var n=new Oi(9);return Oi!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function Bw(n,t,i){var l=t[0],u=t[1],p=t[2],g=t[3],y=t[4],b=t[5],w=t[6],C=t[7],P=t[8],I=i[0],O=i[1],z=i[2],F=i[3],G=i[4],Q=i[5],ce=i[6],ee=i[7],oe=i[8];return n[0]=I*l+O*g+z*w,n[1]=I*u+O*y+z*C,n[2]=I*p+O*b+z*P,n[3]=F*l+G*g+Q*w,n[4]=F*u+G*y+Q*C,n[5]=F*p+G*b+Q*P,n[6]=ce*l+ee*g+oe*w,n[7]=ce*u+ee*y+oe*C,n[8]=ce*p+ee*b+oe*P,n}function jo(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function dy(n,t){var i=t[0],l=t[1],u=t[2],p=t[3],g=t[4],y=t[5],b=t[6],w=t[7],C=t[8],P=t[9],I=t[10],O=t[11],z=t[12],F=t[13],G=t[14],Q=t[15],ce=i*y-l*g,ee=i*b-u*g,oe=i*w-p*g,he=l*b-u*y,ue=l*w-p*y,Le=u*w-p*b,Me=C*F-P*z,Ue=C*G-I*z,et=C*Q-O*z,De=P*G-I*F,He=P*Q-O*F,qe=I*Q-O*G,Ye=ce*qe-ee*He+oe*De+he*et-ue*Ue+Le*Me;return Ye?(n[0]=(y*qe-b*He+w*De)*(Ye=1/Ye),n[1]=(u*He-l*qe-p*De)*Ye,n[2]=(F*Le-G*ue+Q*he)*Ye,n[3]=(I*ue-P*Le-O*he)*Ye,n[4]=(b*et-g*qe-w*Ue)*Ye,n[5]=(i*qe-u*et+p*Ue)*Ye,n[6]=(G*oe-z*Le-Q*ee)*Ye,n[7]=(C*Le-I*oe+O*ee)*Ye,n[8]=(g*He-y*et+w*Me)*Ye,n[9]=(l*et-i*He-p*Me)*Ye,n[10]=(z*ue-F*oe+Q*ce)*Ye,n[11]=(P*oe-C*ue-O*ce)*Ye,n[12]=(y*Ue-g*De-b*Me)*Ye,n[13]=(i*De-l*Ue+u*Me)*Ye,n[14]=(F*ee-z*he-G*ce)*Ye,n[15]=(C*he-P*ee+I*ce)*Ye,n):null}function ec(n,t,i){var l=t[0],u=t[1],p=t[2],g=t[3],y=t[4],b=t[5],w=t[6],C=t[7],P=t[8],I=t[9],O=t[10],z=t[11],F=t[12],G=t[13],Q=t[14],ce=t[15],ee=i[0],oe=i[1],he=i[2],ue=i[3];return n[0]=ee*l+oe*y+he*P+ue*F,n[1]=ee*u+oe*b+he*I+ue*G,n[2]=ee*p+oe*w+he*O+ue*Q,n[3]=ee*g+oe*C+he*z+ue*ce,n[4]=(ee=i[4])*l+(oe=i[5])*y+(he=i[6])*P+(ue=i[7])*F,n[5]=ee*u+oe*b+he*I+ue*G,n[6]=ee*p+oe*w+he*O+ue*Q,n[7]=ee*g+oe*C+he*z+ue*ce,n[8]=(ee=i[8])*l+(oe=i[9])*y+(he=i[10])*P+(ue=i[11])*F,n[9]=ee*u+oe*b+he*I+ue*G,n[10]=ee*p+oe*w+he*O+ue*Q,n[11]=ee*g+oe*C+he*z+ue*ce,n[12]=(ee=i[12])*l+(oe=i[13])*y+(he=i[14])*P+(ue=i[15])*F,n[13]=ee*u+oe*b+he*I+ue*G,n[14]=ee*p+oe*w+he*O+ue*Q,n[15]=ee*g+oe*C+he*z+ue*ce,n}function kd(n,t,i){var l,u,p,g,y,b,w,C,P,I,O,z,F=i[0],G=i[1],Q=i[2];return t===n?(n[12]=t[0]*F+t[4]*G+t[8]*Q+t[12],n[13]=t[1]*F+t[5]*G+t[9]*Q+t[13],n[14]=t[2]*F+t[6]*G+t[10]*Q+t[14],n[15]=t[3]*F+t[7]*G+t[11]*Q+t[15]):(u=t[1],p=t[2],g=t[3],y=t[4],b=t[5],w=t[6],C=t[7],P=t[8],I=t[9],O=t[10],z=t[11],n[0]=l=t[0],n[1]=u,n[2]=p,n[3]=g,n[4]=y,n[5]=b,n[6]=w,n[7]=C,n[8]=P,n[9]=I,n[10]=O,n[11]=z,n[12]=l*F+y*G+P*Q+t[12],n[13]=u*F+b*G+I*Q+t[13],n[14]=p*F+w*G+O*Q+t[14],n[15]=g*F+C*G+z*Q+t[15]),n}function tc(n,t,i){var l=i[0],u=i[1],p=i[2];return n[0]=t[0]*l,n[1]=t[1]*l,n[2]=t[2]*l,n[3]=t[3]*l,n[4]=t[4]*u,n[5]=t[5]*u,n[6]=t[6]*u,n[7]=t[7]*u,n[8]=t[8]*p,n[9]=t[9]*p,n[10]=t[10]*p,n[11]=t[11]*p,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function fy(n,t,i){var l=Math.sin(i),u=Math.cos(i),p=t[4],g=t[5],y=t[6],b=t[7],w=t[8],C=t[9],P=t[10],I=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=p*u+w*l,n[5]=g*u+C*l,n[6]=y*u+P*l,n[7]=b*u+I*l,n[8]=w*u-p*l,n[9]=C*u-g*l,n[10]=P*u-y*l,n[11]=I*u-b*l,n}function bm(n,t,i){var l=Math.sin(i),u=Math.cos(i),p=t[0],g=t[1],y=t[2],b=t[3],w=t[8],C=t[9],P=t[10],I=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=p*u-w*l,n[1]=g*u-C*l,n[2]=y*u-P*l,n[3]=b*u-I*l,n[8]=p*l+w*u,n[9]=g*l+C*u,n[10]=y*l+P*u,n[11]=b*l+I*u,n}function Fw(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Nw(n,t,i){var l,u,p,g=i[0],y=i[1],b=i[2],w=Math.hypot(g,y,b);return w<xm?null:(g*=w=1/w,y*=w,b*=w,l=Math.sin(t),u=Math.cos(t),n[0]=g*g*(p=1-u)+u,n[1]=y*g*p+b*l,n[2]=b*g*p-y*l,n[3]=0,n[4]=g*y*p-b*l,n[5]=y*y*p+u,n[6]=b*y*p+g*l,n[7]=0,n[8]=g*b*p+y*l,n[9]=y*b*p-g*l,n[10]=b*b*p+u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var ck=ec;function py(){var n=new Oi(3);return Oi!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function jw(n){var t=new Oi(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Ld(n){return Math.hypot(n[0],n[1],n[2])}function xu(n,t,i){var l=new Oi(3);return l[0]=n,l[1]=t,l[2]=i,l}function qs(n,t,i){return n[0]=t[0]+i[0],n[1]=t[1]+i[1],n[2]=t[2]+i[2],n}function my(n,t,i){return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],n}function Uw(n,t,i){return n[0]=t[0]*i[0],n[1]=t[1]*i[1],n[2]=t[2]*i[2],n}function Od(n,t,i){return n[0]=Math.min(t[0],i[0]),n[1]=Math.min(t[1],i[1]),n[2]=Math.min(t[2],i[2]),n}function zd(n,t,i){return n[0]=Math.max(t[0],i[0]),n[1]=Math.max(t[1],i[1]),n[2]=Math.max(t[2],i[2]),n}function Xi(n,t,i){return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n}function Rd(n,t,i,l){return n[0]=t[0]+i[0]*l,n[1]=t[1]+i[1]*l,n[2]=t[2]+i[2]*l,n}function ri(n,t){var i=t[0],l=t[1],u=t[2],p=i*i+l*l+u*u;return p>0&&(p=1/Math.sqrt(p)),n[0]=t[0]*p,n[1]=t[1]*p,n[2]=t[2]*p,n}function po(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function gy(n,t,i){var l=t[0],u=t[1],p=t[2],g=i[0],y=i[1],b=i[2];return n[0]=u*b-p*y,n[1]=p*g-l*b,n[2]=l*y-u*g,n}function Yr(n,t,i){var l=t[0],u=t[1],p=t[2],g=i[3]*l+i[7]*u+i[11]*p+i[15];return n[0]=(i[0]*l+i[4]*u+i[8]*p+i[12])/(g=g||1),n[1]=(i[1]*l+i[5]*u+i[9]*p+i[13])/g,n[2]=(i[2]*l+i[6]*u+i[10]*p+i[14])/g,n}function Vw(n,t,i){var l=i[0],u=i[1],p=i[2],g=t[0],y=t[1],b=t[2],w=u*b-p*y,C=p*g-l*b,P=l*y-u*g,I=u*P-p*C,O=p*w-l*P,z=l*C-u*w,F=2*i[3];return C*=F,P*=F,O*=2,z*=2,n[0]=g+(w*=F)+(I*=2),n[1]=y+C+O,n[2]=b+P+z,n}var Dd,Uo=my,uk=Uw,hk=Ld;function $w(n,t,i){return n[0]=t[0]*i,n[1]=t[1]*i,n[2]=t[2]*i,n[3]=t[3]*i,n}function Gw(n,t){var i=t[0],l=t[1],u=t[2],p=t[3],g=i*i+l*l+u*u+p*p;return g>0&&(g=1/Math.sqrt(g)),n[0]=i*g,n[1]=l*g,n[2]=u*g,n[3]=p*g,n}function rc(n,t,i){var l=t[0],u=t[1],p=t[2],g=t[3];return n[0]=i[0]*l+i[4]*u+i[8]*p+i[12]*g,n[1]=i[1]*l+i[5]*u+i[9]*p+i[13]*g,n[2]=i[2]*l+i[6]*u+i[10]*p+i[14]*g,n[3]=i[3]*l+i[7]*u+i[11]*p+i[15]*g,n}function Zw(){var n=new Oi(4);return Oi!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function Hw(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function qw(n,t,i){i*=.5;var l=t[0],u=t[1],p=t[2],g=t[3],y=Math.sin(i),b=Math.cos(i);return n[0]=l*b+g*y,n[1]=u*b+p*y,n[2]=p*b-u*y,n[3]=g*b-l*y,n}function Ww(n,t,i){i*=.5;var l=t[0],u=t[1],p=t[2],g=t[3],y=Math.sin(i),b=Math.cos(i);return n[0]=l*b-p*y,n[1]=u*b+g*y,n[2]=p*b+l*y,n[3]=g*b-u*y,n}py(),Dd=new Oi(4),Oi!=Float32Array&&(Dd[0]=0,Dd[1]=0,Dd[2]=0,Dd[3]=0);var dk=Gw;py(),xu(1,0,0),xu(0,1,0),Zw(),Zw(),Dw();const fk=xe([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Xw}=fk,Kw=xe([{name:"a_pos_3",components:3,type:"Int16"}]);var Bd=xe([{name:"a_pos",type:"Int16",components:2}]);class _y{constructor(t,i){this.pos=t,this.dir=i}intersectsPlane(t,i,l){const u=po(i,this.dir);if(Math.abs(u)<1e-6)return!1;const p=((t[0]-this.pos[0])*i[0]+(t[1]-this.pos[1])*i[1]+(t[2]-this.pos[2])*i[2])/u;return l[0]=this.pos[0]+this.dir[0]*p,l[1]=this.pos[1]+this.dir[1]*p,l[2]=this.pos[2]+this.dir[2]*p,!0}closestPointOnSphere(t,i,l){if(function(O,z){var F=O[0],G=O[1],Q=O[2],ce=z[0],ee=z[1],oe=z[2];return Math.abs(F-ce)<=xm*Math.max(1,Math.abs(F),Math.abs(ce))&&Math.abs(G-ee)<=xm*Math.max(1,Math.abs(G),Math.abs(ee))&&Math.abs(Q-oe)<=xm*Math.max(1,Math.abs(Q),Math.abs(oe))}(this.pos,t)||i===0)return l[0]=l[1]=l[2]=0,!1;const[u,p,g]=this.dir,y=this.pos[0]-t[0],b=this.pos[1]-t[1],w=this.pos[2]-t[2],C=u*u+p*p+g*g,P=2*(y*u+b*p+w*g),I=P*P-4*C*(y*y+b*b+w*w-i*i);if(I<0){const O=Math.max(-P/2,0),z=y+u*O,F=b+p*O,G=w+g*O,Q=Math.hypot(z,F,G);return l[0]=z*i/Q,l[1]=F*i/Q,l[2]=G*i/Q,!1}{const O=(-P-Math.sqrt(I))/(2*C);if(O<0){const z=Math.hypot(y,b,w);return l[0]=y*i/z,l[1]=b*i/z,l[2]=w*i/z,!1}return l[0]=y+u*O,l[1]=b+p*O,l[2]=w+g*O,!0}}}class yy{constructor(t,i,l,u,p){this.TL=t,this.TR=i,this.BR=l,this.BL=u,this.horizon=p}static fromInvProjectionMatrix(t,i,l){const u=[-1,1,1],p=[1,1,1],g=[1,-1,1],y=[-1,-1,1],b=Yr(u,u,t),w=Yr(p,p,t),C=Yr(g,g,t),P=Yr(y,y,t);return new yy(b,w,C,P,i/l)}}class vy{constructor(t,i){this.points=t,this.planes=i}static fromInvProjectionMatrix(t,i,l,u){const p=Math.pow(2,l),g=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(b=>{const w=rc([],b,t),C=1/w[3]/i*p;return function(P,I,O){return P[0]=I[0]*O[0],P[1]=I[1]*O[1],P[2]=I[2]*O[2],P[3]=I[3]*O[3],P}(w,w,[C,C,u?1/w[3]:C,C])}),y=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(b=>{const w=ri([],gy([],Uo([],g[b[0]],g[b[1]]),Uo([],g[b[2]],g[b[1]]))),C=-po(w,g[b[1]]);return w.concat(C)});return new vy(g,y)}}class ni{static fromPoints(t){const i=[1/0,1/0,1/0],l=[-1/0,-1/0,-1/0];for(const u of t)Od(i,i,u),zd(l,l,u);return new ni(i,l)}static applyTransform(t,i){const l=t.getCorners();for(let u=0;u<l.length;++u)Yr(l[u],l[u],i);return ni.fromPoints(l)}constructor(t,i){this.min=t,this.max=i,this.center=Xi([],qs([],this.min,this.max),.5)}quadrant(t){const i=[t%2==0,t<2],l=jw(this.min),u=jw(this.max);for(let p=0;p<i.length;p++)l[p]=i[p]?this.min[p]:this.center[p],u[p]=i[p]?this.center[p]:this.max[p];return u[2]=this.max[2],new ni(l,u)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}distanceZ(t){return Math.max(Math.min(this.max[2],t[2]),this.min[2])-t[2]}getCorners(){const t=this.min,i=this.max;return[[t[0],t[1],t[2]],[i[0],t[1],t[2]],[i[0],i[1],t[2]],[t[0],i[1],t[2]],[t[0],t[1],i[2]],[i[0],t[1],i[2]],[i[0],i[1],i[2]],[t[0],i[1],i[2]]]}intersects(t){const i=this.getCorners();let l=!0;for(let u=0;u<t.planes.length;u++){const p=t.planes[u];let g=0;for(let y=0;y<i.length;y++)g+=po(p,i[y])+p[3]>=0;if(g===0)return 0;g!==i.length&&(l=!1)}if(l)return 2;for(let u=0;u<3;u++){let p=Number.MAX_VALUE,g=-Number.MAX_VALUE;for(let y=0;y<t.points.length;y++){const b=t.points[y][u]-this.min[u];p=Math.min(p,b),g=Math.max(g,b)}if(g<0||p>this.max[u]-this.min[u])return 0}return 1}}const xy=5,Yw=6,hs=Pt/Math.PI/2,pk=16383,nc=64,Fd=[nc,32,16],mo=-hs,go=hs,mk=[new ni([mo,mo,mo],[go,go,go]),new ni([mo,mo,mo],[0,0,go]),new ni([0,mo,mo],[go,0,go]),new ni([mo,0,mo],[0,go,go]),new ni([0,0,mo],[go,go,go])];function wm(n){return n*hs/Ud}function Qw(n,t,i,l=!0){const u=Xi([],n._camera.position,n.worldSize),p=[t,i,1,1];rc(p,p,n.pixelMatrixInverse),$w(p,p,1/p[3]);const g=ri([],Uo([],p,u)),y=n.globeMatrix,b=[y[12],y[13],y[14]],w=Uo([],b,u),C=Ld(w),P=ri([],w),I=n.worldSize/(2*Math.PI),O=po(P,g),z=Math.asin(I/C);if(z<Math.acos(O)){if(!l)return null;const et=[],De=[];Xi(et,g,C/O),ri(De,Uo(De,et,w)),ri(g,qs(g,w,Xi(g,De,Math.tan(z)*C)))}const F=[];new _y(u,g).closestPointOnSphere(b,I,F);const G=ri([],os(y,0)),Q=ri([],os(y,1)),ce=ri([],os(y,2)),ee=po(G,F),oe=po(Q,F),he=po(ce,F),ue=vt(Math.asin(-oe/I));let Le=vt(Math.atan2(ee,he));Le=n.center.lng+function(et,De){const He=(De-et+180)%360-180;return He<-180?He+360:He}(n.center.lng,Le);const Me=fs(Le),Ue=Oe(ps(ue),0,1);return new Tu(Me,Ue)}class gk{constructor(t,i,l){this.a=Uo([],t,l),this.b=Uo([],i,l),this.center=l;const u=ri([],this.a),p=ri([],this.b);this.angle=Math.acos(po(u,p))}}function by(n,t){if(n.angle===0)return null;let i;return i=n.a[t]===0?1/n.angle*.5*Math.PI:1/n.angle*Math.atan(n.b[t]/n.a[t]/Math.sin(n.angle)-1/Math.tan(n.angle)),i<0||i>1?null:function(l,u,p,g){const y=Math.sin(p);return l*(Math.sin((1-g)*p)/y)+u*(Math.sin(g*p)/y)}(n.a[t],n.b[t],n.angle,Oe(i,0,1))+n.center[t]}function ds(n){if(n.z<=1)return mk[n.z+2*n.y+n.x];const t=wy(Em(n));return ni.fromPoints(t)}function ic(n,t,i){return Xi(n,n,1-i),Rd(n,n,t,i)}function Jw(n,t){const i=Eu(t.zoom);if(i===0)return ds(n);const l=Em(n),u=wy(l),p=fs(l.getWest())*t.worldSize,g=fs(l.getEast())*t.worldSize,y=ps(l.getNorth())*t.worldSize,b=ps(l.getSouth())*t.worldSize,w=[p,y,0],C=[g,y,0],P=[p,b,0],I=[g,b,0],O=dy([],t.globeMatrix);return Yr(w,w,O),Yr(C,C,O),Yr(P,P,O),Yr(I,I,O),u[0]=ic(u[0],P,i),u[1]=ic(u[1],I,i),u[2]=ic(u[2],C,i),u[3]=ic(u[3],w,i),ni.fromPoints(u)}function e2(n,t,i){for(const l of n)Yr(l,l,t),Xi(l,l,i)}function _k(n,t,i){const l=t/n.worldSize,u=n.globeMatrix;if(i.z<=1){const Me=ds(i).getCorners();return e2(Me,u,l),ni.fromPoints(Me)}const p=Em(i),g=wy(p);e2(g,u,l);const y=Number.MAX_VALUE,b=[-y,-y,-y],w=[y,y,y];if(p.contains(n.center)){for(const et of g)Od(w,w,et),zd(b,b,et);b[2]=0;const Me=n.point,Ue=[Me.x*l,Me.y*l,0];return Od(w,w,Ue),zd(b,b,Ue),new ni(w,b)}const C=[u[12]*l,u[13]*l,u[14]*l],P=p.getCenter(),I=Oe(n.center.lat,-$n,$n),O=Oe(P.lat,-$n,$n),z=fs(n.center.lng),F=ps(I);let G=z-fs(P.lng);const Q=F-ps(O);G>.5?G-=1:G<-.5&&(G+=1);let ce=0;Math.abs(G)>Math.abs(Q)?ce=G>=0?1:3:(ce=Q>=0?0:2,Rd(C,C,[u[4]*l,u[5]*l,u[6]*l],-Math.sin(at(Q>=0?p.getSouth():p.getNorth()))*hs));const ee=g[ce],oe=g[(ce+1)%4],he=new gk(ee,oe,C),ue=[by(he,0)||ee[0],by(he,1)||ee[1],by(he,2)||ee[2]],Le=Eu(n.zoom);if(Le>0){const Me=function({x:et,y:De,z:He},qe,Ye,it,Ne){const ut=1/(1<<He);let bt=et*ut,ht=bt+ut,Dt=De*ut,ot=Dt+ut,Ct=0;const Bt=(bt+ht)/2-it;return Bt>.5?Ct=-1:Bt<-.5&&(Ct=1),bt=((bt+Ct)*qe-(it*=qe))*Ye+it,ht=((ht+Ct)*qe-it)*Ye+it,Dt=(Dt*qe-(Ne*=qe))*Ye+Ne,ot=(ot*qe-Ne)*Ye+Ne,[[bt,ot,0],[ht,ot,0],[ht,Dt,0],[bt,Dt,0]]}(i,t,n._pixelsPerMercatorPixel,z,F);for(let et=0;et<g.length;et++)ic(g[et],Me[et],Le);const Ue=qs([],Me[ce],Me[(ce+1)%4]);Xi(Ue,Ue,.5),ic(ue,Ue,Le)}for(const Me of g)Od(w,w,Me),zd(b,b,Me);return w[2]=Math.min(ee[2],oe[2]),Od(w,w,ue),zd(b,b,ue),new ni(w,b)}function Em({x:n,y:t,z:i}){const l=1/(1<<i),u=new br(Ki(n*l),Vn((t+1)*l)),p=new br(Ki((n+1)*l),Vn(t*l));return new Da(u,p)}function wy(n){const t=at(n.getNorth()),i=at(n.getSouth()),l=Math.cos(t),u=Math.cos(i),p=Math.sin(t),g=Math.sin(i),y=n.getWest(),b=n.getEast();return[bu(u,g,y),bu(u,g,b),bu(l,p,b),bu(l,p,y)]}function bu(n,t,i,l=hs){return i=at(i),[n*Math.sin(i)*l,-t*l,n*Math.cos(i)*l]}function wu(n,t,i){return bu(Math.cos(at(n)),Math.sin(at(n)),t,i)}function Nd(n,t,i,l){const u=1<<i.z,p=(n/Pt+i.x)/u;return wu(Vn((t/Pt+i.y)/u),Ki(p),l)}function Tm({min:n,max:t}){return pk/Math.max(t[0]-n[0],t[1]-n[1],t[2]-n[2])}const t2=new Float64Array(16);function jd(n){const t=Tm(n),i=Fw(t2,[t,t,t]);return kd(i,i,((l=[])[0]=-(u=n.min)[0],l[1]=-u[1],l[2]=-u[2],l));var l,u}function Ey(n){const t=(l=n.min,(i=t2)[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=l[0],i[13]=l[1],i[14]=l[2],i[15]=1,i);var i,l;const u=1/Tm(n);return tc(t,t,[u,u,u])}function r2(n,t,i,l,u){const p=function(b){const w=Pt/(2*Math.PI);return b/(2*Math.PI)/w}(i),g=[n,t,-i/(2*Math.PI)],y=jo(new Float64Array(16));return kd(y,y,g),tc(y,y,[p,p,p]),fy(y,y,at(-u)),bm(y,y,at(-l)),y}function Eu(n){return Et(xy,Yw,n)}function n2(n,t){const i=wu(t.lat,t.lng),l=function(z){const F=wu(z._center.lat,z._center.lng);let G=gy([],xu(0,1,0),F);const Q=Nw([],-z.angle,F);G=Yr(G,G,Q),Nw(Q,-z._pitch,G);const ce=ri([],F);return Xi(ce,ce,wm(z.cameraToCenterDistance/z.pixelsPerMeter)),Yr(ce,ce,Q),qs([],F,ce)}(n);return g=(u=my([],l,i))[0],y=u[1],b=u[2],w=(p=i)[0],C=p[1],P=p[2],O=(I=Math.sqrt(g*g+y*y+b*b)*Math.sqrt(w*w+C*C+P*P))&&po(u,p)/I,Math.acos(Math.min(Math.max(O,-1),1));var u,p,g,y,b,w,C,P,I,O}function Ty(n,t){return n2(n,t)>Math.PI/2*1.01}const i2=at(85),yk=Math.cos(i2),vk=Math.sin(i2),Ud=63710088e-1,o2=2*Math.PI*Ud;class Ba{constructor(t,i){if(isNaN(t)||isNaN(i))throw new Error(`Invalid LngLat object: (${t}, ${i})`);if(this.lng=+t,this.lat=+i,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ba(_t(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const i=Math.PI/180,l=this.lat*i,u=t.lat*i,p=Math.sin(l)*Math.sin(u)+Math.cos(l)*Math.cos(u)*Math.cos((t.lng-this.lng)*i);return Ud*Math.acos(Math.min(p,1))}toBounds(t=0){const i=360*t/40075017,l=i/Math.cos(Math.PI/180*this.lat);return new Da(new Ba(this.lng-l,this.lat-i),new Ba(this.lng+l,this.lat+i))}toEcef(t){const i=wm(t);return wu(this.lat,this.lng,hs+i)}static convert(t){if(t instanceof Ba)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Ba(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Ba(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var br=Ba;function Sy(n){return o2*Math.cos(n*Math.PI/180)}function fs(n){return(180+n)/360}function ps(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}function Vo(n,t){return n/Sy(t)}function Ki(n){return 360*n-180}function Vn(n){return 360/Math.PI*Math.atan(Math.exp((180-360*n)*Math.PI/180))-90}function s2(n,t){return n*Sy(Vn(t))}const $n=85.051129;function a2(n){return 1/Math.cos(n*Math.PI/180)}class Tu{constructor(t,i,l=0){this.x=+t,this.y=+i,this.z=+l}static fromLngLat(t,i=0){const l=br.convert(t);return new Tu(fs(l.lng),ps(l.lat),Vo(i,l.lat))}toLngLat(){return new br(Ki(this.x),Vn(this.y))}toAltitude(){return s2(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/o2*a2(Vn(this.y))}}function Ay(n,t,i,l,u,p,g,y,b){const w=(t+l)/2,C=(i+u)/2,P=new Te(w,C);y(P),function(I,O,z,F,G,Q){const ce=z-G,ee=F-Q;return Math.abs((F-O)*ce-(z-I)*ee)/Math.hypot(ce,ee)}(P.x,P.y,p.x,p.y,g.x,g.y)>=b?(Ay(n,t,i,w,C,p,P,y,b),Ay(n,w,C,l,u,P,g,y,b)):n.push(g)}function l2(n,t,i){let l=n[0],u=l.x,p=l.y;t(l);const g=[l];for(let y=1;y<n.length;y++){const b=n[y],{x:w,y:C}=b;t(b),Ay(g,u,p,w,C,l,b,t,i),u=w,p=C,l=b}return g}function Cy(n,t,i,l){if(l(t,i)){const u=t.add(i)._mult(.5);Cy(n,t,u,l),Cy(n,u,i,l)}else n.push(i)}function xk(n,t){let i=n[0];const l=[i];for(let u=1;u<n.length;u++){const p=n[u];Cy(l,i,p,t),i=p}return l}const My=Math.pow(2,14)-1,c2=-My-1;function bk(n,t){const i=Math.round(n.x*t),l=Math.round(n.y*t);return n.x=Oe(i,c2,My),n.y=Oe(l,c2,My),(i<n.x||i>n.x+1||l<n.y||l>n.y+1)&&jr("Geometry exceeds allowed extent, reduce your vector tile buffer size"),n}function Ws(n,t,i){const l=n.loadGeometry(),u=n.extent,p=Pt/u;if(t&&i&&i.projection.isReprojectedInTileSpace){const g=1<<t.z,{scale:y,x:b,y:w,projection:C}=i,P=I=>{const O=Ki((t.x+I.x/u)/g),z=Vn((t.y+I.y/u)/g),F=C.project(O,z);I.x=(F.x*y-b)*u,I.y=(F.y*y-w)*u};for(let I=0;I<l.length;I++)if(n.type!==1)l[I]=l2(l[I],P,1);else{const O=[];for(const z of l[I])z.x<0||z.x>=u||z.y<0||z.y>=u||(P(z),O.push(z));l[I]=O}}for(const g of l)for(const y of g)bk(y,p);return l}function oc(n,t){return{type:n.type,id:n.id,properties:n.properties,geometry:t?Ws(n):[]}}function Sm(n,t,i,l,u){n.emplaceBack(2*t+(l+1)/2,2*i+(u+1)/2)}function Am(n,t,i){n.emplaceBack(t.x,t.y,t.z,i[0]*16384,i[1]*16384,i[2]*16384)}class Py{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(i=>i.id),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new Je,this.indexArray=new Tt,this.segments=new on,this.programConfigurations=new Jl(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(t,i,l,u){const p=this.layers[0],g=[];let y=null;p.type==="circle"&&(y=p.layout.get("circle-sort-key"));for(const{feature:w,id:C,index:P,sourceLayerIndex:I}of t){const O=this.layers[0]._featureFilter.needGeometry,z=oc(w,O);if(!this.layers[0]._featureFilter.filter(new M(this.zoom),z,l))continue;const F=y?y.evaluate(z,{},l):void 0,G={id:C,properties:w.properties,type:w.type,sourceLayerIndex:I,index:P,geometry:O?z.geometry:Ws(w,l,u),patterns:{},sortKey:F};g.push(G)}y&&g.sort((w,C)=>w.sortKey-C.sortKey);let b=null;u.projection.name==="globe"&&(this.globeExtVertexArray=new tt,b=u.projection);for(const w of g){const{geometry:C,index:P,sourceLayerIndex:I}=w,O=t[P].feature;this.addFeature(w,C,P,i.availableImages,l,b),i.featureIndex.insert(O,C,P,I,this.index)}}update(t,i,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ak.members),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,lk.members))),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(t,i,l,u,p,g){for(const y of i)for(const b of y){const w=b.x,C=b.y;if(w<0||w>=Pt||C<0||C>=Pt)continue;if(g){const O=g.projectTilePoint(w,C,p),z=g.upVector(p,w,C),F=this.globeExtVertexArray;Am(F,O,z),Am(F,O,z),Am(F,O,z),Am(F,O,z)}const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),I=P.vertexLength;Sm(this.layoutVertexArray,w,C,-1,-1),Sm(this.layoutVertexArray,w,C,1,-1),Sm(this.layoutVertexArray,w,C,1,1),Sm(this.layoutVertexArray,w,C,-1,1),this.indexArray.emplaceBack(I,I+1,I+2),this.indexArray.emplaceBack(I,I+2,I+3),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{},u,p)}}function u2(n,t){for(let i=0;i<n.length;i++)if(sc(t,n[i]))return!0;for(let i=0;i<t.length;i++)if(sc(n,t[i]))return!0;return!!Iy(n,t)}function wk(n,t,i){return!!sc(n,t)||!!ky(t,n,i)}function h2(n,t){if(n.length===1)return f2(t,n[0]);for(let i=0;i<t.length;i++){const l=t[i];for(let u=0;u<l.length;u++)if(sc(n,l[u]))return!0}for(let i=0;i<n.length;i++)if(f2(t,n[i]))return!0;for(let i=0;i<t.length;i++)if(Iy(n,t[i]))return!0;return!1}function Ek(n,t,i){if(n.length>1){if(Iy(n,t))return!0;for(let l=0;l<t.length;l++)if(ky(t[l],n,i))return!0}for(let l=0;l<n.length;l++)if(ky(n[l],t,i))return!0;return!1}function Iy(n,t){if(n.length===0||t.length===0)return!1;for(let i=0;i<n.length-1;i++){const l=n[i],u=n[i+1];for(let p=0;p<t.length-1;p++)if(Tk(l,u,t[p],t[p+1]))return!0}return!1}function Tk(n,t,i,l){return Ai(n,i,l)!==Ai(t,i,l)&&Ai(n,t,i)!==Ai(n,t,l)}function ky(n,t,i){const l=i*i;if(t.length===1)return n.distSqr(t[0])<l;for(let u=1;u<t.length;u++)if(d2(n,t[u-1],t[u])<l)return!0;return!1}function d2(n,t,i){const l=t.distSqr(i);if(l===0)return n.distSqr(t);const u=((n.x-t.x)*(i.x-t.x)+(n.y-t.y)*(i.y-t.y))/l;return n.distSqr(u<0?t:u>1?i:i.sub(t)._mult(u)._add(t))}function f2(n,t){let i,l,u,p=!1;for(let g=0;g<n.length;g++){i=n[g];for(let y=0,b=i.length-1;y<i.length;b=y++)l=i[y],u=i[b],l.y>t.y!=u.y>t.y&&t.x<(u.x-l.x)*(t.y-l.y)/(u.y-l.y)+l.x&&(p=!p)}return p}function sc(n,t){let i=!1;for(let l=0,u=n.length-1;l<n.length;u=l++){const p=n[l],g=n[u];p.y>t.y!=g.y>t.y&&t.x<(g.x-p.x)*(t.y-p.y)/(g.y-p.y)+p.x&&(i=!i)}return i}function p2(n,t,i,l,u){for(const g of n)if(t<=g.x&&i<=g.y&&l>=g.x&&u>=g.y)return!0;const p=[new Te(t,i),new Te(t,u),new Te(l,u),new Te(l,i)];if(n.length>2){for(const g of p)if(sc(n,g))return!0}for(let g=0;g<n.length-1;g++)if(Sk(n[g],n[g+1],p))return!0;return!1}function Sk(n,t,i){const l=i[0],u=i[2];if(n.x<l.x&&t.x<l.x||n.x>u.x&&t.x>u.x||n.y<l.y&&t.y<l.y||n.y>u.y&&t.y>u.y)return!1;const p=Ai(n,t,i[0]);return p!==Ai(n,t,i[1])||p!==Ai(n,t,i[2])||p!==Ai(n,t,i[3])}function Su(n,t,i){const l=t.paint.get(n).value;return l.kind==="constant"?l.value:i.programConfigurations.get(t.id).getMaxValue(n)}function Cm(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function m2(n,t,i,l,u){if(!t[0]&&!t[1])return n;const p=Te.convert(t)._mult(u);i==="viewport"&&p._rotate(-l);const g=[];for(let y=0;y<n.length;y++)g.push(n[y].sub(p));return g}function g2(n,t,i,l){const u=Te.convert(n)._mult(l);return t==="viewport"&&u._rotate(-i),u}yt(Py,"CircleBucket",{omit:["layers"]});const Ak=new ne({"circle-sort-key":new H(je.layout_circle["circle-sort-key"])});var Ck={paint:new ne({"circle-radius":new H(je.paint_circle["circle-radius"]),"circle-color":new H(je.paint_circle["circle-color"]),"circle-blur":new H(je.paint_circle["circle-blur"]),"circle-opacity":new H(je.paint_circle["circle-opacity"]),"circle-translate":new B(je.paint_circle["circle-translate"]),"circle-translate-anchor":new B(je.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new B(je.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new B(je.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new H(je.paint_circle["circle-stroke-width"]),"circle-stroke-color":new H(je.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new H(je.paint_circle["circle-stroke-opacity"])}),layout:Ak};function _2(n,t,i,l,u,p,g,y,b){if(p&&n.queryGeometry.isAboveHorizon)return!1;p&&(b*=n.pixelToTileUnitsFactor);const w=n.tileID.canonical,C=i.projection.upVectorScale(w,i.center.lat,i.worldSize).metersToTile;for(const P of t)for(const I of P){const O=I.add(y),z=u&&i.elevation?i.elevation.exaggeration()*u.getElevationAt(O.x,O.y,!0):0,F=i.projection.projectTilePoint(O.x,O.y,w);if(z>0){const ee=i.projection.upVector(w,O.x,O.y);F.x+=ee[0]*C*z,F.y+=ee[1]*C*z,F.z+=ee[2]*C*z}const G=p?O:Mk(F.x,F.y,F.z,l),Q=p?n.tilespaceRays.map(ee=>Ik(ee,z)):n.queryGeometry.screenGeometry,ce=rc([],[F.x,F.y,F.z,1],l);if(!g&&p?b*=ce[3]/i.cameraToCenterDistance:g&&!p&&(b*=i.cameraToCenterDistance/ce[3]),p){const ee=Vn((I.y/Pt+w.y)/(1<<w.z));b/=i.projection.pixelsPerMeter(ee,1)/Vo(1,ee)}if(wk(Q,G,b))return!0}return!1}function Mk(n,t,i,l){const u=rc([],[n,t,i,1],l);return new Te(u[0]/u[3],u[1]/u[3])}const y2=xu(0,0,0),Pk=xu(0,0,1);function Ik(n,t){const i=py();return y2[2]=t,n.intersectsPlane(y2,Pk,i),new Te(i[0],i[1])}class v2 extends Py{}function x2(n,{width:t,height:i},l,u){if(u){if(u instanceof Uint8ClampedArray)u=new Uint8Array(u.buffer);else if(u.length!==t*i*l)throw new RangeError("mismatched image size")}else u=new Uint8Array(t*i*l);return n.width=t,n.height=i,n.data=u,n}function b2(n,t,i){const{width:l,height:u}=t;l===n.width&&u===n.height||(Ly(n,t,{x:0,y:0},{x:0,y:0},{width:Math.min(n.width,l),height:Math.min(n.height,u)},i),n.width=l,n.height=u,n.data=t.data)}function Ly(n,t,i,l,u,p){if(u.width===0||u.height===0)return t;if(u.width>n.width||u.height>n.height||i.x>n.width-u.width||i.y>n.height-u.height)throw new RangeError("out of range source coordinates for image copy");if(u.width>t.width||u.height>t.height||l.x>t.width-u.width||l.y>t.height-u.height)throw new RangeError("out of range destination coordinates for image copy");const g=n.data,y=t.data;for(let b=0;b<u.height;b++){const w=((i.y+b)*n.width+i.x)*p,C=((l.y+b)*t.width+l.x)*p;for(let P=0;P<u.width*p;P++)y[C+P]=g[w+P]}return t}yt(v2,"HeatmapBucket",{omit:["layers"]});class Xs{constructor(t,i){x2(this,t,1,i)}resize(t){b2(this,new Xs(t),1)}clone(){return new Xs({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,i,l,u,p){Ly(t,i,l,u,p,1)}}class zi{constructor(t,i){x2(this,t,4,i)}resize(t){b2(this,new zi(t),4)}replace(t,i){i?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new zi({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,i,l,u,p){Ly(t,i,l,u,p,4)}}yt(Xs,"AlphaImage"),yt(zi,"RGBAImage");var kk={paint:new ne({"heatmap-radius":new H(je.paint_heatmap["heatmap-radius"]),"heatmap-weight":new H(je.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new B(je.paint_heatmap["heatmap-intensity"]),"heatmap-color":new re(je.paint_heatmap["heatmap-color"]),"heatmap-opacity":new B(je.paint_heatmap["heatmap-opacity"])})};function Oy(n){const t={},i=n.resolution||256,l=n.clips?n.clips.length:1,u=n.image||new zi({width:i,height:l}),p=(g,y,b)=>{t[n.evaluationKey]=b;const w=n.expression.evaluate(t);u.data[g+y+0]=Math.floor(255*w.r/w.a),u.data[g+y+1]=Math.floor(255*w.g/w.a),u.data[g+y+2]=Math.floor(255*w.b/w.a),u.data[g+y+3]=Math.floor(255*w.a)};if(n.clips)for(let g=0,y=0;g<l;++g,y+=4*i)for(let b=0,w=0;b<i;b++,w+=4){const C=b/(i-1),{start:P,end:I}=n.clips[g];p(y,w,P*(1-C)+I*C)}else for(let g=0,y=0;g<i;g++,y+=4)p(0,y,g/(i-1));return u}var Lk={paint:new ne({"hillshade-illumination-direction":new B(je.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new B(je.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new B(je.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new B(je.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new B(je.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new B(je.paint_hillshade["hillshade-accent-color"])})};const Ok=xe([{name:"a_pos",components:2,type:"Int16"}],4),{members:zk}=Ok;var zy={exports:{}};function Mm(n,t,i){i=i||2;var l,u,p,g,y,b,w,C=t&&t.length,P=C?t[0]*i:n.length,I=w2(n,0,P,i,!0),O=[];if(!I||I.next===I.prev)return O;if(C&&(I=function(F,G,Q,ce){var ee,oe,he,ue=[];for(ee=0,oe=G.length;ee<oe;ee++)(he=w2(F,G[ee]*ce,ee<oe-1?G[ee+1]*ce:F.length,ce,!1))===he.next&&(he.steiner=!0),ue.push(Vk(he));for(ue.sort(Nk),ee=0;ee<ue.length;ee++)Q=jk(ue[ee],Q);return Q}(n,t,I,i)),n.length>80*i){l=p=n[0],u=g=n[1];for(var z=i;z<P;z+=i)(y=n[z])<l&&(l=y),(b=n[z+1])<u&&(u=b),y>p&&(p=y),b>g&&(g=b);w=(w=Math.max(p-l,g-u))!==0?32767/w:0}return Vd(I,O,i,l,u,w,0),O}function w2(n,t,i,l,u){var p,g;if(u===By(n,t,i,l)>0)for(p=t;p<i;p+=l)g=S2(p,n[p],n[p+1],g);else for(p=i-l;p>=t;p-=l)g=S2(p,n[p],n[p+1],g);return g&&Pm(g,g.next)&&(Gd(g),g=g.next),g}function ac(n,t){if(!n)return n;t||(t=n);var i,l=n;do if(i=!1,l.steiner||!Pm(l,l.next)&&sn(l.prev,l,l.next)!==0)l=l.next;else{if(Gd(l),(l=t=l.prev)===l.next)break;i=!0}while(i||l!==t);return t}function Vd(n,t,i,l,u,p,g){if(n){!g&&p&&function(C,P,I,O){var z=C;do z.z===0&&(z.z=Ry(z.x,z.y,P,I,O)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==C);z.prevZ.nextZ=null,z.prevZ=null,function(F){var G,Q,ce,ee,oe,he,ue,Le,Me=1;do{for(Q=F,F=null,oe=null,he=0;Q;){for(he++,ce=Q,ue=0,G=0;G<Me&&(ue++,ce=ce.nextZ);G++);for(Le=Me;ue>0||Le>0&&ce;)ue!==0&&(Le===0||!ce||Q.z<=ce.z)?(ee=Q,Q=Q.nextZ,ue--):(ee=ce,ce=ce.nextZ,Le--),oe?oe.nextZ=ee:F=ee,ee.prevZ=oe,oe=ee;Q=ce}oe.nextZ=null,Me*=2}while(he>1)}(z)}(n,l,u,p);for(var y,b,w=n;n.prev!==n.next;)if(y=n.prev,b=n.next,p?Dk(n,l,u,p):Rk(n))t.push(y.i/i|0),t.push(n.i/i|0),t.push(b.i/i|0),Gd(n),n=b.next,w=b.next;else if((n=b)===w){g?g===1?Vd(n=Bk(ac(n),t,i),t,i,l,u,p,2):g===2&&Fk(n,t,i,l,u,p):Vd(ac(n),t,i,l,u,p,1);break}}}function Rk(n){var t=n.prev,i=n,l=n.next;if(sn(t,i,l)>=0)return!1;for(var u=t.x,p=i.x,g=l.x,y=t.y,b=i.y,w=l.y,C=u<p?u<g?u:g:p<g?p:g,P=y<b?y<w?y:w:b<w?b:w,I=u>p?u>g?u:g:p>g?p:g,O=y>b?y>w?y:w:b>w?b:w,z=l.next;z!==t;){if(z.x>=C&&z.x<=I&&z.y>=P&&z.y<=O&&Au(u,y,p,b,g,w,z.x,z.y)&&sn(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function Dk(n,t,i,l){var u=n.prev,p=n,g=n.next;if(sn(u,p,g)>=0)return!1;for(var y=u.x,b=p.x,w=g.x,C=u.y,P=p.y,I=g.y,O=y<b?y<w?y:w:b<w?b:w,z=C<P?C<I?C:I:P<I?P:I,F=y>b?y>w?y:w:b>w?b:w,G=C>P?C>I?C:I:P>I?P:I,Q=Ry(O,z,t,i,l),ce=Ry(F,G,t,i,l),ee=n.prevZ,oe=n.nextZ;ee&&ee.z>=Q&&oe&&oe.z<=ce;){if(ee.x>=O&&ee.x<=F&&ee.y>=z&&ee.y<=G&&ee!==u&&ee!==g&&Au(y,C,b,P,w,I,ee.x,ee.y)&&sn(ee.prev,ee,ee.next)>=0||(ee=ee.prevZ,oe.x>=O&&oe.x<=F&&oe.y>=z&&oe.y<=G&&oe!==u&&oe!==g&&Au(y,C,b,P,w,I,oe.x,oe.y)&&sn(oe.prev,oe,oe.next)>=0))return!1;oe=oe.nextZ}for(;ee&&ee.z>=Q;){if(ee.x>=O&&ee.x<=F&&ee.y>=z&&ee.y<=G&&ee!==u&&ee!==g&&Au(y,C,b,P,w,I,ee.x,ee.y)&&sn(ee.prev,ee,ee.next)>=0)return!1;ee=ee.prevZ}for(;oe&&oe.z<=ce;){if(oe.x>=O&&oe.x<=F&&oe.y>=z&&oe.y<=G&&oe!==u&&oe!==g&&Au(y,C,b,P,w,I,oe.x,oe.y)&&sn(oe.prev,oe,oe.next)>=0)return!1;oe=oe.nextZ}return!0}function Bk(n,t,i){var l=n;do{var u=l.prev,p=l.next.next;!Pm(u,p)&&E2(u,l,l.next,p)&&$d(u,p)&&$d(p,u)&&(t.push(u.i/i|0),t.push(l.i/i|0),t.push(p.i/i|0),Gd(l),Gd(l.next),l=n=p),l=l.next}while(l!==n);return ac(l)}function Fk(n,t,i,l,u,p){var g=n;do{for(var y=g.next.next;y!==g.prev;){if(g.i!==y.i&&$k(g,y)){var b=T2(g,y);return g=ac(g,g.next),b=ac(b,b.next),Vd(g,t,i,l,u,p,0),void Vd(b,t,i,l,u,p,0)}y=y.next}g=g.next}while(g!==n)}function Nk(n,t){return n.x-t.x}function jk(n,t){var i=function(u,p){var g,y=p,b=u.x,w=u.y,C=-1/0;do{if(w<=y.y&&w>=y.next.y&&y.next.y!==y.y){var P=y.x+(w-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(P<=b&&P>C&&(C=P,g=y.x<y.next.x?y:y.next,P===b))return g}y=y.next}while(y!==p);if(!g)return null;var I,O=g,z=g.x,F=g.y,G=1/0;y=g;do b>=y.x&&y.x>=z&&b!==y.x&&Au(w<F?b:C,w,z,F,w<F?C:b,w,y.x,y.y)&&(I=Math.abs(w-y.y)/(b-y.x),$d(y,u)&&(I<G||I===G&&(y.x>g.x||y.x===g.x&&Uk(g,y)))&&(g=y,G=I)),y=y.next;while(y!==O);return g}(n,t);if(!i)return t;var l=T2(i,n);return ac(l,l.next),ac(i,i.next)}function Uk(n,t){return sn(n.prev,n,t.prev)<0&&sn(t.next,n,n.next)<0}function Ry(n,t,i,l,u){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-i)*u|0)|n<<8))|n<<4))|n<<2))|n<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-l)*u|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Vk(n){var t=n,i=n;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==n);return i}function Au(n,t,i,l,u,p,g,y){return(u-g)*(t-y)>=(n-g)*(p-y)&&(n-g)*(l-y)>=(i-g)*(t-y)&&(i-g)*(p-y)>=(u-g)*(l-y)}function $k(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!function(i,l){var u=i;do{if(u.i!==i.i&&u.next.i!==i.i&&u.i!==l.i&&u.next.i!==l.i&&E2(u,u.next,i,l))return!0;u=u.next}while(u!==i);return!1}(n,t)&&($d(n,t)&&$d(t,n)&&function(i,l){var u=i,p=!1,g=(i.x+l.x)/2,y=(i.y+l.y)/2;do u.y>y!=u.next.y>y&&u.next.y!==u.y&&g<(u.next.x-u.x)*(y-u.y)/(u.next.y-u.y)+u.x&&(p=!p),u=u.next;while(u!==i);return p}(n,t)&&(sn(n.prev,n,t.prev)||sn(n,t.prev,t))||Pm(n,t)&&sn(n.prev,n,n.next)>0&&sn(t.prev,t,t.next)>0)}function sn(n,t,i){return(t.y-n.y)*(i.x-t.x)-(t.x-n.x)*(i.y-t.y)}function Pm(n,t){return n.x===t.x&&n.y===t.y}function E2(n,t,i,l){var u=km(sn(n,t,i)),p=km(sn(n,t,l)),g=km(sn(i,l,n)),y=km(sn(i,l,t));return u!==p&&g!==y||!(u!==0||!Im(n,i,t))||!(p!==0||!Im(n,l,t))||!(g!==0||!Im(i,n,l))||!(y!==0||!Im(i,t,l))}function Im(n,t,i){return t.x<=Math.max(n.x,i.x)&&t.x>=Math.min(n.x,i.x)&&t.y<=Math.max(n.y,i.y)&&t.y>=Math.min(n.y,i.y)}function km(n){return n>0?1:n<0?-1:0}function $d(n,t){return sn(n.prev,n,n.next)<0?sn(n,t,n.next)>=0&&sn(n,n.prev,t)>=0:sn(n,t,n.prev)<0||sn(n,n.next,t)<0}function T2(n,t){var i=new Dy(n.i,n.x,n.y),l=new Dy(t.i,t.x,t.y),u=n.next,p=t.prev;return n.next=t,t.prev=n,i.next=u,u.prev=i,l.next=i,i.prev=l,p.next=l,l.prev=p,l}function S2(n,t,i,l){var u=new Dy(n,t,i);return l?(u.next=l.next,u.prev=l,l.next.prev=u,l.next=u):(u.prev=u,u.next=u),u}function Gd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Dy(n,t,i){this.i=n,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function By(n,t,i,l){for(var u=0,p=t,g=i-l;p<i;p+=l)u+=(n[g]-n[p])*(n[p+1]+n[g+1]),g=p;return u}zy.exports=Mm,zy.exports.default=Mm,Mm.deviation=function(n,t,i,l){var u=t&&t.length,p=Math.abs(By(n,0,u?t[0]*i:n.length,i));if(u)for(var g=0,y=t.length;g<y;g++)p-=Math.abs(By(n,t[g]*i,g<y-1?t[g+1]*i:n.length,i));var b=0;for(g=0;g<l.length;g+=3){var w=l[g]*i,C=l[g+1]*i,P=l[g+2]*i;b+=Math.abs((n[w]-n[P])*(n[C+1]-n[w+1])-(n[w]-n[C])*(n[P+1]-n[w+1]))}return p===0&&b===0?0:Math.abs((b-p)/p)},Mm.flatten=function(n){for(var t=n[0][0].length,i={vertices:[],holes:[],dimensions:t},l=0,u=0;u<n.length;u++){for(var p=0;p<n[u].length;p++)for(var g=0;g<t;g++)i.vertices.push(n[u][p][g]);u>0&&i.holes.push(l+=n[u-1].length)}return i};var Fy=te(zy.exports);function Gk(n,t,i,l,u){A2(n,t,i||0,l||n.length-1,u||Zk)}function A2(n,t,i,l,u){for(;l>i;){if(l-i>600){var p=l-i+1,g=t-i+1,y=Math.log(p),b=.5*Math.exp(2*y/3),w=.5*Math.sqrt(y*b*(p-b)/p)*(g-p/2<0?-1:1);A2(n,t,Math.max(i,Math.floor(t-g*b/p+w)),Math.min(l,Math.floor(t+(p-g)*b/p+w)),u)}var C=n[t],P=i,I=l;for(Zd(n,i,t),u(n[l],C)>0&&Zd(n,i,l);P<I;){for(Zd(n,P,I),P++,I--;u(n[P],C)<0;)P++;for(;u(n[I],C)>0;)I--}u(n[i],C)===0?Zd(n,i,I):Zd(n,++I,l),I<=t&&(i=I+1),t<=I&&(l=I-1)}}function Zd(n,t,i){var l=n[t];n[t]=n[i],n[i]=l}function Zk(n,t){return n<t?-1:n>t?1:0}function Ny(n,t){const i=n.length;if(i<=1)return[n];const l=[];let u,p;for(let g=0;g<i;g++){const y=Nc(n[g]);y!==0&&(n[g].area=Math.abs(y),p===void 0&&(p=y<0),p===y<0?(u&&l.push(u),u=[n[g]]):u.push(n[g]))}if(u&&l.push(u),t>1)for(let g=0;g<l.length;g++)l[g].length<=t||(Gk(l[g],t,1,l[g].length-1,Hk),l[g]=l[g].slice(0,t));return l}function Hk(n,t){return t.area-n.area}function jy(n,t,i){const l=i.patternDependencies;let u=!1;for(const p of t){const g=p.paint.get(`${n}-pattern`);g.isConstant()||(u=!0);const y=g.constantOr(null);y&&(u=!0,l[y]=!0)}return u}function Uy(n,t,i,l,u){const p=u.patternDependencies;for(const g of t){const y=g.paint.get(`${n}-pattern`).value;if(y.kind!=="constant"){let b=y.evaluate({zoom:l},i,{},u.availableImages);b=b&&b.name?b.name:b,p[b]=!0,i.patterns[g.id]=b}}return i}class Lm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(i=>i.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Je,this.indexArray=new Tt,this.indexArray2=new An,this.programConfigurations=new Jl(t.layers,t.zoom),this.segments=new on,this.segments2=new on,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.projection=t.projection}populate(t,i,l,u){this.hasPattern=jy("fill",this.layers,i);const p=this.layers[0].layout.get("fill-sort-key"),g=[];for(const{feature:y,id:b,index:w,sourceLayerIndex:C}of t){const P=this.layers[0]._featureFilter.needGeometry,I=oc(y,P);if(!this.layers[0]._featureFilter.filter(new M(this.zoom),I,l))continue;const O=p?p.evaluate(I,{},l,i.availableImages):void 0,z={id:b,properties:y.properties,type:y.type,sourceLayerIndex:C,index:w,geometry:P?I.geometry:Ws(y,l,u),patterns:{},sortKey:O};g.push(z)}p&&g.sort((y,b)=>y.sortKey-b.sortKey);for(const y of g){const{geometry:b,index:w,sourceLayerIndex:C}=y;if(this.hasPattern){const P=Uy("fill",this.layers,y,this.zoom,i);this.patternFeatures.push(P)}else this.addFeature(y,b,w,l,{},i.availableImages);i.featureIndex.insert(t[w].feature,b,w,C,this.index)}}update(t,i,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,l,u)}addFeatures(t,i,l,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,zk),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,i,l,u,p,g=[]){for(const y of Ny(i,500)){let b=0;for(const z of y)b+=z.length;const w=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),C=w.vertexLength,P=[],I=[];for(const z of y){if(z.length===0)continue;z!==y[0]&&I.push(P.length/2);const F=this.segments2.prepareSegment(z.length,this.layoutVertexArray,this.indexArray2),G=F.vertexLength;this.layoutVertexArray.emplaceBack(z[0].x,z[0].y),this.indexArray2.emplaceBack(G+z.length-1,G),P.push(z[0].x),P.push(z[0].y);for(let Q=1;Q<z.length;Q++)this.layoutVertexArray.emplaceBack(z[Q].x,z[Q].y),this.indexArray2.emplaceBack(G+Q-1,G+Q),P.push(z[Q].x),P.push(z[Q].y);F.vertexLength+=z.length,F.primitiveLength+=z.length}const O=Fy(P,I);for(let z=0;z<O.length;z+=3)this.indexArray.emplaceBack(C+O[z],C+O[z+1],C+O[z+2]);w.vertexLength+=b,w.primitiveLength+=O.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,p,g,u)}}yt(Lm,"FillBucket",{omit:["layers","patternFeatures"]});const qk=new ne({"fill-sort-key":new H(je.layout_fill["fill-sort-key"])});var Wk={paint:new ne({"fill-antialias":new B(je.paint_fill["fill-antialias"]),"fill-opacity":new H(je.paint_fill["fill-opacity"]),"fill-color":new H(je.paint_fill["fill-color"]),"fill-outline-color":new H(je.paint_fill["fill-outline-color"]),"fill-translate":new B(je.paint_fill["fill-translate"]),"fill-translate-anchor":new B(je.paint_fill["fill-translate-anchor"]),"fill-pattern":new H(je.paint_fill["fill-pattern"])}),layout:qk};const Xk=xe([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Kk=xe([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Yk=xe([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Qk}=Xk;var Om={},Jk=We,C2=Cu;function Cu(n,t,i,l,u){this.properties={},this.extent=i,this.type=0,this._pbf=n,this._geometry=-1,this._keys=l,this._values=u,n.readFields(e4,this,t)}function e4(n,t,i){n==1?t.id=i.readVarint():n==2?function(l,u){for(var p=l.readVarint()+l.pos;l.pos<p;){var g=u._keys[l.readVarint()],y=u._values[l.readVarint()];u.properties[g]=y}}(i,t):n==3?t.type=i.readVarint():n==4&&(t._geometry=i.pos)}function t4(n){for(var t,i,l=0,u=0,p=n.length,g=p-1;u<p;g=u++)l+=((i=n[g]).x-(t=n[u]).x)*(t.y+i.y);return l}Cu.types=["Unknown","Point","LineString","Polygon"],Cu.prototype.loadGeometry=function(){var n=this._pbf;n.pos=this._geometry;for(var t,i=n.readVarint()+n.pos,l=1,u=0,p=0,g=0,y=[];n.pos<i;){if(u<=0){var b=n.readVarint();l=7&b,u=b>>3}if(u--,l===1||l===2)p+=n.readSVarint(),g+=n.readSVarint(),l===1&&(t&&y.push(t),t=[]),t.push(new Jk(p,g));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&y.push(t),y},Cu.prototype.bbox=function(){var n=this._pbf;n.pos=this._geometry;for(var t=n.readVarint()+n.pos,i=1,l=0,u=0,p=0,g=1/0,y=-1/0,b=1/0,w=-1/0;n.pos<t;){if(l<=0){var C=n.readVarint();i=7&C,l=C>>3}if(l--,i===1||i===2)(u+=n.readSVarint())<g&&(g=u),u>y&&(y=u),(p+=n.readSVarint())<b&&(b=p),p>w&&(w=p);else if(i!==7)throw new Error("unknown command "+i)}return[g,b,y,w]},Cu.prototype.toGeoJSON=function(n,t,i){var l,u,p=this.extent*Math.pow(2,i),g=this.extent*n,y=this.extent*t,b=this.loadGeometry(),w=Cu.types[this.type];function C(O){for(var z=0;z<O.length;z++){var F=O[z];O[z]=[360*(F.x+g)/p-180,360/Math.PI*Math.atan(Math.exp((180-360*(F.y+y)/p)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(l=0;l<b.length;l++)P[l]=b[l][0];C(b=P);break;case 2:for(l=0;l<b.length;l++)C(b[l]);break;case 3:for(b=function(O){var z=O.length;if(z<=1)return[O];for(var F,G,Q=[],ce=0;ce<z;ce++){var ee=t4(O[ce]);ee!==0&&(G===void 0&&(G=ee<0),G===ee<0?(F&&Q.push(F),F=[O[ce]]):F.push(O[ce]))}return F&&Q.push(F),Q}(b),l=0;l<b.length;l++)for(u=0;u<b[l].length;u++)C(b[l][u])}b.length===1?b=b[0]:w="Multi"+w;var I={type:"Feature",geometry:{type:w,coordinates:b},properties:this.properties};return"id"in this&&(I.id=this.id),I};var r4=C2,M2=P2;function P2(n,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=n,this._keys=[],this._values=[],this._features=[],n.readFields(n4,this,t),this.length=this._features.length}function n4(n,t,i){n===15?t.version=i.readVarint():n===1?t.name=i.readString():n===5?t.extent=i.readVarint():n===2?t._features.push(i.pos):n===3?t._keys.push(i.readString()):n===4&&t._values.push(function(l){for(var u=null,p=l.readVarint()+l.pos;l.pos<p;){var g=l.readVarint()>>3;u=g===1?l.readString():g===2?l.readFloat():g===3?l.readDouble():g===4?l.readVarint64():g===5?l.readVarint():g===6?l.readSVarint():g===7?l.readBoolean():null}return u}(i))}P2.prototype.feature=function(n){if(n<0||n>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[n];var t=this._pbf.readVarint()+this._pbf.pos;return new r4(this._pbf,t,this.extent,this._keys,this._values)};var i4=M2;function o4(n,t,i){if(n===3){var l=new i4(i,i.readVarint()+i.pos);l.length&&(t[l.name]=l)}}var Vy=Om.VectorTile=function(n,t){this.layers=n.readFields(o4,{},t)},zm=Om.VectorTileFeature=C2;function Rm(n,t,i,l){const u=[],p=l===0?(g,y,b,w,C,P)=>{g.push(new Te(P,b+(P-y)/(w-y)*(C-b)))}:(g,y,b,w,C,P)=>{g.push(new Te(y+(P-b)/(C-b)*(w-y),P))};for(const g of n){const y=[];for(const b of g){if(b.length<=2)continue;const w=[];for(let I=0;I<b.length-1;I++){const O=b[I].x,z=b[I].y,F=b[I+1].x,G=b[I+1].y,Q=l===0?O:z,ce=l===0?F:G;Q<t?ce>t&&p(w,O,z,F,G,t):Q>i?ce<i&&p(w,O,z,F,G,i):w.push(b[I]),ce<t&&Q>=t&&p(w,O,z,F,G,t),ce>i&&Q<=i&&p(w,O,z,F,G,i)}let C=b[b.length-1];const P=l===0?C.x:C.y;P>=t&&P<=i&&w.push(C),w.length&&(C=w[w.length-1],w[0].x===C.x&&w[0].y===C.y||w.push(w[0]),y.push(w))}y.length&&u.push(y)}return u}Om.VectorTileLayer=M2;const s4=zm.types,a4=Math.pow(2,13);function Hd(n,t,i,l,u,p,g,y){n.emplaceBack((t<<1)+g,(i<<1)+p,(Math.floor(l*a4)<<1)+u,Math.round(y))}function qd(n,t,i){n.emplaceBack(t.x,t.y,t.z,i[0]*16384,i[1]*16384,i[2]*16384)}class I2{constructor(){this.acc=new Te(0,0),this.polyCount=[]}startRing(t){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new Te(t.x,t.y),this.max=new Te(t.x,t.y))}append(t,i){this.currentPolyCount.edges++,this.acc._add(t);const l=this.min,u=this.max;t.x<l.x?l.x=t.x:t.x>u.x&&(u.x=t.x),t.y<l.y?l.y=t.y:t.y>u.y&&(u.y=t.y),((t.x===0||t.x===Pt)&&t.x===i.x)!=((t.y===0||t.y===Pt)&&t.y===i.y)&&this.processBorderOverlap(t,i),i.x<0!=t.x<0&&this.addBorderIntersection(0,rr(i.y,t.y,(0-i.x)/(t.x-i.x))),i.x>Pt!=t.x>Pt&&this.addBorderIntersection(1,rr(i.y,t.y,(Pt-i.x)/(t.x-i.x))),i.y<0!=t.y<0&&this.addBorderIntersection(2,rr(i.x,t.x,(0-i.y)/(t.y-i.y))),i.y>Pt!=t.y>Pt&&this.addBorderIntersection(3,rr(i.x,t.x,(Pt-i.y)/(t.y-i.y)))}addBorderIntersection(t,i){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const l=this.borders[t];i<l[0]&&(l[0]=i),i>l[1]&&(l[1]=i)}processBorderOverlap(t,i){if(t.x===i.x){if(t.y===i.y)return;const l=t.x===0?0:1;this.addBorderIntersection(l,i.y),this.addBorderIntersection(l,t.y)}else{const l=t.y===0?2:3;this.addBorderIntersection(l,i.x),this.addBorderIntersection(l,t.x)}}centroid(){const t=this.polyCount.reduce((i,l)=>i+l.edges,0);return t!==0?this.acc.div(t)._round():new Te(0,0)}span(){return new Te(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((t,i)=>t+ +(i[0]!==Number.MAX_VALUE),0)}}class Wd{constructor(t){this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(i=>i.id),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new Ge,this.centroidVertexArray=new Bo,this.indexArray=new Tt,this.programConfigurations=new Jl(t.layers,t.zoom),this.segments=new on,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id),this.enableTerrain=t.enableTerrain}populate(t,i,l,u){this.features=[],this.hasPattern=jy("fill-extrusion",this.layers,i),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(p){const g=Math.exp(Math.PI*(1-p.y/(1<<p.z)*2));return 80150034*g/(g*g+1)/Pt/(1<<p.z)}(l),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:p,id:g,index:y,sourceLayerIndex:b}of t){const w=this.layers[0]._featureFilter.needGeometry,C=oc(p,w);if(!this.layers[0]._featureFilter.filter(new M(this.zoom),C,l))continue;const P={id:g,sourceLayerIndex:b,index:y,geometry:w?C.geometry:Ws(p,l,u),properties:p.properties,type:p.type,patterns:{}},I=this.layoutVertexArray.length;this.hasPattern?this.features.push(Uy("fill-extrusion",this.layers,P,this.zoom,i)):this.addFeature(P,P.geometry,y,l,{},i.availableImages,u),i.featureIndex.insert(p,P.geometry,y,b,this.index,I)}this.sortBorders()}addFeatures(t,i,l,u,p){for(const g of this.features){const{geometry:y}=g;this.addFeature(g,y,g.index,i,l,u,p)}this.sortBorders()}update(t,i,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qk),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=t.createVertexBuffer(this.layoutVertexExtArray,Yk.members,!0))),this.programConfigurations.upload(t),this.uploaded=!0}uploadCentroid(t){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Kk.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,i,l,u,p,g,y){const b=[new Te(0,0),new Te(Pt,Pt)],w=y.projection,C=w.name==="globe",P=this.enableTerrain&&!C?new I2:null,I=s4[t.type]==="Polygon";C&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new tt);const O=Ny(i,500);for(let Q=O.length-1;Q>=0;Q--){const ce=O[Q];(ce.length===0||(z=ce[0]).every(ee=>ee.x<=0)||z.every(ee=>ee.x>=Pt)||z.every(ee=>ee.y<=0)||z.every(ee=>ee.y>=Pt))&&O.splice(Q,1)}var z;let F;if(C)F=B2(O,b,u);else{F=[];for(const Q of O)F.push({polygon:Q,bounds:b})}const G=I?this.edgeRadius:0;for(const{polygon:Q,bounds:ce}of F){let ee=0,oe=0;for(const ue of Q)I&&!ue[0].equals(ue[ue.length-1])&&ue.push(ue[0]),oe+=I?ue.length-1:ue.length;const he=this.segments.prepareSegment((I?5:4)*oe,this.layoutVertexArray,this.indexArray);if(I){const ue=[],Le=[];ee=he.vertexLength;for(const Ue of Q){let et,De;Ue.length&&Ue!==Q[0]&&Le.push(ue.length/2),et=Ue[1].sub(Ue[0])._perp()._unit();for(let He=1;He<Ue.length;He++){const qe=Ue[He],Ye=Ue[He===Ue.length-1?1:He+1];let{x:it,y:Ne}=qe;if(G){De=Ye.sub(qe)._perp()._unit();const ut=et.add(De)._unit(),bt=G*Math.min(4,1/(et.x*ut.x+et.y*ut.y));it+=bt*ut.x,Ne+=bt*ut.y,et=De}Hd(this.layoutVertexArray,it,Ne,0,0,1,1,0),he.vertexLength++,ue.push(qe.x,qe.y),C&&qd(this.layoutVertexExtArray,w.projectTilePoint(it,Ne,u),w.upVector(u,it,Ne))}}const Me=Fy(ue,Le);for(let Ue=0;Ue<Me.length;Ue+=3)this.indexArray.emplaceBack(ee+Me[Ue],ee+Me[Ue+2],ee+Me[Ue+1]),he.primitiveLength++}for(const ue of Q){P&&ue.length&&P.startRing(ue[0]);let Le,Me,Ue,et=ue.length>4&&z2(ue[ue.length-2],ue[0],ue[1]),De=G?l4(ue[ue.length-2],ue[0],ue[1],G):0;Me=ue[1].sub(ue[0])._perp()._unit();let He=!0;for(let qe=1,Ye=0;qe<ue.length;qe++){let it=ue[qe-1],Ne=ue[qe];const ut=ue[qe===ue.length-1?1:qe+1];if(P&&I&&P.currentPolyCount.top++,O2(Ne,it,ce)){G&&(Me=ut.sub(Ne)._perp()._unit(),He=!He);continue}P&&P.append(Ne,it);const bt=Ne.sub(it)._perp(),ht=bt.x/(Math.abs(bt.x)+Math.abs(bt.y)),Dt=bt.y>0?1:0,ot=it.dist(Ne);if(Ye+ot>32768&&(Ye=0),G){Ue=ut.sub(Ne)._perp()._unit();let Ft=L2(it,Ne,ut,k2(Me,Ue),G);isNaN(Ft)&&(Ft=0);const Lt=Ne.sub(it)._unit();it=it.add(Lt.mult(De))._round(),Ne=Ne.add(Lt.mult(-Ft))._round(),De=Ft,Me=Ue}const Ct=he.vertexLength,Bt=ue.length>4&&z2(it,Ne,ut);let or=R2(Ye,et,He);if(Hd(this.layoutVertexArray,it.x,it.y,ht,Dt,0,0,or),Hd(this.layoutVertexArray,it.x,it.y,ht,Dt,0,1,or),Ye+=ot,or=R2(Ye,Bt,!He),et=Bt,Hd(this.layoutVertexArray,Ne.x,Ne.y,ht,Dt,0,0,or),Hd(this.layoutVertexArray,Ne.x,Ne.y,ht,Dt,0,1,or),he.vertexLength+=4,this.indexArray.emplaceBack(Ct+0,Ct+1,Ct+2),this.indexArray.emplaceBack(Ct+1,Ct+3,Ct+2),he.primitiveLength+=2,G){const Ft=ee+(qe===1?ue.length-2:qe-2),Lt=qe===1?ee:Ft+1;if(this.indexArray.emplaceBack(Ct+1,Ft,Ct+3),this.indexArray.emplaceBack(Ft,Lt,Ct+3),he.primitiveLength+=2,Le===void 0&&(Le=Ct),!O2(ut,ue[qe],ce)){const kr=qe===ue.length-1?Le:he.vertexLength;this.indexArray.emplaceBack(Ct+2,Ct+3,kr),this.indexArray.emplaceBack(Ct+3,kr+1,kr),this.indexArray.emplaceBack(Ct+3,Lt,kr+1),he.primitiveLength+=3}He=!He}if(C){const Ft=this.layoutVertexExtArray,Lt=w.projectTilePoint(it.x,it.y,u),kr=w.projectTilePoint(Ne.x,Ne.y,u),Ut=w.upVector(u,it.x,it.y),Vt=w.upVector(u,Ne.x,Ne.y);qd(Ft,Lt,Ut),qd(Ft,Lt,Ut),qd(Ft,kr,Vt),qd(Ft,kr,Vt)}}I&&(ee+=ue.length-1)}}if(P&&P.polyCount.length>0){if(P.borders){P.vertexArrayOffset=this.centroidVertexArray.length;const Q=P.borders,ce=this.featuresOnBorder.push(P)-1;for(let ee=0;ee<4;ee++)Q[ee][0]!==Number.MAX_VALUE&&this.borders[ee].push(ce)}this.encodeCentroid(P.borders?void 0:P.centroid(),P)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,p,g,u)}sortBorders(){for(let t=0;t<4;t++)this.borders[t].sort((i,l)=>this.featuresOnBorder[i].borders[t][0]-this.featuresOnBorder[l].borders[t][0])}encodeCentroid(t,i,l=!0){let u,p;if(t)if(t.y!==0){const y=i.span()._mult(this.tileToMeter);u=(Math.max(t.x,1)<<3)+Math.min(7,Math.round(y.x/10)),p=(Math.max(t.y,1)<<3)+Math.min(7,Math.round(y.y/10))}else u=Math.ceil(7*(t.x+450)),p=0;else u=0,p=+l;let g=l?this.centroidVertexArray.length:i.vertexArrayOffset;for(const y of i.polyCount){l&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*y.edges+y.top);for(let b=0;b<y.top;b++)this.centroidVertexArray.emplace(g++,u,p);for(let b=0;b<2*y.edges;b++)this.centroidVertexArray.emplace(g++,0,p),this.centroidVertexArray.emplace(g++,u,p)}}}function k2(n,t){const i=n.add(t)._unit();return n.x*i.x+n.y*i.y}function l4(n,t,i,l){const u=t.sub(n)._perp()._unit(),p=i.sub(t)._perp()._unit();return L2(n,t,i,k2(u,p),l)}function L2(n,t,i,l,u){const p=Math.sqrt(1-l*l);return Math.min(n.dist(t)/3,t.dist(i)/3,u*p/l)}function O2(n,t,i){return n.x<i[0].x&&t.x<i[0].x||n.x>i[1].x&&t.x>i[1].x||n.y<i[0].y&&t.y<i[0].y||n.y>i[1].y&&t.y>i[1].y}function z2(n,t,i){if(n.x<0||n.x>=Pt||t.x<0||t.x>=Pt||i.x<0||i.x>=Pt)return!1;const l=i.sub(t),u=l.perp(),p=n.sub(t);return(l.x*p.x+l.y*p.y)/Math.sqrt((l.x*l.x+l.y*l.y)*(p.x*p.x+p.y*p.y))>-.866&&u.x*p.x+u.y*p.y<0}function R2(n,t,i){const l=t?2|n:-3&n;return i?1|l:-2&l}function D2(){const n=Math.PI/32,t=Math.tan(n),i=Ud;return i*Math.sqrt(1+2*t*t)-i}function B2(n,t,i){const l=1<<i.z,u=Ki(i.x/l),p=Ki((i.x+1)/l),g=Vn(i.y/l),y=Vn((i.y+1)/l);return function(b,w,C,P,I=0,O){const z=[];if(!b.length||!C||!P)return z;const F=(ue,Le)=>{for(const Me of ue)z.push({polygon:Me,bounds:Le})},G=Math.ceil(Math.log2(C)),Q=Math.ceil(Math.log2(P)),ce=G-Q,ee=[];for(let ue=0;ue<Math.abs(ce);ue++)ee.push(ce>0?0:1);for(let ue=0;ue<Math.min(G,Q);ue++)ee.push(0),ee.push(1);let oe=b;if(oe=Rm(oe,w[0].y-I,w[1].y+I,1),oe=Rm(oe,w[0].x-I,w[1].x+I,0),!oe.length)return z;const he=[];for(ee.length?he.push({polygons:oe,bounds:w,depth:0}):F(oe,w);he.length;){const ue=he.pop(),Le=ue.depth,Me=ee[Le],Ue=ue.bounds[0],et=ue.bounds[1],De=Me===0?Ue.x:Ue.y,He=Me===0?et.x:et.y,qe=O?O(Me,De,He):.5*(De+He),Ye=Rm(ue.polygons,De-I,qe+I,Me),it=Rm(ue.polygons,qe-I,He+I,Me);if(Ye.length){const Ne=[Ue,new Te(Me===0?qe:et.x,Me===1?qe:et.y)];ee.length>Le+1?he.push({polygons:Ye,bounds:Ne,depth:Le+1}):F(Ye,Ne)}if(it.length){const Ne=[new Te(Me===0?qe:Ue.x,Me===1?qe:Ue.y),et];ee.length>Le+1?he.push({polygons:it,bounds:Ne,depth:Le+1}):F(it,Ne)}}return z}(n,t,Math.ceil((p-u)/11.25),Math.ceil((g-y)/11.25),1,(b,w,C)=>{if(b===0)return .5*(w+C);{const P=Vn((i.y+w/Pt)/l);return(ps(.5*(Vn((i.y+C/Pt)/l)+P))*l-i.y)*Pt}})}yt(Wd,"FillExtrusionBucket",{omit:["layers","features"]}),yt(I2,"PartMetadata");const c4=new ne({"fill-extrusion-edge-radius":new B(je["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var u4={paint:new ne({"fill-extrusion-opacity":new B(je["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new H(je["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new B(je["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new B(je["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new H(je["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new H(je["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new H(je["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new B(je["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new B(je["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new B(je["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new B(je["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:c4};function F2(n,t,i){var l=2*Math.PI*6378137/256/Math.pow(2,i);return[n*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}class Dm{constructor(t,i,l){this.z=t,this.x=i,this.y=l,this.key=Xd(0,t,t,i,l)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,i){const l=function(p,g,y){var b=F2(256*p,256*(g=Math.pow(2,y)-g-1),y),w=F2(256*(p+1),256*(g+1),y);return b[0]+","+b[1]+","+w[0]+","+w[1]}(this.x,this.y,this.z),u=function(p,g,y){let b,w="";for(let C=p;C>0;C--)b=1<<C-1,w+=(g&b?1:0)+(y&b?2:0);return w}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(i==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",l)}toString(){return`${this.z}/${this.x}/${this.y}`}}class N2{constructor(t,i){this.wrap=t,this.canonical=i,this.key=Xd(t,i.z,i.z,i.x,i.y)}}class ii{constructor(t,i,l,u,p){this.overscaledZ=t,this.wrap=i,this.canonical=new Dm(l,+u,+p),this.key=i===0&&t===l?this.canonical.key:Xd(i,t,l,u,p)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){const i=this.canonical.z-t;return t>this.canonical.z?new ii(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ii(t,this.wrap,t,this.canonical.x>>i,this.canonical.y>>i)}calculateScaledKey(t,i=!0){if(this.overscaledZ===t&&i)return this.key;if(t>this.canonical.z)return Xd(this.wrap*+i,t,this.canonical.z,this.canonical.x,this.canonical.y);{const l=this.canonical.z-t;return Xd(this.wrap*+i,t,t,this.canonical.x>>l,this.canonical.y>>l)}}isChildOf(t){if(t.wrap!==this.wrap)return!1;const i=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>i&&t.canonical.y===this.canonical.y>>i}children(t){if(this.overscaledZ>=t)return[new ii(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const i=this.canonical.z+1,l=2*this.canonical.x,u=2*this.canonical.y;return[new ii(i,this.wrap,i,l,u),new ii(i,this.wrap,i,l+1,u),new ii(i,this.wrap,i,l,u+1),new ii(i,this.wrap,i,l+1,u+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new ii(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new ii(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new N2(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Xd(n,t,i,l,u){const p=1<<Math.min(i,22);let g=p*(u%p)+l%p;return n&&i<22&&(g+=p*p*((n<0?-2*n-1:2*n)%(1<<2*(22-i)))),16*(32*g+i)+(t-i)}yt(Dm,"CanonicalTileID"),yt(ii,"OverscaledTileID",{omit:["projMatrix"]});class Mu extends Te{constructor(t,i,l){super(t,i),this.z=l}}function Kd(n,t){return n.x*t.x+n.y*t.y}function j2(n,t){if(n.length===1){let i=0;const l=t[i++];let u;for(;!u||l.equals(u);)if(u=t[i++],!u)return 1/0;for(;i<t.length;i++){const p=t[i],g=n[0],y=u.sub(l),b=p.sub(l),w=g.sub(l),C=Kd(y,y),P=Kd(y,b),I=Kd(b,b),O=Kd(w,y),z=Kd(w,b),F=C*I-P*P,G=(I*O-P*z)/F,Q=(C*z-P*O)/F,ce=l.z*(1-G-Q)+u.z*G+p.z*Q;if(isFinite(ce))return ce}return 1/0}{let i=1/0;for(const l of t)i=Math.min(i,l.z);return i}}function U2(n,t,i,l,u,p,g,y){const b=g*u.getElevationAt(n,t,!0,!0),w=p[0]!==0,C=w?p[1]===0?g*(p[0]/7-450):g*function(P,I,O){const z=Math.floor(I[0]/8),F=Math.floor(I[1]/8),G=10*(I[0]-8*z),Q=10*(I[1]-8*F),ce=P.getElevationAt(z,F,!0,!0),ee=P.getMeterToDEM(O),oe=Math.floor(.5*(G*ee-1)),he=Math.floor(.5*(Q*ee-1)),ue=P.tileCoordToPixel(z,F),Le=2*oe+1,Me=2*he+1,Ue=function(it,Ne,ut,bt,ht){return[it.getElevationAtPixel(Ne,ut,!0),it.getElevationAtPixel(Ne+ht,ut,!0),it.getElevationAtPixel(Ne,ut+ht,!0),it.getElevationAtPixel(Ne+bt,ut+ht,!0)]}(P,ue.x-oe,ue.y-he,Le,Me),et=Math.abs(Ue[0]-Ue[1]),De=Math.abs(Ue[2]-Ue[3]),He=Math.abs(Ue[0]-Ue[2])+Math.abs(Ue[1]-Ue[3]),qe=Math.min(.25,.5*ee*(et+De)/Le),Ye=Math.min(.25,.5*ee*He/Me);return ce+Math.max(qe*G,Ye*Q)}(u,p,y):b;return{base:b+(i===0)?-1:i,top:w?Math.max(C+l,b+i+2):b+l}}const h4=xe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:d4}=h4,f4=xe([{name:"a_packed",components:4,type:"Float32"}]),{members:p4}=f4,m4=zm.types,g4=Math.cos(Math.PI/180*37.5);class Bm{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(i=>i.id),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(i=>{this.gradients[i.id]={}}),this.layoutVertexArray=new Re,this.layoutVertexArray2=new Qe,this.indexArray=new Tt,this.programConfigurations=new Jl(t.layers,t.zoom),this.segments=new on,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(i=>i.isStateDependent()).map(i=>i.id)}populate(t,i,l,u){this.hasPattern=jy("line",this.layers,i);const p=this.layers[0].layout.get("line-sort-key"),g=[];for(const{feature:C,id:P,index:I,sourceLayerIndex:O}of t){const z=this.layers[0]._featureFilter.needGeometry,F=oc(C,z);if(!this.layers[0]._featureFilter.filter(new M(this.zoom),F,l))continue;const G=p?p.evaluate(F,{},l):void 0,Q={id:P,properties:C.properties,type:C.type,sourceLayerIndex:O,index:I,geometry:z?F.geometry:Ws(C,l,u),patterns:{},sortKey:G};g.push(Q)}p&&g.sort((C,P)=>C.sortKey-P.sortKey);const{lineAtlas:y,featureIndex:b}=i,w=this.addConstantDashes(y);for(const C of g){const{geometry:P,index:I,sourceLayerIndex:O}=C;if(w&&this.addFeatureDashes(C,y),this.hasPattern){const z=Uy("line",this.layers,C,this.zoom,i);this.patternFeatures.push(z)}else this.addFeature(C,P,I,l,y.positions,i.availableImages);b.insert(t[I].feature,P,I,O,this.index)}}addConstantDashes(t){let i=!1;for(const l of this.layers){const u=l.paint.get("line-dasharray").value,p=l.layout.get("line-cap").value;if(u.kind!=="constant"||p.kind!=="constant")i=!0;else{const g=p.value,y=u.value;if(!y)continue;t.addDash(y,g)}}return i}addFeatureDashes(t,i){const l=this.zoom;for(const u of this.layers){const p=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if(p.kind==="constant"&&g.kind==="constant")continue;let y,b;if(p.kind==="constant"){if(y=p.value,!y)continue}else y=p.evaluate({zoom:l},t);b=g.kind==="constant"?g.value:g.evaluate({zoom:l},t),i.addDash(y,b),t.patterns[u.id]=i.getKey(y,b)}}update(t,i,l,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,i,this.stateDependentLayers,l,u)}addFeatures(t,i,l,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,i,l,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,p4)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,d4),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,i,l,u,p,g){const y=this.layers[0].layout,b=y.get("line-join").evaluate(t,{}),w=y.get("line-cap").evaluate(t,{}),C=y.get("line-miter-limit"),P=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const I of i)this.addLine(I,t,b,w,C,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,p,g,u)}addLine(t,i,l,u,p,g){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Q=0;Q<t.length-1;Q++)this.totalDistance+=t[Q].dist(t[Q+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const y=m4[i.type]==="Polygon";let b=t.length;for(;b>=2&&t[b-1].equals(t[b-2]);)b--;let w=0;for(;w<b-1&&t[w].equals(t[w+1]);)w++;if(b<(y?3:2))return;l==="bevel"&&(p=1.05);const C=this.overscaling<=16?15*Pt/(512*this.overscaling):0,P=this.segments.prepareSegment(10*b,this.layoutVertexArray,this.indexArray);let I,O,z,F,G;this.e1=this.e2=-1,y&&(I=t[b-2],G=t[w].sub(I)._unit()._perp());for(let Q=w;Q<b;Q++){if(z=Q===b-1?y?t[w+1]:void 0:t[Q+1],z&&t[Q].equals(z))continue;G&&(F=G),I&&(O=I),I=t[Q],G=z?z.sub(I)._unit()._perp():F,F=F||G;let ce=F.add(G);ce.x===0&&ce.y===0||ce._unit();const ee=F.x*G.x+F.y*G.y,oe=ce.x*G.x+ce.y*G.y,he=oe!==0?1/oe:1/0,ue=2*Math.sqrt(2-2*oe),Le=oe<g4&&O&&z,Me=F.x*G.y-F.y*G.x>0;if(Le&&Q>w){const De=I.dist(O);if(De>2*C){const He=I.sub(I.sub(O)._mult(C/De)._round());this.updateDistance(O,He),this.addCurrentVertex(He,F,0,0,P),O=He}}const Ue=O&&z;let et=Ue?l:y?"butt":u;if(Ue&&et==="round"&&(he<g?et="miter":he<=2&&(et="fakeround")),et==="miter"&&he>p&&(et="bevel"),et==="bevel"&&(he>2&&(et="flipbevel"),he<p&&(et="miter")),O&&this.updateDistance(O,I),et==="miter")ce._mult(he),this.addCurrentVertex(I,ce,0,0,P);else if(et==="flipbevel"){if(he>100)ce=G.mult(-1);else{const De=he*F.add(G).mag()/F.sub(G).mag();ce._perp()._mult(De*(Me?-1:1))}this.addCurrentVertex(I,ce,0,0,P),this.addCurrentVertex(I,ce.mult(-1),0,0,P)}else if(et==="bevel"||et==="fakeround"){const De=-Math.sqrt(he*he-1),He=Me?De:0,qe=Me?0:De;if(O&&this.addCurrentVertex(I,F,He,qe,P),et==="fakeround"){const Ye=Math.round(180*ue/Math.PI/20);for(let it=1;it<Ye;it++){let Ne=it/Ye;if(Ne!==.5){const bt=Ne-.5;Ne+=Ne*bt*(Ne-1)*((1.0904+ee*(ee*(3.55645-1.43519*ee)-3.2452))*bt*bt+(.848013+ee*(.215638*ee-1.06021)))}const ut=G.sub(F)._mult(Ne)._add(F)._unit()._mult(Me?-1:1);this.addHalfVertex(I,ut.x,ut.y,!1,Me,0,P)}}z&&this.addCurrentVertex(I,G,-He,-qe,P)}else if(et==="butt")this.addCurrentVertex(I,ce,0,0,P);else if(et==="square"){const De=O?1:-1;O||this.addCurrentVertex(I,ce,De,De,P),this.addCurrentVertex(I,ce,0,0,P),O&&this.addCurrentVertex(I,ce,De,De,P)}else et==="round"&&(O&&(this.addCurrentVertex(I,F,0,0,P),this.addCurrentVertex(I,F,1,1,P,!0)),z&&(this.addCurrentVertex(I,G,-1,-1,P,!0),this.addCurrentVertex(I,G,0,0,P)));if(Le&&Q<b-1){const De=I.dist(z);if(De>2*C){const He=I.add(z.sub(I)._mult(C/De)._round());this.updateDistance(I,He),this.addCurrentVertex(He,G,0,0,P),I=He}}}}addCurrentVertex(t,i,l,u,p,g=!1){const y=i.y*u-i.x,b=-i.y-i.x*u;this.addHalfVertex(t,i.x+i.y*l,i.y-i.x*l,g,!1,l,p),this.addHalfVertex(t,y,b,g,!0,-u,p)}addHalfVertex({x:t,y:i},l,u,p,g,y,b){this.layoutVertexArray.emplaceBack((t<<1)+(p?1:0),(i<<1)+(g?1:0),Math.round(63*l)+128,Math.round(63*u)+128,1+(y===0?0:y<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const w=b.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,w),b.primitiveLength++),g?this.e2=w:this.e1=w}updateScaledDistance(){if(this.lineClips){const t=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=t*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(t,i){this.distance+=t.dist(i),this.updateScaledDistance()}}yt(Bm,"LineBucket",{omit:["layers","patternFeatures"]});const _4=new ne({"line-cap":new H(je.layout_line["line-cap"]),"line-join":new H(je.layout_line["line-join"]),"line-miter-limit":new B(je.layout_line["line-miter-limit"]),"line-round-limit":new B(je.layout_line["line-round-limit"]),"line-sort-key":new H(je.layout_line["line-sort-key"])});var V2={paint:new ne({"line-opacity":new H(je.paint_line["line-opacity"]),"line-color":new H(je.paint_line["line-color"]),"line-translate":new B(je.paint_line["line-translate"]),"line-translate-anchor":new B(je.paint_line["line-translate-anchor"]),"line-width":new H(je.paint_line["line-width"]),"line-gap-width":new H(je.paint_line["line-gap-width"]),"line-offset":new H(je.paint_line["line-offset"]),"line-blur":new H(je.paint_line["line-blur"]),"line-dasharray":new H(je.paint_line["line-dasharray"]),"line-pattern":new H(je.paint_line["line-pattern"]),"line-gradient":new re(je.paint_line["line-gradient"]),"line-trim-offset":new B(je.paint_line["line-trim-offset"])}),layout:_4};const $2=new class extends H{possiblyEvaluate(n,t){return t=new M(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(n,t)}evaluate(n,t,i,l){return t=nr({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(n,t,i,l)}}(V2.paint.properties["line-width"].specification);function G2(n,t){return t>0?t+2*n:n}$2.useIntegerZoom=!0;const y4=xe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),v4=xe([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),x4=xe([{name:"a_projected_pos",components:4,type:"Float32"}],4);xe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const b4=xe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),w4=xe([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);xe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Z2=xe([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),E4=xe([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);xe([{name:"triangle",components:3,type:"Uint16"}]),xe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),xe([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),xe([{type:"Float32",name:"offsetX"}]),xe([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var On=24;const $o=128;function $y(n,t){const{expression:i}=t;if(i.kind==="constant")return{kind:"constant",layoutSize:i.evaluate(new M(n+1))};if(i.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:u}=i;let p=0;for(;p<l.length&&l[p]<=n;)p++;p=Math.max(0,p-1);let g=p;for(;g<l.length&&l[g]<n+1;)g++;g=Math.min(l.length-1,g);const y=l[p],b=l[g];return i.kind==="composite"?{kind:"composite",minZoom:y,maxZoom:b,interpolationType:u}:{kind:"camera",minZoom:y,maxZoom:b,minSize:i.evaluate(new M(y)),maxSize:i.evaluate(new M(b)),interpolationType:u}}}function Fm(n,{uSize:t,uSizeT:i},{lowerSize:l,upperSize:u}){return n.kind==="source"?l/$o:n.kind==="composite"?rr(l/$o,u/$o,i):t}function Pu(n,t){let i=0,l=0;if(n.kind==="constant")l=n.layoutSize;else if(n.kind!=="source"){const{interpolationType:u,minZoom:p,maxZoom:g}=n,y=u?Oe(uo.interpolationFactor(u,t,p,g),0,1):0;n.kind==="camera"?l=rr(n.minSize,n.maxSize,y):i=y}return{uSizeT:i,uSize:l}}var T4=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:$o,evaluateSizeForFeature:Fm,evaluateSizeForZoom:Pu,getSizeData:$y});function S4(n,t,i){return n.sections.forEach(l=>{l.text=function(u,p,g){const y=p.layout.get("text-transform").evaluate(g,{});return y==="uppercase"?u=u.toLocaleUpperCase():y==="lowercase"&&(u=u.toLocaleLowerCase()),S.applyArabicShaping&&(u=S.applyArabicShaping(u)),u}(l.text,t,i)}),n}const Yd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function A4(n){return n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""}function C4(n){return n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""||n===""}var H2=Sr,q2=function(n,t,i,l,u){var p,g,y=8*u-l-1,b=(1<<y)-1,w=b>>1,C=-7,P=i?u-1:0,I=i?-1:1,O=n[t+P];for(P+=I,p=O&(1<<-C)-1,O>>=-C,C+=y;C>0;p=256*p+n[t+P],P+=I,C-=8);for(g=p&(1<<-C)-1,p>>=-C,C+=l;C>0;g=256*g+n[t+P],P+=I,C-=8);if(p===0)p=1-w;else{if(p===b)return g?NaN:1/0*(O?-1:1);g+=Math.pow(2,l),p-=w}return(O?-1:1)*g*Math.pow(2,p-l)},W2=function(n,t,i,l,u,p){var g,y,b,w=8*p-u-1,C=(1<<w)-1,P=C>>1,I=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,O=l?0:p-1,z=l?1:-1,F=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(y=isNaN(t)?1:0,g=C):(g=Math.floor(Math.log(t)/Math.LN2),t*(b=Math.pow(2,-g))<1&&(g--,b*=2),(t+=g+P>=1?I/b:I*Math.pow(2,1-P))*b>=2&&(g++,b/=2),g+P>=C?(y=0,g=C):g+P>=1?(y=(t*b-1)*Math.pow(2,u),g+=P):(y=t*Math.pow(2,P-1)*Math.pow(2,u),g=0));u>=8;n[i+O]=255&y,O+=z,y/=256,u-=8);for(g=g<<u|y,w+=u;w>0;n[i+O]=255&g,O+=z,g/=256,w-=8);n[i+O-z]|=128*F};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Sr(n){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(n)?n:new Uint8Array(n||0),this.pos=0,this.type=0,this.length=this.buf.length}Sr.Varint=0,Sr.Fixed64=1,Sr.Bytes=2,Sr.Fixed32=5;var Gy=4294967296,X2=1/Gy,K2=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ks(n){return n.type===Sr.Bytes?n.readVarint()+n.pos:n.pos+1}function Iu(n,t,i){return i?4294967296*t+(n>>>0):4294967296*(t>>>0)+(n>>>0)}function Y2(n,t,i){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(l);for(var u=i.pos-1;u>=n;u--)i.buf[u+l]=i.buf[u]}function M4(n,t){for(var i=0;i<n.length;i++)t.writeVarint(n[i])}function P4(n,t){for(var i=0;i<n.length;i++)t.writeSVarint(n[i])}function I4(n,t){for(var i=0;i<n.length;i++)t.writeFloat(n[i])}function k4(n,t){for(var i=0;i<n.length;i++)t.writeDouble(n[i])}function L4(n,t){for(var i=0;i<n.length;i++)t.writeBoolean(n[i])}function O4(n,t){for(var i=0;i<n.length;i++)t.writeFixed32(n[i])}function z4(n,t){for(var i=0;i<n.length;i++)t.writeSFixed32(n[i])}function R4(n,t){for(var i=0;i<n.length;i++)t.writeFixed64(n[i])}function D4(n,t){for(var i=0;i<n.length;i++)t.writeSFixed64(n[i])}function Nm(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+16777216*n[t+3]}function ku(n,t,i){n[i]=t,n[i+1]=t>>>8,n[i+2]=t>>>16,n[i+3]=t>>>24}function Q2(n,t){return(n[t]|n[t+1]<<8|n[t+2]<<16)+(n[t+3]<<24)}Sr.prototype={destroy:function(){this.buf=null},readFields:function(n,t,i){for(i=i||this.length;this.pos<i;){var l=this.readVarint(),u=l>>3,p=this.pos;this.type=7&l,n(u,t,this),this.pos===p&&this.skip(l)}return t},readMessage:function(n,t){return this.readFields(n,t,this.readVarint()+this.pos)},readFixed32:function(){var n=Nm(this.buf,this.pos);return this.pos+=4,n},readSFixed32:function(){var n=Q2(this.buf,this.pos);return this.pos+=4,n},readFixed64:function(){var n=Nm(this.buf,this.pos)+Nm(this.buf,this.pos+4)*Gy;return this.pos+=8,n},readSFixed64:function(){var n=Nm(this.buf,this.pos)+Q2(this.buf,this.pos+4)*Gy;return this.pos+=8,n},readFloat:function(){var n=q2(this.buf,this.pos,!0,23,4);return this.pos+=4,n},readDouble:function(){var n=q2(this.buf,this.pos,!0,52,8);return this.pos+=8,n},readVarint:function(n){var t,i,l=this.buf;return t=127&(i=l[this.pos++]),i<128?t:(t|=(127&(i=l[this.pos++]))<<7,i<128?t:(t|=(127&(i=l[this.pos++]))<<14,i<128?t:(t|=(127&(i=l[this.pos++]))<<21,i<128?t:function(u,p,g){var y,b,w=g.buf;if(y=(112&(b=w[g.pos++]))>>4,b<128||(y|=(127&(b=w[g.pos++]))<<3,b<128)||(y|=(127&(b=w[g.pos++]))<<10,b<128)||(y|=(127&(b=w[g.pos++]))<<17,b<128)||(y|=(127&(b=w[g.pos++]))<<24,b<128)||(y|=(1&(b=w[g.pos++]))<<31,b<128))return Iu(u,y,p);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=l[this.pos]))<<28,n,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var n=this.readVarint();return n%2==1?(n+1)/-2:n/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var n=this.readVarint()+this.pos,t=this.pos;return this.pos=n,n-t>=12&&K2?function(i,l,u){return K2.decode(i.subarray(l,u))}(this.buf,t,n):function(i,l,u){for(var p="",g=l;g<u;){var y,b,w,C=i[g],P=null,I=C>239?4:C>223?3:C>191?2:1;if(g+I>u)break;I===1?C<128&&(P=C):I===2?(192&(y=i[g+1]))==128&&(P=(31&C)<<6|63&y)<=127&&(P=null):I===3?(b=i[g+2],(192&(y=i[g+1]))==128&&(192&b)==128&&((P=(15&C)<<12|(63&y)<<6|63&b)<=2047||P>=55296&&P<=57343)&&(P=null)):I===4&&(b=i[g+2],w=i[g+3],(192&(y=i[g+1]))==128&&(192&b)==128&&(192&w)==128&&((P=(15&C)<<18|(63&y)<<12|(63&b)<<6|63&w)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,I=1):P>65535&&(P-=65536,p+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),p+=String.fromCharCode(P),g+=I}return p}(this.buf,t,n)},readBytes:function(){var n=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,n);return this.pos=n,t},readPackedVarint:function(n,t){if(this.type!==Sr.Bytes)return n.push(this.readVarint(t));var i=Ks(this);for(n=n||[];this.pos<i;)n.push(this.readVarint(t));return n},readPackedSVarint:function(n){if(this.type!==Sr.Bytes)return n.push(this.readSVarint());var t=Ks(this);for(n=n||[];this.pos<t;)n.push(this.readSVarint());return n},readPackedBoolean:function(n){if(this.type!==Sr.Bytes)return n.push(this.readBoolean());var t=Ks(this);for(n=n||[];this.pos<t;)n.push(this.readBoolean());return n},readPackedFloat:function(n){if(this.type!==Sr.Bytes)return n.push(this.readFloat());var t=Ks(this);for(n=n||[];this.pos<t;)n.push(this.readFloat());return n},readPackedDouble:function(n){if(this.type!==Sr.Bytes)return n.push(this.readDouble());var t=Ks(this);for(n=n||[];this.pos<t;)n.push(this.readDouble());return n},readPackedFixed32:function(n){if(this.type!==Sr.Bytes)return n.push(this.readFixed32());var t=Ks(this);for(n=n||[];this.pos<t;)n.push(this.readFixed32());return n},readPackedSFixed32:function(n){if(this.type!==Sr.Bytes)return n.push(this.readSFixed32());var t=Ks(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed32());return n},readPackedFixed64:function(n){if(this.type!==Sr.Bytes)return n.push(this.readFixed64());var t=Ks(this);for(n=n||[];this.pos<t;)n.push(this.readFixed64());return n},readPackedSFixed64:function(n){if(this.type!==Sr.Bytes)return n.push(this.readSFixed64());var t=Ks(this);for(n=n||[];this.pos<t;)n.push(this.readSFixed64());return n},skip:function(n){var t=7&n;if(t===Sr.Varint)for(;this.buf[this.pos++]>127;);else if(t===Sr.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Sr.Fixed32)this.pos+=4;else{if(t!==Sr.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(n,t){this.writeVarint(n<<3|t)},realloc:function(n){for(var t=this.length||16;t<this.pos+n;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(n){this.realloc(4),ku(this.buf,n,this.pos),this.pos+=4},writeSFixed32:function(n){this.realloc(4),ku(this.buf,n,this.pos),this.pos+=4},writeFixed64:function(n){this.realloc(8),ku(this.buf,-1&n,this.pos),ku(this.buf,Math.floor(n*X2),this.pos+4),this.pos+=8},writeSFixed64:function(n){this.realloc(8),ku(this.buf,-1&n,this.pos),ku(this.buf,Math.floor(n*X2),this.pos+4),this.pos+=8},writeVarint:function(n){(n=+n||0)>268435455||n<0?function(t,i){var l,u;if(t>=0?(l=t%4294967296|0,u=t/4294967296|0):(u=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,u=u+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");i.realloc(10),function(p,g,y){y.buf[y.pos++]=127&p|128,p>>>=7,y.buf[y.pos++]=127&p|128,p>>>=7,y.buf[y.pos++]=127&p|128,p>>>=7,y.buf[y.pos++]=127&p|128,y.buf[y.pos]=127&(p>>>=7)}(l,0,i),function(p,g){var y=(7&p)<<4;g.buf[g.pos++]|=y|((p>>>=3)?128:0),p&&(g.buf[g.pos++]=127&p|((p>>>=7)?128:0),p&&(g.buf[g.pos++]=127&p|((p>>>=7)?128:0),p&&(g.buf[g.pos++]=127&p|((p>>>=7)?128:0),p&&(g.buf[g.pos++]=127&p|((p>>>=7)?128:0),p&&(g.buf[g.pos++]=127&p)))))}(u,i)}(n,this):(this.realloc(4),this.buf[this.pos++]=127&n|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=127&(n>>>=7)|(n>127?128:0),n<=127||(this.buf[this.pos++]=n>>>7&127))))},writeSVarint:function(n){this.writeVarint(n<0?2*-n-1:2*n)},writeBoolean:function(n){this.writeVarint(!!n)},writeString:function(n){n=String(n),this.realloc(4*n.length),this.pos++;var t=this.pos;this.pos=function(l,u,p){for(var g,y,b=0;b<u.length;b++){if((g=u.charCodeAt(b))>55295&&g<57344){if(!y){g>56319||b+1===u.length?(l[p++]=239,l[p++]=191,l[p++]=189):y=g;continue}if(g<56320){l[p++]=239,l[p++]=191,l[p++]=189,y=g;continue}g=y-55296<<10|g-56320|65536,y=null}else y&&(l[p++]=239,l[p++]=191,l[p++]=189,y=null);g<128?l[p++]=g:(g<2048?l[p++]=g>>6|192:(g<65536?l[p++]=g>>12|224:(l[p++]=g>>18|240,l[p++]=g>>12&63|128),l[p++]=g>>6&63|128),l[p++]=63&g|128)}return p}(this.buf,n,this.pos);var i=this.pos-t;i>=128&&Y2(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(n){this.realloc(4),W2(this.buf,n,this.pos,!0,23,4),this.pos+=4},writeDouble:function(n){this.realloc(8),W2(this.buf,n,this.pos,!0,52,8),this.pos+=8},writeBytes:function(n){var t=n.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=n[i]},writeRawMessage:function(n,t){this.pos++;var i=this.pos;n(t,this);var l=this.pos-i;l>=128&&Y2(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeMessage:function(n,t,i){this.writeTag(n,Sr.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(n,t){t.length&&this.writeMessage(n,M4,t)},writePackedSVarint:function(n,t){t.length&&this.writeMessage(n,P4,t)},writePackedBoolean:function(n,t){t.length&&this.writeMessage(n,L4,t)},writePackedFloat:function(n,t){t.length&&this.writeMessage(n,I4,t)},writePackedDouble:function(n,t){t.length&&this.writeMessage(n,k4,t)},writePackedFixed32:function(n,t){t.length&&this.writeMessage(n,O4,t)},writePackedSFixed32:function(n,t){t.length&&this.writeMessage(n,z4,t)},writePackedFixed64:function(n,t){t.length&&this.writeMessage(n,R4,t)},writePackedSFixed64:function(n,t){t.length&&this.writeMessage(n,D4,t)},writeBytesField:function(n,t){this.writeTag(n,Sr.Bytes),this.writeBytes(t)},writeFixed32Field:function(n,t){this.writeTag(n,Sr.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(n,t){this.writeTag(n,Sr.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(n,t){this.writeTag(n,Sr.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(n,t){this.writeTag(n,Sr.Fixed64),this.writeSFixed64(t)},writeVarintField:function(n,t){this.writeTag(n,Sr.Varint),this.writeVarint(t)},writeSVarintField:function(n,t){this.writeTag(n,Sr.Varint),this.writeSVarint(t)},writeStringField:function(n,t){this.writeTag(n,Sr.Bytes),this.writeString(t)},writeFloatField:function(n,t){this.writeTag(n,Sr.Fixed32),this.writeFloat(t)},writeDoubleField:function(n,t){this.writeTag(n,Sr.Fixed64),this.writeDouble(t)},writeBooleanField:function(n,t){this.writeVarintField(n,!!t)}};var jm=te(H2);const Zy=3;function B4(n,t,i){t.glyphs=[],n===1&&i.readMessage(F4,t)}function F4(n,t,i){if(n===3){const{id:l,bitmap:u,width:p,height:g,left:y,top:b,advance:w}=i.readMessage(N4,{});t.glyphs.push({id:l,bitmap:new Xs({width:p+2*Zy,height:g+2*Zy},u),metrics:{width:p,height:g,left:y,top:b,advance:w}})}else n===4?t.ascender=i.readSVarint():n===5&&(t.descender=i.readSVarint())}function N4(n,t,i){n===1?t.id=i.readVarint():n===2?t.bitmap=i.readBytes():n===3?t.width=i.readVarint():n===4?t.height=i.readVarint():n===5?t.left=i.readSVarint():n===6?t.top=i.readSVarint():n===7&&(t.advance=i.readVarint())}const J2=Zy;function Hy(n){let t=0,i=0;for(const g of n)t+=g.w*g.h,i=Math.max(i,g.w);n.sort((g,y)=>y.h-g.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}];let u=0,p=0;for(const g of n)for(let y=l.length-1;y>=0;y--){const b=l[y];if(!(g.w>b.w||g.h>b.h)){if(g.x=b.x,g.y=b.y,p=Math.max(p,g.y+g.h),u=Math.max(u,g.x+g.w),g.w===b.w&&g.h===b.h){const w=l.pop();y<l.length&&(l[y]=w)}else g.h===b.h?(b.x+=g.w,b.w-=g.w):g.w===b.w?(b.y+=g.h,b.h-=g.h):(l.push({x:b.x+g.w,y:b.y,w:b.w-g.w,h:g.h}),b.y+=g.h,b.h-=g.h);break}}return{w:u,h:p,fill:t/(u*p)||0}}const yi=1;class qy{constructor(t,{pixelRatio:i,version:l,stretchX:u,stretchY:p,content:g}){this.paddedRect=t,this.pixelRatio=i,this.stretchX=u,this.stretchY=p,this.content=g,this.version=l}get tl(){return[this.paddedRect.x+yi,this.paddedRect.y+yi]}get br(){return[this.paddedRect.x+this.paddedRect.w-yi,this.paddedRect.y+this.paddedRect.h-yi]}get displaySize(){return[(this.paddedRect.w-2*yi)/this.pixelRatio,(this.paddedRect.h-2*yi)/this.pixelRatio]}}class eE{constructor(t,i){const l={},u={};this.haveRenderCallbacks=[];const p=[];this.addImages(t,l,p),this.addImages(i,u,p);const{w:g,h:y}=Hy(p),b=new zi({width:g||1,height:y||1});for(const w in t){const C=t[w],P=l[w].paddedRect;zi.copy(C.data,b,{x:0,y:0},{x:P.x+yi,y:P.y+yi},C.data)}for(const w in i){const C=i[w],P=u[w].paddedRect,I=P.x+yi,O=P.y+yi,z=C.data.width,F=C.data.height;zi.copy(C.data,b,{x:0,y:0},{x:I,y:O},C.data),zi.copy(C.data,b,{x:0,y:F-1},{x:I,y:O-1},{width:z,height:1}),zi.copy(C.data,b,{x:0,y:0},{x:I,y:O+F},{width:z,height:1}),zi.copy(C.data,b,{x:z-1,y:0},{x:I-1,y:O},{width:1,height:F}),zi.copy(C.data,b,{x:0,y:0},{x:I+z,y:O},{width:1,height:F})}this.image=b,this.iconPositions=l,this.patternPositions=u}addImages(t,i,l){for(const u in t){const p=t[u],g={x:0,y:0,w:p.data.width+2*yi,h:p.data.height+2*yi};l.push(g),i[u]=new qy(g,p),p.hasRenderCallback&&this.haveRenderCallbacks.push(u)}}patchUpdatedImages(t,i){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(l=>t.hasImage(l)),t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in t.updatedImages)this.patchUpdatedImage(this.iconPositions[l],t.getImage(l),i),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l),i)}patchUpdatedImage(t,i,l){if(!t||!i||t.version===i.version)return;t.version=i.version;const[u,p]=t.tl;l.update(i.data,void 0,{x:u,y:p})}}yt(qy,"ImagePosition"),yt(eE,"ImageAtlas");const Yi={horizontal:1,vertical:2,horizontalOnly:3},tE=-17;class Qd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,i){const l=new Qd;return l.scale=t||1,l.fontStack=i,l}static forImage(t){const i=new Qd;return i.imageName=t,i}}class Lu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,i){const l=new Lu;for(let u=0;u<t.sections.length;u++){const p=t.sections[u];p.image?l.addImageSection(p):l.addTextSection(p,i)}return l}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSections(){return this.sections}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(t){this.text=function(i,l){let u="";for(let p=0;p<i.length;p++){const g=i.charCodeAt(p+1)||null,y=i.charCodeAt(p-1)||null;u+=!l&&(g&&mm(g)&&!Yd[i[p+1]]||y&&mm(y)&&!Yd[i[p-1]])||!Yd[i[p]]?i[p]:Yd[i[p]]}return u}(this.text,t)}trim(){let t=0;for(let l=0;l<this.text.length&&Um[this.text.charCodeAt(l)];l++)t++;let i=this.text.length;for(let l=this.text.length-1;l>=0&&l>=t&&Um[this.text.charCodeAt(l)];l--)i--;this.text=this.text.substring(t,i),this.sectionIndex=this.sectionIndex.slice(t,i)}substring(t,i){const l=new Lu;return l.text=this.text.substring(t,i),l.sectionIndex=this.sectionIndex.slice(t,i),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,i)=>Math.max(t,this.sections[i].scale),0)}addTextSection(t,i){this.text+=t.text,this.sections.push(Qd.forText(t.scale,t.fontStack||i));const l=this.sections.length-1;for(let u=0;u<t.text.length;++u)this.sectionIndex.push(l)}addImageSection(t){const i=t.image?t.image.name:"";if(i.length===0)return void jr("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(Qd.forImage(i)),this.sectionIndex.push(this.sections.length-1)):jr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Wy(n,t,i,l,u,p,g,y,b,w,C,P,I,O,z){const F=Lu.fromFeature(n,u);P===Yi.vertical&&F.verticalizePunctuation(I);let G=[];const Q=function(ue,Le,Me,Ue,et,De){if(!ue)return[];const He=[],qe=function(ut,bt,ht,Dt,ot,Ct){let Bt=0;for(let or=0;or<ut.length();or++){const Ft=ut.getSection(or);Bt+=rE(ut.getCharCode(or),Ft,Dt,ot,bt,Ct)}return Bt/Math.max(1,Math.ceil(Bt/ht))}(ue,Le,Me,Ue,et,De),Ye=ue.text.indexOf("")>=0;let it=0;for(let ut=0;ut<ue.length();ut++){const bt=ue.getSection(ut),ht=ue.getCharCode(ut);if(Um[ht]||(it+=rE(ht,bt,Ue,et,Le,De)),ut<ue.length()-1){const Dt=!((Ne=ht)<11904||!(ft["Bopomofo Extended"](Ne)||ft.Bopomofo(Ne)||ft["CJK Compatibility Forms"](Ne)||ft["CJK Compatibility Ideographs"](Ne)||ft["CJK Compatibility"](Ne)||ft["CJK Radicals Supplement"](Ne)||ft["CJK Strokes"](Ne)||ft["CJK Symbols and Punctuation"](Ne)||ft["CJK Unified Ideographs Extension A"](Ne)||ft["CJK Unified Ideographs"](Ne)||ft["Enclosed CJK Letters and Months"](Ne)||ft["Halfwidth and Fullwidth Forms"](Ne)||ft.Hiragana(Ne)||ft["Ideographic Description Characters"](Ne)||ft["Kangxi Radicals"](Ne)||ft["Katakana Phonetic Extensions"](Ne)||ft.Katakana(Ne)||ft["Vertical Forms"](Ne)||ft["Yi Radicals"](Ne)||ft["Yi Syllables"](Ne)));(j4[ht]||Dt||bt.imageName)&&He.push(iE(ut+1,it,qe,He,U4(ht,ue.getCharCode(ut+1),Dt&&Ye),!1))}}var Ne;return oE(iE(ue.length(),it,qe,He,0,!0))}(F,w,p,t,l,O),{processBidirectionalText:ce,processStyledBidirectionalText:ee}=S;if(ce&&F.sections.length===1){const ue=ce(F.toString(),Q);for(const Le of ue){const Me=new Lu;Me.text=Le,Me.sections=F.sections;for(let Ue=0;Ue<Le.length;Ue++)Me.sectionIndex.push(0);G.push(Me)}}else if(ee){const ue=ee(F.text,F.sectionIndex,Q);for(const Le of ue){const Me=new Lu;Me.text=Le[0],Me.sectionIndex=Le[1],Me.sections=F.sections,G.push(Me)}}else G=function(ue,Le){const Me=[],Ue=ue.text;let et=0;for(const De of Le)Me.push(ue.substring(et,De)),et=De;return et<Ue.length&&Me.push(ue.substring(et,Ue.length)),Me}(F,Q);const oe=[],he={positionedLines:oe,text:F.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:P,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(ue,Le,Me,Ue,et,De,He,qe,Ye,it,Ne,ut){let bt=0,ht=0,Dt=0;const ot=qe==="right"?1:qe==="left"?0:.5;let Ct=!1;for(const Ut of et){const Vt=Ut.getSections();for(const wr of Vt){if(wr.imageName)continue;const Ar=Le[wr.fontStack];if(Ar&&(Ct=Ar.ascender!==void 0&&Ar.descender!==void 0,!Ct))break}if(!Ct)break}let Bt=0;for(const Ut of et){Ut.trim();const Vt=Ut.getMaxScale(),wr=(Vt-1)*On,Ar={positionedGlyphs:[],lineOffset:0};ue.positionedLines[Bt]=Ar;const Cr=Ar.positionedGlyphs;let Er=0;if(!Ut.length()){ht+=De,++Bt;continue}let Vr=0,qr=0;for(let Tr=0;Tr<Ut.length();Tr++){const yn=Ut.getSection(Tr),ln=Ut.getSectionIndex(Tr),$r=Ut.getCharCode(Tr);let ar=yn.scale,cn=null,Mr=null,oi=null,un=On,zn=0;const Cn=!(Ye===Yi.horizontal||!Ne&&!Sd($r)||Ne&&(Um[$r]||(or=$r,ft.Arabic(or)||ft["Arabic Supplement"](or)||ft["Arabic Extended-A"](or)||ft["Arabic Presentation Forms-A"](or)||ft["Arabic Presentation Forms-B"](or))));if(yn.imageName){const si=Ue[yn.imageName];if(!si)continue;oi=yn.imageName,ue.iconsInText=ue.iconsInText||!0,Mr=si.paddedRect;const Mn=si.displaySize;ar=ar*On/ut,cn={width:Mn[0],height:Mn[1],left:yi,top:-J2,advance:Cn?Mn[1]:Mn[0],localGlyph:!1},zn=Ct?-cn.height*ar:tE+Vt*On-Mn[1]*ar,un=cn.advance;const Ho=(Cn?Mn[0]:Mn[1])*ar-On*Vt;Ho>0&&Ho>Er&&(Er=Ho)}else{const si=Me[yn.fontStack];if(!si)continue;si[$r]&&(Mr=si[$r]);const Mn=Le[yn.fontStack];if(!Mn)continue;const Ho=Mn.glyphs[$r];if(!Ho)continue;if(cn=Ho.metrics,un=$r!==8203?On:0,Ct){const Nu=Mn.ascender!==void 0?Math.abs(Mn.ascender):0,cf=Mn.descender!==void 0?Math.abs(Mn.descender):0,uf=(Nu+cf)*ar;Vr<uf&&(Vr=uf,qr=(Nu-cf)/2*ar),zn=-Nu*ar}else zn=tE+(Vt-ar)*On}Cn?(ue.verticalizable=!0,Cr.push({glyph:$r,imageName:oi,x:bt,y:ht+zn,vertical:Cn,scale:ar,localGlyph:cn.localGlyph,fontStack:yn.fontStack,sectionIndex:ln,metrics:cn,rect:Mr}),bt+=un*ar+it):(Cr.push({glyph:$r,imageName:oi,x:bt,y:ht+zn,vertical:Cn,scale:ar,localGlyph:cn.localGlyph,fontStack:yn.fontStack,sectionIndex:ln,metrics:cn,rect:Mr}),bt+=cn.advance*ar+it)}Cr.length!==0&&(Dt=Math.max(bt-it,Dt),Ct?sE(Cr,ot,Er,qr,De*Vt/2):sE(Cr,ot,Er,0,De/2)),bt=0;const an=De*Vt+Er;Ar.lineOffset=Math.max(Er,wr),ht+=an,++Bt}var or;const Ft=ht,{horizontalAlign:Lt,verticalAlign:kr}=Xy(He);(function(Ut,Vt,wr,Ar,Cr,Er){const Vr=(Vt-wr)*Cr,qr=-Er*Ar;for(const an of Ut)for(const Tr of an.positionedGlyphs)Tr.x+=Vr,Tr.y+=qr})(ue.positionedLines,ot,Lt,kr,Dt,Ft),ue.top+=-kr*Ft,ue.bottom=ue.top+Ft,ue.left+=-Lt*Dt,ue.right=ue.left+Dt,ue.hasBaseline=Ct}(he,t,i,l,G,g,y,b,P,w,I,z),!function(ue){for(const Le of ue)if(Le.positionedGlyphs.length!==0)return!1;return!0}(oe)&&he}const Um={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},j4={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function rE(n,t,i,l,u,p){if(t.imageName){const g=l[t.imageName];return g?g.displaySize[0]*t.scale*On/p+u:0}{const g=i[t.fontStack],y=g&&g.glyphs[n];return y?y.metrics.advance*t.scale+u:0}}function nE(n,t,i,l){const u=Math.pow(n-t,2);return l?n<t?u/2:2*u:u+Math.abs(i)*i}function U4(n,t,i){let l=0;return n===10&&(l-=1e4),i&&(l+=150),n!==40&&n!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function iE(n,t,i,l,u,p){let g=null,y=nE(t,i,u,p);for(const b of l){const w=nE(t-b.x,i,u,p)+b.badness;w<=y&&(g=b,y=w)}return{index:n,x:t,priorBreak:g,badness:y}}function oE(n){return n?oE(n.priorBreak).concat(n.index):[]}function Xy(n){let t=.5,i=.5;switch(n){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(n){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function sE(n,t,i,l,u){if(!(t||i||l||u))return;const p=n.length-1,g=n[p],y=(g.x+g.metrics.advance*g.scale)*t;for(let b=0;b<=p;b++)n[b].x-=y,n[b].y+=i+l+u}function V4(n,t,i){const{horizontalAlign:l,verticalAlign:u}=Xy(i),p=t[0]-n.displaySize[0]*l,g=t[1]-n.displaySize[1]*u;return{image:n,top:g,bottom:g+n.displaySize[1],left:p,right:p+n.displaySize[0]}}function aE(n,t,i,l,u,p){const g=n.image;let y;if(g.content){const G=g.content,Q=g.pixelRatio||1;y=[G[0]/Q,G[1]/Q,g.displaySize[0]-G[2]/Q,g.displaySize[1]-G[3]/Q]}const b=t.left*p,w=t.right*p;let C,P,I,O;i==="width"||i==="both"?(O=u[0]+b-l[3],P=u[0]+w+l[1]):(O=u[0]+(b+w-g.displaySize[0])/2,P=O+g.displaySize[0]);const z=t.top*p,F=t.bottom*p;return i==="height"||i==="both"?(C=u[1]+z-l[0],I=u[1]+F+l[2]):(C=u[1]+(z+F-g.displaySize[1])/2,I=C+g.displaySize[1]),{image:g,top:C,right:P,bottom:I,left:O,collisionPadding:y}}class Ys extends Te{constructor(t,i,l,u,p){super(t,i),this.angle=u,this.z=l,p!==void 0&&(this.segment=p)}clone(){return new Ys(this.x,this.y,this.z,this.angle,this.segment)}}function lE(n,t,i,l,u){if(t.segment===void 0)return!0;let p=t,g=t.segment+1,y=0;for(;y>-i/2;){if(g--,g<0)return!1;y-=n[g].dist(p),p=n[g]}y+=n[g].dist(n[g+1]),g++;const b=[];let w=0;for(;y<i/2;){const C=n[g],P=n[g+1];if(!P)return!1;let I=n[g-1].angleTo(C)-C.angleTo(P);for(I=Math.abs((I+3*Math.PI)%(2*Math.PI)-Math.PI),b.push({distance:y,angleDelta:I}),w+=I;y-b[0].distance>l;)w-=b.shift().angleDelta;if(w>u)return!1;g++,y+=C.dist(P)}return!0}function cE(n){let t=0;for(let i=0;i<n.length-1;i++)t+=n[i].dist(n[i+1]);return t}function uE(n,t,i){return n?.6*t*i:0}function hE(n,t){return Math.max(n?n.right-n.left:0,t?t.right-t.left:0)}function $4(n,t,i,l,u,p){const g=uE(i,u,p),y=hE(i,l)*p;let b=0;const w=cE(n)/2;for(let C=0;C<n.length-1;C++){const P=n[C],I=n[C+1],O=P.dist(I);if(b+O>w){const z=(w-b)/O,F=rr(P.x,I.x,z),G=rr(P.y,I.y,z),Q=new Ys(F,G,0,I.angleTo(P),C);return!g||lE(n,Q,y,g,t)?Q:void 0}b+=O}}function G4(n,t,i,l,u,p,g,y,b){const w=uE(l,p,g),C=hE(l,u),P=C*g,I=n[0].x===0||n[0].x===b||n[0].y===0||n[0].y===b;return t-P<t/4&&(t=P+t/4),dE(n,I?t/2*y%t:(C/2+2*p)*g*y%t,t,w,i,P,I,!1,b)}function dE(n,t,i,l,u,p,g,y,b){const w=p/2,C=cE(n);let P=0,I=t-i,O=[];for(let z=0;z<n.length-1;z++){const F=n[z],G=n[z+1],Q=F.dist(G),ce=G.angleTo(F);for(;I+i<P+Q;){I+=i;const ee=(I-P)/Q,oe=rr(F.x,G.x,ee),he=rr(F.y,G.y,ee);if(oe>=0&&oe<b&&he>=0&&he<b&&I-w>=0&&I+w<=C){const ue=new Ys(oe,he,0,ce,z);ue._round(),l&&!lE(n,ue,p,l,u)||O.push(ue)}}P+=Q}return y||O.length||g||(O=dE(n,P/2,i,l,u,p,g,!0,b)),O}function fE(n,t,i,l,u){const p=[];for(let g=0;g<n.length;g++){const y=n[g];let b;for(let w=0;w<y.length-1;w++){let C=y[w],P=y[w+1];C.x<t&&P.x<t||(C.x<t?C=new Te(t,C.y+(t-C.x)/(P.x-C.x)*(P.y-C.y))._round():P.x<t&&(P=new Te(t,C.y+(t-C.x)/(P.x-C.x)*(P.y-C.y))._round()),C.y<i&&P.y<i||(C.y<i?C=new Te(C.x+(i-C.y)/(P.y-C.y)*(P.x-C.x),i)._round():P.y<i&&(P=new Te(C.x+(i-C.y)/(P.y-C.y)*(P.x-C.x),i)._round()),C.x>=l&&P.x>=l||(C.x>=l?C=new Te(l,C.y+(l-C.x)/(P.x-C.x)*(P.y-C.y))._round():P.x>=l&&(P=new Te(l,C.y+(l-C.x)/(P.x-C.x)*(P.y-C.y))._round()),C.y>=u&&P.y>=u||(C.y>=u?C=new Te(C.x+(u-C.y)/(P.y-C.y)*(P.x-C.x),u)._round():P.y>=u&&(P=new Te(C.x+(u-C.y)/(P.y-C.y)*(P.x-C.x),u)._round()),b&&C.equals(b[b.length-1])||(b=[C],p.push(b)),b.push(P)))))}}return p}yt(Ys,"Anchor");const Jd=1e20;function pE(n,t,i,l,u,p,g,y,b){for(let w=t;w<t+l;w++)mE(n,i*p+w,p,u,g,y,b);for(let w=i;w<i+u;w++)mE(n,w*p+t,1,l,g,y,b)}function mE(n,t,i,l,u,p,g){p[0]=0,g[0]=-Jd,g[1]=Jd,u[0]=n[t];for(let y=1,b=0,w=0;y<l;y++){u[y]=n[t+y*i];const C=y*y;do{const P=p[b];w=(u[y]-u[P]+C-P*P)/(y-P)/2}while(w<=g[b]&&--b>-1);b++,p[b]=y,g[b]=w,g[b+1]=Jd}for(let y=0,b=0;y<l;y++){for(;g[b+1]<y;)b++;const w=p[b],C=y-w;n[t+y*i]=u[w]+C*C}}const Go=2,Ky={none:0,ideographs:1,all:2};class Ou{constructor(t,i,l){this.requestManager=t,this.localGlyphMode=i,this.localFontFamily=l,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(t){this.url=t}getGlyphs(t,i){const l=[];for(const u in t)for(const p of t[u])l.push({stack:u,id:p});It(l,({stack:u,id:p},g)=>{let y=this.entries[u];y||(y=this.entries[u]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let b=y.glyphs[p];if(b!==void 0)return void g(null,{stack:u,id:p,glyph:b});if(b=this._tinySDF(y,u,p),b)return y.glyphs[p]=b,void g(null,{stack:u,id:p,glyph:b});const w=Math.floor(p/256);if(256*w>65535)return void g(new Error("glyphs > 65535 not supported"));if(y.ranges[w])return void g(null,{stack:u,id:p,glyph:b});let C=y.requests[w];C||(C=y.requests[w]=[],Ou.loadGlyphRange(u,w,this.url,this.requestManager,(P,I)=>{if(I){y.ascender=I.ascender,y.descender=I.descender;for(const O in I.glyphs)this._doesCharSupportLocalGlyph(+O)||(y.glyphs[+O]=I.glyphs[+O]);y.ranges[w]=!0}for(const O of C)O(P,I);delete y.requests[w]})),C.push((P,I)=>{P?g(P):I&&g(null,{stack:u,id:p,glyph:I.glyphs[p]||null})})},(u,p)=>{if(u)i(u);else if(p){const g={};for(const{stack:y,id:b,glyph:w}of p)g[y]===void 0&&(g[y]={}),g[y].glyphs===void 0&&(g[y].glyphs={}),g[y].glyphs[b]=w&&{id:w.id,bitmap:w.bitmap.clone(),metrics:w.metrics},g[y].ascender=this.entries[y].ascender,g[y].descender=this.entries[y].descender;i(null,g)}})}_doesCharSupportLocalGlyph(t){return this.localGlyphMode!==Ky.none&&(this.localGlyphMode===Ky.all?!!this.localFontFamily:!!this.localFontFamily&&(ft["CJK Unified Ideographs"](t)||ft["Hangul Syllables"](t)||ft.Hiragana(t)||ft.Katakana(t)||ft["CJK Symbols and Punctuation"](t)))}_tinySDF(t,i,l){const u=this.localFontFamily;if(!u||!this._doesCharSupportLocalGlyph(l))return;let p=t.tinySDF;if(!p){let F="400";/bold/i.test(i)?F="900":/medium/i.test(i)?F="500":/light/i.test(i)&&(F="200"),p=t.tinySDF=new Ou.TinySDF({fontFamily:u,fontWeight:F,fontSize:24*Go,buffer:3*Go,radius:8*Go}),p.fontWeight=F}if(this.localGlyphs[p.fontWeight][l])return this.localGlyphs[p.fontWeight][l];const g=String.fromCharCode(l),{data:y,width:b,height:w,glyphWidth:C,glyphHeight:P,glyphLeft:I,glyphTop:O,glyphAdvance:z}=p.draw(g);return this.localGlyphs[p.fontWeight][l]={id:l,bitmap:new Xs({width:b,height:w},y),metrics:{width:C/Go,height:P/Go,left:I/Go,top:O/Go-27,advance:z/Go,localGlyph:!0}}}}Ou.loadGlyphRange=function(n,t,i,l,u){const p=256*t,g=p+255,y=l.transformRequest(l.normalizeGlyphsURL(i).replace("{fontstack}",n).replace("{range}",`${p}-${g}`),ks.Glyphs);pa(y,(b,w)=>{if(b)u(b);else if(w){const C={},P=function(I){return new jm(I).readFields(B4,{})}(w);for(const I of P.glyphs)C[I.id]=I;u(null,{glyphs:C,ascender:P.ascender,descender:P.descender})}})},Ou.TinySDF=class{constructor({fontSize:n=24,buffer:t=3,radius:i=8,cutoff:l=.25,fontFamily:u="sans-serif",fontWeight:p="normal",fontStyle:g="normal"}={}){this.buffer=t,this.cutoff=l,this.radius=i;const y=this.size=n+4*t,b=this._createCanvas(y),w=this.ctx=b.getContext("2d",{willReadFrequently:!0});w.font=`${g} ${p} ${n}px ${u}`,w.textBaseline="alphabetic",w.textAlign="left",w.fillStyle="black",this.gridOuter=new Float64Array(y*y),this.gridInner=new Float64Array(y*y),this.f=new Float64Array(y),this.z=new Float64Array(y+1),this.v=new Uint16Array(y)}_createCanvas(n){const t=document.createElement("canvas");return t.width=t.height=n,t}draw(n){const{width:t,actualBoundingBoxAscent:i,actualBoundingBoxDescent:l,actualBoundingBoxLeft:u,actualBoundingBoxRight:p}=this.ctx.measureText(n),g=Math.ceil(i),y=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(p-u))),b=Math.min(this.size-this.buffer,g+Math.ceil(l)),w=y+2*this.buffer,C=b+2*this.buffer,P=Math.max(w*C,0),I=new Uint8ClampedArray(P),O={data:I,width:w,height:C,glyphWidth:y,glyphHeight:b,glyphTop:g,glyphLeft:0,glyphAdvance:t};if(y===0||b===0)return O;const{ctx:z,buffer:F,gridInner:G,gridOuter:Q}=this;z.clearRect(F,F,y,b),z.fillText(n,F,F+g);const ce=z.getImageData(F,F,y,b);Q.fill(Jd,0,P),G.fill(0,0,P);for(let ee=0;ee<b;ee++)for(let oe=0;oe<y;oe++){const he=ce.data[4*(ee*y+oe)+3]/255;if(he===0)continue;const ue=(ee+F)*w+oe+F;if(he===1)Q[ue]=0,G[ue]=Jd;else{const Le=.5-he;Q[ue]=Le>0?Le*Le:0,G[ue]=Le<0?Le*Le:0}}pE(Q,0,0,w,C,w,this.f,this.v,this.z),pE(G,F,F,y,b,w,this.f,this.v,this.z);for(let ee=0;ee<P;ee++){const oe=Math.sqrt(Q[ee])-Math.sqrt(G[ee]);I[ee]=Math.round(255-255*(oe/this.radius+this.cutoff))}return O}};const zu=yi;function gE(n,t,i,l){const u=[],p=n.image,g=p.pixelRatio,y=p.paddedRect.w-2*zu,b=p.paddedRect.h-2*zu,w=n.right-n.left,C=n.bottom-n.top,P=p.stretchX||[[0,y]],I=p.stretchY||[[0,b]],O=(De,He)=>De+He[1]-He[0],z=P.reduce(O,0),F=I.reduce(O,0),G=y-z,Q=b-F;let ce=0,ee=z,oe=0,he=F,ue=0,Le=G,Me=0,Ue=Q;if(p.content&&l){const De=p.content;ce=Vm(P,0,De[0]),oe=Vm(I,0,De[1]),ee=Vm(P,De[0],De[2]),he=Vm(I,De[1],De[3]),ue=De[0]-ce,Me=De[1]-oe,Le=De[2]-De[0]-ee,Ue=De[3]-De[1]-he}const et=(De,He,qe,Ye)=>{const it=$m(De.stretch-ce,ee,w,n.left),Ne=Gm(De.fixed-ue,Le,De.stretch,z),ut=$m(He.stretch-oe,he,C,n.top),bt=Gm(He.fixed-Me,Ue,He.stretch,F),ht=$m(qe.stretch-ce,ee,w,n.left),Dt=Gm(qe.fixed-ue,Le,qe.stretch,z),ot=$m(Ye.stretch-oe,he,C,n.top),Ct=Gm(Ye.fixed-Me,Ue,Ye.stretch,F),Bt=new Te(it,ut),or=new Te(ht,ut),Ft=new Te(ht,ot),Lt=new Te(it,ot),kr=new Te(Ne/g,bt/g),Ut=new Te(Dt/g,Ct/g),Vt=t*Math.PI/180;if(Vt){const Cr=Math.sin(Vt),Er=Math.cos(Vt),Vr=[Er,-Cr,Cr,Er];Bt._matMult(Vr),or._matMult(Vr),Lt._matMult(Vr),Ft._matMult(Vr)}const wr=De.stretch+De.fixed,Ar=He.stretch+He.fixed;return{tl:Bt,tr:or,bl:Lt,br:Ft,tex:{x:p.paddedRect.x+zu+wr,y:p.paddedRect.y+zu+Ar,w:qe.stretch+qe.fixed-wr,h:Ye.stretch+Ye.fixed-Ar},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:kr,pixelOffsetBR:Ut,minFontScaleX:Le/g/w,minFontScaleY:Ue/g/C,isSDF:i}};if(l&&(p.stretchX||p.stretchY)){const De=_E(P,G,z),He=_E(I,Q,F);for(let qe=0;qe<De.length-1;qe++){const Ye=De[qe],it=De[qe+1];for(let Ne=0;Ne<He.length-1;Ne++)u.push(et(Ye,He[Ne],it,He[Ne+1]))}}else u.push(et({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:y+1},{fixed:0,stretch:b+1}));return u}function Vm(n,t,i){let l=0;for(const u of n)l+=Math.max(t,Math.min(i,u[1]))-Math.max(t,Math.min(i,u[0]));return l}function _E(n,t,i){const l=[{fixed:-zu,stretch:0}];for(const[u,p]of n){const g=l[l.length-1];l.push({fixed:u-g.stretch,stretch:g.stretch}),l.push({fixed:u-g.stretch,stretch:g.stretch+(p-u)})}return l.push({fixed:t+zu,stretch:i}),l}function $m(n,t,i,l){return n/t*i+l}function Gm(n,t,i,l){return n-t*i/l}function Z4(n,t,i,l){const u=t+n.positionedLines[l].lineOffset;return l===0?i+u/2:i+(u+(t+n.positionedLines[l-1].lineOffset))/2}class H4{constructor(t=[],i=q4){if(this.data=t,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],i=this.data.pop();return this.length--,this.length>0&&(this.data[0]=i,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:i,compare:l}=this,u=i[t];for(;t>0;){const p=t-1>>1,g=i[p];if(l(u,g)>=0)break;i[t]=g,t=p}i[t]=u}_down(t){const{data:i,compare:l}=this,u=this.length>>1,p=i[t];for(;t<u;){let g=1+(t<<1),y=i[g];const b=g+1;if(b<this.length&&l(i[b],y)<0&&(g=b,y=i[b]),l(y,p)>=0)break;i[t]=y,t=g}i[t]=p}}function q4(n,t){return n<t?-1:n>t?1:0}function W4(n,t=1,i=!1){let l=1/0,u=1/0,p=-1/0,g=-1/0;const y=n[0];for(let O=0;O<y.length;O++){const z=y[O];(!O||z.x<l)&&(l=z.x),(!O||z.y<u)&&(u=z.y),(!O||z.x>p)&&(p=z.x),(!O||z.y>g)&&(g=z.y)}const b=Math.min(p-l,g-u);let w=b/2;const C=new H4([],X4);if(b===0)return new Te(l,u);for(let O=l;O<p;O+=b)for(let z=u;z<g;z+=b)C.push(new Ru(O+w,z+w,w,n));let P=function(O){let z=0,F=0,G=0;const Q=O[0];for(let ce=0,ee=Q.length,oe=ee-1;ce<ee;oe=ce++){const he=Q[ce],ue=Q[oe],Le=he.x*ue.y-ue.x*he.y;F+=(he.x+ue.x)*Le,G+=(he.y+ue.y)*Le,z+=3*Le}return new Ru(F/z,G/z,0,O)}(n),I=C.length;for(;C.length;){const O=C.pop();(O.d>P.d||!P.d)&&(P=O,i&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,I)),O.max-P.d<=t||(w=O.h/2,C.push(new Ru(O.p.x-w,O.p.y-w,w,n)),C.push(new Ru(O.p.x+w,O.p.y-w,w,n)),C.push(new Ru(O.p.x-w,O.p.y+w,w,n)),C.push(new Ru(O.p.x+w,O.p.y+w,w,n)),I+=4)}return i&&(console.log(`num probes: ${I}`),console.log(`best distance: ${P.d}`)),P.p}function X4(n,t){return t.max-n.max}class Ru{constructor(t,i,l,u){this.p=new Te(t,i),this.h=l,this.d=function(p,g){let y=!1,b=1/0;for(let w=0;w<g.length;w++){const C=g[w];for(let P=0,I=C.length,O=I-1;P<I;O=P++){const z=C[P],F=C[O];z.y>p.y!=F.y>p.y&&p.x<(F.x-z.x)*(p.y-z.y)/(F.y-z.y)+z.x&&(y=!y),b=Math.min(b,d2(p,z,F))}}return(y?1:-1)*Math.sqrt(b)}(this.p,u),this.max=this.d+this.h*Math.SQRT2}}const Du=7,Yy=Number.POSITIVE_INFINITY,K4=Math.sqrt(2);function yE(n,[t,i]){let l=0,u=0;if(i===Yy){t<0&&(t=0);const p=t/K4;switch(n){case"top-right":case"top-left":u=p-Du;break;case"bottom-right":case"bottom-left":u=-p+Du;break;case"bottom":u=-t+Du;break;case"top":u=t-Du}switch(n){case"top-right":case"bottom-right":l=-p;break;case"top-left":case"bottom-left":l=p;break;case"left":l=t;break;case"right":l=-t}}else{switch(t=Math.abs(t),i=Math.abs(i),n){case"top-right":case"top-left":case"top":u=i-Du;break;case"bottom-right":case"bottom-left":case"bottom":u=-i+Du}switch(n){case"top-right":case"bottom-right":case"right":l=-t;break;case"top-left":case"bottom-left":case"left":l=t}}return[l,u]}function Y4(n,t,i,l,u,p,g,y,b,w){n.createArrays(),n.tilePixelRatio=Pt/(512*n.overscaling),n.compareText={},n.iconsNeedLinear=!1;const C=n.layers[0].layout,P=n.layers[0]._unevaluatedLayout._values,I={};if(n.textSizeData.kind==="composite"){const{minZoom:F,maxZoom:G}=n.textSizeData;I.compositeTextSizes=[P["text-size"].possiblyEvaluate(new M(F),y),P["text-size"].possiblyEvaluate(new M(G),y)]}if(n.iconSizeData.kind==="composite"){const{minZoom:F,maxZoom:G}=n.iconSizeData;I.compositeIconSizes=[P["icon-size"].possiblyEvaluate(new M(F),y),P["icon-size"].possiblyEvaluate(new M(G),y)]}I.layoutTextSize=P["text-size"].possiblyEvaluate(new M(b+1),y),I.layoutIconSize=P["icon-size"].possiblyEvaluate(new M(b+1),y),I.textMaxSize=P["text-size"].possiblyEvaluate(new M(18),y);const O=C.get("text-rotation-alignment")==="map"&&C.get("symbol-placement")!=="point",z=C.get("text-size");for(const F of n.features){const G=C.get("text-font").evaluate(F,{},y).join(","),Q=z.evaluate(F,{},y),ce=I.layoutTextSize.evaluate(F,{},y),ee=(I.layoutIconSize.evaluate(F,{},y),{horizontal:{},vertical:void 0}),oe=F.text;let he,ue=[0,0];if(oe){const Ue=oe.toString(),et=C.get("text-letter-spacing").evaluate(F,{},y)*On,De=C.get("text-line-height").evaluate(F,{},y)*On,He=sy(Ue)?et:0,qe=C.get("text-anchor").evaluate(F,{},y),Ye=C.get("text-variable-anchor");if(!Ye){const ht=C.get("text-radial-offset").evaluate(F,{},y);ue=ht?yE(qe,[ht*On,Yy]):C.get("text-offset").evaluate(F,{},y).map(Dt=>Dt*On)}let it=O?"center":C.get("text-justify").evaluate(F,{},y);const Ne=C.get("symbol-placement")==="point",ut=Ne?C.get("text-max-width").evaluate(F,{},y)*On:1/0,bt=ht=>{n.allowVerticalPlacement&&Td(Ue)&&(ee.vertical=Wy(oe,t,i,u,G,ut,De,qe,ht,He,ue,Yi.vertical,!0,ce,Q))};if(!O&&Ye){const ht=it==="auto"?Ye.map(ot=>Qy(ot)):[it];let Dt=!1;for(let ot=0;ot<ht.length;ot++){const Ct=ht[ot];if(!ee.horizontal[Ct])if(Dt)ee.horizontal[Ct]=ee.horizontal[0];else{const Bt=Wy(oe,t,i,u,G,ut,De,"center",Ct,He,ue,Yi.horizontal,!1,ce,Q);Bt&&(ee.horizontal[Ct]=Bt,Dt=Bt.positionedLines.length===1)}}bt("left")}else{if(it==="auto"&&(it=Qy(qe)),Ne||C.get("text-writing-mode").indexOf("horizontal")>=0||!Td(Ue)){const ht=Wy(oe,t,i,u,G,ut,De,qe,it,He,ue,Yi.horizontal,!1,ce,Q);ht&&(ee.horizontal[it]=ht)}bt(Ne?"left":it)}}let Le=!1;if(F.icon&&F.icon.name){const Ue=l[F.icon.name];Ue&&(he=V4(u[F.icon.name],C.get("icon-offset").evaluate(F,{},y),C.get("icon-anchor").evaluate(F,{},y)),Le=Ue.sdf,n.sdfIcons===void 0?n.sdfIcons=Ue.sdf:n.sdfIcons!==Ue.sdf&&jr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ue.pixelRatio!==n.pixelRatio||C.get("icon-rotate").constantOr(1)!==0)&&(n.iconsNeedLinear=!0))}const Me=xE(ee.horizontal)||ee.vertical;n.iconsInText||(n.iconsInText=!!Me&&Me.iconsInText),(Me||he)&&Q4(n,F,ee,he,l,I,ce,0,ue,Le,g,y,w)}p&&n.generateCollisionDebugBuffers(b,n.collisionBoxArray)}function Qy(n){switch(n){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Q4(n,t,i,l,u,p,g,y,b,w,C,P,I){let O=p.textMaxSize.evaluate(t,{},P);O===void 0&&(O=g);const z=n.layers[0].layout,F=z.get("icon-offset").evaluate(t,{},P),G=xE(i.horizontal)||i.vertical,Q=I.name==="globe",ce=On,ee=g/ce,oe=n.tilePixelRatio*O/ce,he=(qe=n.overscaling,n.zoom>18&&qe>2&&(qe>>=1),Math.max(Pt/(512*qe),1)*z.get("symbol-spacing")),ue=z.get("text-padding")*n.tilePixelRatio,Le=z.get("icon-padding")*n.tilePixelRatio,Me=at(z.get("text-max-angle")),Ue=z.get("text-rotation-alignment")==="map"&&z.get("symbol-placement")!=="point",et=z.get("icon-rotation-alignment")==="map"&&z.get("symbol-placement")!=="point",De=z.get("symbol-placement"),He=he/2;var qe;const Ye=z.get("icon-text-fit");let it;l&&Ye!=="none"&&(n.allowVerticalPlacement&&i.vertical&&(it=aE(l,i.vertical,Ye,z.get("icon-text-fit-padding"),F,ee)),G&&(l=aE(l,G,Ye,z.get("icon-text-fit-padding"),F,ee)));const Ne=(ut,bt,ht)=>{if(bt.x<0||bt.x>=Pt||bt.y<0||bt.y>=Pt)return;let Dt=null;if(Q){const{x:ot,y:Ct,z:Bt}=I.projectTilePoint(bt.x,bt.y,ht);Dt={anchor:new Ys(ot,Ct,Bt,0,void 0),up:I.upVector(ht,bt.x,bt.y)}}(function(ot,Ct,Bt,or,Ft,Lt,kr,Ut,Vt,wr,Ar,Cr,Er,Vr,qr,an,Tr,yn,ln,$r,ar,cn,Mr,oi,un){const zn=ot.addToLineVertexArray(Ct,or);let Cn,si,Mn,Ho,Nu,cf,uf,JE=0,eT=0,tT=0,rT=0,fv=-1,pv=-1;const ys={};let nT=cy("");const uc=Bt?Bt.anchor:Ct;let mv=0,gv=0;if(Vt._unevaluatedLayout.getValue("text-radial-offset")===void 0?[mv,gv]=Vt.layout.get("text-offset").evaluate(ar,{},un).map(Ri=>Ri*On):(mv=Vt.layout.get("text-radial-offset").evaluate(ar,{},un)*On,gv=Yy),ot.allowVerticalPlacement&&Ft.vertical){const Ri=Ft.vertical;if(qr)cf=Jy(Ri),Ut&&(uf=Jy(Ut));else{const Di=Vt.layout.get("text-rotate").evaluate(ar,{},un)+90;Mn=Zm(wr,uc,Ct,Ar,Cr,Er,Ri,Vr,Di,an),Ut&&(Ho=Zm(wr,uc,Ct,Ar,Cr,Er,Ut,yn,Di))}}if(Lt){const Ri=Vt.layout.get("icon-rotate").evaluate(ar,{},un),Di=Vt.layout.get("icon-text-fit")!=="none",hf=gE(Lt,Ri,Mr,Di),yv=Ut?gE(Ut,Ri,Mr,Di):void 0;si=Zm(wr,uc,Ct,Ar,Cr,Er,Lt,yn,Ri),JE=4*hf.length;const iT=ot.iconSizeData;let hc=null;iT.kind==="source"?(hc=[$o*Vt.layout.get("icon-size").evaluate(ar,{},un)],hc[0]>Fa&&jr(`${ot.layerIds[0]}: Value for "icon-size" is >= ${ef}. Reduce your "icon-size".`)):iT.kind==="composite"&&(hc=[$o*cn.compositeIconSizes[0].evaluate(ar,{},un),$o*cn.compositeIconSizes[1].evaluate(ar,{},un)],(hc[0]>Fa||hc[1]>Fa)&&jr(`${ot.layerIds[0]}: Value for "icon-size" is >= ${ef}. Reduce your "icon-size".`)),ot.addSymbols(ot.icon,hf,hc,$r,ln,ar,!1,Bt,Ct,zn.lineStartIndex,zn.lineLength,-1,oi,un),fv=ot.icon.placedSymbolArray.length-1,yv&&(eT=4*yv.length,ot.addSymbols(ot.icon,yv,hc,$r,ln,ar,Yi.vertical,Bt,Ct,zn.lineStartIndex,zn.lineLength,-1,oi,un),pv=ot.icon.placedSymbolArray.length-1)}for(const Ri in Ft.horizontal){const Di=Ft.horizontal[Ri];Cn||(nT=cy(Di.text),qr?Nu=Jy(Di):Cn=Zm(wr,uc,Ct,Ar,Cr,Er,Di,Vr,Vt.layout.get("text-rotate").evaluate(ar,{},un),an));const hf=Di.positionedLines.length===1;if(tT+=vE(ot,Bt,Ct,Di,kr,Vt,qr,ar,an,zn,Ft.vertical?Yi.horizontal:Yi.horizontalOnly,hf?Object.keys(Ft.horizontal):[Ri],ys,fv,cn,oi,un),hf)break}Ft.vertical&&(rT+=vE(ot,Bt,Ct,Ft.vertical,kr,Vt,qr,ar,an,zn,Yi.vertical,["vertical"],ys,pv,cn,oi,un));let Ga=-1;const _v=(Ri,Di)=>Ri?Math.max(Ri,Di):Di;Ga=_v(Nu,Ga),Ga=_v(cf,Ga),Ga=_v(uf,Ga);const AL=Ga>-1?1:0;ot.glyphOffsetArray.length>=ja.MAX_GLYPHS&&jr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ar.sortKey!==void 0&&ot.addToSortKeyRanges(ot.symbolInstances.length,ar.sortKey),ot.symbolInstances.emplaceBack(uc.x,uc.y,uc.z,Ct.x,Ct.y,ys.right>=0?ys.right:-1,ys.center>=0?ys.center:-1,ys.left>=0?ys.left:-1,ys.vertical>=0?ys.vertical:-1,fv,pv,nT,Cn!==void 0?Cn:ot.collisionBoxArray.length,Cn!==void 0?Cn+1:ot.collisionBoxArray.length,Mn!==void 0?Mn:ot.collisionBoxArray.length,Mn!==void 0?Mn+1:ot.collisionBoxArray.length,si!==void 0?si:ot.collisionBoxArray.length,si!==void 0?si+1:ot.collisionBoxArray.length,Ho||ot.collisionBoxArray.length,Ho?Ho+1:ot.collisionBoxArray.length,Ar,tT,rT,JE,eT,AL,0,mv,gv,Ga)})(n,bt,Dt,ut,i,l,u,it,n.layers[0],n.collisionBoxArray,t.index,t.sourceLayerIndex,n.index,ue,Ue,b,0,Le,et,F,t,p,w,C,P)};if(De==="line")for(const ut of fE(t.geometry,0,0,Pt,Pt)){const bt=G4(ut,he,Me,i.vertical||G,l,ce,oe,n.overscaling,Pt);for(const ht of bt)G&&J4(n,G.text,He,ht)||Ne(ut,ht,P)}else if(De==="line-center"){for(const ut of t.geometry)if(ut.length>1){const bt=$4(ut,Me,i.vertical||G,l,ce,oe);bt&&Ne(ut,bt,P)}}else if(t.type==="Polygon")for(const ut of Ny(t.geometry,0)){const bt=W4(ut,16);Ne(ut[0],new Ys(bt.x,bt.y,0,0,void 0),P)}else if(t.type==="LineString")for(const ut of t.geometry)Ne(ut,new Ys(ut[0].x,ut[0].y,0,0,void 0),P);else if(t.type==="Point")for(const ut of t.geometry)for(const bt of ut)Ne([bt],new Ys(bt.x,bt.y,0,0,void 0),P)}const ef=255,Fa=ef*$o;function vE(n,t,i,l,u,p,g,y,b,w,C,P,I,O,z,F,G){const Q=function(oe,he,ue,Le,Me,Ue,et,De){const He=[];if(he.positionedLines.length===0)return He;const qe=Le.layout.get("text-rotate").evaluate(Ue,{})*Math.PI/180,Ye=function(ht){const Dt=ht[0],ot=ht[1],Ct=Dt*ot;return Ct>0?[Dt,-ot]:Ct<0?[-Dt,ot]:Dt===0?[ot,Dt]:[ot,-Dt]}(ue);let it=Math.abs(he.top-he.bottom);for(const ht of he.positionedLines)it-=ht.lineOffset;const Ne=he.positionedLines.length,ut=it/Ne;let bt=he.top-ue[1];for(let ht=0;ht<Ne;++ht){const Dt=he.positionedLines[ht];bt=Z4(he,ut,bt,ht);for(const ot of Dt.positionedGlyphs){if(!ot.rect)continue;const Ct=ot.rect||{};let Bt=J2+1,or=!0,Ft=1,Lt=0;if(ot.imageName){const Mr=et[ot.imageName];if(!Mr)continue;if(Mr.sdf){jr("SDF images are not supported in formatted text and will be ignored.");continue}or=!1,Ft=Mr.pixelRatio,Bt=yi/Ft}const kr=(Me||De)&&ot.vertical,Ut=ot.metrics.advance*ot.scale/2,Vt=ot.metrics,wr=ot.rect;if(wr===null)continue;De&&he.verticalizable&&(Lt=ot.imageName?Ut-ot.metrics.width*ot.scale/2:0);const Ar=Me?[ot.x+Ut,ot.y]:[0,0];let Cr=[0,0],Er=[0,0],Vr=!1;Me||(kr?(Er=[ot.x+Ut+Ye[0],ot.y+Ye[1]-Lt],Vr=!0):Cr=[ot.x+Ut+ue[0],ot.y+ue[1]-Lt]);const qr=wr.w*ot.scale/(Ft*(ot.localGlyph?Go:1)),an=wr.h*ot.scale/(Ft*(ot.localGlyph?Go:1));let Tr,yn,ln,$r;if(kr){const Mr=ot.y-bt,oi=new Te(-Ut,Ut-Mr),un=-Math.PI/2,zn=new Te(...Er);Tr=new Te(-Ut+Cr[0],Cr[1]),Tr._rotateAround(un,oi)._add(zn),Tr.x+=-Mr+Ut,Tr.y-=(Vt.left-Bt)*ot.scale;const Cn=ot.imageName?Vt.advance*ot.scale:On*ot.scale,si=String.fromCharCode(ot.glyph);A4(si)?Tr.x+=(1-Bt)*ot.scale:C4(si)?Tr.x+=Cn-Vt.height*ot.scale+(-Bt-1)*ot.scale:Tr.x+=ot.imageName||Vt.width+2*Bt===wr.w&&Vt.height+2*Bt===wr.h?(Cn-an)/2:(Cn-(Vt.height+2*Bt)*ot.scale)/2,yn=new Te(Tr.x,Tr.y-qr),ln=new Te(Tr.x+an,Tr.y),$r=new Te(Tr.x+an,Tr.y-qr)}else{const Mr=(Vt.left-Bt)*ot.scale-Ut+Cr[0],oi=(-Vt.top-Bt)*ot.scale+Cr[1],un=Mr+qr,zn=oi+an;Tr=new Te(Mr,oi),yn=new Te(un,oi),ln=new Te(Mr,zn),$r=new Te(un,zn)}if(qe){let Mr;Mr=Me?new Te(0,0):Vr?new Te(Ye[0],Ye[1]):new Te(ue[0],ue[1]),Tr._rotateAround(qe,Mr),yn._rotateAround(qe,Mr),ln._rotateAround(qe,Mr),$r._rotateAround(qe,Mr)}const ar=new Te(0,0),cn=new Te(0,0);He.push({tl:Tr,tr:yn,bl:ln,br:$r,tex:Ct,writingMode:he.writingMode,glyphOffset:Ar,sectionIndex:ot.sectionIndex,isSDF:or,pixelOffsetTL:ar,pixelOffsetBR:cn,minFontScaleX:0,minFontScaleY:0})}}return He}(0,l,b,p,g,y,u,n.allowVerticalPlacement),ce=n.textSizeData;let ee=null;ce.kind==="source"?(ee=[$o*p.layout.get("text-size").evaluate(y,{},G)],ee[0]>Fa&&jr(`${n.layerIds[0]}: Value for "text-size" is >= ${ef}. Reduce your "text-size".`)):ce.kind==="composite"&&(ee=[$o*z.compositeTextSizes[0].evaluate(y,{},G),$o*z.compositeTextSizes[1].evaluate(y,{},G)],(ee[0]>Fa||ee[1]>Fa)&&jr(`${n.layerIds[0]}: Value for "text-size" is >= ${ef}. Reduce your "text-size".`)),n.addSymbols(n.text,Q,ee,b,g,y,C,t,i,w.lineStartIndex,w.lineLength,O,F,G);for(const oe of P)I[oe]=n.text.placedSymbolArray.length-1;return 4*Q.length}function xE(n){for(const t in n)return n[t];return null}function Zm(n,t,i,l,u,p,g,y,b,w){let C=g.top,P=g.bottom,I=g.left,O=g.right;const z=g.collisionPadding;if(z&&(I-=z[0],C-=z[1],O+=z[2],P+=z[3]),b){const F=new Te(I,C),G=new Te(O,C),Q=new Te(I,P),ce=new Te(O,P),ee=at(b);let oe=new Te(0,0);w&&(oe=new Te(w[0],w[1])),F._rotateAround(ee,oe),G._rotateAround(ee,oe),Q._rotateAround(ee,oe),ce._rotateAround(ee,oe),I=Math.min(F.x,G.x,Q.x,ce.x),O=Math.max(F.x,G.x,Q.x,ce.x),C=Math.min(F.y,G.y,Q.y,ce.y),P=Math.max(F.y,G.y,Q.y,ce.y)}return n.emplaceBack(t.x,t.y,t.z,i.x,i.y,I,C,O,P,y,l,u,p),n.length-1}function Jy(n){n.collisionPadding&&(n.top-=n.collisionPadding[1],n.bottom+=n.collisionPadding[3]);const t=n.bottom-n.top;return t>0?Math.max(10,t):null}function J4(n,t,i,l){const u=n.compareText;if(t in u){const p=u[t];for(let g=p.length-1;g>=0;g--)if(l.dist(p[g])<i)return!0}else u[t]=[];return u[t].push(l),!1}function bE(n,t){const i=n.fovAboveCenter,l=n.elevation?n.elevation.getMinElevationBelowMSL()*t:0,u=(n._camera.position[2]*n.worldSize-l)/Math.cos(n._pitch),p=Math.sin(i)*u/Math.sin(Math.max(Math.PI/2-n._pitch-i,.01)),g=Math.sin(n._pitch)*p+u;return Math.min(1.01*g,u*(1/n._horizonShift))}function lc(n,t){if(!t.isReprojectedInTileSpace)return{scale:1<<n.z,x:n.x,y:n.y,x2:n.x+1,y2:n.y+1,projection:t};const i=Math.pow(2,-n.z),l=n.x*i,u=(n.x+1)*i,p=n.y*i,g=(n.y+1)*i,y=Ki(l),b=Ki(u),w=Vn(p),C=Vn(g),P=t.project(y,w),I=t.project(b,w),O=t.project(b,C),z=t.project(y,C);let F=Math.min(P.x,I.x,O.x,z.x),G=Math.min(P.y,I.y,O.y,z.y),Q=Math.max(P.x,I.x,O.x,z.x),ce=Math.max(P.y,I.y,O.y,z.y);const ee=i/16;function oe(ue,Le,Me,Ue,et,De){const He=(Me+et)/2,qe=(Ue+De)/2,Ye=t.project(Ki(He),Vn(qe)),it=Math.max(0,F-Ye.x,G-Ye.y,Ye.x-Q,Ye.y-ce);F=Math.min(F,Ye.x),Q=Math.max(Q,Ye.x),G=Math.min(G,Ye.y),ce=Math.max(ce,Ye.y),it>ee&&(oe(ue,Ye,Me,Ue,He,qe),oe(Ye,Le,He,qe,et,De))}oe(P,I,l,p,u,p),oe(I,O,u,p,u,g),oe(O,z,u,g,l,g),oe(z,P,l,g,l,p),F-=ee,G-=ee,Q+=ee,ce+=ee;const he=1/Math.max(Q-F,ce-G);return{scale:he,x:F*he,y:G*he,x2:Q*he,y2:ce*he,projection:t}}const eL=jo(new Float32Array(16));class Na{constructor(t){this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(t,i){return{x:0,y:0,z:0}}unproject(t,i){return new br(0,0)}projectTilePoint(t,i,l){return{x:t,y:i,z:0}}locationPoint(t,i,l=!0){return t._coordinatePoint(t.locationCoordinate(i),l)}pixelsPerMeter(t,i){return Vo(1,t)*i}pixelSpaceConversion(t,i,l){return 1}farthestPixelDistance(t){return bE(t,t.pixelsPerMeter)}pointCoordinate(t,i,l,u){const p=t.horizonLineFromTop(!1),g=new Te(i,Math.max(p,l));return t.rayIntersectionCoordinate(t.pointRayIntersection(g,u))}pointCoordinate3D(t,i,l){const u=new Te(i,l);if(t.elevation)return t.elevation.pointCoordinate(u);{const p=this.pointCoordinate(t,u.x,u.y,0);return[p.x,p.y,p.z]}}isPointAboveHorizon(t,i){if(t.elevation)return!this.pointCoordinate3D(t,i.x,i.y);const l=t.horizonLineFromTop();return i.y<l}createInversionMatrix(t,i){return eL}createTileMatrix(t,i,l){let u,p,g;const y=l.canonical,b=jo(new Float64Array(16));if(this.isReprojectedInTileSpace){const w=lc(y,this);u=1,p=w.x+l.wrap*w.scale,g=w.y,tc(b,b,[u/w.scale,u/w.scale,t.pixelsPerMeter/i])}else u=i/t.zoomScale(y.z),p=(y.x+Math.pow(2,y.z)*l.wrap)*u,g=y.y*u;return kd(b,b,[p,g,0]),tc(b,b,[u/Pt,u/Pt,1]),b}upVector(t,i,l){return[0,0,1]}upVectorScale(t,i,l){return{metersToTile:1}}}class tL extends Na{constructor(t){super(t),this.range=[4,7],this.center=t.center||[-96,37.5];const[i,l]=this.parallels=t.parallels||[29.5,45.5],u=Math.sin(at(i));this.n=(u+Math.sin(at(l)))/2,this.c=1+u*(2*this.n-u),this.r0=Math.sqrt(this.c)/this.n}project(t,i){const{n:l,c:u,r0:p}=this,g=at(t-this.center[0]),y=at(i),b=Math.sqrt(u-2*l*Math.sin(y))/l;return{x:b*Math.sin(g*l),y:b*Math.cos(g*l)-p,z:0}}unproject(t,i){const{n:l,c:u,r0:p}=this,g=p+i;let y=Math.atan2(t,Math.abs(g))*Math.sign(g);g*l<0&&(y-=Math.PI*Math.sign(t)*Math.sign(g));const b=at(this.center[0])*l;y=_t(y,-Math.PI-b,Math.PI-b);const w=Oe(vt(y/l)+this.center[0],-180,180),C=Math.asin(Oe((u-(t*t+g*g)*l*l)/(2*l),-1,1)),P=Oe(vt(C),-$n,$n);return new br(w,P)}}const tf=1.340264,rf=-.081106,nf=893e-6,of=.003796,Hm=Math.sqrt(3)/2;class rL extends Na{project(t,i){i=i/180*Math.PI,t=t/180*Math.PI;const l=Math.asin(Hm*Math.sin(i)),u=l*l,p=u*u*u;return{x:.5*(t*Math.cos(l)/(Hm*(tf+3*rf*u+p*(7*nf+9*of*u)))/Math.PI+.5),y:1-.5*(l*(tf+rf*u+p*(nf+of*u))/Math.PI+1),z:0}}unproject(t,i){t=(2*t-.5)*Math.PI;let l=i=(2*(1-i)-1)*Math.PI,u=l*l,p=u*u*u;for(let C,P,I,O=0;O<12&&(P=l*(tf+rf*u+p*(nf+of*u))-i,I=tf+3*rf*u+p*(7*nf+9*of*u),C=P/I,l=Oe(l-C,-Math.PI/3,Math.PI/3),u=l*l,p=u*u*u,!(Math.abs(C)<1e-12));++O);const g=Hm*t*(tf+3*rf*u+p*(7*nf+9*of*u))/Math.cos(l),y=Math.asin(Math.sin(l)/Hm),b=Oe(180*g/Math.PI,-180,180),w=Oe(180*y/Math.PI,-$n,$n);return new br(b,w)}}class nL extends Na{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0}project(t,i){return{x:.5+t/360,y:.5-i/360,z:0}}unproject(t,i){const l=360*(t-.5),u=Oe(360*(.5-i),-$n,$n);return new br(l,u)}}const Bu=Math.PI/2;function qm(n){return Math.tan((Bu+n)/2)}class iL extends Na{constructor(t){super(t),this.center=t.center||[0,30];const[i,l]=this.parallels=t.parallels||[30,30];let u=at(i),p=at(l);this.southernCenter=u+p<0,this.southernCenter&&(u=-u,p=-p);const g=Math.cos(u),y=qm(u);this.n=u===p?Math.sin(u):Math.log(g/Math.cos(p))/Math.log(qm(p)/y),this.f=g*Math.pow(qm(u),this.n)/this.n}project(t,i){i=at(i),this.southernCenter&&(i=-i),t=at(t-this.center[0]);const l=1e-6,{n:u,f:p}=this;p>0?i<-Bu+l&&(i=-Bu+l):i>Bu-l&&(i=Bu-l);const g=p/Math.pow(qm(i),u);let y=g*Math.sin(u*t),b=p-g*Math.cos(u*t);return y=.5*(y/Math.PI+.5),b=.5*(b/Math.PI+.5),{x:y,y:this.southernCenter?b:1-b,z:0}}unproject(t,i){t=(2*t-.5)*Math.PI,this.southernCenter&&(i=1-i),i=(2*(1-i)-.5)*Math.PI;const{n:l,f:u}=this,p=u-i,g=Math.sign(p),y=Math.sign(l)*Math.sqrt(t*t+p*p);let b=Math.atan2(t,Math.abs(p))*g;p*l<0&&(b-=Math.PI*Math.sign(t)*g);const w=Oe(vt(b/l)+this.center[0],-180,180),C=Oe(vt(2*Math.atan(Math.pow(u/y,1/l))-Bu),-$n,$n);return new br(w,this.southernCenter?-C:C)}}class wE extends Na{constructor(t){super(t),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(t,i){return{x:fs(t),y:ps(i),z:0}}unproject(t,i){const l=Ki(t),u=Vn(i);return new br(l,u)}}const EE=at($n);class oL extends Na{project(t,i){const l=(i=at(i))*i,u=l*l;return{x:.5*((t=at(t))*(.8707-.131979*l+u*(u*(.003971*l-.001529*u)-.013791))/Math.PI+.5),y:1-.5*(i*(1.007226+l*(.015085+u*(.028874*l-.044475-.005916*u)))/Math.PI+1),z:0}}unproject(t,i){t=(2*t-.5)*Math.PI;let l=i=(2*(1-i)-1)*Math.PI,u=25,p=0,g=l*l;do{g=l*l;const w=g*g;p=(l*(1.007226+g*(.015085+w*(.028874*g-.044475-.005916*w)))-i)/(1.007226+g*(.045255+w*(.259866*g-.311325-.005916*11*w))),l=Oe(l-p,-EE,EE)}while(Math.abs(p)>1e-6&&--u>0);g=l*l;const y=Oe(vt(t/(.8707+g*(g*(g*g*g*(.003971-.001529*g)-.013791)-.131979))),-180,180),b=vt(l);return new br(y,b)}}const TE=at($n);class sL extends Na{project(t,i){i=at(i),t=at(t);const l=Math.cos(i),u=2/Math.PI,p=Math.acos(l*Math.cos(t/2)),g=Math.sin(p)/p,y=.5*(t*u+2*l*Math.sin(t/2)/g)||0,b=.5*(i+Math.sin(i)/g)||0;return{x:.5*(y/Math.PI+.5),y:1-.5*(b/Math.PI+1),z:0}}unproject(t,i){let l=t=(2*t-.5)*Math.PI,u=i=(2*(1-i)-1)*Math.PI,p=25;const g=1e-6;let y=0,b=0;do{const w=Math.cos(u),C=Math.sin(u),P=2*C*w,I=C*C,O=w*w,z=Math.cos(l/2),F=Math.sin(l/2),G=2*z*F,Q=F*F,ce=1-O*z*z,ee=ce?1/ce:0,oe=ce?Math.acos(w*z)*Math.sqrt(1/ce):0,he=.5*(2*oe*w*F+2*l/Math.PI)-t,ue=.5*(oe*C+u)-i,Le=.5*ee*(O*Q+oe*w*z*I)+1/Math.PI,Me=ee*(G*P/4-oe*C*F),Ue=.125*ee*(P*F-oe*C*O*G),et=.5*ee*(I*z+oe*Q*w)+.5,De=Me*Ue-et*Le;y=(ue*Me-he*et)/De,b=(he*Ue-ue*Le)/De,l=Oe(l-y,-Math.PI,Math.PI),u=Oe(u-b,-TE,TE)}while((Math.abs(y)>g||Math.abs(b)>g)&&--p>0);return new br(vt(l),vt(u))}}class SE extends Na{constructor(t){super(t),this.center=t.center||[0,0],this.parallels=t.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(at(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(t,i){const{scale:l,cosPhi:u}=this;return{x:at(t)*u*l+.5,y:-Math.sin(at(i))/u*l+.5,z:0}}unproject(t,i){const{scale:l,cosPhi:u}=this,p=-(i-.5)/l,g=Oe(vt((t-.5)/l)/u,-180,180),y=Math.asin(Oe(p*u,-1,1)),b=Oe(vt(y),-$n,$n);return new br(g,b)}}class aL extends wE{constructor(t){super(t),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(t,i,l){const u=Nd(t,i,l);return Yr(u,u,jd(ds(l))),{x:u[0],y:u[1],z:u[2]}}locationPoint(t,i){const l=wu(i.lat,i.lng),u=ri([],l),p=t.elevation?t.elevation.getAtPointOrZero(t.locationCoordinate(i),t._centerAltitude):t._centerAltitude;Rd(l,l,u,Vo(1,0)*Pt*p);const g=jo(new Float64Array(16));return ec(g,t.pixelMatrix,t.globeMatrix),Yr(l,l,g),new Te(l[0],l[1])}pixelsPerMeter(t,i){return Vo(1,0)*i}pixelSpaceConversion(t,i,l){const u=Vo(1,t)*i,p=rr(Vo(1,45)*i,u,l);return this.pixelsPerMeter(t,i)/p}createTileMatrix(t,i,l){const u=Ey(ds(l.canonical));return ec(new Float64Array(16),t.globeMatrix,u)}createInversionMatrix(t,i){const{center:l}=t,u=jd(ds(i));return bm(u,u,at(l.lng)),fy(u,u,at(l.lat)),tc(u,u,[t._pixelsPerMercatorPixel,t._pixelsPerMercatorPixel,1]),Float32Array.from(u)}pointCoordinate(t,i,l,u){return Qw(t,i,l,!0)||new Tu(0,0)}pointCoordinate3D(t,i,l){const u=this.pointCoordinate(t,i,l,0);return[u.x,u.y,u.z]}isPointAboveHorizon(t,i){return!Qw(t,i.x,i.y,!1)}farthestPixelDistance(t){const i=function(u,p){const g=u.cameraToCenterDistance,y=u._centerAltitude*p,b=u._camera,w=u._camera.forward(),C=qs([],Xi([],w,-g),[0,0,y]),P=u.worldSize/(2*Math.PI),I=[0,0,-P],O=u.width/u.height,z=Math.tan(u.fovAboveCenter),F=Xi([],b.up(),z),G=Xi([],b.right(),z*O),Q=ri([],qs([],qs([],w,F),G)),ce=[];let ee;if(new _y(C,Q).closestPointOnSphere(I,P,ce)){const oe=qs([],ce,I),he=Uo([],oe,C);ee=Math.cos(u.fovAboveCenter)*Ld(he)}else{const oe=Uo([],C,I),he=Uo([],I,C);ri(he,he);const ue=Ld(oe)-P;ee=Math.sqrt(ue*(ue+2*P));const Le=Math.acos(ee/(P+ue))-Math.acos(po(w,he));ee*=Math.cos(Le)}return 1.01*ee}(t,this.pixelsPerMeter(t.center.lat,t.worldSize)),l=Eu(t.zoom);if(l>0){const u=bE(t,Vo(1,t.center.lat)*t.worldSize),p=t.worldSize/(2*Math.PI),g=Math.max(t.width,t.height)/t.worldSize*Math.PI;return rr(i,u+p*(1-Math.cos(g)),Math.pow(l,10))}return i}upVector(t,i,l){return Nd(i,l,t,1)}upVectorScale(t){return{metersToTile:wm(Tm(ds(t)))}}}function AE(n){const t=n.parallels,i=!!t&&Math.abs(t[0]+t[1])<.01;switch(n.name){case"mercator":return new wE(n);case"equirectangular":return new nL(n);case"naturalEarth":return new oL(n);case"equalEarth":return new rL(n);case"winkelTripel":return new sL(n);case"albers":return i?new SE(n):new tL(n);case"lambertConformalConic":return i?new SE(n):new iL(n);case"globe":return new aL(n)}throw new Error(`Invalid projection name: ${n.name}`)}const lL=zm.types,cL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wm(n,t,i,l,u,p,g,y,b,w,C,P,I){const O=y?Math.min(Fa,Math.round(y[0])):0,z=y?Math.min(Fa,Math.round(y[1])):0;n.emplaceBack(t,i,Math.round(32*l),Math.round(32*u),p,g,(O<<1)+(b?1:0),z,16*w,16*C,256*P,256*I)}function Xm(n,t,i,l,u,p,g){n.emplaceBack(t,i,l,u,p,g)}function Km(n,t,i,l,u){n.emplaceBack(t,i,l,u),n.emplaceBack(t,i,l,u),n.emplaceBack(t,i,l,u),n.emplaceBack(t,i,l,u)}function uL(n){for(const t of n.sections)if(ly(t.text))return!0;return!1}class ev{constructor(t){this.layoutVertexArray=new Ke,this.indexArray=new Tt,this.programConfigurations=t,this.segments=new on,this.dynamicLayoutVertexArray=new Qe,this.opacityVertexArray=new At,this.placedSymbolArray=new nn,this.globeExtVertexArray=new rt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,i,l,u){this.isEmpty()||(l&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,y4.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,i),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,x4.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,cL,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=t.createVertexBuffer(this.globeExtVertexArray,v4.members,!0)),this.opacityVertexBuffer.itemSize=1),(l||u)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}yt(ev,"SymbolBuffers");class tv{constructor(t,i,l){this.layoutVertexArray=new t,this.layoutAttributes=i,this.indexArray=new l,this.segments=new on,this.collisionVertexArray=new Kt,this.collisionVertexArrayExt=new Ht}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,b4.members,!0),this.collisionVertexBufferExt=t.createVertexBuffer(this.collisionVertexArrayExt,w4.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}yt(tv,"CollisionBuffers");class ja{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(g=>g.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=jo([]),this.placementViewportMatrix=jo([]);const i=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$y(this.zoom,i["text-size"]),this.iconSizeData=$y(this.zoom,i["icon-size"]);const l=this.layers[0].layout,u=l.get("symbol-sort-key"),p=l.get("symbol-z-order");this.canOverlap=l.get("text-allow-overlap")||l.get("icon-allow-overlap")||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=p!=="viewport-y"&&u.constantOr(1)!==void 0,this.sortFeaturesByY=(p==="viewport-y"||p==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=l.get("text-writing-mode").map(g=>Yi[g]),this.stateDependentLayerIds=this.layers.filter(g=>g.isStateDependent()).map(g=>g.id),this.sourceID=t.sourceID,this.projection=t.projection}createArrays(){this.text=new ev(new Jl(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new ev(new Jl(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new ti,this.lineVertexArray=new _u,this.symbolInstances=new Or}calculateGlyphDependencies(t,i,l,u,p){for(let g=0;g<t.length;g++)if(i[t.charCodeAt(g)]=!0,u&&p){const y=Yd[t.charAt(g)];y&&(i[y.charCodeAt(0)]=!0)}}populate(t,i,l,u){const p=this.layers[0],g=p.layout,y=this.projection.name==="globe",b=g.get("text-font"),w=g.get("text-field"),C=g.get("icon-image"),P=(w.value.kind!=="constant"||w.value.value instanceof ei&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),I=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,O=g.get("symbol-sort-key");if(this.features=[],!P&&!I)return;const z=i.iconDependencies,F=i.glyphDependencies,G=i.availableImages,Q=new M(this.zoom);for(const{feature:ce,id:ee,index:oe,sourceLayerIndex:he}of t){const ue=p._featureFilter.needGeometry,Le=oc(ce,ue);if(!p._featureFilter.filter(Q,Le,l))continue;if(ue||(Le.geometry=Ws(ce,l,u)),y&&ce.type!==1&&l.z<=5){const De=Le.geometry,He=.98078528056,qe=(Ye,it)=>po(Nd(Ye.x,Ye.y,l,1),Nd(it.x,it.y,l,1))<He;for(let Ye=0;Ye<De.length;Ye++)De[Ye]=xk(De[Ye],qe)}let Me,Ue;if(P){const De=p.getValueAndResolveTokens("text-field",Le,l,G),He=ei.factory(De);uL(He)&&(this.hasRTLText=!0),(!this.hasRTLText||v()==="unavailable"||this.hasRTLText&&S.isParsed())&&(Me=S4(He,p,Le))}if(I){const De=p.getValueAndResolveTokens("icon-image",Le,l,G);Ue=De instanceof Pi?De:Pi.fromString(De)}if(!Me&&!Ue)continue;const et=this.sortFeaturesByKey?O.evaluate(Le,{},l):void 0;if(this.features.push({id:ee,text:Me,icon:Ue,index:oe,sourceLayerIndex:he,geometry:Le.geometry,properties:ce.properties,type:lL[ce.type],sortKey:et}),Ue&&(z[Ue.name]=!0),Me){const De=b.evaluate(Le,{},l).join(","),He=g.get("text-rotation-alignment")==="map"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Yi.vertical)>=0;for(const qe of Me.sections)if(qe.image)z[qe.image.name]=!0;else{const Ye=Td(Me.toString()),it=qe.fontStack||De,Ne=F[it]=F[it]||{};this.calculateGlyphDependencies(qe.text,Ne,He,this.allowVerticalPlacement,Ye)}}}g.get("symbol-placement")==="line"&&(this.features=function(ce){const ee={},oe={},he=[];let ue=0;function Le(De){he.push(ce[De]),ue++}function Me(De,He,qe){const Ye=oe[De];return delete oe[De],oe[He]=Ye,he[Ye].geometry[0].pop(),he[Ye].geometry[0]=he[Ye].geometry[0].concat(qe[0]),Ye}function Ue(De,He,qe){const Ye=ee[He];return delete ee[He],ee[De]=Ye,he[Ye].geometry[0].shift(),he[Ye].geometry[0]=qe[0].concat(he[Ye].geometry[0]),Ye}function et(De,He,qe){const Ye=qe?He[0][He[0].length-1]:He[0][0];return`${De}:${Ye.x}:${Ye.y}`}for(let De=0;De<ce.length;De++){const He=ce[De],qe=He.geometry,Ye=He.text?He.text.toString():null;if(!Ye){Le(De);continue}const it=et(Ye,qe),Ne=et(Ye,qe,!0);if(it in oe&&Ne in ee&&oe[it]!==ee[Ne]){const ut=Ue(it,Ne,qe),bt=Me(it,Ne,he[ut].geometry);delete ee[it],delete oe[Ne],oe[et(Ye,he[bt].geometry,!0)]=bt,he[ut].geometry=null}else it in oe?Me(it,Ne,qe):Ne in ee?Ue(it,Ne,qe):(Le(De),ee[it]=ue-1,oe[Ne]=ue-1)}return he.filter(De=>De.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ce,ee)=>ce.sortKey-ee.sortKey)}update(t,i,l,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,i,this.layers,l,u),this.icon.programConfigurations.updatePaintArrays(t,i,this.layers,l,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=AE(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,i){const l=this.lineVertexArray.length;if(t.segment!==void 0)for(const{x:u,y:p}of i)this.lineVertexArray.emplaceBack(u,p);return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(t,i,l,u,p,g,y,b,w,C,P,I,O,z){const F=t.indexArray,G=t.layoutVertexArray,Q=t.globeExtVertexArray,ce=t.segments.prepareSegment(4*i.length,G,F,this.canOverlap?g.sortKey:void 0),ee=this.glyphOffsetArray.length,oe=ce.vertexLength,he=this.allowVerticalPlacement&&y===Yi.vertical?Math.PI/2:0,ue=g.text&&g.text.sections;for(let Me=0;Me<i.length;Me++){const{tl:Ue,tr:et,bl:De,br:He,tex:qe,pixelOffsetTL:Ye,pixelOffsetBR:it,minFontScaleX:Ne,minFontScaleY:ut,glyphOffset:bt,isSDF:ht,sectionIndex:Dt}=i[Me],ot=ce.vertexLength,Ct=bt[1];if(Wm(G,w.x,w.y,Ue.x,Ct+Ue.y,qe.x,qe.y,l,ht,Ye.x,Ye.y,Ne,ut),Wm(G,w.x,w.y,et.x,Ct+et.y,qe.x+qe.w,qe.y,l,ht,it.x,Ye.y,Ne,ut),Wm(G,w.x,w.y,De.x,Ct+De.y,qe.x,qe.y+qe.h,l,ht,Ye.x,it.y,Ne,ut),Wm(G,w.x,w.y,He.x,Ct+He.y,qe.x+qe.w,qe.y+qe.h,l,ht,it.x,it.y,Ne,ut),b){const{x:Bt,y:or,z:Ft}=b.anchor,[Lt,kr,Ut]=b.up;Xm(Q,Bt,or,Ft,Lt,kr,Ut),Xm(Q,Bt,or,Ft,Lt,kr,Ut),Xm(Q,Bt,or,Ft,Lt,kr,Ut),Xm(Q,Bt,or,Ft,Lt,kr,Ut),Km(t.dynamicLayoutVertexArray,Bt,or,Ft,he)}else Km(t.dynamicLayoutVertexArray,w.x,w.y,w.z,he);F.emplaceBack(ot,ot+1,ot+2),F.emplaceBack(ot+1,ot+2,ot+3),ce.vertexLength+=4,ce.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(bt[0]),Me!==i.length-1&&Dt===i[Me+1].sectionIndex||t.programConfigurations.populatePaintArrays(G.length,g,g.index,{},O,z,ue&&ue[Dt])}const Le=b?b.anchor:w;t.placedSymbolArray.emplaceBack(Le.x,Le.y,Le.z,w.x,w.y,ee,this.glyphOffsetArray.length-ee,oe,C,P,w.segment,l?l[0]:0,l?l[1]:0,u[0],u[1],y,0,!1,0,I,0)}_commitLayoutVertex(t,i,l,u,p,g,y){t.emplaceBack(i,l,u,p,g,Math.round(y.x),Math.round(y.y))}_addCollisionDebugVertices(t,i,l,u,p,g,y){const b=l.segments.prepareSegment(4,l.layoutVertexArray,l.indexArray),w=b.vertexLength,C=y.tileAnchorX,P=y.tileAnchorY;for(let O=0;O<4;O++)l.collisionVertexArray.emplaceBack(0,0,0,0);l.collisionVertexArrayExt.emplaceBack(i,-t.padding,-t.padding),l.collisionVertexArrayExt.emplaceBack(i,t.padding,-t.padding),l.collisionVertexArrayExt.emplaceBack(i,t.padding,t.padding),l.collisionVertexArrayExt.emplaceBack(i,-t.padding,t.padding),this._commitLayoutVertex(l.layoutVertexArray,u,p,g,C,P,new Te(t.x1,t.y1)),this._commitLayoutVertex(l.layoutVertexArray,u,p,g,C,P,new Te(t.x2,t.y1)),this._commitLayoutVertex(l.layoutVertexArray,u,p,g,C,P,new Te(t.x2,t.y2)),this._commitLayoutVertex(l.layoutVertexArray,u,p,g,C,P,new Te(t.x1,t.y2)),b.vertexLength+=4;const I=l.indexArray;I.emplaceBack(w,w+1),I.emplaceBack(w+1,w+2),I.emplaceBack(w+2,w+3),I.emplaceBack(w+3,w),b.primitiveLength+=4}_addTextDebugCollisionBoxes(t,i,l,u,p,g){for(let y=u;y<p;y++){const b=l.get(y),w=this.getSymbolInstanceTextSize(t,g,i,y);this._addCollisionDebugVertices(b,w,this.textCollisionBox,b.projectedAnchorX,b.projectedAnchorY,b.projectedAnchorZ,g)}}_addIconDebugCollisionBoxes(t,i,l,u,p,g){for(let y=u;y<p;y++){const b=l.get(y),w=this.getSymbolInstanceIconSize(t,i,g.placedIconSymbolIndex);this._addCollisionDebugVertices(b,w,this.iconCollisionBox,b.projectedAnchorX,b.projectedAnchorY,b.projectedAnchorZ,g)}}generateCollisionDebugBuffers(t,i){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new tv(xt,Z2.members,An),this.iconCollisionBox=new tv(xt,Z2.members,An);const l=Pu(this.iconSizeData,t),u=Pu(this.textSizeData,t);for(let p=0;p<this.symbolInstances.length;p++){const g=this.symbolInstances.get(p);this._addTextDebugCollisionBoxes(u,t,i,g.textBoxStartIndex,g.textBoxEndIndex,g),this._addTextDebugCollisionBoxes(u,t,i,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._addIconDebugCollisionBoxes(l,t,i,g.iconBoxStartIndex,g.iconBoxEndIndex,g),this._addIconDebugCollisionBoxes(l,t,i,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g)}}getSymbolInstanceTextSize(t,i,l,u){const p=this.text.placedSymbolArray.get(i.rightJustifiedTextSymbolIndex>=0?i.rightJustifiedTextSymbolIndex:i.centerJustifiedTextSymbolIndex>=0?i.centerJustifiedTextSymbolIndex:i.leftJustifiedTextSymbolIndex>=0?i.leftJustifiedTextSymbolIndex:i.verticalPlacedTextSymbolIndex>=0?i.verticalPlacedTextSymbolIndex:u),g=Fm(this.textSizeData,t,p)/On;return this.tilePixelRatio*g}getSymbolInstanceIconSize(t,i,l){const u=this.icon.placedSymbolArray.get(l),p=Fm(this.iconSizeData,t,u);return this.tilePixelRatio*p}_commitDebugCollisionVertexUpdate(t,i,l){t.emplaceBack(i,-l,-l),t.emplaceBack(i,l,-l),t.emplaceBack(i,l,l),t.emplaceBack(i,-l,l)}_updateTextDebugCollisionBoxes(t,i,l,u,p,g){for(let y=u;y<p;y++){const b=l.get(y),w=this.getSymbolInstanceTextSize(t,g,i,y);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,w,b.padding)}}_updateIconDebugCollisionBoxes(t,i,l,u,p,g){for(let y=u;y<p;y++){const b=l.get(y),w=this.getSymbolInstanceIconSize(t,i,g);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,w,b.padding)}}updateCollisionDebugBuffers(t,i){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const l=Pu(this.iconSizeData,t),u=Pu(this.textSizeData,t);for(let p=0;p<this.symbolInstances.length;p++){const g=this.symbolInstances.get(p);this._updateTextDebugCollisionBoxes(u,t,i,g.textBoxStartIndex,g.textBoxEndIndex,g),this._updateTextDebugCollisionBoxes(u,t,i,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g),this._updateIconDebugCollisionBoxes(l,t,i,g.iconBoxStartIndex,g.iconBoxEndIndex,g.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(l,t,i,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex,g.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(t,i,l,u,p,g,y,b,w){const C={};if(i<l){const{x1:P,y1:I,x2:O,y2:z,padding:F,projectedAnchorX:G,projectedAnchorY:Q,projectedAnchorZ:ce,tileAnchorX:ee,tileAnchorY:oe,featureIndex:he}=t.get(i);C.textBox={x1:P,y1:I,x2:O,y2:z,padding:F,projectedAnchorX:G,projectedAnchorY:Q,projectedAnchorZ:ce,tileAnchorX:ee,tileAnchorY:oe},C.textFeatureIndex=he}if(u<p){const{x1:P,y1:I,x2:O,y2:z,padding:F,projectedAnchorX:G,projectedAnchorY:Q,projectedAnchorZ:ce,tileAnchorX:ee,tileAnchorY:oe,featureIndex:he}=t.get(u);C.verticalTextBox={x1:P,y1:I,x2:O,y2:z,padding:F,projectedAnchorX:G,projectedAnchorY:Q,projectedAnchorZ:ce,tileAnchorX:ee,tileAnchorY:oe},C.verticalTextFeatureIndex=he}if(g<y){const{x1:P,y1:I,x2:O,y2:z,padding:F,projectedAnchorX:G,projectedAnchorY:Q,projectedAnchorZ:ce,tileAnchorX:ee,tileAnchorY:oe,featureIndex:he}=t.get(g);C.iconBox={x1:P,y1:I,x2:O,y2:z,padding:F,projectedAnchorX:G,projectedAnchorY:Q,projectedAnchorZ:ce,tileAnchorX:ee,tileAnchorY:oe},C.iconFeatureIndex=he}if(b<w){const{x1:P,y1:I,x2:O,y2:z,padding:F,projectedAnchorX:G,projectedAnchorY:Q,projectedAnchorZ:ce,tileAnchorX:ee,tileAnchorY:oe,featureIndex:he}=t.get(b);C.verticalIconBox={x1:P,y1:I,x2:O,y2:z,padding:F,projectedAnchorX:G,projectedAnchorY:Q,projectedAnchorZ:ce,tileAnchorX:ee,tileAnchorY:oe},C.verticalIconFeatureIndex=he}return C}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,i){const l=t.placedSymbolArray.get(i),u=l.vertexStartIndex+4*l.numGlyphs;for(let p=l.vertexStartIndex;p<u;p+=4)t.indexArray.emplaceBack(p,p+1,p+2),t.indexArray.emplaceBack(p+1,p+2,p+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const i=Math.sin(t),l=Math.cos(t),u=[],p=[],g=[];for(let y=0;y<this.symbolInstances.length;++y){g.push(y);const b=this.symbolInstances.get(y);u.push(0|Math.round(i*b.tileAnchorX+l*b.tileAnchorY)),p.push(b.featureIndex)}return g.sort((y,b)=>u[y]-u[b]||p[b]-p[y]),g}addToSortKeyRanges(t,i){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===i?l.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:i,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const i of this.symbolInstanceIndexes){const l=this.symbolInstances.get(i);this.featureSortOrder.push(l.featureIndex);const{rightJustifiedTextSymbolIndex:u,centerJustifiedTextSymbolIndex:p,leftJustifiedTextSymbolIndex:g,verticalPlacedTextSymbolIndex:y,placedIconSymbolIndex:b,verticalPlacedIconSymbolIndex:w}=l;u>=0&&this.addIndicesForPlacedSymbol(this.text,u),p>=0&&p!==u&&this.addIndicesForPlacedSymbol(this.text,p),g>=0&&g!==p&&g!==u&&this.addIndicesForPlacedSymbol(this.text,g),y>=0&&this.addIndicesForPlacedSymbol(this.text,y),b>=0&&this.addIndicesForPlacedSymbol(this.icon,b),w>=0&&this.addIndicesForPlacedSymbol(this.icon,w)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}yt(ja,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),ja.MAX_GLYPHS=65535,ja.addDynamicAttributes=Km;const hL=new ne({"symbol-placement":new B(je.layout_symbol["symbol-placement"]),"symbol-spacing":new B(je.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new B(je.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new H(je.layout_symbol["symbol-sort-key"]),"symbol-z-order":new B(je.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new B(je.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new B(je.layout_symbol["icon-ignore-placement"]),"icon-optional":new B(je.layout_symbol["icon-optional"]),"icon-rotation-alignment":new B(je.layout_symbol["icon-rotation-alignment"]),"icon-size":new H(je.layout_symbol["icon-size"]),"icon-text-fit":new B(je.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new B(je.layout_symbol["icon-text-fit-padding"]),"icon-image":new H(je.layout_symbol["icon-image"]),"icon-rotate":new H(je.layout_symbol["icon-rotate"]),"icon-padding":new B(je.layout_symbol["icon-padding"]),"icon-keep-upright":new B(je.layout_symbol["icon-keep-upright"]),"icon-offset":new H(je.layout_symbol["icon-offset"]),"icon-anchor":new H(je.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new B(je.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new B(je.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new B(je.layout_symbol["text-rotation-alignment"]),"text-field":new H(je.layout_symbol["text-field"]),"text-font":new H(je.layout_symbol["text-font"]),"text-size":new H(je.layout_symbol["text-size"]),"text-max-width":new H(je.layout_symbol["text-max-width"]),"text-line-height":new H(je.layout_symbol["text-line-height"]),"text-letter-spacing":new H(je.layout_symbol["text-letter-spacing"]),"text-justify":new H(je.layout_symbol["text-justify"]),"text-radial-offset":new H(je.layout_symbol["text-radial-offset"]),"text-variable-anchor":new B(je.layout_symbol["text-variable-anchor"]),"text-anchor":new H(je.layout_symbol["text-anchor"]),"text-max-angle":new B(je.layout_symbol["text-max-angle"]),"text-writing-mode":new B(je.layout_symbol["text-writing-mode"]),"text-rotate":new H(je.layout_symbol["text-rotate"]),"text-padding":new B(je.layout_symbol["text-padding"]),"text-keep-upright":new B(je.layout_symbol["text-keep-upright"]),"text-transform":new H(je.layout_symbol["text-transform"]),"text-offset":new H(je.layout_symbol["text-offset"]),"text-allow-overlap":new B(je.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new B(je.layout_symbol["text-ignore-placement"]),"text-optional":new B(je.layout_symbol["text-optional"])});var rv={paint:new ne({"icon-opacity":new H(je.paint_symbol["icon-opacity"]),"icon-color":new H(je.paint_symbol["icon-color"]),"icon-halo-color":new H(je.paint_symbol["icon-halo-color"]),"icon-halo-width":new H(je.paint_symbol["icon-halo-width"]),"icon-halo-blur":new H(je.paint_symbol["icon-halo-blur"]),"icon-translate":new B(je.paint_symbol["icon-translate"]),"icon-translate-anchor":new B(je.paint_symbol["icon-translate-anchor"]),"text-opacity":new H(je.paint_symbol["text-opacity"]),"text-color":new H(je.paint_symbol["text-color"],{runtimeType:gi,getOverride:n=>n.textColor,hasOverride:n=>!!n.textColor}),"text-halo-color":new H(je.paint_symbol["text-halo-color"]),"text-halo-width":new H(je.paint_symbol["text-halo-width"]),"text-halo-blur":new H(je.paint_symbol["text-halo-blur"]),"text-translate":new B(je.paint_symbol["text-translate"]),"text-translate-anchor":new B(je.paint_symbol["text-translate-anchor"])}),layout:hL};class CE{constructor(t){this.type=t.property.overrides?t.property.overrides.runtimeType:ga,this.defaultValue=t}evaluate(t){if(t.formattedSection){const i=this.defaultValue.property.overrides;if(i&&i.hasOverride(t.formattedSection))return i.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}yt(CE,"FormatSectionOverride",{omit:["defaultValue"]});class Ym extends No{constructor(t){super(t,rv)}recalculate(t,i){super.recalculate(t,i),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const l=this.layout.get("text-writing-mode");if(l){const u=[];for(const p of l)u.indexOf(p)<0&&u.push(p);this.layout._values["text-writing-mode"]=u}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(t,i,l,u){const p=this.layout.get(t).evaluate(i,{},l,u),g=this._unevaluatedLayout._values[t];return g.isDataDriven()||Ma(g.value)||!p?p:function(y,b){return b.replace(/{([^{}]+)}/g,(w,C)=>C in y?String(y[C]):"")}(i.properties,p)}createBucket(t){return new ja(t)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const t of rv.paint.overridableProperties){if(!Ym.hasPaintOverride(this.layout,t))continue;const i=this.paint.get(t),l=new CE(i),u=new cu(l,i.property.specification);let p=null;p=i.value.kind==="constant"||i.value.kind==="source"?new fd("source",u):new Gl("composite",u,i.value.zoomStops,i.value._interpolationType),this.paint._values[t]=new X(i.property,p,i.parameters)}}_handleOverridablePaintPropertyUpdate(t,i,l){return!(!this.layout||i.isDataDriven()||l.isDataDriven())&&Ym.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,i){const l=t.get("text-field"),u=rv.paint.properties[i];let p=!1;const g=y=>{for(const b of y)if(u.overrides&&u.overrides.hasOverride(b))return void(p=!0)};if(l.value.kind==="constant"&&l.value.value instanceof ei)g(l.value.value.sections);else if(l.value.kind==="source"){const y=w=>{p||(w instanceof Ds&&Hr(w.value)===Cl?g(w.value.sections):w instanceof ls?g(w.sections):w.eachChild(y))},b=l.value;b._styleExpression&&y(b._styleExpression.expression)}return p}getProgramConfiguration(t){return new Ra(this,t)}}var dL={paint:new ne({"background-color":new B(je.paint_background["background-color"]),"background-pattern":new B(je.paint_background["background-pattern"]),"background-opacity":new B(je.paint_background["background-opacity"])})},fL={paint:new ne({"raster-opacity":new B(je.paint_raster["raster-opacity"]),"raster-hue-rotate":new B(je.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new B(je.paint_raster["raster-brightness-min"]),"raster-brightness-max":new B(je.paint_raster["raster-brightness-max"]),"raster-saturation":new B(je.paint_raster["raster-saturation"]),"raster-contrast":new B(je.paint_raster["raster-contrast"]),"raster-resampling":new B(je.paint_raster["raster-resampling"]),"raster-fade-duration":new B(je.paint_raster["raster-fade-duration"])})};class pL extends No{constructor(t){super(t,{}),this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)}onRemove(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)}}var mL={paint:new ne({"sky-type":new B(je.paint_sky["sky-type"]),"sky-atmosphere-sun":new B(je.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new B(je.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new B(je.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new B(je.paint_sky["sky-gradient-radius"]),"sky-gradient":new re(je.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new B(je.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new B(je.paint_sky["sky-atmosphere-color"]),"sky-opacity":new B(je.paint_sky["sky-opacity"])})};function nv(n,t,i){const l=[0,0,1],u=Hw([]);return Ww(u,u,i?-at(n)+Math.PI:at(n)),qw(u,u,-at(t)),Vw(l,l,u),ri(l,l)}const gL={circle:class extends No{constructor(n){super(n,Ck)}createBucket(n){return new Py(n)}queryRadius(n){const t=n;return Su("circle-radius",this,t)+Su("circle-stroke-width",this,t)+Cm(this.paint.get("circle-translate"))}queryIntersectsFeature(n,t,i,l,u,p,g,y){const b=g2(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),p.angle,n.pixelToTileUnitsFactor),w=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i);return _2(n,l,p,g,y,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",b,w)}getProgramIds(){return["circle"]}getProgramConfiguration(n){return new Ra(this,n)}},heatmap:class extends No{createBucket(n){return new v2(n)}constructor(n){super(n,kk),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Oy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(n){return Su("heatmap-radius",this,n)}queryIntersectsFeature(n,t,i,l,u,p,g,y){const b=this.paint.get("heatmap-radius").evaluate(t,i);return _2(n,l,p,g,y,!0,!0,new Te(0,0),b)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(n){return new Ra(this,n)}},hillshade:class extends No{constructor(n){super(n,Lk)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends No{constructor(n){super(n,Wk)}getProgramIds(){const n=this.paint.get("fill-pattern"),t=n&&n.constantOr(1),i=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(n){return new Ra(this,n)}recalculate(n,t){super.recalculate(n,t);const i=this.paint._values["fill-outline-color"];i.value.kind==="constant"&&i.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(n){return new Lm(n)}queryRadius(){return Cm(this.paint.get("fill-translate"))}queryIntersectsFeature(n,t,i,l,u,p){return!n.queryGeometry.isAboveHorizon&&h2(m2(n.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),p.angle,n.pixelToTileUnitsFactor),l)}isTileClipped(){return!0}},"fill-extrusion":class extends No{constructor(n){super(n,u4)}createBucket(n){return new Wd(n)}queryRadius(){return Cm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(n){return new Ra(this,n)}queryIntersectsFeature(n,t,i,l,u,p,g,y,b){const w=g2(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),p.angle,n.pixelToTileUnitsFactor),C=this.paint.get("fill-extrusion-height").evaluate(t,i),P=this.paint.get("fill-extrusion-base").evaluate(t,i),I=[0,0],O=y&&p.elevation,z=p.elevation?p.elevation.exaggeration():1,F=n.tile.getBucket(this);if(O&&F instanceof Wd){const oe=F.centroidVertexArray,he=b+1;he<oe.length&&(I[0]=oe.geta_centroid_pos0(he),I[1]=oe.geta_centroid_pos1(he))}if(I[0]===0&&I[1]===1)return!1;p.projection.name==="globe"&&(l=B2([l],[new Te(0,0),new Te(Pt,Pt)],n.tileID.canonical).map(oe=>oe.polygon).flat());const G=O?y:null,[Q,ce]=function(oe,he,ue,Le,Me,Ue,et,De,He,qe,Ye){return oe.projection.name==="globe"?function(it,Ne,ut,bt,ht,Dt,ot,Ct,Bt,or,Ft){const Lt=[],kr=[],Ut=it.projection.upVectorScale(Ft,it.center.lat,it.worldSize).metersToTile,Vt=[0,0,0,1],wr=[0,0,0,1],Ar=(Er,Vr,qr,an)=>{Er[0]=Vr,Er[1]=qr,Er[2]=an,Er[3]=1},Cr=D2();ut>0&&(ut+=Cr),bt+=Cr;for(const Er of Ne){const Vr=[],qr=[];for(const an of Er){const Tr=an.x+ht.x,yn=an.y+ht.y,ln=it.projection.projectTilePoint(Tr,yn,Ft),$r=it.projection.upVector(Ft,an.x,an.y);let ar=ut,cn=bt;if(ot){const Mr=U2(Tr,yn,ut,bt,ot,Ct,Bt,or);ar+=Mr.base,cn+=Mr.top}ut!==0?Ar(Vt,ln.x+$r[0]*Ut*ar,ln.y+$r[1]*Ut*ar,ln.z+$r[2]*Ut*ar):Ar(Vt,ln.x,ln.y,ln.z),Ar(wr,ln.x+$r[0]*Ut*cn,ln.y+$r[1]*Ut*cn,ln.z+$r[2]*Ut*cn),Yr(Vt,Vt,Dt),Yr(wr,wr,Dt),Vr.push(new Mu(Vt[0],Vt[1],Vt[2])),qr.push(new Mu(wr[0],wr[1],wr[2]))}Lt.push(Vr),kr.push(qr)}return[Lt,kr]}(oe,he,ue,Le,Me,Ue,et,De,He,qe,Ye):et?function(it,Ne,ut,bt,ht,Dt,ot,Ct,Bt){const or=[],Ft=[],Lt=[0,0,0,1];for(const kr of it){const Ut=[],Vt=[];for(const wr of kr){const Ar=wr.x+bt.x,Cr=wr.y+bt.y,Er=U2(Ar,Cr,Ne,ut,Dt,ot,Ct,Bt);Lt[0]=Ar,Lt[1]=Cr,Lt[2]=Er.base,Lt[3]=1,rc(Lt,Lt,ht),Lt[3]=Math.max(Lt[3],1e-5);const Vr=new Mu(Lt[0]/Lt[3],Lt[1]/Lt[3],Lt[2]/Lt[3]);Lt[0]=Ar,Lt[1]=Cr,Lt[2]=Er.top,Lt[3]=1,rc(Lt,Lt,ht),Lt[3]=Math.max(Lt[3],1e-5);const qr=new Mu(Lt[0]/Lt[3],Lt[1]/Lt[3],Lt[2]/Lt[3]);Ut.push(Vr),Vt.push(qr)}or.push(Ut),Ft.push(Vt)}return[or,Ft]}(he,ue,Le,Me,Ue,et,De,He,qe):function(it,Ne,ut,bt,ht){const Dt=[],ot=[],Ct=ht[8]*Ne,Bt=ht[9]*Ne,or=ht[10]*Ne,Ft=ht[11]*Ne,Lt=ht[8]*ut,kr=ht[9]*ut,Ut=ht[10]*ut,Vt=ht[11]*ut;for(const wr of it){const Ar=[],Cr=[];for(const Er of wr){const Vr=Er.x+bt.x,qr=Er.y+bt.y,an=ht[0]*Vr+ht[4]*qr+ht[12],Tr=ht[1]*Vr+ht[5]*qr+ht[13],yn=ht[2]*Vr+ht[6]*qr+ht[14],ln=ht[3]*Vr+ht[7]*qr+ht[15],$r=an+Ct,ar=Tr+Bt,cn=yn+or,Mr=Math.max(ln+Ft,1e-5),oi=an+Lt,un=Tr+kr,zn=yn+Ut,Cn=Math.max(ln+Vt,1e-5);Ar.push(new Mu($r/Mr,ar/Mr,cn/Mr)),Cr.push(new Mu(oi/Cn,un/Cn,zn/Cn))}Dt.push(Ar),ot.push(Cr)}return[Dt,ot]}(he,ue,Le,Me,Ue)}(p,l,P,C,w,g,G,I,z,p.center.lat,n.tileID.canonical),ee=n.queryGeometry;return function(oe,he,ue){let Le=1/0;h2(ue,he)&&(Le=j2(ue,he[0]));for(let Me=0;Me<he.length;Me++){const Ue=he[Me],et=oe[Me];for(let De=0;De<Ue.length-1;De++){const He=Ue[De],qe=[He,Ue[De+1],et[De+1],et[De],He];u2(ue,qe)&&(Le=Math.min(Le,j2(ue,qe)))}}return Le!==1/0&&Le}(Q,ce,ee.isPointQuery()?ee.screenBounds:ee.screenGeometry)}},line:class extends No{constructor(n){super(n,V2),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(n){if(n==="line-gradient"){const t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof ed,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(n,t){super.recalculate(n,t),this.paint._values["line-floorwidth"]=$2.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,n)}createBucket(n){return new Bm(n)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(n){return new Ra(this,n)}queryRadius(n){const t=n,i=G2(Su("line-width",this,t),Su("line-gap-width",this,t)),l=Su("line-offset",this,t);return i/2+Math.abs(l)+Cm(this.paint.get("line-translate"))}queryIntersectsFeature(n,t,i,l,u,p){if(n.queryGeometry.isAboveHorizon)return!1;const g=m2(n.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),p.angle,n.pixelToTileUnitsFactor),y=n.pixelToTileUnitsFactor/2*G2(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),b=this.paint.get("line-offset").evaluate(t,i);return b&&(l=function(w,C){const P=[],I=new Te(0,0);for(let O=0;O<w.length;O++){const z=w[O],F=[];for(let G=0;G<z.length;G++){const Q=z[G],ce=z[G+1],ee=G===0?I:Q.sub(z[G-1])._unit()._perp(),oe=G===z.length-1?I:ce.sub(Q)._unit()._perp(),he=ee._add(oe)._unit();he._mult(1/(he.x*oe.x+he.y*oe.y)),F.push(he._mult(C)._add(Q))}P.push(F)}return P}(l,b*n.pixelToTileUnitsFactor)),function(w,C,P){for(let I=0;I<C.length;I++){const O=C[I];if(w.length>=3){for(let z=0;z<O.length;z++)if(sc(w,O[z]))return!0}if(Ek(w,O,P))return!0}return!1}(g,l,y)}isTileClipped(){return!0}},symbol:Ym,background:class extends No{constructor(n){super(n,dL)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends No{constructor(n){super(n,fL)}getProgramIds(){return["raster"]}},sky:class extends No{constructor(n){super(n,mL),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(n){n==="sky-gradient"?this._updateColorRamp():n!=="sky-atmosphere-sun"&&n!=="sky-atmosphere-halo-color"&&n!=="sky-atmosphere-color"&&n!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Oy({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(n){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=n.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(n,t){if(this.paint.get("sky-type")==="atmosphere"){const l=this.paint.get("sky-atmosphere-sun"),u=!l,p=n.style.light,g=p.properties.get("position");return u&&p.properties.get("anchor")==="viewport"&&jr("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),u?nv(g.azimuthal,90-g.polar,t):nv(l[0],90-l[1],t)}const i=this.paint.get("sky-gradient-center");return nv(i[0],90-i[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(n){this._skyboxInvalidated=!1,this._lightPosition=n.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const n=this.paint.get("sky-type");return n==="atmosphere"?["skyboxCapture","skybox"]:n==="gradient"?["skyboxGradient"]:null}}};class sf{constructor(t,i,l,u){this.context=t,this.format=l,this.texture=t.gl.createTexture(),this.update(i,u)}update(t,i,l){const{width:u,height:p}=t,{context:g}=this,{gl:y}=g,{HTMLImageElement:b,HTMLCanvasElement:w,HTMLVideoElement:C,ImageData:P,ImageBitmap:I}=A;if(y.bindTexture(y.TEXTURE_2D,this.texture),g.pixelStoreUnpackFlipY.set(!1),g.pixelStoreUnpack.set(1),g.pixelStoreUnpackPremultiplyAlpha.set(this.format===y.RGBA&&(!i||i.premultiply!==!1)),l||this.size&&this.size[0]===u&&this.size[1]===p){const{x:O,y:z}=l||{x:0,y:0};t instanceof b||t instanceof w||t instanceof C||t instanceof P||I&&t instanceof I?y.texSubImage2D(y.TEXTURE_2D,0,O,z,y.RGBA,y.UNSIGNED_BYTE,t):y.texSubImage2D(y.TEXTURE_2D,0,O,z,u,p,y.RGBA,y.UNSIGNED_BYTE,t.data)}else this.size=[u,p],t instanceof b||t instanceof w||t instanceof C||t instanceof P||I&&t instanceof I?y.texImage2D(y.TEXTURE_2D,0,this.format,this.format,y.UNSIGNED_BYTE,t):y.texImage2D(y.TEXTURE_2D,0,this.format,u,p,0,this.format,y.UNSIGNED_BYTE,t.data);this.useMipmap=!!(i&&i.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&y.generateMipmap(y.TEXTURE_2D)}bind(t,i){const{context:l}=this,{gl:u}=l;u.bindTexture(u.TEXTURE_2D,this.texture),t!==this.filter&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,t),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,this.useMipmap?t===u.NEAREST?u.NEAREST_MIPMAP_NEAREST:u.LINEAR_MIPMAP_NEAREST:t),this.filter=t),i!==this.wrap&&(u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,i),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,i),this.wrap=i)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class _L{constructor(t){this._callback=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class yL{constructor(){this.tasks={},this.taskQueue=[],Ps(["process"],this),this.invoker=new _L(this.process),this.nextId=0}add(t,i){const l=this.nextId++,u=function({type:p,isSymbolTile:g,zoom:y}){return y=y||0,p==="message"?0:p!=="maybePrepare"||g?p!=="parseTile"||g?p==="parseTile"&&g?300-y:p==="maybePrepare"&&g?400-y:500:200-y:100-y}(i);if(u===0){Ao();try{t()}finally{}return{cancel:()=>{}}}return this.tasks[l]={fn:t,metadata:i,priority:u,id:l},this.taskQueue.push(l),this.invoker.trigger(),{cancel:()=>{delete this.tasks[l]}}}process(){Ao();try{if(this.taskQueue=this.taskQueue.filter(l=>!!this.tasks[l]),!this.taskQueue.length)return;const t=this.pick();if(t===null)return;const i=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!i)return;i.fn()}finally{}}pick(){let t=null,i=1/0;for(let u=0;u<this.taskQueue.length;u++){const p=this.tasks[this.taskQueue[u]];p.priority<i&&(i=p.priority,t=u)}if(t===null)return null;const l=this.taskQueue[t];return this.taskQueue.splice(t,1),l}remove(){this.invoker.remove()}}class ME{constructor(t){this._stringToNumber={},this._numberToString=[];for(let i=0;i<t.length;i++){const l=t[i];this._stringToNumber[l]=i,this._numberToString[i]=l}}encode(t){return this._stringToNumber[t]}decode(t){return this._numberToString[t]}}const vL=["tile","layer","source","sourceLayer","state"];class PE{constructor(t,i,l,u,p){this.type="Feature",this._vectorTileFeature=t,this._z=i,this._x=l,this._y=u,this.properties=t.properties,this.id=p}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(t.id=this.id);for(const i of vL)this[i]!==void 0&&(t[i]=this[i]);return t}}const _o=32,ms=33,Ua=new Uint16Array(8184);for(let n=0;n<2046;n++){let t=n+2,i=0,l=0,u=0,p=0,g=0,y=0;for(1&t?u=p=g=_o:i=l=y=_o;(t>>=1)>1;){const w=i+u>>1,C=l+p>>1;1&t?(u=i,p=l,i=g,l=y):(i=u,l=p,u=g,p=y),g=w,y=C}const b=4*n;Ua[b+0]=i,Ua[b+1]=l,Ua[b+2]=u,Ua[b+3]=p}const gs=new Uint16Array(2178),Va=new Uint8Array(1089),Qm=new Uint16Array(1089);function IE(n){return n===0?-.03125:n===32?.03125:0}var kE=xe([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const LE={type:2,extent:Pt,loadGeometry:()=>[[new Te(0,0),new Te(Pt+1,0),new Te(Pt+1,Pt+1),new Te(0,Pt+1),new Te(0,0)]]};class iv{constructor(t,i,l,u,p){this.tileID=t,this.uid=Si(),this.uses=0,this.tileSize=i,this.tileZoom=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=p,this.expiredRequestCount=0,this.state="loading",u&&u.transform&&(this.projection=u.transform.projection)}registerFadeDuration(t){const i=t+this.timeAdded;i<Co.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=lc(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,i,l){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(u,p){const g={};if(!p)return g;for(const y of u){const b=y.layerIds.map(w=>p.getLayer(w)).filter(Boolean);if(b.length!==0){y.layers=b,y.stateDependentLayerIds&&(y.stateDependentLayers=y.stateDependentLayerIds.map(w=>b.filter(C=>C.id===w)[0]));for(const w of b)g[w.id]=y}}return g}(t.buckets,i.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const p=this.buckets[u];if(p instanceof ja){if(this.hasSymbolBuckets=!0,!l)break;p.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const p=this.buckets[u];if(p instanceof ja&&p.hasRTLText){this.hasRTLText=!0,S.isLoading()||S.isLoaded()||v()!=="deferred"||T();break}}this.queryPadding=0;for(const u in this.buckets){const p=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,i.style.getLayer(u).queryRadius(p))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas)}else this.collisionBoxArray=new xr}unloadVectorData(){if(this.hasData()){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(t){return this.buckets[t.id]}upload(t){for(const l in this.buckets){const u=this.buckets[l];u.uploadPending()&&u.upload(t)}const i=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new sf(t,this.imageAtlas.image,i.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new sf(t,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new sf(t,this.lineAtlas.image,i.ALPHA),this.lineAtlas.uploaded=!0)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,i,l,u,p,g,y,b){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:u,pixelPosMatrix:y,transform:g,params:p,tileTransform:this.tileTransform},t,i,l):{}}querySourceFeatures(t,i){const l=this.latestFeatureIndex;if(!l||!l.rawTileData)return;const u=l.loadVTLayers(),p=i?i.sourceLayer:"",g=u._geojsonTileLayer||u[p];if(!g)return;const y=fu(i&&i.filter),{z:b,x:w,y:C}=this.tileID.canonical,P={z:b,x:w,y:C};for(let I=0;I<g.length;I++){const O=g.feature(I);if(y.needGeometry){const G=oc(O,!0);if(!y.filter(new M(this.tileID.overscaledZ),G,this.tileID.canonical))continue}else if(!y.filter(new M(this.tileID.overscaledZ),O))continue;const z=l.getId(O,p),F=new PE(O,b,w,C,z);F.tile=P,t.push(F)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const i=this.expirationTime;if(t.cacheControl){const l=mi(t.cacheControl);l["max-age"]&&(this.expirationTime=Date.now()+1e3*l["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const l=Date.now();let u=!1;if(this.expirationTime>l)u=!1;else if(i)if(this.expirationTime<i)u=!0;else{const p=this.expirationTime-i;p?this.expirationTime=l+Math.max(p,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,i){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0||!i)return;const l=this.latestFeatureIndex.loadVTLayers(),u=i.style.listImages();for(const p in this.buckets){if(!i.style.hasLayer(p))continue;const g=this.buckets[p],y=g.layers[0].sourceLayer||"_geojsonTileLayer",b=l[y],w=t[y];if(!b||!w||Object.keys(w).length===0)continue;if(g.update(w,b,u,this.imageAtlas&&this.imageAtlas.patternPositions||{}),g instanceof Bm||g instanceof Lm){const P=i.style._getSourceCache(g.layers[0].source);i._terrain&&i._terrain.enabled&&P&&g.programConfigurations.needsUpload&&i._terrain._clearRenderCacheForTile(P.id,this.tileID)}const C=i&&i.style&&i.style.getLayer(p);C&&(this.queryPadding=Math.max(this.queryPadding,C.queryRadius(g)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Co.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=Co.now()+t}setTexture(t,i){const l=i.context,u=l.gl;this.texture=this.texture||i.getTileTexture(t.width),this.texture?this.texture.update(t,{useMipmap:!0}):(this.texture=new sf(l,t,u.RGBA,{useMipmap:!0}),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE))}setDependencies(t,i){const l={};for(const u of i)l[u]=!0;this.dependencies[t]=l}hasDependency(t,i){for(const l of t){const u=this.dependencies[l];if(u){for(const p of i)if(u[p])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,i){if(!i||i.name==="mercator"||this._tileDebugBuffer)return;const l=Ws(LE,this.tileID.canonical,this.tileTransform)[0],u=new Je,p=new Li;for(let g=0;g<l.length;g++){const{x:y,y:b}=l[g];u.emplaceBack(y,b),p.emplaceBack(g)}p.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(p),this._tileDebugBuffer=t.createVertexBuffer(u,Bd.members),this._tileDebugSegments=on.simpleSegment(0,0,u.length,p.length)}_makeTileBoundsBuffers(t,i){if(this._tileBoundsBuffer||!i||i.name==="mercator")return;const l=Ws(LE,this.tileID.canonical,this.tileTransform)[0];let u,p;if(this.isRaster){const g=function(y,b){const w=lc(y,b),C=Math.pow(2,y.z);for(let G=0;G<ms;G++)for(let Q=0;Q<ms;Q++){const ce=Ki((y.x+(Q+IE(Q))/_o)/C),ee=Vn((y.y+(G+IE(G))/_o)/C),oe=b.project(ce,ee),he=G*ms+Q;gs[2*he+0]=Math.round((oe.x*w.scale-w.x)*Pt),gs[2*he+1]=Math.round((oe.y*w.scale-w.y)*Pt)}Va.fill(0),Qm.fill(0);for(let G=2045;G>=0;G--){const Q=4*G,ce=Ua[Q+0],ee=Ua[Q+1],oe=Ua[Q+2],he=Ua[Q+3],ue=ce+oe>>1,Le=ee+he>>1,Me=ue+Le-ee,Ue=Le+ce-ue,et=ee*ms+ce,De=he*ms+oe,He=Le*ms+ue,qe=Math.hypot((gs[2*et+0]+gs[2*De+0])/2-gs[2*He+0],(gs[2*et+1]+gs[2*De+1])/2-gs[2*He+1])>=16;Va[He]=Va[He]||(qe?1:0),G<1022&&(Va[He]=Va[He]||Va[(ee+Ue>>1)*ms+(ce+Me>>1)]||Va[(he+Ue>>1)*ms+(oe+Me>>1)])}const P=new Ge,I=new Tt;let O=0;function z(G,Q){const ce=Q*ms+G;return Qm[ce]===0&&(P.emplaceBack(gs[2*ce+0],gs[2*ce+1],G*Pt/_o,Q*Pt/_o),Qm[ce]=++O),Qm[ce]-1}function F(G,Q,ce,ee,oe,he){const ue=G+ce>>1,Le=Q+ee>>1;if(Math.abs(G-oe)+Math.abs(Q-he)>1&&Va[Le*ms+ue])F(oe,he,G,Q,ue,Le),F(ce,ee,oe,he,ue,Le);else{const Me=z(G,Q),Ue=z(ce,ee),et=z(oe,he);I.emplaceBack(Me,Ue,et)}}return F(0,0,_o,_o,_o,0),F(_o,_o,0,0,0,_o),{vertices:P,indices:I}}(this.tileID.canonical,i);u=g.vertices,p=g.indices}else{u=new Ge,p=new Tt;for(const{x:y,y:b}of l)u.emplaceBack(y,b,0,0);const g=Fy(u.int16,void 0,4);for(let y=0;y<g.length;y+=3)p.emplaceBack(g[y],g[y+1],g[y+2])}this._tileBoundsBuffer=t.createVertexBuffer(u,kE.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(p),this._tileBoundsSegments=on.simpleSegment(0,0,u.length,p.length)}_makeGlobeTileDebugBuffers(t,i){const l=i.projection;if(!l||l.name!=="globe"||i.freezeTileCoverage)return;const u=this.tileID.canonical,p=jd(Jw(u,i)),g=Eu(i.zoom);let y;g>0&&(y=dy(new Float64Array(16),i.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,u,i,p,y,g),this._makeGlobeTileDebugTextBuffer(t,u,i,p,y,g)}_globePoint(t,i,l,u,p,g,y){let b=Nd(t,i,l);if(g){const w=1<<l.z,C=fs(u.center.lng),P=ps(u.center.lat),I=(l.x+.5)/w-C;let O=0;I>.5?O=-1:I<-.5&&(O=1);let z=(t/Pt+l.x)/w+O,F=(i/Pt+l.y)/w;z=(z-C)*u._pixelsPerMercatorPixel+C,F=(F-P)*u._pixelsPerMercatorPixel+P;const G=[z*u.worldSize,F*u.worldSize,0];Yr(G,G,g),b=ic(b,G,y)}return Yr(b,b,p)}_makeGlobeTileDebugBorderBuffer(t,i,l,u,p,g){const y=new Je,b=new Li,w=new Ce,C=(I,O,z,F,G)=>{const Q=(z-I)/(G-1),ce=(F-O)/(G-1),ee=y.length;for(let oe=0;oe<G;oe++){const he=I+oe*Q,ue=O+oe*ce;y.emplaceBack(he,ue);const Le=this._globePoint(he,ue,i,l,u,p,g);w.emplaceBack(Le[0],Le[1],Le[2]),b.emplaceBack(ee+oe)}},P=Pt;C(0,0,P,0,16),C(P,0,P,P,16),C(P,P,0,P,16),C(0,P,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(b),this._tileDebugBuffer=t.createVertexBuffer(y,Bd.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(w,Kw.members),this._tileDebugSegments=on.simpleSegment(0,0,y.length,b.length)}_makeGlobeTileDebugTextBuffer(t,i,l,u,p,g){const y=Pt/4,b=new Je,w=new Tt,C=new Ce,P=25;w.reserve(32),b.reserve(P),C.reserve(P);const I=(O,z)=>P*O+z;for(let O=0;O<P;O++){const z=O*y;for(let F=0;F<P;F++){const G=F*y;b.emplaceBack(G,z);const Q=this._globePoint(G,z,i,l,u,p,g);C.emplaceBack(Q[0],Q[1],Q[2])}}for(let O=0;O<4;O++)for(let z=0;z<4;z++){const F=I(O,z),G=I(O,z+1),Q=I(O+1,z),ce=I(O+1,z+1);w.emplaceBack(F,G,Q),w.emplaceBack(Q,G,ce)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(w),this._tileDebugTextBuffer=t.createVertexBuffer(b,Bd.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(C,Kw.members),this._tileDebugTextSegments=on.simpleSegment(0,0,P,32)}}class xL{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,i,l){const u=String(i);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][u]=this.stateChanges[t][u]||{},nr(this.stateChanges[t][u],l),this.deletedStates[t]===null){this.deletedStates[t]={};for(const p in this.state[t])p!==u&&(this.deletedStates[t][p]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][u]===null){this.deletedStates[t][u]={};for(const p in this.state[t][u])l[p]||(this.deletedStates[t][u][p]=null)}else for(const p in l)this.deletedStates[t]&&this.deletedStates[t][u]&&this.deletedStates[t][u][p]===null&&delete this.deletedStates[t][u][p]}removeFeatureState(t,i,l){if(this.deletedStates[t]===null)return;const u=String(i);if(this.deletedStates[t]=this.deletedStates[t]||{},l&&i!==void 0)this.deletedStates[t][u]!==null&&(this.deletedStates[t][u]=this.deletedStates[t][u]||{},this.deletedStates[t][u][l]=null);else if(i!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][u])for(l in this.deletedStates[t][u]={},this.stateChanges[t][u])this.deletedStates[t][u][l]=null;else this.deletedStates[t][u]=null;else this.deletedStates[t]=null}getState(t,i){const l=String(i),u=nr({},(this.state[t]||{})[l],(this.stateChanges[t]||{})[l]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const p=this.deletedStates[t][i];if(p===null)return{};for(const g in p)delete u[g]}return u}initializeTileState(t,i){t.setFeatureState(this.state,i)}coalesceChanges(t,i){const l={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const p={};for(const g in this.stateChanges[u])this.state[u][g]||(this.state[u][g]={}),nr(this.state[u][g],this.stateChanges[u][g]),p[g]=this.state[u][g];l[u]=p}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const p={};if(this.deletedStates[u]===null)for(const g in this.state[u])p[g]={},this.state[u][g]={};else for(const g in this.deletedStates[u]){if(this.deletedStates[u][g]===null)this.state[u][g]={};else if(this.state[u][g])for(const y of Object.keys(this.deletedStates[u][g]))delete this.state[u][g][y];p[g]=this.state[u][g]}l[u]=l[u]||{},nr(l[u],p)}if(this.stateChanges={},this.deletedStates={},Object.keys(l).length!==0)for(const u in t)t[u].setFeatureState(l,i)}}class OE{constructor(t){this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(t,i){const l=this.toIdx(t,i);return{min:this.minimums[l],max:this.maximums[l]}}isLeaf(t,i){return this.leaves[this.toIdx(t,i)]}toIdx(t,i){return i*this.size+t}}function zE(n,t,i,l){let u=0,p=Number.MAX_VALUE;for(let g=0;g<3;g++)if(Math.abs(l[g])<1e-15){if(i[g]<n[g]||i[g]>t[g])return null}else{const y=1/l[g];let b=(n[g]-i[g])*y,w=(t[g]-i[g])*y;if(b>w){const C=b;b=w,w=C}if(b>u&&(u=b),w<p&&(p=w),u>p)return null}return u}function RE(n,t,i,l,u,p,g,y,b,w,C){const P=l-n,I=u-t,O=p-i,z=g-n,F=y-t,G=b-i,Q=C[1]*G-C[2]*F,ce=C[2]*z-C[0]*G,ee=C[0]*F-C[1]*z,oe=P*Q+I*ce+O*ee;if(Math.abs(oe)<1e-15)return null;const he=1/oe,ue=w[0]-n,Le=w[1]-t,Me=w[2]-i,Ue=(ue*Q+Le*ce+Me*ee)*he;if(Ue<0||Ue>1)return null;const et=Le*O-Me*I,De=Me*P-ue*O,He=ue*I-Le*P,qe=(C[0]*et+C[1]*De+C[2]*He)*he;return qe<0||Ue+qe>1?null:(z*et+F*De+G*He)*he}function DE(n,t,i){return(n-t)/(i-t)}function BE(n,t,i,l,u,p,g,y,b){const w=1<<i,C=p-l,P=g-u,I=(n+1)/w*C+l,O=(t+0)/w*P+u,z=(t+1)/w*P+u;y[0]=(n+0)/w*C+l,y[1]=O,b[0]=I,b[1]=z}class FE{constructor(t){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const i=function(p){const g=Math.ceil(Math.log2(p.dim/8)),y=[];let b=Math.ceil(Math.pow(2,g));const w=1/b,C=(O,z,F,G,Q)=>{const ce=G?1:0,ee=(O+1)*F-ce,oe=z*F,he=(z+1)*F-ce;Q[0]=O*F,Q[1]=oe,Q[2]=ee,Q[3]=he};let P=new OE(b);const I=[];for(let O=0;O<b*b;O++){C(O%b,Math.floor(O/b),w,!1,I);const z=$a(I[0],I[1],p),F=$a(I[2],I[1],p),G=$a(I[2],I[3],p),Q=$a(I[0],I[3],p);P.minimums.push(Math.min(z,F,G,Q)),P.maximums.push(Math.max(z,F,G,Q)),P.leaves.push(1)}for(y.push(P),b/=2;b>=1;b/=2){const O=y[y.length-1];P=new OE(b);for(let z=0;z<b*b;z++){C(z%b,Math.floor(z/b),2,!0,I);const F=O.getElevation(I[0],I[1]),G=O.getElevation(I[2],I[1]),Q=O.getElevation(I[2],I[3]),ce=O.getElevation(I[0],I[3]),ee=O.isLeaf(I[0],I[1]),oe=O.isLeaf(I[2],I[1]),he=O.isLeaf(I[2],I[3]),ue=O.isLeaf(I[0],I[3]),Le=Math.min(F.min,G.min,Q.min,ce.min),Me=Math.max(F.max,G.max,Q.max,ce.max),Ue=ee&&oe&&he&&ue;P.maximums.push(Me),P.minimums.push(Le),P.leaves.push(Me-Le<=5&&Ue?1:0)}y.push(P)}return y}(this.dem),l=i.length-1,u=i[l];this._addNode(u.minimums[0],u.maximums[0],u.leaves[0]),this._construct(i,0,0,l,0)}raycastRoot(t,i,l,u,p,g,y=1){return zE([t,i,-100],[l,u,this.maximums[0]*y],p,g)}raycast(t,i,l,u,p,g,y=1){if(!this.nodeCount)return null;const b=this.raycastRoot(t,i,l,u,p,g,y);if(b==null)return null;const w=[],C=[],P=[],I=[],O=[{idx:0,t:b,nodex:0,nodey:0,depth:0}];for(;O.length>0;){const{idx:z,t:F,nodex:G,nodey:Q,depth:ce}=O.pop();if(this.leaves[z]){BE(G,Q,ce,t,i,l,u,P,I);const oe=1<<ce,he=(G+0)/oe,ue=(G+1)/oe,Le=(Q+0)/oe,Me=(Q+1)/oe,Ue=$a(he,Le,this.dem)*y,et=$a(ue,Le,this.dem)*y,De=$a(ue,Me,this.dem)*y,He=$a(he,Me,this.dem)*y,qe=RE(P[0],P[1],Ue,I[0],P[1],et,I[0],I[1],De,p,g),Ye=RE(I[0],I[1],De,P[0],I[1],He,P[0],P[1],Ue,p,g),it=Math.min(qe!==null?qe:Number.MAX_VALUE,Ye!==null?Ye:Number.MAX_VALUE);if(it!==Number.MAX_VALUE)return it;{const Ne=Rd([],p,g,F);if(NE(Ue,et,He,De,DE(Ne[0],P[0],I[0]),DE(Ne[1],P[1],I[1]))>=Ne[2])return F}continue}let ee=0;for(let oe=0;oe<this._siblingOffset.length;oe++){BE((G<<1)+this._siblingOffset[oe][0],(Q<<1)+this._siblingOffset[oe][1],ce+1,t,i,l,u,P,I),P[2]=-100,I[2]=this.maximums[this.childOffsets[z]+oe]*y;const he=zE(P,I,p,g);if(he!=null){const ue=he;w[oe]=ue;let Le=!1;for(let Me=0;Me<ee&&!Le;Me++)ue>=w[C[Me]]&&(C.splice(Me,0,oe),Le=!0);Le||(C[ee]=oe),ee++}}for(let oe=0;oe<ee;oe++){const he=C[oe];O.push({idx:this.childOffsets[z]+he,t:w[he],nodex:(G<<1)+this._siblingOffset[he][0],nodey:(Q<<1)+this._siblingOffset[he][1],depth:ce+1})}}return null}_addNode(t,i,l){return this.minimums.push(t),this.maximums.push(i),this.leaves.push(l),this.childOffsets.push(0),this.nodeCount++}_construct(t,i,l,u,p){if(t[u].isLeaf(i,l)===1)return;this.childOffsets[p]||(this.childOffsets[p]=this.nodeCount);const g=u-1,y=t[g];let b=0,w=0;for(let C=0;C<this._siblingOffset.length;C++){const P=2*i+this._siblingOffset[C][0],I=2*l+this._siblingOffset[C][1],O=y.getElevation(P,I),z=y.isLeaf(P,I),F=this._addNode(O.min,O.max,z);z&&(b|=1<<C),w||(w=F)}for(let C=0;C<this._siblingOffset.length;C++)b&1<<C||this._construct(t,2*i+this._siblingOffset[C][0],2*l+this._siblingOffset[C][1],g,w+C)}}function NE(n,t,i,l,u,p){return rr(rr(n,i,p),rr(t,l,p),u)}function $a(n,t,i){const l=i.dim,u=Oe(n*l-.5,0,l-1),p=Oe(t*l-.5,0,l-1),g=Math.floor(u),y=Math.floor(p),b=Math.min(g+1,l-1),w=Math.min(y+1,l-1);return NE(i.get(g,y),i.get(b,y),i.get(g,w),i.get(b,w),u-g,p-y)}const jE={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function bL(n,t,i){return(256*n*256+256*t+i)/10-1e4}function wL(n,t,i){return 256*n+t+i/256-32768}class Jm{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(t,i,l,u=!1,p=!1){if(this.uid=t,i.height!==i.width)throw new RangeError("DEM tiles must be square");if(l&&l!=="mapbox"&&l!=="terrarium")return jr(`"${l}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=i.height;const g=this.dim=i.height-2,y=new Uint32Array(i.data.buffer);if(this.pixels=new Uint8Array(i.data.buffer),this.encoding=l||"mapbox",this.borderReady=u,!u){for(let b=0;b<g;b++)y[this._idx(-1,b)]=y[this._idx(0,b)],y[this._idx(g,b)]=y[this._idx(g-1,b)],y[this._idx(b,-1)]=y[this._idx(b,0)],y[this._idx(b,g)]=y[this._idx(b,g-1)];y[this._idx(-1,-1)]=y[this._idx(0,0)],y[this._idx(g,-1)]=y[this._idx(g-1,0)],y[this._idx(-1,g)]=y[this._idx(0,g-1)],y[this._idx(g,g)]=y[this._idx(g-1,g-1)],p&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new FE(this)}get(t,i,l=!1){l&&(t=Oe(t,-1,this.dim),i=Oe(i,-1,this.dim));const u=4*this._idx(t,i);return(this.encoding==="terrarium"?wL:bL)(this.pixels[u],this.pixels[u+1],this.pixels[u+2])}static getUnpackVector(t){return jE[t]}get unpackVector(){return jE[this.encoding]}_idx(t,i){if(t<-1||t>=this.dim+1||i<-1||i>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(i+1)*this.stride+(t+1)}static pack(t,i){const l=[0,0,0,0],u=Jm.getUnpackVector(i);let p=Math.floor((t+u[3])/u[2]);return l[2]=p%256,p=Math.floor(p/256),l[1]=p%256,p=Math.floor(p/256),l[0]=p,l}getPixels(){return new zi({width:this.stride,height:this.stride},this.pixels)}backfillBorder(t,i,l){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let u=i*this.dim,p=i*this.dim+this.dim,g=l*this.dim,y=l*this.dim+this.dim;switch(i){case-1:u=p-1;break;case 1:p=u+1}switch(l){case-1:g=y-1;break;case 1:y=g+1}const b=-i*this.dim,w=-l*this.dim;for(let C=g;C<y;C++)for(let P=u;P<p;P++){const I=4*this._idx(P,C),O=4*this._idx(P+b,C+w);this.pixels[I+0]=t.pixels[O+0],this.pixels[I+1]=t.pixels[O+1],this.pixels[I+2]=t.pixels[O+2],this.pixels[I+3]=t.pixels[O+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}yt(Jm,"DEMData"),yt(FE,"DemMinMaxQuadTree",{omit:["dem"]});class EL{constructor(t,i){this.max=t,this.onRemove=i,this.reset()}reset(){for(const t in this.data)for(const i of this.data[t])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(t,i,l){const u=t.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const p={value:i,timeout:void 0};if(l!==void 0&&(p.timeout=setTimeout(()=>{this.remove(t,p)},l)),this.data[u].push(p),this.order.push(u),this.order.length>this.max){const g=this._getAndRemoveByKey(this.order[0]);g&&this.onRemove(g)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const i=this.data[t].shift();return i.timeout&&clearTimeout(i.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),i.value}getByKey(t){const i=this.data[t];return i?i[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,i){if(!this.has(t))return this;const l=t.wrapped().key,u=i===void 0?0:this.data[l].indexOf(i),p=this.data[l][u];return this.data[l].splice(u,1),p.timeout&&clearTimeout(p.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(p.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this}filter(t){const i=[];for(const l in this.data)for(const u of this.data[l])t(u.value)||i.push(u);for(const l of i)this.remove(l.value.tileID,l)}}class Fu{constructor(t,i,l){this.func=t,this.mask=i,this.range=l}}Fu.ReadOnly=!1,Fu.ReadWrite=!0,Fu.disabled=new Fu(519,Fu.ReadOnly,[0,1]);const ov=7680;class sv{constructor(t,i,l,u,p,g){this.test=t,this.ref=i,this.mask=l,this.fail=u,this.depthFail=p,this.pass=g}}sv.disabled=new sv({func:519,mask:0},0,0,ov,ov,ov);class _s{constructor(t,i,l){this.blendFunction=t,this.blendColor=i,this.mask=l}}_s.Replace=[1,0],_s.disabled=new _s(_s.Replace,Kr.transparent,[!1,!1,!1,!1]),_s.unblended=new _s(_s.Replace,Kr.transparent,[!0,!0,!0,!0]),_s.alphaBlended=new _s([1,771],Kr.transparent,[!0,!0,!0,!0]);const av=1029,lv=2305;class Zo{constructor(t,i,l){this.enable=t,this.mode=i,this.frontFace=l}}Zo.disabled=new Zo(!1,av,lv),Zo.backCCW=new Zo(!0,av,lv),Zo.backCW=new Zo(!0,av,2304),Zo.frontCW=new Zo(!0,1028,2304),Zo.frontCCW=new Zo(!0,1028,lv);class cc extends Al{constructor(t,i,l){super(),this.id=t,this._onlySymbols=l,i.on("data",u=>{u.dataType==="source"&&u.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&u.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),i.on("error",()=>{this._sourceErrored=!0}),this._source=i,this._tiles={},this._cache=new EL(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=i.minTileCacheSize,this._maxTileCacheSize=i.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new xL,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(t){this.map=t,this._minTileCacheSize=this._minTileCacheSize===void 0&&t?t._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&t?t._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const i=this._tiles[t];if(i.state!=="loaded"&&i.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(t,i){return t.isSymbolTile=this._onlySymbols,this._source.loadTile(t,i)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){if(this._source.abortTile)return this._source.abortTile(t,()=>{})}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const i in this._tiles){const l=this._tiles[i];l.upload(t),l.prepare(this.map.style.imageManager)}}getIds(){return qt(this._tiles).map(t=>t.tileID).sort(UE).map(t=>t.key)}getRenderableIds(t){const i=[];for(const l in this._tiles)this._isIdRenderable(+l,t)&&i.push(this._tiles[l]);return t?i.sort((l,u)=>{const p=l.tileID,g=u.tileID,y=new Te(p.canonical.x,p.canonical.y)._rotate(this.transform.angle),b=new Te(g.canonical.x,g.canonical.y)._rotate(this.transform.angle);return p.overscaledZ-g.overscaledZ||b.y-y.y||b.x-y.x}).map(l=>l.tileID.key):i.map(l=>l.tileID).sort(UE).map(l=>l.key)}hasRenderableParent(t){const i=this.findLoadedParent(t,0);return!!i&&this._isIdRenderable(i.tileID.key)}_isIdRenderable(t,i){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(i||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(+t,"reloading")}}_reloadTile(t,i){const l=this._tiles[t];l&&(l.state!=="loading"&&(l.state=i),this._loadTile(l,this._tileLoaded.bind(this,l,t,i)))}_tileLoaded(t,i,l,u){if(u)if(t.state="errored",u.status!==404)this._source.fire(new Mo(u,{tile:t}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const p=this.map.painter.terrain;this.update(this.transform,p.getScaledDemTileSize(),!0),p.resetTileLookupCache(this.id)}else this.update(this.transform);else t.timeAdded=Co.now(),l==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(i,t),this._source.type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new zs("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(t){const i=this.getRenderableIds();for(let u=0;u<i.length;u++){const p=i[u];if(t.neighboringTiles&&t.neighboringTiles[p]){const g=this.getTileByID(p);l(t,g),l(g,t)}}function l(u,p){if(!u.dem||u.dem.borderReady)return;u.needsHillshadePrepare=!0,u.needsDEMTextureUpload=!0;let g=p.tileID.canonical.x-u.tileID.canonical.x;const y=p.tileID.canonical.y-u.tileID.canonical.y,b=Math.pow(2,u.tileID.canonical.z),w=p.tileID.key;g===0&&y===0||Math.abs(y)>1||(Math.abs(g)>1&&(Math.abs(g+b)===1?g+=b:Math.abs(g-b)===1&&(g-=b)),p.dem&&u.dem&&(u.dem.backfillBorder(p.dem,g,y),u.neighboringTiles&&u.neighboringTiles[w]&&(u.neighboringTiles[w].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,i,l,u){for(const p in this._tiles){let g=this._tiles[p];if(u[p]||!g.hasData()||g.tileID.overscaledZ<=i||g.tileID.overscaledZ>l)continue;let y=g.tileID;for(;g&&g.tileID.overscaledZ>i+1;){const w=g.tileID.scaledTo(g.tileID.overscaledZ-1);g=this._tiles[w.key],g&&g.hasData()&&(y=w)}let b=y;for(;b.overscaledZ>i;)if(b=b.scaledTo(b.overscaledZ-1),t[b.key]){u[y.key]=y;break}}}findLoadedParent(t,i){if(t.key in this._loadedParentTiles){const l=this._loadedParentTiles[t.key];return l&&l.tileID.overscaledZ>=i?l:null}for(let l=t.overscaledZ-1;l>=i;l--){const u=t.scaledTo(l),p=this._getLoadedTile(u);if(p)return p}}_getLoadedTile(t){const i=this._tiles[t.key];return i&&i.hasData()?i:this._cache.getByKey(this._source.reparseOverscaled?t.wrapped().key:t.canonical.key)}updateCacheSize(t,i){i=i||this._source.tileSize;const l=Math.ceil(t.width/i)+1,u=Math.ceil(t.height/i)+1,p=Math.floor(l*u*5),g=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,p):p,y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._cache.setMaxSize(y)}handleWrapJump(t){const i=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,i){const l={};for(const u in this._tiles){const p=this._tiles[u];p.tileID=p.tileID.unwrapTo(p.tileID.wrap+i),l[p.tileID.key]=p}this._tiles=l;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(+u,this._tiles[u])}}update(t,i,l){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!l)return;let u;this.updateCacheSize(t,i),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?u=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(y=>new ii(y.canonical.z,y.wrap,y.canonical.z,y.canonical.x,y.canonical.y)):(u=t.coveringTiles({tileSize:i||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!l,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(u=u.filter(y=>this._source.hasTile(y)))):u=[];const p=this._updateRetainedTiles(u);if(VE(this._source.type)&&u.length!==0){const y={},b={},w=Object.keys(p);for(const P of w){const I=p[P],O=this._tiles[P];if(!O||O.fadeEndTime&&O.fadeEndTime<=Co.now())continue;const z=this.findLoadedParent(I,Math.max(I.overscaledZ-cc.maxOverzooming,this._source.minzoom));z&&(this._addTile(z.tileID),y[z.tileID.key]=z.tileID),b[P]=I}const C=u[u.length-1].overscaledZ;for(const P in this._tiles){const I=this._tiles[P];if(p[P]||!I.hasData())continue;let O=I.tileID;for(;O.overscaledZ>C;){O=O.scaledTo(O.overscaledZ-1);const z=this._tiles[O.key];if(z&&z.hasData()&&b[O.key]){p[P]=I.tileID;break}}}for(const P in y)p[P]||(this._coveredTiles[P]=!0,p[P]=y[P])}for(const y in p)this._tiles[y].clearFadeHold();const g=function(y,b){const w=[];for(const C in y)C in b||w.push(C);return w}(this._tiles,p);for(const y of g){const b=this._tiles[y];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(+y)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(+t)}_updateRetainedTiles(t){const i={};if(t.length===0)return i;const l={},u=t.reduce((w,C)=>Math.min(w,C.overscaledZ),1/0),p=t[0].overscaledZ,g=Math.max(p-cc.maxOverzooming,this._source.minzoom),y=Math.max(p+cc.maxUnderzooming,this._source.minzoom),b={};for(const w of t){const C=this._addTile(w);i[w.key]=w,C.hasData()||u<this._source.maxzoom&&(b[w.key]=w)}this._retainLoadedChildren(b,u,y,i);for(const w of t){let C=this._tiles[w.key];if(C.hasData())continue;if(w.canonical.z>=this._source.maxzoom){const I=w.children(this._source.maxzoom)[0],O=this.getTile(I);if(O&&O.hasData()){i[I.key]=I;continue}}else{const I=w.children(this._source.maxzoom);if(i[I[0].key]&&i[I[1].key]&&i[I[2].key]&&i[I[3].key])continue}let P=C.wasRequested();for(let I=w.overscaledZ-1;I>=g;--I){const O=w.scaledTo(I);if(l[O.key]||(l[O.key]=!0,C=this.getTile(O),!C&&P&&(C=this._addTile(O)),C&&(i[O.key]=O,P=C.wasRequested(),C.hasData())))break}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const i=[];let l,u=this._tiles[t].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){l=this._loadedParentTiles[u.key];break}i.push(u.key);const p=u.scaledTo(u.overscaledZ-1);if(l=this._getLoadedTile(p),l)break;u=p}for(const p of i)this._loadedParentTiles[p]=l}}_addTile(t){let i=this._tiles[t.key];if(i)return i;i=this._cache.getAndRemove(t),i&&(this._setTileReloadTimer(t.key,i),i.tileID=t,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,i)));const l=!!i;if(!l){const u=this.map?this.map.painter:null;i=new iv(t,this._source.tileSize*t.overscaleFactor(),this.transform.tileZoom,u,this._isRaster),this._loadTile(i,this._tileLoaded.bind(this,i,t.key,i.state))}return i?(i.uses++,this._tiles[t.key]=i,l||this._source.fire(new zs("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null}_setTileReloadTimer(t,i){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const l=i.getExpiryTimeout();l&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},l))}_removeTile(t){const i=this._tiles[t];i&&(i.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),i.uses>0||(i.hasData()&&i.state!=="reloading"?this._cache.add(i.tileID,i,i.getExpiryTimeout()):(i.aborted=!0,this._abortTile(i),this._unloadTile(i))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(+t);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,i,l){const u=[],p=this.transform;if(!p)return u;const g=p.projection.name==="globe",y=fs(p.center.lng);for(const b in this._tiles){const w=this._tiles[b];if(l&&w.clearQueryDebugViz(),w.holdingForFade())continue;let C;if(g){const P=w.tileID.canonical;if(P.z===0){const I=[Math.abs(Oe(y,...af(P,-1))-y),Math.abs(Oe(y,...af(P,1))-y)];C=[0,2*I.indexOf(Math.min(...I))-1]}else{const I=[Math.abs(Oe(y,...af(P,-1))-y),Math.abs(Oe(y,...af(P,0))-y),Math.abs(Oe(y,...af(P,1))-y)];C=[I.indexOf(Math.min(...I))-1]}}else C=[0];for(const P of C){const I=t.containsTile(w,p,i,P);I&&u.push(I)}}return u}getVisibleCoordinates(t){const i=this.getRenderableIds(t).map(l=>this._tiles[l].tileID);for(const l of i)l.projMatrix=this.transform.calculateProjMatrix(l.toUnwrapped());return i}hasTransition(){if(this._source.hasTransition())return!0;if(VE(this._source.type))for(const t in this._tiles){const i=this._tiles[t];if(i.fadeEndTime!==void 0&&i.fadeEndTime>=Co.now())return!0}return!1}setFeatureState(t,i,l){this._state.updateState(t=t||"_geojsonTileLayer",i,l)}removeFeatureState(t,i,l){this._state.removeFeatureState(t=t||"_geojsonTileLayer",i,l)}getFeatureState(t,i){return this._state.getState(t=t||"_geojsonTileLayer",i)}setDependencies(t,i,l){const u=this._tiles[t];u&&u.setDependencies(i,l)}reloadTilesForDependencies(t,i){for(const l in this._tiles)this._tiles[l].hasDependency(t,i)&&this._reloadTile(+l,"reloading");this._cache.filter(l=>!l.hasDependency(t,i))}_preloadTiles(t,i){if(!this._sourceLoaded){const y=()=>{this._sourceLoaded&&(this._source.off("data",y),this._preloadTiles(t,i))};return void this._source.on("data",y)}const l=new Map,u=Array.isArray(t)?t:[t],p=this.map.painter.terrain,g=this.usedForTerrain&&p?p.getScaledDemTileSize():this._source.tileSize;for(const y of u){const b=y.coveringTiles({tileSize:g,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const w of b)l.set(w.key,w);this.usedForTerrain&&y.updateElevation(!1)}It(Array.from(l.values()),(y,b)=>{const w=new iv(y,this._source.tileSize*y.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(w,C=>{this._source.type==="raster-dem"&&w.dem&&this._backfillDEM(w),b(C,w)})},i)}}function UE(n,t){const i=Math.abs(2*n.wrap)-+(n.wrap<0),l=Math.abs(2*t.wrap)-+(t.wrap<0);return n.overscaledZ-t.overscaledZ||l-i||t.canonical.y-n.canonical.y||t.canonical.x-n.canonical.x}function VE(n){return n==="raster"||n==="image"||n==="video"||n==="custom"}function af(n,t){const i=1<<n.z;return[n.x/i+t,(n.x+1)/i+t]}cc.maxOverzooming=10,cc.maxUnderzooming=3;class eg{constructor(t,i,l){this._demTile=t,this._dem=this._demTile.dem,this._scale=i,this._offset=l}static create(t,i,l){const u=l||t.findDEMTileFor(i);if(!u||!u.dem)return;const p=u.dem,g=u.tileID,y=1<<i.canonical.z-g.canonical.z;return new eg(u,u.tileSize/Pt/y,[(i.canonical.x/y-g.canonical.x)*p.dim,(i.canonical.y/y-g.canonical.y)*p.dim])}tileCoordToPixel(t,i){const l=i*this._scale+this._offset[1],u=Math.floor(t*this._scale+this._offset[0]),p=Math.floor(l);return new Te(u,p)}getElevationAt(t,i,l,u){const p=t*this._scale+this._offset[0],g=i*this._scale+this._offset[1],y=Math.floor(p),b=Math.floor(g),w=this._dem;return u=!!u,l?rr(rr(w.get(y,b,u),w.get(y,b+1,u),g-b),rr(w.get(y+1,b,u),w.get(y+1,b+1,u),g-b),p-y):w.get(y,b,u)}getElevationAtPixel(t,i,l){return this._dem.get(t,i,!!l)}getMeterToDEM(t){return(1<<this._demTile.tileID.canonical.z)*Vo(1,t)*this._dem.stride}}class $E{constructor(t,i){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Us(Pt,16,0),this.featureIndexArray=new Yl,this.promoteId=i}insert(t,i,l,u,p,g=0){const y=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,u,p,g);const b=this.grid;for(let w=0;w<i.length;w++){const C=i[w],P=[1/0,1/0,-1/0,-1/0];for(let I=0;I<C.length;I++){const O=C[I];P[0]=Math.min(P[0],O.x),P[1]=Math.min(P[1],O.y),P[2]=Math.max(P[2],O.x),P[3]=Math.max(P[3],O.y)}P[0]<Pt&&P[1]<Pt&&P[2]>=0&&P[3]>=0&&b.insert(y,P[0],P[1],P[2],P[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Vy(new jm(this.rawTileData)).layers,this.sourceLayerCoder=new ME(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const t in this.vtLayers)this.vtFeatures[t]=[]}return this.vtLayers}query(t,i,l,u){this.loadVTLayers();const p=t.params||{},g=fu(p.filter),y=t.tileResult,b=t.transform,w=y.bufferedTilespaceBounds,C=this.grid.query(w.min.x,w.min.y,w.max.x,w.max.y,(z,F,G,Q)=>p2(y.bufferedTilespaceGeometry,z,F,G,Q));C.sort(TL);let P=null;b.elevation&&C.length>0&&(P=eg.create(b.elevation,this.tileID));const I={};let O;for(let z=0;z<C.length;z++){const F=C[z];if(F===O)continue;O=F;const G=this.featureIndexArray.get(F);let Q=null;this.loadMatchingFeature(I,G,g,p.layers,p.availableImages,i,l,u,(ce,ee,oe,he=0)=>(Q||(Q=Ws(ce,this.tileID.canonical,t.tileTransform)),ee.queryIntersectsFeature(y,ce,oe,Q,this.z,t.transform,t.pixelPosMatrix,P,he)))}return I}loadMatchingFeature(t,i,l,u,p,g,y,b,w){const{featureIndex:C,bucketIndex:P,sourceLayerIndex:I,layoutVertexArrayOffset:O}=i,z=this.bucketLayerIDs[P];if(u&&!function(ce,ee){for(let oe=0;oe<ce.length;oe++)if(ee.indexOf(ce[oe])>=0)return!0;return!1}(u,z))return;const F=this.sourceLayerCoder.decode(I),G=this.vtLayers[F].feature(C);if(l.needGeometry){const ce=oc(G,!0);if(!l.filter(new M(this.tileID.overscaledZ),ce,this.tileID.canonical))return}else if(!l.filter(new M(this.tileID.overscaledZ),G))return;const Q=this.getId(G,F);for(let ce=0;ce<z.length;ce++){const ee=z[ce];if(u&&u.indexOf(ee)<0)continue;const oe=g[ee];if(!oe)continue;let he={};Q!==void 0&&b&&(he=b.getState(oe.sourceLayer||"_geojsonTileLayer",Q));const ue=nr({},y[ee]);ue.paint=GE(ue.paint,oe.paint,G,he,p),ue.layout=GE(ue.layout,oe.layout,G,he,p);const Le=!w||w(G,oe,he,O);if(!Le)continue;const Me=new PE(G,this.z,this.x,this.y,Q);Me.layer=ue;let Ue=t[ee];Ue===void 0&&(Ue=t[ee]=[]),Ue.push({featureIndex:C,feature:Me,intersectionZ:Le})}}lookupSymbolFeatures(t,i,l,u,p,g,y,b){const w={};this.loadVTLayers();const C=fu(p);for(const P of t)this.loadMatchingFeature(w,{bucketIndex:l,sourceLayerIndex:u,featureIndex:P,layoutVertexArrayOffset:0},C,g,y,b,i);return w}loadFeature(t){const{featureIndex:i,sourceLayerIndex:l}=t;this.loadVTLayers();const u=this.sourceLayerCoder.decode(l),p=this.vtFeatures[u];if(p[i])return p[i];const g=this.vtLayers[u].feature(i);return p[i]=g,g}hasLayer(t){for(const i of this.bucketLayerIDs)for(const l of i)if(t===l)return!0;return!1}getId(t,i){let l=t.id;if(this.promoteId){const u=typeof this.promoteId=="string"?this.promoteId:this.promoteId[i];u!=null&&(l=t.properties[u]),typeof l=="boolean"&&(l=Number(l))}return l}}function GE(n,t,i,l,u){return er(n,(p,g)=>{const y=t instanceof Y?t.get(g):null;return y&&y.evaluate?y.evaluate(i,l,u):y})}function TL(n,t){return t-n}yt($E,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class ZE{constructor(t,i){this.width=t,this.height=i,this.nextRow=0,this.image=new Xs({width:t,height:i}),this.positions={},this.uploaded=!1}getDash(t,i){const l=this.getKey(t,i);return this.positions[l]}trim(){const t=this.width,i=this.height=Fn(this.nextRow);this.image.resize({width:t,height:i})}getKey(t,i){return t.join(",")+i}getDashRanges(t,i,l){const u=[];let p=t.length%2==1?-t[t.length-1]*l:0,g=t[0]*l,y=!0;u.push({left:p,right:g,isDash:y,zeroLength:t[0]===0});let b=t[0];for(let w=1;w<t.length;w++){y=!y;const C=t[w];p=b*l,b+=C,g=b*l,u.push({left:p,right:g,isDash:y,zeroLength:C===0})}return u}addRoundDash(t,i,l){const u=i/2;for(let p=-l;p<=l;p++){const g=this.width*(this.nextRow+l+p);let y=0,b=t[y];for(let w=0;w<this.width;w++){w/b.right>1&&(b=t[++y]);const C=Math.abs(w-b.left),P=Math.abs(w-b.right),I=Math.min(C,P);let O;const z=p/l*(u+1);if(b.isDash){const F=u-Math.abs(z);O=Math.sqrt(I*I+F*F)}else O=u-Math.sqrt(I*I+z*z);this.image.data[g+w]=Math.max(0,Math.min(255,O+128))}}}addRegularDash(t,i){for(let b=t.length-1;b>=0;--b){const w=t[b],C=t[b+1];w.zeroLength?t.splice(b,1):C&&C.isDash===w.isDash&&(C.left=w.left,t.splice(b,1))}const l=t[0],u=t[t.length-1];l.isDash===u.isDash&&(l.left=u.left-this.width,u.right=l.right+this.width);const p=this.width*this.nextRow;let g=0,y=t[g];for(let b=0;b<this.width;b++){b/y.right>1&&(y=t[++g]);const w=Math.abs(b-y.left),C=Math.abs(b-y.right),P=Math.min(w,C);this.image.data[p+b]=Math.max(0,Math.min(255,(y.isDash?P:-P)+i+128))}}addDash(t,i){const l=this.getKey(t,i);if(this.positions[l])return this.positions[l];const u=i==="round",p=u?7:0,g=2*p+1;if(this.nextRow+g>this.height)return jr("LineAtlas out of space"),null;t.length===0&&t.push(1);let y=0;for(let C=0;C<t.length;C++)t[C]<0&&(jr("Negative value is found in line dasharray, replacing values with 0"),t[C]=0),y+=t[C];if(y!==0){const C=this.width/y,P=this.getDashRanges(t,this.width,C);u?this.addRoundDash(P,C,p):this.addRegularDash(P,i==="square"?.5*C:0)}const b=this.nextRow+p;this.nextRow+=g;const w={tl:[b,p],br:[y,0]};return this.positions[l]=w,w}}yt(ZE,"LineAtlas");const HE=1*Go;class qE{constructor(t){const i={},l=[];for(const y in t){const b=t[y],w=i[y]={};for(const C in b.glyphs){const P=b.glyphs[+C];if(!P||P.bitmap.width===0||P.bitmap.height===0)continue;const I=P.metrics.localGlyph?HE:1,O={x:0,y:0,w:P.bitmap.width+2*I,h:P.bitmap.height+2*I};l.push(O),w[C]=O}}const{w:u,h:p}=Hy(l),g=new Xs({width:u||1,height:p||1});for(const y in t){const b=t[y];for(const w in b.glyphs){const C=b.glyphs[+w];if(!C||C.bitmap.width===0||C.bitmap.height===0)continue;const P=i[y][w],I=C.metrics.localGlyph?HE:1;Xs.copy(C.bitmap,g,{x:0,y:0},{x:P.x+I,y:P.y+I},C.bitmap)}}this.image=g,this.positions=i}}yt(qE,"GlyphAtlas");class SL{constructor(t){this.tileID=new ii(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=lc(t.tileID.canonical,t.projection),this.projection=t.projection}parse(t,i,l,u,p){this.status="parsing",this.data=t,this.collisionBoxArray=new xr;const g=new ME(Object.keys(t.layers).sort()),y=new $E(this.tileID,this.promoteId);y.bucketLayerIDs=[];const b={},w=new ZE(256,256),C={featureIndex:y,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:w,availableImages:l},P=i.familiesBySource[this.source];for(const he in P){const ue=t.layers[he];if(!ue)continue;let Le=!1,Me=!1;for(const De of P[he])De[0].type==="symbol"?Le=!0:Me=!0;if(this.isSymbolTile===!0&&!Le||this.isSymbolTile===!1&&!Me)continue;ue.version===1&&jr(`Vector tile source "${this.source}" layer "${he}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ue=g.encode(he),et=[];for(let De=0;De<ue.length;De++){const He=ue.feature(De),qe=y.getId(He,he);et.push({feature:He,id:qe,index:De,sourceLayerIndex:Ue})}for(const De of P[he]){const He=De[0];this.isSymbolTile!==void 0&&He.type==="symbol"!==this.isSymbolTile||He.minzoom&&this.zoom<Math.floor(He.minzoom)||He.maxzoom&&this.zoom>=He.maxzoom||He.visibility!=="none"&&(cv(De,this.zoom,l),(b[He.id]=He.createBucket({index:y.bucketLayerIDs.length,layers:De,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ue,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:l})).populate(et,C,this.tileID.canonical,this.tileTransform),y.bucketLayerIDs.push(De.map(qe=>qe.id)))}}let I,O,z,F;w.trim();const G={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Q=()=>{if(I)return p(I);if(O&&z&&F){const he=new qE(O),ue=new eE(z,F);for(const Le in b){const Me=b[Le];Me instanceof ja?(cv(Me.layers,this.zoom,l),Y4(Me,O,he.positions,z,ue.iconPositions,this.showCollisionBoxes,l,this.tileID.canonical,this.tileZoom,this.projection)):Me.hasPattern&&(Me instanceof Bm||Me instanceof Lm||Me instanceof Wd)&&(cv(Me.layers,this.zoom,l),Me.addFeatures(C,this.tileID.canonical,ue.patternPositions,l,this.tileTransform))}this.status="done",p(null,{buckets:qt(b).filter(Le=>!Le.isEmpty()),featureIndex:y,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:he.image,lineAtlas:w,imageAtlas:ue,glyphMap:this.returnDependencies?O:null,iconMap:this.returnDependencies?z:null,glyphPositions:this.returnDependencies?he.positions:null})}},ce=er(C.glyphDependencies,he=>Object.keys(he).map(Number));Object.keys(ce).length?u.send("getGlyphs",{uid:this.uid,stacks:ce},(he,ue)=>{I||(I=he,O=ue,Q())},void 0,!1,G):O={};const ee=Object.keys(C.iconDependencies);ee.length?u.send("getImages",{icons:ee,source:this.source,tileID:this.tileID,type:"icons"},(he,ue)=>{I||(I=he,z=ue,Q())},void 0,!1,G):z={};const oe=Object.keys(C.patternDependencies);oe.length?u.send("getImages",{icons:oe,source:this.source,tileID:this.tileID,type:"patterns"},(he,ue)=>{I||(I=he,F=ue,Q())},void 0,!1,G):F={},Q()}}function cv(n,t,i){const l=new M(t);for(const u of n)u.recalculate(l,i)}class WE{constructor(t){this.entries={},this.scheduler=t}request(t,i,l,u){const p=this.entries[t]=this.entries[t]||{callbacks:[]};if(p.result){const[g,y]=p.result;return this.scheduler?this.scheduler.add(()=>{u(g,y)},i):u(g,y),()=>{}}return p.callbacks.push(u),p.cancel||(p.cancel=l((g,y)=>{p.result=[g,y];for(const b of p.callbacks)this.scheduler?this.scheduler.add(()=>{b(g,y)},i):b(g,y);setTimeout(()=>delete this.entries[t],3e3)})),()=>{p.result||(p.callbacks=p.callbacks.filter(g=>g!==u),p.callbacks.length||(p.cancel(),delete this.entries[t]))}}}function XE(n,t,i){const l=JSON.stringify(n.request);return n.data&&(this.deduped.entries[l]={result:[null,n.data]}),this.deduped.request(l,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom},u=>{const p=pa(n.request,(g,y,b,w)=>{g?u(g):y&&u(null,{vectorTile:i?void 0:new Vy(new jm(y)),rawData:y,cacheControl:b,expires:w})});return()=>{p.cancel(),u()}},t)}const KE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class uv{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,l]=new Uint8Array(t,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const u=l>>4;if(u!==1)throw new Error(`Got v${u} data when expected v1.`);const p=KE[15&l];if(!p)throw new Error("Unrecognized array type.");const[g]=new Uint16Array(t,2,1),[y]=new Uint32Array(t,4,1);return new uv(y,g,p,t)}constructor(t,i=64,l=Float64Array,u){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=l,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const p=KE.indexOf(this.ArrayType),g=2*t*this.ArrayType.BYTES_PER_ELEMENT,y=t*this.IndexArrayType.BYTES_PER_ELEMENT,b=(8-y%8)%8;if(p<0)throw new Error(`Unexpected typed array class: ${l}.`);u&&u instanceof ArrayBuffer?(this.data=u,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+y+b,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+g+y+b),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+y+b,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+p]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=t)}add(t,i){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=t,this.coords[this._pos++]=i,l}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return hv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,i,l,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:g,nodeSize:y}=this,b=[0,p.length-1,0],w=[];for(;b.length;){const C=b.pop()||0,P=b.pop()||0,I=b.pop()||0;if(P-I<=y){for(let G=I;G<=P;G++){const Q=g[2*G],ce=g[2*G+1];Q>=t&&Q<=l&&ce>=i&&ce<=u&&w.push(p[G])}continue}const O=I+P>>1,z=g[2*O],F=g[2*O+1];z>=t&&z<=l&&F>=i&&F<=u&&w.push(p[O]),(C===0?t<=z:i<=F)&&(b.push(I),b.push(O-1),b.push(1-C)),(C===0?l>=z:u>=F)&&(b.push(O+1),b.push(P),b.push(1-C))}return w}within(t,i,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:u,coords:p,nodeSize:g}=this,y=[0,u.length-1,0],b=[],w=l*l;for(;y.length;){const C=y.pop()||0,P=y.pop()||0,I=y.pop()||0;if(P-I<=g){for(let G=I;G<=P;G++)QE(p[2*G],p[2*G+1],t,i)<=w&&b.push(u[G]);continue}const O=I+P>>1,z=p[2*O],F=p[2*O+1];QE(z,F,t,i)<=w&&b.push(u[O]),(C===0?t-l<=z:i-l<=F)&&(y.push(I),y.push(O-1),y.push(1-C)),(C===0?t+l>=z:i+l>=F)&&(y.push(O+1),y.push(P),y.push(1-C))}return b}}function hv(n,t,i,l,u,p){if(u-l<=i)return;const g=l+u>>1;YE(n,t,g,l,u,p),hv(n,t,i,l,g-1,1-p),hv(n,t,i,g+1,u,1-p)}function YE(n,t,i,l,u,p){for(;u>l;){if(u-l>600){const w=u-l+1,C=i-l+1,P=Math.log(w),I=.5*Math.exp(2*P/3),O=.5*Math.sqrt(P*I*(w-I)/w)*(C-w/2<0?-1:1);YE(n,t,i,Math.max(l,Math.floor(i-C*I/w+O)),Math.min(u,Math.floor(i+(w-C)*I/w+O)),p)}const g=t[2*i+p];let y=l,b=u;for(lf(n,t,l,i),t[2*u+p]>g&&lf(n,t,l,u);y<b;){for(lf(n,t,y,b),y++,b--;t[2*y+p]<g;)y++;for(;t[2*b+p]>g;)b--}t[2*l+p]===g?lf(n,t,l,b):(b++,lf(n,t,b,u)),b<=i&&(l=b+1),i<=b&&(u=b-1)}}function lf(n,t,i,l){dv(n,i,l),dv(t,2*i,2*l),dv(t,2*i+1,2*l+1)}function dv(n,t,i){const l=n[t];n[t]=n[i],n[i]=l}function QE(n,t,i,l){const u=n-i,p=t-l;return u*u+p*p}s.ARRAY_TYPE=Oi,s.AUTH_ERR_MSG=de,s.Aabb=ni,s.Actor=class{constructor(n,t,i){this.target=n,this.parent=t,this.mapId=i,this.callbacks={},this.cancelCallbacks={},Ps(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ao()?n:A,this.scheduler=new yL}send(n,t,i,l,u=!1,p){const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=p,this.callbacks[g]=i);const y=ha(this.globalScope)?void 0:[];return this.target.postMessage({id:g,type:n,hasCallback:!!i,targetMapId:l,mustQueue:u,sourceMapId:this.mapId,data:La(t,y)},y),{cancel:()=>{i&&delete this.callbacks[g],this.target.postMessage({id:g,type:"<cancel>",targetMapId:l,sourceMapId:this.mapId})}}}receive(n){const t=n.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if(t.type==="<cancel>"){const l=this.cancelCallbacks[i];delete this.cancelCallbacks[i],l&&l.cancel()}else if(t.mustQueue||Ao()){const l=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add(()=>this.processTask(i,t),l&&l.metadata||{type:"message"})}else this.processTask(i,t)}processTask(n,t){if(t.type==="<response>"){const i=this.callbacks[n];delete this.callbacks[n],i&&(t.error?i(Vs(t.error)):i(null,Vs(t.data)))}else{const i=ha(this.globalScope)?void 0:[],l=t.hasCallback?(p,g)=>{delete this.cancelCallbacks[n],this.target.postMessage({id:n,type:"<response>",sourceMapId:this.mapId,error:p?La(p):null,data:La(g,i)},i)}:p=>{},u=Vs(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,u,l);else if(this.parent.getWorkerSource){const p=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,p[0],u.source)[p[1]](u,l)}else l(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=Dm,s.Color=Kr,s.ColorMode=_s,s.CullFaceMode=Zo,s.DEMData=Jm,s.DataConstantProperty=B,s.DedupedRequest=WE,s.DepthMode=Fu,s.EXTENT=Pt,s.Elevation=class{isDataAvailableAtPoint(n){const t=this._source();if(this.isUsingMockSource()||!t||n.y<0||n.y>1)return!1;const i=t.getSource().maxzoom,l=1<<i,u=Math.floor(n.x),p=Math.floor((n.x-u)*l),g=Math.floor(n.y*l),y=this.findDEMTileFor(new ii(i,u,i,p,g));return!(!y||!y.dem)}getAtPointOrZero(n,t=0){return this.getAtPoint(n,t)||0}getAtPoint(n,t,i=!0){if(this.isUsingMockSource())return null;t==null&&(t=null);const l=this._source();if(!l||n.y<0||n.y>1)return t;const u=l.getSource().maxzoom,p=1<<u,g=Math.floor(n.x),y=n.x-g,b=new ii(u,g,u,Math.floor(y*p),Math.floor(n.y*p)),w=this.findDEMTileFor(b);if(!w||!w.dem)return t;const C=w.dem,P=1<<w.tileID.canonical.z,I=(y*P-w.tileID.canonical.x)*C.dim,O=(n.y*P-w.tileID.canonical.y)*C.dim,z=Math.floor(I),F=Math.floor(O);return(i?this.exaggeration():1)*rr(rr(C.get(z,F),C.get(z,F+1),O-F),rr(C.get(z+1,F),C.get(z+1,F+1),O-F),I-z)}getAtTileOffset(n,t,i){const l=1<<n.canonical.z;return this.getAtPointOrZero(new Tu(n.wrap+(n.canonical.x+t/Pt)/l,(n.canonical.y+i/Pt)/l))}getAtTileOffsetFunc(n,t,i,l){return u=>{const p=this.getAtTileOffset(n,u.x,u.y),g=l.upVector(n.canonical,u.x,u.y);return Xi(g,g,p*l.upVectorScale(n.canonical,t,i).metersToTile),g}}getForTilePoints(n,t,i,l){if(this.isUsingMockSource())return!1;const u=eg.create(this,n,l);return!!u&&(t.forEach(p=>{p[2]=this.exaggeration()*u.getElevationAt(p[0],p[1],i)}),!0)}getMinMaxForTile(n){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(n);if(!t||!t.dem)return null;const i=t.dem.tree,l=t.tileID,u=1<<n.canonical.z-l.canonical.z;let p=n.canonical.x/u-l.canonical.x,g=n.canonical.y/u-l.canonical.y,y=0;for(let b=0;b<n.canonical.z-l.canonical.z&&!i.leaves[y];b++){p*=2,g*=2;const w=2*Math.floor(g)+Math.floor(p);y=i.childOffsets[y]+w,p%=1,g%=1}return{min:this.exaggeration()*i.minimums[y],max:this.exaggeration()*i.maximums[y]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(n,t,i){throw new Error("Pure virtual method called.")}pointCoordinate(n){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(n){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=Mo,s.EvaluationParameters=M,s.Event=zs,s.Evented=Al,s.FillExtrusionBucket=Wd,s.Frustum=vy,s.FrustumCorners=yy,s.GLOBE_RADIUS=hs,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=Yw,s.GLOBE_ZOOM_THRESHOLD_MIN=xy,s.GlobeSharedBuffers=class{constructor(n){this._createGrid(n),this._createPoles(n)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const n of this._poleSegments)n.destroy();for(const n of this._gridSegments)n.withSkirts.destroy(),n.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const n of this._wireframeSegments)n.destroy()}}_fillGridMeshWithLods(n,t){const i=new Je,l=new Tt,u=[],p=n+1+2,g=t[0]+1,y=t[0]+1+(1+t.length),b=(w,C,P)=>{let I=w===p-1?w-2:w===0?w:w-1;return I+=P?24575:0,[I,C]};for(let w=0;w<p;++w)i.emplaceBack(...b(w,0,!0));for(let w=0;w<g;++w)for(let C=0;C<p;++C)i.emplaceBack(...b(C,w,(C===0||C===p-1)&&!0));for(let w=0;w<t.length;++w){const C=t[w];for(let P=0;P<p;++P)i.emplaceBack(...b(P,C,!0))}for(let w=0;w<t.length;++w){const C=l.length,P=t[w]+1+2,I=new Tt;for(let F=0;F<P-1;F++){const G=F===P-2,Q=G?p*(y-t.length+w-F):p;for(let ce=0;ce<p-1;ce++){const ee=F*p+ce;F===0||G||ce===0||ce===p-2?(I.emplaceBack(ee+1,ee,ee+Q),I.emplaceBack(ee+Q,ee+Q+1,ee+1)):(l.emplaceBack(ee+1,ee,ee+Q),l.emplaceBack(ee+Q,ee+Q+1,ee+1))}}const O=on.simpleSegment(0,C,i.length,l.length-C);for(let F=0;F<I.uint16.length;F+=3)l.emplaceBack(I.uint16[F],I.uint16[F+1],I.uint16[F+2]);const z=on.simpleSegment(0,C,i.length,l.length-C);u.push({withoutSkirts:O,withSkirts:z})}return{vertices:i,indices:l,segments:u}}_createGrid(n){const t=this._fillGridMeshWithLods(nc,Fd);this._gridSegments=t.segments,this._gridBuffer=n.createVertexBuffer(t.vertices,Bd.members),this._gridIndexBuffer=n.createIndexBuffer(t.indices,!0)}_createPoles(n){const t=new Tt;for(let u=0;u<=nc;u++)t.emplaceBack(0,u+1,u+2);this._poleIndexBuffer=n.createIndexBuffer(t,!0);const i=new vr,l=new vr;this._poleSegments=[];for(let u=0,p=0;u<xy;u++){const g=360/(1<<u);i.emplaceBack(0,-hs,0,.5,0),l.emplaceBack(0,-hs,0,.5,1);for(let y=0;y<=nc;y++){const b=y/nc,w=rr(0,g,b),[C,P,I]=bu(yk,vk,w,hs);i.emplaceBack(C,P,I,b,0),l.emplaceBack(C,P,I,b,1)}this._poleSegments.push(on.simpleSegment(p,0,66,64)),p+=66}this._poleNorthVertexBuffer=n.createVertexBuffer(i,Xw,!1),this._poleSouthVertexBuffer=n.createVertexBuffer(l,Xw,!1)}getGridBuffers(n,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[n].withSkirts:this._gridSegments[n].withoutSkirts]}getPoleBuffers(n){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[n]]}getWirefameBuffers(n,t){if(!this._wireframeSegments){const i=new An,l=nc,u=l+1+2,p=1;this._wireframeSegments=[];for(let g=0,y=0;g<Fd.length;g++){const b=Fd[g];for(let C=p;C<b+p;C++)for(let P=p;P<l+p;P++){const I=C*u+P;i.emplaceBack(I,I+1),i.emplaceBack(I,I+u),i.emplaceBack(I,I+u+1)}const w=b*l*3;this._wireframeSegments.push(on.simpleSegment(0,y,(b+1)*u,w)),y+=w}this._wireframeIndexBuffer=n.createIndexBuffer(i)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},s.GlyphManager=Ou,s.ImagePosition=qy,s.KDBush=uv,s.LivePerformanceUtils=j0,s.LngLat=br,s.LngLatBounds=Da,s.LocalGlyphMode=Ky,s.MAX_MERCATOR_LATITUDE=$n,s.MercatorCoordinate=Tu,s.ONE_EM=On,s.OverscaledTileID=ii,s.PerformanceMarkers=ma,s.Point=Te,s.Properties=ne,s.RGBAImage=zi,s.Ray=_y,s.RequestManager=class{constructor(n,t,i){this._transformRequestFn=n,this._customAccessToken=t,this._silenceAuthErrors=!!i,this._createSkuToken()}_createSkuToken(){const n=function(){let t="";for(let i=0;i<10;i++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Z,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=n.token,this._skuTokenExpiresAt=n.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(n,t){return this._transformRequestFn&&this._transformRequestFn(n,t)||{url:n}}normalizeStyleURL(n,t){if(!ye(n))return n;const i=lt(n);return i.path=`/styles/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||t)}normalizeGlyphsURL(n,t){if(!ye(n))return n;const i=lt(n);return i.path=`/fonts/v1${i.path}`,this._makeAPIURL(i,this._customAccessToken||t)}normalizeSourceURL(n,t,i,l){if(!ye(n))return n;const u=lt(n);return u.path=`/v4/${u.authority}.json`,u.params.push("secure"),i&&u.params.push(`language=${i}`),l&&u.params.push(`worldview=${l}`),this._makeAPIURL(u,this._customAccessToken||t)}normalizeSpriteURL(n,t,i,l){const u=lt(n);return ye(n)?(u.path=`/styles/v1${u.path}/sprite${t}${i}`,this._makeAPIURL(u,this._customAccessToken||l)):(u.path+=`${t}${i}`,nt(u))}normalizeTileURL(n,t,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),n&&!ye(n))return n;const l=lt(n);l.path=l.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||i&&l.authority!=="raster"&&i===512?"@2x":""}${q.supported?".webp":"$1"}`),l.authority==="raster"?l.path=`/${N.RASTER_URL_PREFIX}${l.path}`:(l.path=l.path.replace(/^.+\/v4\//,"/"),l.path=`/${N.TILE_URL_VERSION}${l.path}`);const u=this._customAccessToken||function(p){for(const g of p){const y=g.match(/^access_token=(.*)$/);if(y)return y[1]}return null}(l.params)||N.ACCESS_TOKEN;return N.REQUIRE_ACCESS_TOKEN&&u&&this._skuToken&&l.params.push(`sku=${this._skuToken}`),this._makeAPIURL(l,u)}canonicalizeTileURL(n,t){const i=lt(n);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return n;let l="mapbox://";i.path.match(/^\/raster\/v1\//)?l+=`raster/${i.path.replace(`/${N.RASTER_URL_PREFIX}/`,"")}`:l+=`tiles/${i.path.replace(`/${N.TILE_URL_VERSION}/`,"")}`;let u=i.params;return t&&(u=u.filter(p=>!p.match(/^access_token=/))),u.length&&(l+=`?${u.join("&")}`),l}canonicalizeTileset(n,t){const i=!!t&&ye(t),l=[];for(const u of n.tiles||[])Ae(u)?l.push(this.canonicalizeTileURL(u,i)):l.push(u);return l}_makeAPIURL(n,t){const i="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",l=lt(N.API_URL);if(n.protocol=l.protocol,n.authority=l.authority,n.protocol==="http"){const u=n.params.indexOf("secure");u>=0&&n.params.splice(u,1)}if(l.path!=="/"&&(n.path=`${l.path}${n.path}`),!N.REQUIRE_ACCESS_TOKEN)return nt(n);if(t=t||N.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${i}`);if(t[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${i}`)}return n.params=n.params.filter(u=>u.indexOf("access_token")===-1),n.params.push(`access_token=${t||""}`),nt(n)}},s.ResourceType=ks,s.SegmentVector=on,s.SourceCache=cc,s.StencilMode=sv,s.StructArrayLayout1ui2=Li,s.StructArrayLayout2f1f2i16=kt,s.StructArrayLayout2i4=Je,s.StructArrayLayout2ui4=An,s.StructArrayLayout3f12=Ht,s.StructArrayLayout3ui6=Tt,s.StructArrayLayout4i8=Ge,s.StructArrayLayout5f20=vr,s.Texture=sf,s.Tile=iv,s.Transitionable=D,s.Uniform1f=vm,s.Uniform1i=class extends Zs{constructor(n){super(n),this.current=0}set(n,t,i){this.fetchUniformLocation(n,t)&&this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},s.Uniform2f=class extends Zs{constructor(n){super(n),this.current=[0,0]}set(n,t,i){this.fetchUniformLocation(n,t)&&(i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1])))}},s.Uniform3f=class extends Zs{constructor(n){super(n),this.current=[0,0,0]}set(n,t,i){this.fetchUniformLocation(n,t)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2])))}},s.Uniform4f=Lw,s.UniformColor=Ow,s.UniformMatrix2f=class extends Zs{constructor(n){super(n),this.current=rk}set(n,t,i){if(this.fetchUniformLocation(n,t)){for(let l=0;l<4;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix2fv(this.location,!1,i);break}}}},s.UniformMatrix3f=class extends Zs{constructor(n){super(n),this.current=tk}set(n,t,i){if(this.fetchUniformLocation(n,t)){for(let l=0;l<9;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix3fv(this.location,!1,i);break}}}},s.UniformMatrix4f=class extends Zs{constructor(n){super(n),this.current=ek}set(n,t,i){if(this.fetchUniformLocation(n,t)){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let l=1;l<16;l++)if(i[l]!==this.current[l]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}}},s.UnwrappedTileID=N2,s.ValidationError=mt,s.VectorTileFeature=zm,s.VectorTileWorkerSource=class extends Al{constructor(n,t,i,l,u){super(),this.actor=n,this.layerIndex=t,this.availableImages=i,this.loadVectorData=u||XE,this.loading={},this.loaded={},this.deduped=new WE(n.scheduler),this.isSpriteLoaded=l,this.scheduler=n.scheduler}loadTile(n,t){const i=n.uid,l=n&&n.request,u=l&&l.collectResourceTiming,p=this.loading[i]=new SL(n);p.abort=this.loadVectorData(n,(g,y)=>{const b=!this.loading[i];if(delete this.loading[i],b||g||!y)return p.status="done",b||(this.loaded[i]=p),t(g);const w=y.rawData,C={};y.expires&&(C.expires=y.expires),y.cacheControl&&(C.cacheControl=y.cacheControl),p.vectorTile=y.vectorTile||new Vy(new jm(w));const P=()=>{p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,(I,O)=>{if(I||!O)return t(I);const z={};if(u){const F=zh(l);F.length>0&&(z.resourceTiming=JSON.parse(JSON.stringify(F)))}t(null,nr({rawTileData:w.slice(0)},O,C,z))})};this.isSpriteLoaded?P():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(P,{type:"parseTile",isSymbolTile:n.isSymbolTile,zoom:n.tileZoom}):P()}),this.loaded=this.loaded||{},this.loaded[i]=p})}reloadTile(n,t){const i=this.loaded,l=n.uid,u=this;if(i&&i[l]){const p=i[l];p.showCollisionBoxes=n.showCollisionBoxes,p.enableTerrain=!!n.enableTerrain,p.projection=n.projection,p.tileTransform=lc(n.tileID.canonical,n.projection);const g=(y,b)=>{const w=p.reloadCallback;w&&(delete p.reloadCallback,p.parse(p.vectorTile,u.layerIndex,this.availableImages,u.actor,w)),t(y,b)};p.status==="parsing"?p.reloadCallback=g:p.status==="done"&&(p.vectorTile?p.parse(p.vectorTile,this.layerIndex,this.availableImages,this.actor,g):g())}}abortTile(n,t){const i=n.uid,l=this.loading[i];l&&(l.abort&&l.abort(),delete this.loading[i]),t()}removeTile(n,t){const i=this.loaded,l=n.uid;i&&i[l]&&delete i[l],t()}},s.WritingMode=Yi,s.ZoomDependentExpression=Gl,s.add=qs,s.addDynamicAttributes=Km,s.adjoint=function(n,t){var i=t[0],l=t[1],u=t[2],p=t[3],g=t[4],y=t[5],b=t[6],w=t[7],C=t[8];return n[0]=g*C-y*w,n[1]=u*w-l*C,n[2]=l*y-u*g,n[3]=y*b-p*C,n[4]=i*C-u*b,n[5]=u*p-i*y,n[6]=p*w-g*b,n[7]=l*b-i*w,n[8]=i*g-l*p,n},s.asyncAll=It,s.bezier=Jt,s.bindAll=Ps,s.boundsAttributes=kE,s.bufferConvexPolygon=function(n,t){const i=[];for(let l=0;l<n.length;l++){const u=_t(l-1,-1,n.length-1),p=_t(l+1,-1,n.length-1),g=n[l],y=n[p],b=n[u].sub(g).unit(),w=y.sub(g).unit(),C=w.angleWithSep(b.x,b.y),P=b.add(w).unit().mult(-1*t/Math.sin(C/2));i.push(g.add(P))}return i},s.cacheEntryPossiblyAdded=function(n){Tl++,Tl>Uc&&(n.getActor().send("enforceCacheSizeLimit",jc),Tl=0)},s.calculateGlobeLabelMatrix=function(n,t){const{x:i,y:l}=n.point,u=r2(i,l,n.worldSize/n._pixelsPerMercatorPixel,0,0);return ec(u,u,Ey(ds(t)))},s.calculateGlobeMatrix=function(n){const{x:t,y:i}=n.point,{lng:l,lat:u}=n._center;return r2(t,i,n.worldSize,l,u)},s.calculateGlobeMercatorMatrix=function(n){const t=n.pixelsPerMeter,i=t/Vo(1,n.center.lat),l=jo(new Float64Array(16));return kd(l,l,[n.point.x,n.point.y,0]),tc(l,l,[i,i,t]),Float32Array.from(l)},s.circumferenceAtLatitude=Sy,s.clamp=Oe,s.clearTileCache=function(n){if(!El())return;const t=A.caches.delete(da);n&&t.catch(n).then(()=>n())},s.clipLine=fE,s.clone=function(n){var t=new Oi(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},s.clone$1=pi,s.collisionCircleLayout=E4,s.config=N,s.conjugate=function(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n},s.create=function(){var n=new Oi(16);return Oi!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n},s.create$1=Dw,s.createExpression=Pa,s.createLayout=xe,s.createStyleLayer=function(n){return n.type==="custom"?new pL(n):new gL[n.type](n)},s.cross=gy,s.degToRad=at,s.distance=function(n,t){return Math.hypot(t[0]-n[0],t[1]-n[1],t[2]-n[2])},s.div=function(n,t,i){return n[0]=t[0]/i[0],n[1]=t[1]/i[1],n[2]=t[2]/i[2],n},s.dot=po,s.earthRadius=Ud,s.ease=Ze,s.easeCubicInOut=St,s.ecefToLatLng=function([n,t,i]){const l=Math.hypot(n,t,i),u=Math.atan2(n,i),p=.5*Math.PI-Math.acos(-t/l);return new br(vt(u),vt(p))},s.emitValidationErrors=fm,s.endsWith=ca,s.enforceCacheSizeLimit=function(n){Is(),Ci&&Ci.then(t=>{t.keys().then(i=>{for(let l=0;l<i.length-n;l++)t.delete(i[l])})})},s.evaluateSizeForFeature=Fm,s.evaluateSizeForZoom=Pu,s.evaluateVariableOffset=yE,s.evented=_,s.exactEquals=function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]},s.exactEquals$1=function(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]},s.exported=Co,s.exported$1=q,s.extend=nr,s.extend$1=Po,s.fillExtrusionHeightLift=D2,s.filterObject=ua,s.fromMat4=function(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n},s.fromQuat=function(n,t){var i=t[0],l=t[1],u=t[2],p=t[3],g=i+i,y=l+l,b=u+u,w=i*g,C=l*g,P=l*y,I=u*g,O=u*y,z=u*b,F=p*g,G=p*y,Q=p*b;return n[0]=1-P-z,n[1]=C+Q,n[2]=I-G,n[3]=0,n[4]=C-Q,n[5]=1-w-z,n[6]=O+F,n[7]=0,n[8]=I+G,n[9]=O-F,n[10]=1-w-P,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},s.fromRotation=function(n,t){var i=Math.sin(t),l=Math.cos(t);return n[0]=l,n[1]=i,n[2]=0,n[3]=-i,n[4]=l,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n},s.fromScaling=Fw,s.furthestTileCorner=function(n){const t=Math.round((n+45+360)%360/90)%4;return Ot[t]},s.getAABBPointSquareDist=function(n,t,i){let l=0;for(let u=0;u<2;++u){const p=i?i[u]:0;n[u]>p&&(l+=(n[u]-p)*(n[u]-p)),t[u]<p&&(l+=(p-t[u])*(p-t[u]))}return l},s.getAnchorAlignment=Xy,s.getAnchorJustification=Qy,s.getBounds=function(n){let t=1/0,i=1/0,l=-1/0,u=-1/0;for(const p of n)t=Math.min(t,p.x),i=Math.min(i,p.y),l=Math.max(l,p.x),u=Math.max(u,p.y);return{min:new Te(t,i),max:new Te(l,u)}},s.getColumn=os,s.getDefaultExportFromCjs=te,s.getGridMatrix=function(n,t,i,l){const u=t.getNorth(),p=t.getSouth(),g=t.getWest(),y=t.getEast(),b=1<<n.z,w=y-g,C=u-p,P=w/nc,I=-C/Fd[i],O=[0,P,0,I,0,0,u,g,0];if(n.z>0){const z=180/l;Bw(O,O,[z/w+1,0,0,0,z/C+1,0,-.5*z/P,.5*z/I,1])}return O[2]=b,O[5]=n.x,O[8]=n.y,O},s.getImage=ie,s.getJSON=function(n,t){return Os(nr(n,{type:"json"}),t)},s.getLatitudinalLod=function(n){const t=$n-5;n=Oe(n,-t,t)/t*90;const i=Math.pow(Math.abs(Math.sin(at(n))),3);return Math.round(i*(Fd.length-1))},s.getMapSessionAPI=En,s.getPerformanceMeasurement=zh,s.getProjection=AE,s.getRTLTextPluginStatus=v,s.getReferrer=Ls,s.getTilePoint=function(n,{x:t,y:i},l=0){return new Te(((t-l)*n.scale-n.x)*Pt,(i*n.scale-n.y)*Pt)},s.getTileVec3=function(n,t,i=0){return xu(((t.x-i)*n.scale-n.x)*Pt,(t.y*n.scale-n.y)*Pt,s2(t.z,t.y))},s.getVideo=function(n,t){const i=A.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(let l=0;l<n.length;l++){const u=A.document.createElement("source");Vc(n[l])||(i.crossOrigin="Anonymous"),u.src=n[l],i.appendChild(u)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(n){const t=[0,0,0],i=jo(new Float64Array(16));return ec(i,n.pixelMatrix,n.globeMatrix),Yr(t,t,i),new Te(t[0],t[1])},s.globeDenormalizeECEF=Ey,s.globeECEFOrigin=function(n,t){const i=[0,0,0];return Yr(i,i,jd(ds(t.canonical))),Yr(i,i,n),i},s.globeMetersToEcef=wm,s.globeNormalizeECEF=jd,s.globePixelsToTileUnits=function(n,t){return Pt/(512*Math.pow(2,n))*Tm(ds(t))},s.globePoleMatrixForTile=function(n,t,i){const l=jo(new Float64Array(16)),u=(t/(1<<n)-.5)*Math.PI*2;return bm(l,i.globeMatrix,u),Float32Array.from(l)},s.globeTileBounds=ds,s.globeTiltAtLngLat=n2,s.globeToMercatorTransition=Eu,s.globeUseCustomAntiAliasing=function(n,t,i){const l=Eu(i.zoom),u=n.style.map._antialias,p=!!t.extStandardDerivatives,g=t.extStandardDerivativesForceOff||n.terrain&&n.terrain.exaggeration()>0;return l===0&&!u&&!g&&p},s.identity=jo,s.identity$1=Hw,s.invert=dy,s.isFullscreen=function(){return!!A.document.fullscreenElement||!!A.document.webkitFullscreenElement},s.isLngLatBehindGlobe=Ty,s.isMapAuthenticated=function(n){return qn.has(n)},s.isMapboxURL=ye,s.isSafariWithAntialiasingBug=function(n){const t=n.navigator?n.navigator.userAgent:null;return!!ha(n)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Vn,s.latLngToECEF=wu,s.len=hk,s.length=Ld,s.length$1=function(n){return Math.hypot(n[0],n[1],n[2],n[3])},s.lngFromMercatorX=Ki,s.loadVectorTile=XE,s.makeRequest=Os,s.mapValue=function(n,t,i,l,u){return Oe((n-t)/(i-t)*(u-l)+l,l,u)},s.mercatorScale=a2,s.mercatorXfromLng=fs,s.mercatorYfromLat=ps,s.mercatorZfromAltitude=Vo,s.mul=ck,s.mul$1=uk,s.multiply=ec,s.multiply$1=Bw,s.multiply$2=Uw,s.nextPowerOfTwo=Fn,s.normalize=ri,s.normalize$1=dk,s.normalize$2=Gw,s.number=rr,s.ortho=function(n,t,i,l,u,p,g){var y=1/(t-i),b=1/(l-u),w=1/(p-g);return n[0]=-2*y,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*b,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*w,n[11]=0,n[12]=(t+i)*y,n[13]=(u+l)*b,n[14]=(g+p)*w,n[15]=1,n},s.pbf=H2,s.perspective=function(n,t,i,l,u){var p,g=1/Math.tan(t/2);return n[0]=g/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=g,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,u!=null&&u!==1/0?(n[10]=(u+l)*(p=1/(l-u)),n[14]=2*u*l*p):(n[10]=-1,n[14]=-2*l),n},s.pick=function(n,t){const i={};for(let l=0;l<t.length;l++){const u=t[l];u in n&&(i[u]=n[u])}return i},s.plugin=S,s.pointGeometry=We,s.polesInViewport=function(n){const t=jo(new Float64Array(16));ec(t,n.pixelMatrix,n.globeMatrix);const i=[0,mo,0],l=[0,go,0];return Yr(i,i,t),Yr(l,l,t),[i[0]>0&&i[0]<=n.width&&i[1]>0&&i[1]<=n.height&&!Ty(n,new br(n.center.lat,90)),l[0]>0&&l[0]<=n.width&&l[1]>0&&l[1]<=n.height&&!Ty(n,new br(n.center.lat,-90))]},s.polygonContainsPoint=sc,s.polygonIntersectsBox=p2,s.polygonIntersectsPolygon=u2,s.polygonizeBounds=function(n,t,i=0,l=!0){const u=new Te(i,i),p=n.sub(u),g=t.add(u),y=[p,new Te(g.x,p.y),g,new Te(p.x,g.y)];return l&&y.push(p.clone()),y},s.posAttributes=Bd,s.postMapLoadEvent=tn,s.postPerformanceEvent=_n,s.postTurnstileEvent=tr,s.potpack=Hy,s.prevPowerOfTwo=function(n){return n<=1?1:Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},s.radToDeg=vt,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(n){return n({pluginStatus:f,pluginURL:o}),_.on("pluginStateChange",n),n},s.removeAuthState=function(n){qn.delete(n)},s.renderColorRamp=Oy,s.resample=l2,s.rotateX=fy,s.rotateX$1=qw,s.rotateY=bm,s.rotateY$1=Ww,s.rotateZ=function(n,t,i){var l=Math.sin(i),u=Math.cos(i),p=t[0],g=t[1],y=t[2],b=t[3],w=t[4],C=t[5],P=t[6],I=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=p*u+w*l,n[1]=g*u+C*l,n[2]=y*u+P*l,n[3]=b*u+I*l,n[4]=w*u-p*l,n[5]=C*u-g*l,n[6]=P*u-y*l,n[7]=I*u-b*l,n},s.rotateZ$1=function(n,t,i){i*=.5;var l=t[0],u=t[1],p=t[2],g=t[3],y=Math.sin(i),b=Math.cos(i);return n[0]=l*b+u*y,n[1]=u*b-l*y,n[2]=p*b+g*y,n[3]=g*b-p*y,n},s.scale=tc,s.scale$1=$w,s.scale$2=Xi,s.scaleAndAdd=Rd,s.set=function(n,t,i,l){return n[0]=t,n[1]=i,n[2]=l,n},s.setCacheLimits=function(n,t){jc=n,Uc=t},s.setColumn=function(n,t,i){n[4*t+0]=i[0],n[4*t+1]=i[1],n[4*t+2]=i[2],n[4*t+3]=i[3]},s.setRTLTextPlugin=function(n,t,i=!1){if(f===Ad||f===Cd||f===Md)throw new Error("setRTLTextPlugin cannot be called multiple times.");o=Co.resolveURL(n),f=Ad,Oa=t,m(),i||T()},s.smoothstep=Et,s.spec=je,s.squaredLength=function(n){var t=n[0],i=n[1],l=n[2];return t*t+i*i+l*l},s.storeAuthState=function(n,t){t?qn.add(n):qn.delete(n)},s.sub=Uo,s.subtract=my,s.symbolSize=T4,s.tileAABB=function(n,t,i,l,u,p,g,y,b){if(b.name==="globe")return _k(n,t,new Dm(i,l,u));const w=lc({z:i,x:l,y:u},b);return new ni([(p+w.x/w.scale)*t,t*(w.y/w.scale),g],[(p+w.x2/w.scale)*t,t*(w.y2/w.scale),y])},s.tileCornersToBounds=Em,s.tileTransform=lc,s.transformMat3=function(n,t,i){var l=t[0],u=t[1],p=t[2];return n[0]=l*i[0]+u*i[3]+p*i[6],n[1]=l*i[1]+u*i[4]+p*i[7],n[2]=l*i[2]+u*i[5]+p*i[8],n},s.transformMat4=Yr,s.transformMat4$1=rc,s.transformQuat=Vw,s.transitionTileAABBinECEF=Jw,s.translate=kd,s.transpose=function(n,t){if(n===t){var i=t[1],l=t[2],u=t[5];n[1]=t[3],n[2]=t[6],n[3]=i,n[5]=t[7],n[6]=l,n[7]=u}else n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8];return n},s.triggerPluginCompletionEvent=c,s.uniqueId=Si,s.updateGlobeVertexNormal=function(n,t,i,l,u){const p=5*t+2;n.float32[p+0]=i,n.float32[p+1]=l,n.float32[p+2]=u},s.validateCustomStyleLayer=function(n){const t=[],i=n.id;return i===void 0&&t.push({message:`layers.${i}: missing required property "id"`}),n.render===void 0&&t.push({message:`layers.${i}: missing required method "render"`}),n.renderingMode&&n.renderingMode!=="2d"&&n.renderingMode!=="3d"&&t.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),t},s.validateFilter=n=>ki(Xl(n)),s.validateFog=n=>ki(um(n)),s.validateLayer=n=>ki(sm(n)),s.validateLight=n=>ki(cm(n)),s.validateSource=n=>ki(lm(n)),s.validateStyle=dm,s.validateTerrain=n=>ki(bd(n)),s.values=qt,s.vectorTile=Om,s.version=R,s.warnOnce=jr,s.window=A,s.wrap=_t}),x(["./shared"],function(s){function A(le){if(typeof le=="number"||typeof le=="boolean"||typeof le=="string"||le==null)return JSON.stringify(le);if(Array.isArray(le)){let V="[";for(const ie of le)V+=`${A(ie)},`;return`${V}]`}let j="{";for(const V of Object.keys(le).sort())j+=`${V}:${A(le[V])},`;return`${j}}`}function R(le){let j="";for(const V of s.refProperties)j+=`/${A(le[V])}`;return j}class U{constructor(j){this.keyCache={},j&&this.replace(j)}replace(j){this._layerConfigs={},this._layers={},this.update(j,[])}update(j,V){for(const de of j)this._layerConfigs[de.id]=de,(this._layers[de.id]=s.createStyleLayer(de)).compileFilter(),this.keyCache[de.id]&&delete this.keyCache[de.id];for(const de of V)delete this.keyCache[de],delete this._layerConfigs[de],delete this._layers[de];this.familiesBySource={};const ie=function(de,ye){const Ae={};for(let _e=0;_e<de.length;_e++){const Be=ye&&ye[de[_e].id]||R(de[_e]);ye&&(ye[de[_e].id]=Be);let st=Ae[Be];st||(st=Ae[Be]=[]),st.push(de[_e])}const Se=[];for(const _e in Ae)Se.push(Ae[_e]);return Se}(s.values(this._layerConfigs),this.keyCache);for(const de of ie){const ye=de.map(lt=>this._layers[lt.id]),Ae=ye[0];if(Ae.visibility==="none")continue;const Se=Ae.source||"";let _e=this.familiesBySource[Se];_e||(_e=this.familiesBySource[Se]={});const Be=Ae.sourceLayer||"_geojsonTileLayer";let st=_e[Be];st||(st=_e[Be]=[]),st.push(ye)}}}class N{loadTile(j,V){const{uid:ie,encoding:de,rawImageData:ye,padding:Ae,buildQuadTree:Se}=j,_e=s.window.ImageBitmap&&ye instanceof s.window.ImageBitmap?this.getImageData(ye,Ae):ye;V(null,new s.DEMData(ie,_e,de,Ae<1,Se))}getImageData(j,V){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(j.width,j.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=j.width,this.offscreenCanvas.height=j.height,this.offscreenCanvasContext.drawImage(j,0,0,j.width,j.height);const ie=this.offscreenCanvasContext.getImageData(-V,-V,j.width+2*V,j.height+2*V);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ie}}function q(le,j){if(le.length!==0){fe(le[0],j);for(var V=1;V<le.length;V++)fe(le[V],!j)}}function fe(le,j){for(var V=0,ie=0,de=0,ye=le.length,Ae=ye-1;de<ye;Ae=de++){var Se=(le[de][0]-le[Ae][0])*(le[Ae][1]+le[de][1]),_e=V+Se;ie+=Math.abs(V)>=Math.abs(Se)?V-_e+Se:Se-_e+V,V=_e}V+ie>=0!=!!j&&le.reverse()}var ae=s.getDefaultExportFromCjs(function le(j,V){var ie,de=j&&j.type;if(de==="FeatureCollection")for(ie=0;ie<j.features.length;ie++)le(j.features[ie],V);else if(de==="GeometryCollection")for(ie=0;ie<j.geometries.length;ie++)le(j.geometries[ie],V);else if(de==="Feature")le(j.geometry,V);else if(de==="Polygon")q(j.coordinates,V);else if(de==="MultiPolygon")for(ie=0;ie<j.coordinates.length;ie++)q(j.coordinates[ie],V);return j});const se=s.VectorTileFeature.prototype.toGeoJSON;var ve={exports:{}},J=s.pointGeometry,Z=s.vectorTile.VectorTileFeature,te=Ee;function Ee(le,j){this.options=j||{},this.features=le,this.length=le.length}function ke(le,j){this.id=typeof le.id=="number"?le.id:void 0,this.type=le.type,this.rawGeometry=le.type===1?[le.geometry]:le.geometry,this.properties=le.tags,this.extent=j||4096}Ee.prototype.feature=function(le){return new ke(this.features[le],this.options.extent)},ke.prototype.loadGeometry=function(){var le=this.rawGeometry;this.geometry=[];for(var j=0;j<le.length;j++){for(var V=le[j],ie=[],de=0;de<V.length;de++)ie.push(new J(V[de][0],V[de][1]));this.geometry.push(ie)}return this.geometry},ke.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var le=this.geometry,j=1/0,V=-1/0,ie=1/0,de=-1/0,ye=0;ye<le.length;ye++)for(var Ae=le[ye],Se=0;Se<Ae.length;Se++){var _e=Ae[Se];j=Math.min(j,_e.x),V=Math.max(V,_e.x),ie=Math.min(ie,_e.y),de=Math.max(de,_e.y)}return[j,ie,V,de]},ke.prototype.toGeoJSON=Z.prototype.toGeoJSON;var Fe=s.pbf,We=te;function Ve(le){var j=new Fe;return function(V,ie){for(var de in V.layers)ie.writeMessage(3,Te,V.layers[de])}(le,j),j.finish()}function Te(le,j){var V;j.writeVarintField(15,le.version||1),j.writeStringField(1,le.name||""),j.writeVarintField(5,le.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(V=0;V<le.length;V++)ie.feature=le.feature(V),j.writeMessage(2,dt,ie);var de=ie.keys;for(V=0;V<de.length;V++)j.writeStringField(3,de[V]);var ye=ie.values;for(V=0;V<ye.length;V++)j.writeMessage(4,St,ye[V])}function dt(le,j){var V=le.feature;V.id!==void 0&&j.writeVarintField(1,V.id),j.writeMessage(2,zt,le),j.writeVarintField(3,V.type),j.writeMessage(4,Ot,V)}function zt(le,j){var V=le.feature,ie=le.keys,de=le.values,ye=le.keycache,Ae=le.valuecache;for(var Se in V.properties){var _e=V.properties[Se],Be=ye[Se];if(_e!==null){Be===void 0&&(ie.push(Se),ye[Se]=Be=ie.length-1),j.writeVarint(Be);var st=typeof _e;st!=="string"&&st!=="boolean"&&st!=="number"&&(_e=JSON.stringify(_e));var lt=st+":"+_e,nt=Ae[lt];nt===void 0&&(de.push(_e),Ae[lt]=nt=de.length-1),j.writeVarint(nt)}}}function at(le,j){return(j<<3)+(7&le)}function vt(le){return le<<1^le>>31}function Ot(le,j){for(var V=le.loadGeometry(),ie=le.type,de=0,ye=0,Ae=V.length,Se=0;Se<Ae;Se++){var _e=V[Se],Be=1;ie===1&&(Be=_e.length),j.writeVarint(at(1,Be));for(var st=ie===3?_e.length-1:_e.length,lt=0;lt<st;lt++){lt===1&&ie!==1&&j.writeVarint(at(2,st-1));var nt=_e[lt].x-de,Nt=_e[lt].y-ye;j.writeVarint(vt(nt)),j.writeVarint(vt(Nt)),de+=nt,ye+=Nt}ie===3&&j.writeVarint(at(7,1))}}function St(le,j){var V=typeof le;V==="string"?j.writeStringField(1,le):V==="boolean"?j.writeBooleanField(7,le):V==="number"&&(le%1!=0?j.writeDoubleField(3,le):le<0?j.writeSVarintField(6,le):j.writeVarintField(5,le))}ve.exports=Ve,ve.exports.fromVectorTileJs=Ve,ve.exports.fromGeojsonVt=function(le,j){j=j||{};var V={};for(var ie in le)V[ie]=new We(le[ie].features,j),V[ie].name=ie,V[ie].version=j.version,V[ie].extent=j.extent;return Ve({layers:V})},ve.exports.GeoJSONWrapper=We;var Jt=s.getDefaultExportFromCjs(ve.exports);const Ze={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:le=>le},Oe=Math.fround||(Et=new Float32Array(1),le=>(Et[0]=+le,Et[0]));var Et;const _t=3,It=5,qt=6;class nr{constructor(j){this.options=Object.assign(Object.create(Ze),j),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(j){const{log:V,minZoom:ie,maxZoom:de}=this.options;V&&console.time("total time");const ye=`prepare ${j.length} points`;V&&console.time(ye),this.points=j;const Ae=[];for(let _e=0;_e<j.length;_e++){const Be=j[_e];if(!Be.geometry)continue;const[st,lt]=Be.geometry.coordinates,nt=Oe(wn(st)),Nt=Oe(Fn(lt));Ae.push(nt,Nt,1/0,_e,-1,1),this.options.reduce&&Ae.push(0)}let Se=this.trees[de+1]=this._createTree(Ae);V&&console.timeEnd(ye);for(let _e=de;_e>=ie;_e--){const Be=+Date.now();Se=this.trees[_e]=this._createTree(this._cluster(Se,_e)),V&&console.log("z%d: %d clusters in %dms",_e,Se.numItems,+Date.now()-Be)}return V&&console.timeEnd("total time"),this}getClusters(j,V){let ie=((j[0]+180)%360+360)%360-180;const de=Math.max(-90,Math.min(90,j[1]));let ye=j[2]===180?180:((j[2]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,j[3]));if(j[2]-j[0]>=360)ie=-180,ye=180;else if(ie>ye){const lt=this.getClusters([ie,de,180,Ae],V),nt=this.getClusters([-180,de,ye,Ae],V);return lt.concat(nt)}const Se=this.trees[this._limitZoom(V)],_e=Se.range(wn(ie),Fn(Ae),wn(ye),Fn(de)),Be=Se.data,st=[];for(const lt of _e){const nt=this.stride*lt;st.push(Be[nt+It]>1?Lr(Be,nt,this.clusterProps):this.points[Be[nt+_t]])}return st}getChildren(j){const V=this._getOriginId(j),ie=this._getOriginZoom(j),de="No cluster with the specified id.",ye=this.trees[ie];if(!ye)throw new Error(de);const Ae=ye.data;if(V*this.stride>=Ae.length)throw new Error(de);const Se=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),_e=ye.within(Ae[V*this.stride],Ae[V*this.stride+1],Se),Be=[];for(const st of _e){const lt=st*this.stride;Ae[lt+4]===j&&Be.push(Ae[lt+It]>1?Lr(Ae,lt,this.clusterProps):this.points[Ae[lt+_t]])}if(Be.length===0)throw new Error(de);return Be}getLeaves(j,V,ie){const de=[];return this._appendLeaves(de,j,V=V||10,ie=ie||0,0),de}getTile(j,V,ie){const de=this.trees[this._limitZoom(j)],ye=Math.pow(2,j),{extent:Ae,radius:Se}=this.options,_e=Se/Ae,Be=(ie-_e)/ye,st=(ie+1+_e)/ye,lt={features:[]};return this._addTileFeatures(de.range((V-_e)/ye,Be,(V+1+_e)/ye,st),de.data,V,ie,ye,lt),V===0&&this._addTileFeatures(de.range(1-_e/ye,Be,1,st),de.data,ye,ie,ye,lt),V===ye-1&&this._addTileFeatures(de.range(0,Be,_e/ye,st),de.data,-1,ie,ye,lt),lt.features.length?lt:null}getClusterExpansionZoom(j){let V=this._getOriginZoom(j)-1;for(;V<=this.options.maxZoom;){const ie=this.getChildren(j);if(V++,ie.length!==1)break;j=ie[0].properties.cluster_id}return V}_appendLeaves(j,V,ie,de,ye){const Ae=this.getChildren(V);for(const Se of Ae){const _e=Se.properties;if(_e&&_e.cluster?ye+_e.point_count<=de?ye+=_e.point_count:ye=this._appendLeaves(j,_e.cluster_id,ie,de,ye):ye<de?ye++:j.push(Se),j.length===ie)break}return ye}_createTree(j){const V=new s.KDBush(j.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<j.length;ie+=this.stride)V.add(j[ie],j[ie+1]);return V.finish(),V.data=j,V}_addTileFeatures(j,V,ie,de,ye,Ae){for(const Se of j){const _e=Se*this.stride,Be=V[_e+It]>1;let st,lt,nt;if(Be)st=Si(V,_e,this.clusterProps),lt=V[_e],nt=V[_e+1];else{const jt=this.points[V[_e+_t]];st=jt.properties;const[Zt,tr]=jt.geometry.coordinates;lt=wn(Zt),nt=Fn(tr)}const Nt={type:1,geometry:[[Math.round(this.options.extent*(lt*ye-ie)),Math.round(this.options.extent*(nt*ye-de))]],tags:st};let Gt;Gt=Be||this.options.generateId?V[_e+_t]:this.points[V[_e+_t]].id,Gt!==void 0&&(Nt.id=Gt),Ae.features.push(Nt)}}_limitZoom(j){return Math.max(this.options.minZoom,Math.min(Math.floor(+j),this.options.maxZoom+1))}_cluster(j,V){const{radius:ie,extent:de,reduce:ye,minPoints:Ae}=this.options,Se=ie/(de*Math.pow(2,V)),_e=j.data,Be=[],st=this.stride;for(let lt=0;lt<_e.length;lt+=st){if(_e[lt+2]<=V)continue;_e[lt+2]=V;const nt=_e[lt],Nt=_e[lt+1],Gt=j.within(_e[lt],_e[lt+1],Se),jt=_e[lt+It];let Zt=jt;for(const tr of Gt){const Ur=tr*st;_e[Ur+2]>V&&(Zt+=_e[Ur+It])}if(Zt>jt&&Zt>=Ae){let tr,Ur=nt*jt,tn=Nt*jt,Nn=-1;const _n=((lt/st|0)<<5)+(V+1)+this.points.length;for(const so of Gt){const En=so*st;if(_e[En+2]<=V)continue;_e[En+2]=V;const qn=_e[En+It];Ur+=_e[En]*qn,tn+=_e[En+1]*qn,_e[En+4]=_n,ye&&(tr||(tr=this._map(_e,lt,!0),Nn=this.clusterProps.length,this.clusterProps.push(tr)),ye(tr,this._map(_e,En)))}_e[lt+4]=_n,Be.push(Ur/Zt,tn/Zt,1/0,_n,-1,Zt),ye&&Be.push(Nn)}else{for(let tr=0;tr<st;tr++)Be.push(_e[lt+tr]);if(Zt>1)for(const tr of Gt){const Ur=tr*st;if(!(_e[Ur+2]<=V)){_e[Ur+2]=V;for(let tn=0;tn<st;tn++)Be.push(_e[Ur+tn])}}}}return Be}_getOriginId(j){return j-this.points.length>>5}_getOriginZoom(j){return(j-this.points.length)%32}_map(j,V,ie){if(j[V+It]>1){const Ae=this.clusterProps[j[V+qt]];return ie?Object.assign({},Ae):Ae}const de=this.points[j[V+_t]].properties,ye=this.options.map(de);return ie&&ye===de?Object.assign({},ye):ye}}function Lr(le,j,V){return{type:"Feature",id:le[j+_t],properties:Si(le,j,V),geometry:{type:"Point",coordinates:[(ie=le[j],360*(ie-.5)),Fc(le[j+1])]}};var ie}function Si(le,j,V){const ie=le[j+It],de=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,ye=le[j+qt],Ae=ye===-1?{}:Object.assign({},V[ye]);return Object.assign(Ae,{cluster:!0,cluster_id:le[j+_t],point_count:ie,point_count_abbreviated:de})}function wn(le){return le/360+.5}function Fn(le){const j=Math.sin(le*Math.PI/180),V=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return V<0?0:V>1?1:V}function Fc(le){const j=(180-360*le)*Math.PI/180;return 360*Math.atan(Math.exp(j))/Math.PI-90}function Ps(le,j,V,ie){for(var de,ye=ie,Ae=V-j>>1,Se=V-j,_e=le[j],Be=le[j+1],st=le[V],lt=le[V+1],nt=j+3;nt<V;nt+=3){var Nt=ca(le[nt],le[nt+1],_e,Be,st,lt);if(Nt>ye)de=nt,ye=Nt;else if(Nt===ye){var Gt=Math.abs(nt-Ae);Gt<Se&&(de=nt,Se=Gt)}}ye>ie&&(de-j>3&&Ps(le,j,de,ie),le[de+2]=ye,V-de>3&&Ps(le,de,V,ie))}function ca(le,j,V,ie,de,ye){var Ae=de-V,Se=ye-ie;if(Ae!==0||Se!==0){var _e=((le-V)*Ae+(j-ie)*Se)/(Ae*Ae+Se*Se);_e>1?(V=de,ie=ye):_e>0&&(V+=Ae*_e,ie+=Se*_e)}return(Ae=le-V)*Ae+(Se=j-ie)*Se}function er(le,j,V,ie){var de={id:le===void 0?null:le,type:j,geometry:V,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ye){var Ae=ye.geometry,Se=ye.type;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")ua(ye,Ae);else if(Se==="Polygon"||Se==="MultiLineString")for(var _e=0;_e<Ae.length;_e++)ua(ye,Ae[_e]);else if(Se==="MultiPolygon")for(_e=0;_e<Ae.length;_e++)for(var Be=0;Be<Ae[_e].length;Be++)ua(ye,Ae[_e][Be])}(de),de}function ua(le,j){for(var V=0;V<j.length;V+=3)le.minX=Math.min(le.minX,j[V]),le.minY=Math.min(le.minY,j[V+1]),le.maxX=Math.max(le.maxX,j[V]),le.maxY=Math.max(le.maxY,j[V+1])}function pi(le,j,V,ie){if(j.geometry){var de=j.geometry.coordinates,ye=j.geometry.type,Ae=Math.pow(V.tolerance/((1<<V.maxZoom)*V.extent),2),Se=[],_e=j.id;if(V.promoteId?_e=j.properties[V.promoteId]:V.generateId&&(_e=ie||0),ye==="Point")xl(de,Se);else if(ye==="MultiPoint")for(var Be=0;Be<de.length;Be++)xl(de[Be],Se);else if(ye==="LineString")jr(de,Se,Ae,!1);else if(ye==="MultiLineString"){if(V.lineMetrics){for(Be=0;Be<de.length;Be++)jr(de[Be],Se=[],Ae,!1),le.push(er(_e,"LineString",Se,j.properties));return}Ai(de,Se,Ae,!1)}else if(ye==="Polygon")Ai(de,Se,Ae,!0);else{if(ye!=="MultiPolygon"){if(ye==="GeometryCollection"){for(Be=0;Be<j.geometry.geometries.length;Be++)pi(le,{id:_e,geometry:j.geometry.geometries[Be],properties:j.properties},V,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Be=0;Be<de.length;Be++){var st=[];Ai(de[Be],st,Ae,!0),Se.push(st)}}le.push(er(_e,ye,Se,j.properties))}}function xl(le,j){j.push(Nc(le[0])),j.push(Ao(le[1])),j.push(0)}function jr(le,j,V,ie){for(var de,ye,Ae=0,Se=0;Se<le.length;Se++){var _e=Nc(le[Se][0]),Be=Ao(le[Se][1]);j.push(_e),j.push(Be),j.push(0),Se>0&&(Ae+=ie?(de*Be-_e*ye)/2:Math.sqrt(Math.pow(_e-de,2)+Math.pow(Be-ye,2))),de=_e,ye=Be}var st=j.length-3;j[2]=1,Ps(j,0,st,V),j[st+2]=1,j.size=Math.abs(Ae),j.start=0,j.end=j.size}function Ai(le,j,V,ie){for(var de=0;de<le.length;de++){var ye=[];jr(le[de],ye,V,ie),j.push(ye)}}function Nc(le){return le/360+.5}function Ao(le){var j=Math.sin(le*Math.PI/180),V=.5-.25*Math.log((1+j)/(1-j))/Math.PI;return V<0?0:V>1?1:V}function mi(le,j,V,ie,de,ye,Ae,Se){if(ie/=j,ye>=(V/=j)&&Ae<ie)return le;if(Ae<V||ye>=ie)return null;for(var _e=[],Be=0;Be<le.length;Be++){var st=le[Be],lt=st.geometry,nt=st.type,Nt=de===0?st.minX:st.minY,Gt=de===0?st.maxX:st.maxY;if(Nt>=V&&Gt<ie)_e.push(st);else if(!(Gt<V||Nt>=ie)){var jt=[];if(nt==="Point"||nt==="MultiPoint")bl(lt,jt,V,ie,de);else if(nt==="LineString")ha(lt,jt,V,ie,de,!1,Se.lineMetrics);else if(nt==="MultiLineString")os(lt,jt,V,ie,de,!1);else if(nt==="Polygon")os(lt,jt,V,ie,de,!0);else if(nt==="MultiPolygon")for(var Zt=0;Zt<lt.length;Zt++){var tr=[];os(lt[Zt],tr,V,ie,de,!0),tr.length&&jt.push(tr)}if(jt.length){if(Se.lineMetrics&&nt==="LineString"){for(Zt=0;Zt<jt.length;Zt++)_e.push(er(st.id,nt,jt[Zt],st.tags));continue}nt!=="LineString"&&nt!=="MultiLineString"||(jt.length===1?(nt="LineString",jt=jt[0]):nt="MultiLineString"),nt!=="Point"&&nt!=="MultiPoint"||(nt=jt.length===3?"Point":"MultiPoint"),_e.push(er(st.id,nt,jt,st.tags))}}}return _e.length?_e:null}function bl(le,j,V,ie,de){for(var ye=0;ye<le.length;ye+=3){var Ae=le[ye+de];Ae>=V&&Ae<=ie&&(j.push(le[ye]),j.push(le[ye+1]),j.push(le[ye+2]))}}function ha(le,j,V,ie,de,ye,Ae){for(var Se,_e,Be=wl(le),st=de===0?jc:Uc,lt=le.start,nt=0;nt<le.length-3;nt+=3){var Nt=le[nt],Gt=le[nt+1],jt=le[nt+2],Zt=le[nt+3],tr=le[nt+4],Ur=de===0?Nt:Gt,tn=de===0?Zt:tr,Nn=!1;Ae&&(Se=Math.sqrt(Math.pow(Nt-Zt,2)+Math.pow(Gt-tr,2))),Ur<V?tn>V&&(_e=st(Be,Nt,Gt,Zt,tr,V),Ae&&(Be.start=lt+Se*_e)):Ur>ie?tn<ie&&(_e=st(Be,Nt,Gt,Zt,tr,ie),Ae&&(Be.start=lt+Se*_e)):da(Be,Nt,Gt,jt),tn<V&&Ur>=V&&(_e=st(Be,Nt,Gt,Zt,tr,V),Nn=!0),tn>ie&&Ur<=ie&&(_e=st(Be,Nt,Gt,Zt,tr,ie),Nn=!0),!ye&&Nn&&(Ae&&(Be.end=lt+Se*_e),j.push(Be),Be=wl(le)),Ae&&(lt+=Se)}var _n=le.length-3;Nt=le[_n],Gt=le[_n+1],jt=le[_n+2],(Ur=de===0?Nt:Gt)>=V&&Ur<=ie&&da(Be,Nt,Gt,jt),_n=Be.length-3,ye&&_n>=3&&(Be[_n]!==Be[0]||Be[_n+1]!==Be[1])&&da(Be,Be[0],Be[1],Be[2]),Be.length&&j.push(Be)}function wl(le){var j=[];return j.size=le.size,j.start=le.start,j.end=le.end,j}function os(le,j,V,ie,de,ye){for(var Ae=0;Ae<le.length;Ae++)ha(le[Ae],j,V,ie,de,ye,!1)}function da(le,j,V,ie){le.push(j),le.push(V),le.push(ie)}function jc(le,j,V,ie,de,ye){var Ae=(ye-j)/(ie-j);return le.push(ye),le.push(V+(de-V)*Ae),le.push(1),Ae}function Uc(le,j,V,ie,de,ye){var Ae=(ye-V)/(de-V);return le.push(j+(ie-j)*Ae),le.push(ye),le.push(1),Ae}function Ci(le,j){for(var V=[],ie=0;ie<le.length;ie++){var de,ye=le[ie],Ae=ye.type;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")de=ss(ye.geometry,j);else if(Ae==="MultiLineString"||Ae==="Polygon"){de=[];for(var Se=0;Se<ye.geometry.length;Se++)de.push(ss(ye.geometry[Se],j))}else if(Ae==="MultiPolygon")for(de=[],Se=0;Se<ye.geometry.length;Se++){for(var _e=[],Be=0;Be<ye.geometry[Se].length;Be++)_e.push(ss(ye.geometry[Se][Be],j));de.push(_e)}V.push(er(ye.id,Ae,de,ye.tags))}return V}function ss(le,j){var V=[];V.size=le.size,le.start!==void 0&&(V.start=le.start,V.end=le.end);for(var ie=0;ie<le.length;ie+=3)V.push(le[ie]+j,le[ie+1],le[ie+2]);return V}function El(le,j){if(le.transformed)return le;var V,ie,de,ye=1<<le.z,Ae=le.x,Se=le.y;for(V=0;V<le.features.length;V++){var _e=le.features[V],Be=_e.geometry,st=_e.type;if(_e.geometry=[],st===1)for(ie=0;ie<Be.length;ie+=2)_e.geometry.push(Is(Be[ie],Be[ie+1],j,ye,Ae,Se));else for(ie=0;ie<Be.length;ie++){var lt=[];for(de=0;de<Be[ie].length;de+=2)lt.push(Is(Be[ie][de],Be[ie][de+1],j,ye,Ae,Se));_e.geometry.push(lt)}}return le.transformed=!0,le}function Is(le,j,V,ie,de,ye){return[Math.round(V*(le*ie-de)),Math.round(V*(j*ie-ye))]}function fa(le,j,V,ie,de){for(var ye=j===de.maxZoom?0:de.tolerance/((1<<j)*de.extent),Ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:V,y:ie,z:j,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Se=0;Se<le.length;Se++){Ae.numFeatures++,Tl(Ae,le[Se],ye,de);var _e=le[Se].minX,Be=le[Se].minY,st=le[Se].maxX,lt=le[Se].maxY;_e<Ae.minX&&(Ae.minX=_e),Be<Ae.minY&&(Ae.minY=Be),st>Ae.maxX&&(Ae.maxX=st),lt>Ae.maxY&&(Ae.maxY=lt)}return Ae}function Tl(le,j,V,ie){var de=j.geometry,ye=j.type,Ae=[];if(ye==="Point"||ye==="MultiPoint")for(var Se=0;Se<de.length;Se+=3)Ae.push(de[Se]),Ae.push(de[Se+1]),le.numPoints++,le.numSimplified++;else if(ye==="LineString")ks(Ae,de,le,V,!1,!1);else if(ye==="MultiLineString"||ye==="Polygon")for(Se=0;Se<de.length;Se++)ks(Ae,de[Se],le,V,ye==="Polygon",Se===0);else if(ye==="MultiPolygon")for(var _e=0;_e<de.length;_e++){var Be=de[_e];for(Se=0;Se<Be.length;Se++)ks(Ae,Be[Se],le,V,!0,Se===0)}if(Ae.length){var st=j.tags||null;if(ye==="LineString"&&ie.lineMetrics){for(var lt in st={},j.tags)st[lt]=j.tags[lt];st.mapbox_clip_start=de.start/de.size,st.mapbox_clip_end=de.end/de.size}var nt={geometry:Ae,type:ye==="Polygon"||ye==="MultiPolygon"?3:ye==="LineString"||ye==="MultiLineString"?2:1,tags:st};j.id!==null&&(nt.id=j.id),le.features.push(nt)}}function ks(le,j,V,ie,de,ye){var Ae=ie*ie;if(ie>0&&j.size<(de?Ae:ie))V.numPoints+=j.length/3;else{for(var Se=[],_e=0;_e<j.length;_e+=3)(ie===0||j[_e+2]>Ae)&&(V.numSimplified++,Se.push(j[_e]),Se.push(j[_e+1])),V.numPoints++;de&&function(Be,st){for(var lt=0,nt=0,Nt=Be.length,Gt=Nt-2;nt<Nt;Gt=nt,nt+=2)lt+=(Be[nt]-Be[Gt])*(Be[nt+1]+Be[Gt+1]);if(lt>0===st)for(nt=0,Nt=Be.length;nt<Nt/2;nt+=2){var jt=Be[nt],Zt=Be[nt+1];Be[nt]=Be[Nt-2-nt],Be[nt+1]=Be[Nt-1-nt],Be[Nt-2-nt]=jt,Be[Nt-1-nt]=Zt}}(Se,ye),le.push(Se)}}function as(le,j){var V=(j=this.options=function(de,ye){for(var Ae in ye)de[Ae]=ye[Ae];return de}(Object.create(this.options),j)).debug;if(V&&console.time("preprocess data"),j.maxZoom<0||j.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(j.promoteId&&j.generateId)throw new Error("promoteId and generateId cannot be used together.");var ie=function(de,ye){var Ae=[];if(de.type==="FeatureCollection")for(var Se=0;Se<de.features.length;Se++)pi(Ae,de.features[Se],ye,Se);else pi(Ae,de.type==="Feature"?de:{geometry:de},ye);return Ae}(le,j);this.tiles={},this.tileCoords=[],V&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",j.indexMaxZoom,j.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(de,ye){var Ae=ye.buffer/ye.extent,Se=de,_e=mi(de,1,-1-Ae,Ae,0,-1,2,ye),Be=mi(de,1,1-Ae,2+Ae,0,-1,2,ye);return(_e||Be)&&(Se=mi(de,1,-Ae,1+Ae,0,-1,2,ye)||[],_e&&(Se=Ci(_e,1).concat(Se)),Be&&(Se=Se.concat(Ci(Be,-1)))),Se}(ie,j),ie.length&&this.splitTile(ie,0,0,0),V&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ls(le,j,V){return 32*((1<<le)*V+j)+le}function Os(le,j){const V=le.tileID.canonical;if(!this._geoJSONIndex)return j(null,null);const ie=this._geoJSONIndex.getTile(V.z,V.x,V.y);if(!ie)return j(null,null);const de=new class{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=Ae.length,this._features=Ae}feature(Ae){return new class{constructor(Se){this._feature=Se,this.extent=s.EXTENT,this.type=Se.type,this.properties=Se.tags,"id"in Se&&!isNaN(Se.id)&&(this.id=parseInt(Se.id,10))}loadGeometry(){if(this._feature.type===1){const Se=[];for(const _e of this._feature.geometry)Se.push([new s.Point(_e[0],_e[1])]);return Se}{const Se=[];for(const _e of this._feature.geometry){const Be=[];for(const st of _e)Be.push(new s.Point(st[0],st[1]));Se.push(Be)}return Se}}toGeoJSON(Se,_e,Be){return se.call(this,Se,_e,Be)}}(this._features[Ae])}}(ie.features);let ye=Jt(de);ye.byteOffset===0&&ye.byteLength===ye.buffer.byteLength||(ye=new Uint8Array(ye)),j(null,{vectorTile:de,rawData:ye.buffer})}as.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},as.prototype.splitTile=function(le,j,V,ie,de,ye,Ae){for(var Se=[le,j,V,ie],_e=this.options,Be=_e.debug;Se.length;){ie=Se.pop(),V=Se.pop(),j=Se.pop(),le=Se.pop();var st=1<<j,lt=Ls(j,V,ie),nt=this.tiles[lt];if(!nt&&(Be>1&&console.time("creation"),nt=this.tiles[lt]=fa(le,j,V,ie,_e),this.tileCoords.push({z:j,x:V,y:ie}),Be)){Be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",j,V,ie,nt.numFeatures,nt.numPoints,nt.numSimplified),console.timeEnd("creation"));var Nt="z"+j;this.stats[Nt]=(this.stats[Nt]||0)+1,this.total++}if(nt.source=le,de){if(j===_e.maxZoom||j===de)continue;var Gt=1<<de-j;if(V!==Math.floor(ye/Gt)||ie!==Math.floor(Ae/Gt))continue}else if(j===_e.indexMaxZoom||nt.numPoints<=_e.indexMaxPoints)continue;if(nt.source=null,le.length!==0){Be>1&&console.time("clipping");var jt,Zt,tr,Ur,tn,Nn,_n=.5*_e.buffer/_e.extent,so=.5-_n,En=.5+_n,qn=1+_n;jt=Zt=tr=Ur=null,tn=mi(le,st,V-_n,V+En,0,nt.minX,nt.maxX,_e),Nn=mi(le,st,V+so,V+qn,0,nt.minX,nt.maxX,_e),le=null,tn&&(jt=mi(tn,st,ie-_n,ie+En,1,nt.minY,nt.maxY,_e),Zt=mi(tn,st,ie+so,ie+qn,1,nt.minY,nt.maxY,_e),tn=null),Nn&&(tr=mi(Nn,st,ie-_n,ie+En,1,nt.minY,nt.maxY,_e),Ur=mi(Nn,st,ie+so,ie+qn,1,nt.minY,nt.maxY,_e),Nn=null),Be>1&&console.timeEnd("clipping"),Se.push(jt||[],j+1,2*V,2*ie),Se.push(Zt||[],j+1,2*V,2*ie+1),Se.push(tr||[],j+1,2*V+1,2*ie),Se.push(Ur||[],j+1,2*V+1,2*ie+1)}}},as.prototype.getTile=function(le,j,V){var ie=this.options,de=ie.extent,ye=ie.debug;if(le<0||le>24)return null;var Ae=1<<le,Se=Ls(le,j=(j%Ae+Ae)%Ae,V);if(this.tiles[Se])return El(this.tiles[Se],de);ye>1&&console.log("drilling down to z%d-%d-%d",le,j,V);for(var _e,Be=le,st=j,lt=V;!_e&&Be>0;)Be--,st=Math.floor(st/2),lt=Math.floor(lt/2),_e=this.tiles[Ls(Be,st,lt)];return _e&&_e.source?(ye>1&&console.log("found parent tile z%d-%d-%d",Be,st,lt),ye>1&&console.time("drilling down"),this.splitTile(_e.source,Be,st,lt,le,j,V),ye>1&&console.timeEnd("drilling down"),this.tiles[Se]?El(this.tiles[Se],de):null):null};class pa extends s.VectorTileWorkerSource{constructor(j,V,ie,de,ye){super(j,V,ie,de,Os),ye&&(this.loadGeoJSON=ye)}loadData(j,V){const ie=j&&j.request,de=ie&&ie.collectResourceTiming;this.loadGeoJSON(j,(ye,Ae)=>{if(ye||!Ae)return V(ye);if(typeof Ae!="object")return V(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));{ae(Ae,!0);try{if(j.filter){const _e=s.createExpression(j.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(st=>`${st.key}: ${st.message}`).join(", "));Ae={type:"FeatureCollection",features:Ae.features.filter(st=>_e.value.evaluate({zoom:0},st))}}this._geoJSONIndex=j.cluster?new nr(function({superclusterOptions:_e,clusterProperties:Be}){if(!Be||!_e)return _e;const st={},lt={},nt={accumulated:null,zoom:0},Nt={properties:null},Gt=Object.keys(Be);for(const jt of Gt){const[Zt,tr]=Be[jt],Ur=s.createExpression(tr),tn=s.createExpression(typeof Zt=="string"?[Zt,["accumulated"],["get",jt]]:Zt);st[jt]=Ur.value,lt[jt]=tn.value}return _e.map=jt=>{Nt.properties=jt;const Zt={};for(const tr of Gt)Zt[tr]=st[tr].evaluate(nt,Nt);return Zt},_e.reduce=(jt,Zt)=>{Nt.properties=Zt;for(const tr of Gt)nt.accumulated=jt[tr],jt[tr]=lt[tr].evaluate(nt,Nt)},_e}(j)).load(Ae.features):function(_e,Be){return new as(_e,Be)}(Ae,j.geojsonVtOptions)}catch(_e){return V(_e)}this.loaded={};const Se={};if(de){const _e=s.getPerformanceMeasurement(ie);_e&&(Se.resourceTiming={},Se.resourceTiming[j.source]=JSON.parse(JSON.stringify(_e)))}V(null,Se)}})}reloadTile(j,V){const ie=this.loaded;return ie&&ie[j.uid]?super.reloadTile(j,V):this.loadTile(j,V)}loadGeoJSON(j,V){if(j.request)s.getJSON(j.request,V);else{if(typeof j.data!="string")return V(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`));try{return V(null,JSON.parse(j.data))}catch{return V(new Error(`Input data given to '${j.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(j,V){try{V(null,this._geoJSONIndex.getClusterExpansionZoom(j.clusterId))}catch(ie){V(ie)}}getClusterChildren(j,V){try{V(null,this._geoJSONIndex.getChildren(j.clusterId))}catch(ie){V(ie)}}getClusterLeaves(j,V){try{V(null,this._geoJSONIndex.getLeaves(j.clusterId,j.limit,j.offset))}catch(ie){V(ie)}}}class Vc{constructor(j){this.self=j,this.actor=new s.Actor(j,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:pa},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(V,ie)=>{if(this.workerSourceTypes[V])throw new Error(`Worker source with name "${V}" already registered.`);this.workerSourceTypes[V]=ie},this.self.registerRTLTextPlugin=V=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=V.applyArabicShaping,s.plugin.processBidirectionalText=V.processBidirectionalText,s.plugin.processStyledBidirectionalText=V.processStyledBidirectionalText}}clearCaches(j,V,ie){delete this.layerIndexes[j],delete this.availableImages[j],delete this.workerSources[j],delete this.demWorkerSources[j],ie()}checkIfReady(j,V,ie){ie()}setReferrer(j,V){this.referrer=V}spriteLoaded(j,V){this.isSpriteLoaded[j]=V;for(const ie in this.workerSources[j]){const de=this.workerSources[j][ie];for(const ye in de)de[ye]instanceof s.VectorTileWorkerSource&&(de[ye].isSpriteLoaded=V,de[ye].fire(new s.Event("isSpriteLoaded")))}}setImages(j,V,ie){this.availableImages[j]=V;for(const de in this.workerSources[j]){const ye=this.workerSources[j][de];for(const Ae in ye)ye[Ae].availableImages=V}ie()}enableTerrain(j,V,ie){this.terrain=V,ie()}setProjection(j,V){this.projections[j]=s.getProjection(V)}setLayers(j,V,ie){this.getLayerIndex(j).replace(V),ie()}updateLayers(j,V,ie){this.getLayerIndex(j).update(V.layers,V.removedIds),ie()}loadTile(j,V,ie){const de=this.enableTerrain?s.extend({enableTerrain:this.terrain},V):V;de.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,V.type,V.source).loadTile(de,ie)}loadDEMTile(j,V,ie){const de=this.enableTerrain?s.extend({buildQuadTree:this.terrain},V):V;this.getDEMWorkerSource(j,V.source).loadTile(de,ie)}reloadTile(j,V,ie){const de=this.enableTerrain?s.extend({enableTerrain:this.terrain},V):V;de.projection=this.projections[j]||this.defaultProjection,this.getWorkerSource(j,V.type,V.source).reloadTile(de,ie)}abortTile(j,V,ie){this.getWorkerSource(j,V.type,V.source).abortTile(V,ie)}removeTile(j,V,ie){this.getWorkerSource(j,V.type,V.source).removeTile(V,ie)}removeSource(j,V,ie){if(!this.workerSources[j]||!this.workerSources[j][V.type]||!this.workerSources[j][V.type][V.source])return;const de=this.workerSources[j][V.type][V.source];delete this.workerSources[j][V.type][V.source],de.removeSource!==void 0?de.removeSource(V,ie):ie()}loadWorkerSource(j,V,ie){try{this.self.importScripts(V.url),ie()}catch(de){ie(de.toString())}}syncRTLPluginState(j,V,ie){try{s.plugin.setState(V);const de=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&de!=null){this.self.importScripts(de);const ye=s.plugin.isParsed();ie(ye?void 0:new Error(`RTL Text Plugin failed to import scripts from ${de}`),ye)}}catch(de){ie(de.toString())}}getAvailableImages(j){let V=this.availableImages[j];return V||(V=[]),V}getLayerIndex(j){let V=this.layerIndexes[j];return V||(V=this.layerIndexes[j]=new U),V}getWorkerSource(j,V,ie){if(this.workerSources[j]||(this.workerSources[j]={}),this.workerSources[j][V]||(this.workerSources[j][V]={}),!this.workerSources[j][V][ie]){const de={send:(ye,Ae,Se,_e,Be,st)=>{this.actor.send(ye,Ae,Se,j,Be,st)},scheduler:this.actor.scheduler};this.workerSources[j][V][ie]=new this.workerSourceTypes[V](de,this.getLayerIndex(j),this.getAvailableImages(j),this.isSpriteLoaded[j])}return this.workerSources[j][V][ie]}getDEMWorkerSource(j,V){return this.demWorkerSources[j]||(this.demWorkerSources[j]={}),this.demWorkerSources[j][V]||(this.demWorkerSources[j][V]=new N),this.demWorkerSources[j][V]}enforceCacheSizeLimit(j,V){s.enforceCacheSizeLimit(V)}getWorkerPerformanceMetrics(j,V,ie){ie(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Vc(self)),Vc}),x(["./shared"],function(s){function A(f,o){if(Array.isArray(f)){if(!Array.isArray(o)||f.length!==o.length)return!1;for(let c=0;c<f.length;c++)if(!A(f[c],o[c]))return!1;return!0}if(typeof f=="object"&&f!==null&&o!==null){if(typeof o!="object"||Object.keys(f).length!==Object.keys(o).length)return!1;for(const c in f)if(!A(f[c],o[c]))return!1;return!0}return f===o}var R=U;function U(f){return!function(o){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,_,v=new Blob([""],{type:"text/javascript"}),T=URL.createObjectURL(v);try{_=new Worker(T),m=!0}catch{m=!1}return _&&_.terminate(),URL.revokeObjectURL(T),m}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var m=document.createElement("canvas");m.width=m.height=1;var _=m.getContext("2d");if(!_)return!1;var v=_.getImageData(0,0,1,1);return v&&v.width===m.width}()?(N[c=o&&o.failIfMajorPerformanceCaveat]===void 0&&(N[c]=function(m){var _,v=function(T){var S=document.createElement("canvas"),M=Object.create(U.webGLContextAttributes);return M.failIfMajorPerformanceCaveat=T,S.getContext("webgl",M)||S.getContext("experimental-webgl",M)}(m);if(!v)return!1;try{_=v.createShader(v.VERTEX_SHADER)}catch{return!1}return!(!_||v.isContextLost())&&(v.shaderSource(_,"void main() {}"),v.compileShader(_),v.getShaderParameter(_,v.COMPILE_STATUS)===!0)}(c)),N[c]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var c}(f)}var N={};function q(f,o,c){const m=s.window.document.createElement(f);return o!==void 0&&(m.className=o),c&&c.appendChild(m),m}function fe(f,o,c){const m=s.window.document.createElementNS("http://www.w3.org/2000/svg",f);for(const _ of Object.keys(o))m.setAttributeNS(null,_,o[_]);return c&&c.appendChild(m),m}U.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const ae=s.window.document&&s.window.document.documentElement.style,se=ae&&ae.userSelect!==void 0?"userSelect":"WebkitUserSelect";let ve;function J(){ae&&se&&(ve=ae[se],ae[se]="none")}function Z(){ae&&se&&(ae[se]=ve)}function te(f){f.preventDefault(),f.stopPropagation(),s.window.removeEventListener("click",te,!0)}function Ee(){s.window.addEventListener("click",te,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",te,!0)},0)}function ke(f,o){const c=f.getBoundingClientRect();return Ve(f,c,o)}function Fe(f,o){const c=f.getBoundingClientRect(),m=[];for(let _=0;_<o.length;_++)m.push(Ve(f,c,o[_]));return m}function We(f){return s.window.InstallTrigger!==void 0&&f.button===2&&f.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:f.button}function Ve(f,o,c){const m=f.offsetWidth===o.width?1:f.offsetWidth/o.width;return new s.Point((c.clientX-o.left)*m,(c.clientY-o.top)*m)}function Te(f,o){var c=o[0],m=o[1],_=o[2],v=o[3],T=c*v-_*m;return T?(f[0]=v*(T=1/T),f[1]=-m*T,f[2]=-_*T,f[3]=c*T,f):null}function dt(f){const{userImage:o}=f;return!!(o&&o.render&&o.render())&&(f.data.replace(new Uint8Array(o.data.buffer)),!0)}class zt extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:c,callback:m}of this.requestors)this._notify(c,m);this.requestors=[]}}hasImage(o){return!!this.getImage(o)}getImage(o){return this.images[o]}addImage(o,c){this._validate(o,c)&&(this.images[o]=c)}_validate(o,c){let m=!0;return this._validateStretch(c.stretchX,c.data&&c.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${o}" has invalid "stretchX" value`))),m=!1),this._validateStretch(c.stretchY,c.data&&c.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${o}" has invalid "stretchY" value`))),m=!1),this._validateContent(c.content,c)||(this.fire(new s.ErrorEvent(new Error(`Image "${o}" has invalid "content" value`))),m=!1),m}_validateStretch(o,c){if(!o)return!0;let m=0;for(const _ of o){if(_[0]<m||_[1]<_[0]||c<_[1])return!1;m=_[1]}return!0}_validateContent(o,c){return!(o&&(o.length!==4||o[0]<0||c.data.width<o[0]||o[1]<0||c.data.height<o[1]||o[2]<0||c.data.width<o[2]||o[3]<0||c.data.height<o[3]||o[2]<o[0]||o[3]<o[1]))}updateImage(o,c){c.version=this.images[o].version+1,this.images[o]=c,this.updatedImages[o]=!0}removeImage(o){const c=this.images[o];delete this.images[o],delete this.patterns[o],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o,c){let m=!0;if(!this.isLoaded())for(const _ of o)this.images[_]||(m=!1);this.isLoaded()||m?this._notify(o,c):this.requestors.push({ids:o,callback:c})}_notify(o,c){const m={};for(const _ of o){this.images[_]||this.fire(new s.Event("styleimagemissing",{id:_}));const v=this.images[_];v?m[_]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:s.warnOnce(`Image "${_}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}c(null,m)}getPixelSize(){const{width:o,height:c}=this.atlasImage;return{width:o,height:c}}getPattern(o){const c=this.patterns[o],m=this.getImage(o);if(!m)return null;if(c&&c.position.version===m.version)return c.position;if(c)c.position.version=m.version;else{const _={w:m.data.width+2,h:m.data.height+2,x:0,y:0},v=new s.ImagePosition(_,m);this.patterns[o]={bin:_,position:v}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const c=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(o,this.atlasImage,c.RGBA),this.atlasTexture&&this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const v in this.patterns)o.push(this.patterns[v].bin);const{w:c,h:m}=s.potpack(o),_=this.atlasImage;_.resize({width:c||1,height:m||1});for(const v in this.patterns){const{bin:T}=this.patterns[v],S=T.x+1,M=T.y+1,L=this.images[v].data,k=L.width,D=L.height;s.RGBAImage.copy(L,_,{x:0,y:0},{x:S,y:M},{width:k,height:D}),s.RGBAImage.copy(L,_,{x:0,y:D-1},{x:S,y:M-1},{width:k,height:1}),s.RGBAImage.copy(L,_,{x:0,y:0},{x:S,y:M+D},{width:k,height:1}),s.RGBAImage.copy(L,_,{x:k-1,y:0},{x:S-1,y:M},{width:1,height:D}),s.RGBAImage.copy(L,_,{x:0,y:0},{x:S+k,y:M},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const c of o){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const m=this.images[c];dt(m)&&this.updateImage(c,m)}}}const at=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(f,o){return function([c,m,_]){const v=s.degToRad(m+90),T=s.degToRad(_);return{x:c*Math.cos(v)*Math.sin(T),y:c*Math.sin(v)*Math.sin(T),z:c*Math.cos(T),azimuthal:m,polar:_}}(f.expression.evaluate(o))}interpolate(f,o,c){return{x:s.number(f.x,o.x,c),y:s.number(f.y,o.y,c),z:s.number(f.z,o.z,c),azimuthal:s.number(f.azimuthal,o.azimuthal,c),polar:s.number(f.polar,o.polar,c)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class vt extends s.Evented{constructor(o){super(),this._transitionable=new s.Transitionable(at),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,c={}){if(!this._validate(s.validateLight,o,c))for(const m in o){const _=o[m];s.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),_):this._transitionable.setValue(m,_)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,m){return(!m||m.validate!==!1)&&s.emitValidationErrors(this,o.call(s.validateStyle,s.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Ot=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let St=class extends s.Evented{constructor(f,o){super(),this._transitionable=new s.Transitionable(Ot),this.set(f),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=o}get(){return this._transitionable.serialize()}set(f){for(const o in f){const c=f[o];s.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-11),c):this._transitionable.setValue(o,c)}}updateTransitions(f){this._transitioning=this._transitionable.transitioned(f,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(f){this.properties=this._transitioning.possiblyEvaluate(f)}};function Jt(f,o,c,m){const _=s.smoothstep(45,65,c),[v,T]=Ze(f,m),S=s.length(o);let M=1-Math.min(1,Math.exp((S-v)/(T-v)*-6));return M*=M*M,M=Math.min(1,1.00747*M),M*_*f.alpha}function Ze(f,o){const c=.5/Math.tan(.5*o);return[f.range[0]+c,f.range[1]+c]}const Oe=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Et extends s.Evented{constructor(o,c){super(),this._transitionable=new s.Transitionable(Oe),this.set(o),this._transitioning=this._transitionable.untransitioned(),this._transform=c}get state(){const o=this._transform,c=o.projection.name==="globe",m=s.globeToMercatorTransition(o.zoom),_=this.properties.get("range"),v=[.5,3];return{range:c?[s.number(v[0],_[0],m),s.number(v[1],_[1],m)]:_,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(o,c={}){if(!this._validate(s.validateFog,o,c)){for(const m of Object.keys(s.spec.fog))o&&o[m]===void 0&&(o[m]=s.spec.fog[m].default);for(const m in o){const _=o[m];s.endsWith(m,"-transition")?this._transitionable.setTransition(m.slice(0,-11),_):this._transitionable.setValue(m,_)}}}getOpacity(o){if(!this._transform.projection.supportsFog)return 0;const c=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,o))*c.a}getOpacityAtLatLng(o,c){return this._transform.projection.supportsFog?function(m,_,v){const T=s.MercatorCoordinate.fromLngLat(_),S=v.elevation?v.elevation.getAtPointOrZero(T):0,M=[T.x,T.y,S];return s.transformMat4(M,M,v.mercatorFogMatrix),Jt(m,M,v.pitch,v._fov)}(this.state,o,c):0}getFovAdjustedRange(o){return this._transform.projection.supportsFog?Ze(this.state,o):[0,1]}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,c,m){return(!m||m.validate!==!1)&&s.emitValidationErrors(this,o.call(s.validateStyle,s.extend({value:c,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class _t{constructor(o,c){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const m=this.workerPool.acquire(this.id);for(let _=0;_<m.length;_++){const v=new _t.Actor(m[_],c,this.id);v.name=`Worker ${_}`,this.actors.push(v)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,c,m){s.asyncAll(this.actors,(_,v)=>{_.send(o,c,v)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}function It(f,o,c){return o*(s.EXTENT/(f.tileSize*Math.pow(2,c-f.tileID.overscaledZ)))}_t.Actor=s.Actor;class qt{constructor(o,c,m,_){this.screenBounds=o,this.cameraPoint=c,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=m,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,_)}static createFromScreenPoints(o,c){let m,_;if(o instanceof s.Point||typeof o[0]=="number"){const v=s.Point.convert(o);m=[v],_=c.isPointAboveHorizon(v)}else{const v=s.Point.convert(o[0]),T=s.Point.convert(o[1]);m=[v,T],_=s.polygonizeBounds(v,T).every(S=>c.isPointAboveHorizon(S))}return new qt(m,c.getCameraPoint(),_,c)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(o){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],o)}bufferedCameraGeometry(o){const c=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],_=s.polygonizeBounds(c,m,0,!1);return this.cameraPoint.y>m.y&&(this.cameraPoint.x>c.x&&this.cameraPoint.x<m.x?_.splice(3,0,this.cameraPoint):this.cameraPoint.x>=m.x?_[2]=this.cameraPoint:this.cameraPoint.x<=c.x&&(_[3]=this.cameraPoint)),s.bufferConvexPolygon(_,o)}bufferedCameraGeometryGlobe(o){const c=this.screenBounds[0],m=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],_=s.polygonizeBounds(c,m,o),v=this.cameraPoint.clone();switch(3*((v.y>c.y)+(v.y>m.y))+((v.x>c.x)+(v.x>m.x))){case 0:_[0]=v,_[4]=v.clone();break;case 1:_.splice(1,0,v);break;case 2:_[1]=v;break;case 3:_.splice(4,0,v);break;case 5:_.splice(2,0,v);break;case 6:_[3]=v;break;case 7:_.splice(3,0,v);break;case 8:_[2]=v}return _}containsTile(o,c,m,_=0){const v=o.queryPadding/c._pixelsPerMercatorPixel+1,T=m?this._bufferedCameraMercator(v,c):this._bufferedScreenMercator(v,c);let S=o.tileID.wrap+(T.unwrapped?_:0);const M=T.polygon.map(Y=>s.getTilePoint(o.tileTransform,Y,S));if(!s.polygonIntersectsBox(M,0,0,s.EXTENT,s.EXTENT))return;S=o.tileID.wrap+(this.screenGeometryMercator.unwrapped?_:0);const L=this.screenGeometryMercator.polygon.map(Y=>s.getTileVec3(o.tileTransform,Y,S)),k=L.map(Y=>new s.Point(Y[0],Y[1])),D=c.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),$=s.getTileVec3(o.tileTransform,D,S),W=L.map(Y=>{const B=s.sub(Y,Y,$);return s.normalize(B,B),new s.Ray($,B)}),K=It(o,1,c.zoom)*c._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:k,tilespaceRays:W,bufferedTilespaceGeometry:M,bufferedTilespaceBounds:(X=s.getBounds(M),X.min.x=s.clamp(X.min.x,0,s.EXTENT),X.min.y=s.clamp(X.min.y,0,s.EXTENT),X.max.x=s.clamp(X.max.x,0,s.EXTENT),X.max.y=s.clamp(X.max.y,0,s.EXTENT),X),tile:o,tileID:o.tileID,pixelToTileUnitsFactor:K};var X}_bufferedScreenMercator(o,c){const m=Si(o);if(this._screenRaycastCache[m])return this._screenRaycastCache[m];{let _;return _=c.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(o),c):{polygon:this.bufferedScreenGeometry(o).map(v=>c.pointCoordinate3D(v)),unwrapped:!0},this._screenRaycastCache[m]=_,_}}_bufferedCameraMercator(o,c){const m=Si(o);if(this._cameraRaycastCache[m])return this._cameraRaycastCache[m];{let _;return _=c.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(o),c):{polygon:this.bufferedCameraGeometry(o).map(v=>c.pointCoordinate3D(v)),unwrapped:!0},this._cameraRaycastCache[m]=_,_}}_projectAndResample(o,c){const m=function(v,T){const S=s.multiply([],T.pixelMatrix,T.globeMatrix),M=[0,-s.GLOBE_RADIUS,0,1],L=[0,s.GLOBE_RADIUS,0,1],k=[0,0,0,1];s.transformMat4$1(M,M,S),s.transformMat4$1(L,L,S),s.transformMat4$1(k,k,S);const D=new s.Point(M[0]/M[3],M[1]/M[3]),$=new s.Point(L[0]/L[3],L[1]/L[3]),W=s.polygonContainsPoint(v,D)&&M[3]<k[3],K=s.polygonContainsPoint(v,$)&&L[3]<k[3];if(!W&&!K)return null;const X=function(me,be,xe){for(let Ie=1;Ie<me.length;Ie++){const Je=Lr(be.pointCoordinate3D(me[Ie-1]).x),Ce=Lr(be.pointCoordinate3D(me[Ie]).x);if(xe<0){if(Je<Ce)return{idx:Ie,t:-Je/(Ce-1-Je)}}else if(Ce<Je)return{idx:Ie,t:(1-Je)/(Ce+1-Je)}}return null}(v,T,W?-1:1);if(!X)return null;const{idx:Y,t:B}=X;let H=Y>1?nr(v.slice(0,Y),T):[],re=Y<v.length?nr(v.slice(Y),T):[];H=H.map(me=>new s.Point(Lr(me.x),me.y)),re=re.map(me=>new s.Point(Lr(me.x),me.y));const ne=[...H];ne.length===0&&ne.push(re[re.length-1]);const pe=s.number(ne[ne.length-1].y,(re.length===0?H[0]:re[0]).y,B);let ge;return ge=W?[new s.Point(0,pe),new s.Point(0,0),new s.Point(1,0),new s.Point(1,pe)]:[new s.Point(1,pe),new s.Point(1,1),new s.Point(0,1),new s.Point(0,pe)],ne.push(...ge),re.length===0?ne.push(H[0]):ne.push(...re),{polygon:ne.map(me=>new s.MercatorCoordinate(me.x,me.y)),unwrapped:!1}}(o,c);if(m)return m;const _=function(v,T){let S=!1,M=-1/0,L=0;for(let D=0;D<v.length-1;D++)v[D].x>M&&(M=v[D].x,L=D);for(let D=0;D<v.length-1;D++){const $=(L+D)%(v.length-1),W=v[$],K=v[$+1];Math.abs(W.x-K.x)>.5&&(W.x<K.x?(W.x+=1,$===0&&(v[v.length-1].x+=1)):(K.x+=1,$+1===v.length-1&&(v[0].x+=1)),S=!0)}const k=s.mercatorXfromLng(T.center.lng);return S&&k<Math.abs(k-1)&&v.forEach(D=>{D.x-=1}),{polygon:v,unwrapped:S}}(nr(o,c).map(v=>new s.Point(Lr(v.x),v.y)),c);return{polygon:_.polygon.map(v=>new s.MercatorCoordinate(v.x,v.y)),unwrapped:_.unwrapped}}}function nr(f,o){return s.resample(f,c=>{const m=o.pointCoordinate3D(c);c.x=m.x,c.y=m.y},1/256)}function Lr(f){return f<0?1+f%1:f%1}function Si(f){return 100*f|0}function wn(f,o,c,m,_){const v=function(T,S){if(T)return _(T);if(S){f.url&&S.tiles&&f.tiles&&delete f.tiles;const M=s.pick(s.extend(S,f),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(M.vectorLayers=S.vector_layers,M.vectorLayerIds=M.vectorLayers.map(L=>L.id)),M.tiles=o.canonicalizeTileset(M,f.url),_(null,M)}};return f.url?s.getJSON(o.transformRequest(o.normalizeSourceURL(f.url,null,c,m),s.ResourceType.Source),v):s.exported.frame(()=>v(null,f))}class Fn{constructor(o,c,m){this.bounds=s.LngLatBounds.convert(this.validateBounds(o)),this.minzoom=c||0,this.maxzoom=m||24}validateBounds(o){return Array.isArray(o)&&o.length===4?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const c=Math.pow(2,o.z),m=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*c),_=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*c),v=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*c),T=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*c);return o.x>=m&&o.x<v&&o.y>=_&&o.y<T}}class Fc{constructor(o,c,m){this.context=o;const _=o.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const c=this.context.gl;this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ps={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ca{constructor(o,c,m,_){this.length=c.length,this.attributes=m,this.itemSize=c.bytesPerElement,this.dynamicDraw=_,this.context=o;const v=o.gl;this.buffer=v.createBuffer(),o.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||c.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,c){for(let m=0;m<this.attributes.length;m++){const _=c.attributes[this.attributes[m].name];_!==void 0&&o.enableVertexAttribArray(_)}}setVertexAttribPointers(o,c,m){for(let _=0;_<this.attributes.length;_++){const v=this.attributes[_],T=c.attributes[v.name];T!==void 0&&o.vertexAttribPointer(T,v.components,o[Ps[v.type]],!1,this.itemSize,v.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class er{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ua extends er{getDefault(){return s.Color.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class pi extends er{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class xl extends er{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class jr extends er{getDefault(){return[!0,!0,!0,!0]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ai extends er{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Nc extends er{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Ao extends er{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const c=this.current;(o.func!==c.func||o.ref!==c.ref||o.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class mi extends er{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class bl extends er{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=o,this.dirty=!1}}class ha extends er{getDefault(){return[0,1]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class wl extends er{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=o,this.dirty=!1}}class os extends er{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class da extends er{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.BLEND):c.disable(c.BLEND),this.current=o,this.dirty=!1}}class jc extends er{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Uc extends er{getDefault(){return s.Color.transparent}set(o){const c=this.current;(o.r!==c.r||o.g!==c.g||o.b!==c.b||o.a!==c.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Ci extends er{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class ss extends er{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;o?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=o,this.dirty=!1}}class El extends er{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Is extends er{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}let fa,Tl=class extends er{getDefault(){return null}set(f){(f!==this.current||this.dirty)&&(this.gl.useProgram(f),this.current=f,this.dirty=!1)}};class ks extends er{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class as extends er{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const c=this.current;(o[0]!==c[0]||o[1]!==c[1]||o[2]!==c[2]||o[3]!==c[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ls extends er{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class Os extends er{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class pa extends er{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class Vc extends er{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class le extends er{getDefault(){return null}set(o){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class j extends er{constructor(o){super(o),this.vao=o.extVertexArrayObject}getDefault(){return null}set(o){this.vao&&(o!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(o),this.current=o,this.dirty=!1)}}class V extends er{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class ie extends er{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class de extends er{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class ye extends er{constructor(o,c){super(o),this.context=o,this.parent=c}getDefault(){return null}}class Ae extends ye{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class Se extends ye{attachment(){return this.gl.DEPTH_ATTACHMENT}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,this.attachment(),c.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class _e extends Se{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Be{constructor(o,c,m,_){this.context=o,this.width=c,this.height=m;const v=this.framebuffer=o.gl.createFramebuffer();this.colorAttachment=new Ae(o,v),_&&(this.depthAttachment=new Se(o,v))}destroy(){const o=this.context.gl,c=this.colorAttachment.get();if(c&&o.deleteTexture(c),this.depthAttachment){const m=this.depthAttachment.get();m&&o.deleteRenderbuffer(m)}o.deleteFramebuffer(this.framebuffer)}}class st{constructor(o,c=!1){if(this.gl=o,this.isWebGL2=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),c){const m=o;this.extVertexArrayObject={createVertexArrayOES:m.createVertexArray.bind(o),deleteVertexArrayOES:m.deleteVertexArray.bind(o),bindVertexArrayOES:m.bindVertexArray.bind(o)}}this.clearColor=new ua(this),this.clearDepth=new pi(this),this.clearStencil=new xl(this),this.colorMask=new jr(this),this.depthMask=new Ai(this),this.stencilMask=new Nc(this),this.stencilFunc=new Ao(this),this.stencilOp=new mi(this),this.stencilTest=new bl(this),this.depthRange=new ha(this),this.depthTest=new wl(this),this.depthFunc=new os(this),this.blend=new da(this),this.blendFunc=new jc(this),this.blendColor=new Uc(this),this.blendEquation=new Ci(this),this.cullFace=new ss(this),this.cullFaceSide=new El(this),this.frontFace=new Is(this),this.program=new Tl(this),this.activeTexture=new ks(this),this.viewport=new as(this),this.bindFramebuffer=new Ls(this),this.bindRenderbuffer=new Os(this),this.bindTexture=new pa(this),this.bindVertexBuffer=new Vc(this),this.bindElementBuffer=new le(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new j(this),this.pixelStoreUnpack=new V(this),this.pixelStoreUnpackPremultiplyAlpha=new ie(this),this.pixelStoreUnpackFlipY=new de(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=o.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=o.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=o.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),c||(this.extTextureHalfFloat=o.getExtension("OES_texture_half_float")),(c||this.extTextureHalfFloat&&o.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=o.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=c||o.getExtension("OES_standard_derivatives"),this.extTimerQuery=o.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,c){return new Fc(this,o,c)}createVertexBuffer(o,c,m){return new ca(this,o,c,m)}createRenderbuffer(o,c,m){const _=this.gl,v=_.createRenderbuffer();return this.bindRenderbuffer.set(v),_.renderbufferStorage(_.RENDERBUFFER,o,c,m),this.bindRenderbuffer.set(null),v}createFramebuffer(o,c,m){return new Be(this,o,c,m)}clear({color:o,depth:c,stencil:m}){const _=this.gl;let v=0;o&&(v|=_.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(v|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),m!==void 0&&(v|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(m),this.stencilMask.set(255)),_.clear(v)}setCullFace(o){o.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){A(o.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class lt extends s.Evented{constructor(o,c,m,_){if(super(),this.id=o,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(c,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(o){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const c=Array.isArray(this.map._language)?this.map._language.join():this.map._language,m=this.map._worldview;this._tileJSONRequest=wn(this._options,this.map._requestManager,c,m,(_,v)=>{this._tileJSONRequest=null,this._loaded=!0,_?(c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${c}`),m&&m.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${m}`),this.fire(new s.ErrorEvent(_))):v&&(s.extend(this,v),v.bounds&&(this.tileBounds=new Fn(v.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(v.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),o&&o(_)})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(o,c){const m=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(m,s.ResourceType.Tile),data:void 0,uid:o.uid,tileID:o.tileID,tileZoom:o.tileZoom,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:o.isSymbolTile};if(_.request.collectResourceTiming=this._collectResourceTiming,o.actor&&o.state!=="expired")o.state==="loading"?o.reloadCallback=c:o.request=o.actor.send("reloadTile",_,v.bind(this));else if(o.actor=this._tileWorkers[m]=this._tileWorkers[m]||this.dispatcher.getActor(),this.dispatcher.ready)o.request=o.actor.send("loadTile",_,v.bind(this),void 0,!0);else{const T=s.loadVectorTile.call({deduped:this._deduped},_,(S,M)=>{S||!M?v.call(this,S):(_.data={cacheControl:M.cacheControl,expires:M.expires,rawData:M.rawData.slice(0)},o.actor&&o.actor.send("loadTile",_,v.bind(this),void 0,!0))},!0);o.request={cancel:T}}function v(T,S){return delete o.request,o.aborted?c(null):T&&T.status!==404?c(T):(S&&S.resourceTiming&&(o.resourceTiming=S.resourceTiming),this.map._refreshExpiredTiles&&S&&o.setExpiryData(S),o.loadVectorData(S,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(o.reloadCallback&&(this.loadTile(o,o.reloadCallback),o.reloadCallback=null)))}}abortTile(o){o.request&&(o.request.cancel(),delete o.request),o.actor&&o.actor.send("abortTile",{uid:o.uid,type:this.type,source:this.id})}unloadTile(o){o.unloadVectorData(),o.actor&&o.actor.send("removeTile",{uid:o.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class nt extends s.Evented{constructor(o,c,m,_){super(),this.id=o,this.dispatcher=m,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},c),s.extend(this,s.pick(c,["url","scheme","tileSize"]))}load(o){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=wn(this._options,this.map._requestManager,null,null,(c,m)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new s.ErrorEvent(c)):m&&(s.extend(this,m),m.bounds&&(this.tileBounds=new Fn(m.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(m.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),o&&o(c)})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(o){return this._options.tiles=o,this.reload(),this}setUrl(o){return this.url=o,this._options.url=o,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o,c){const m=s.exported.devicePixelRatio>=2,_=this.map._requestManager.normalizeTileURL(o.tileID.canonical.url(this.tiles,this.scheme),m,this.tileSize);o.request=s.getImage(this.map._requestManager.transformRequest(_,s.ResourceType.Tile),(v,T,S,M)=>(delete o.request,o.aborted?(o.state="unloaded",c(null)):v?(o.state="errored",c(v)):T?(this.map._refreshExpiredTiles&&o.setExpiryData({cacheControl:S,expires:M}),o.setTexture(T,this.map.painter),o.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void c(null)):c(null)))}static loadTileData(o,c,m){o.setTexture(c,m)}static unloadTileData(o,c){o.texture&&c.saveTileTexture(o.texture)}abortTile(o,c){o.request&&(o.request.cancel(),delete o.request),c()}unloadTile(o,c){o.texture&&this.map.painter.saveTileTexture(o.texture),c()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Nt(f,o,c,m,_,v,T,S){const M=[f,c,_,o,m,v,1,1,1],L=[T,S,1],k=s.adjoint([],M),[D,$,W]=s.transformMat3(L,L,s.transpose(k,k));return s.multiply$1(M,[D,0,0,0,$,0,0,0,W],M)}class Gt extends s.Evented{constructor(o,c,m,_){super(),this.id=o,this.dispatcher=m,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=c,this._dirty=!1}load(o,c){this._loaded=c||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(m,_)=>{if(this._imageRequest=null,this._loaded=!0,m)this.fire(new s.ErrorEvent(m));else if(_){const{HTMLImageElement:v}=s.window;this.image=_ instanceof v?s.exported.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading()}})}loaded(){return this._loaded}updateImage(o){return this.image&&o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(o){this.coordinates=o,this._boundsArray=void 0;const c=o.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(m){let _=1/0,v=1/0,T=-1/0,S=-1/0;for(const D of m)_=Math.min(_,D.x),v=Math.min(v,D.y),T=Math.max(T,D.x),S=Math.max(S,D.y);const M=Math.max(T-_,S-v),L=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),k=Math.pow(2,L);return new s.CanonicalTileID(L,Math.floor((_+T)/2*k),Math.floor((v+S)/2*k))}(c),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(o){for(const M in this.tiles){const L=this.tiles[M];L.state!=="loaded"&&(L.state="loaded",L.texture=this.texture)}if(this._boundsArray)return;const c=s.tileTransform(this.tileID,this.map.transform.projection),[m,_,v,T]=this.coordinates.map(M=>{const L=c.projection.project(M[0],M[1]);return s.getTilePoint(c,L)._round()});this.perspectiveTransform=function(M,L,k,D,$,W,K,X,Y,B){const H=Nt(0,0,M,0,0,L,M,L),re=Nt(k,D,$,W,K,X,Y,B);return s.multiply$1(re,s.adjoint(H,H),re),[re[6]/re[8]*M/s.EXTENT,re[7]/re[8]*L/s.EXTENT]}(this.width,this.height,m.x,m.y,_.x,_.y,T.x,T.y,v.x,v.y);const S=this._boundsArray=new s.StructArrayLayout4i8;S.emplaceBack(m.x,m.y,0,0),S.emplaceBack(_.x,_.y,s.EXTENT,0),S.emplaceBack(T.x,T.y,0,s.EXTENT),S.emplaceBack(v.x,v.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=o.createVertexBuffer(S,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const o=this.map.painter.context,c=o.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(o,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(o)}loadTile(o,c){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},c(null)):(o.state="errored",c(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const jt={vector:lt,raster:nt,"raster-dem":class extends nt{constructor(f,o,c,m){super(f,o,c,m),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}loadTile(f,o){const c=this.map._requestManager.normalizeTileURL(f.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function m(_,v){_&&(f.state="errored",o(_)),v&&(f.dem=v,f.dem.onDeserialize(),f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0,f.state="loaded",o(null))}f.request=s.getImage(this.map._requestManager.transformRequest(c,s.ResourceType.Tile),function(_,v,T,S){if(delete f.request,f.aborted)f.state="unloaded",o(null);else if(_)f.state="errored",o(_);else if(v){this.map._refreshExpiredTiles&&f.setExpiryData({cacheControl:T,expires:S});const M=s.window.ImageBitmap&&v instanceof s.window.ImageBitmap&&(fa==null&&(fa=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),fa),L=1-(v.width-s.prevPowerOfTwo(v.width))/2;L<1||f.neighboringTiles||(f.neighboringTiles=this._getNeighboringTiles(f.tileID));const k=M?v:s.exported.getImageData(v,L),D={uid:f.uid,coord:f.tileID,source:this.id,rawImageData:k,encoding:this.encoding,padding:L};f.actor&&f.state!=="expired"||(f.actor=this.dispatcher.getActor(),f.actor.send("loadDEMTile",D,m.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(f){const o=f.canonical,c=Math.pow(2,o.z),m=(o.x-1+c)%c,_=o.x===0?f.wrap-1:f.wrap,v=(o.x+1+c)%c,T=o.x+1===c?f.wrap+1:f.wrap,S={};return S[new s.OverscaledTileID(f.overscaledZ,_,o.z,m,o.y).key]={backfilled:!1},S[new s.OverscaledTileID(f.overscaledZ,T,o.z,v,o.y).key]={backfilled:!1},o.y>0&&(S[new s.OverscaledTileID(f.overscaledZ,_,o.z,m,o.y-1).key]={backfilled:!1},S[new s.OverscaledTileID(f.overscaledZ,f.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},S[new s.OverscaledTileID(f.overscaledZ,T,o.z,v,o.y-1).key]={backfilled:!1}),o.y+1<c&&(S[new s.OverscaledTileID(f.overscaledZ,_,o.z,m,o.y+1).key]={backfilled:!1},S[new s.OverscaledTileID(f.overscaledZ,f.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},S[new s.OverscaledTileID(f.overscaledZ,T,o.z,v,o.y+1).key]={backfilled:!1}),S}unloadTile(f){f.demTexture&&this.map.painter.saveTileTexture(f.demTexture),f.fbo&&(f.fbo.destroy(),delete f.fbo),f.dem&&delete f.dem,delete f.neighboringTiles,f.state="unloaded"}},geojson:class extends s.Evented{constructor(f,o,c,m){super(),this.id=f,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=c.getActor(),this.setEventedParent(m),this._data=o.data,this._options=s.extend({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const _=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*_,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*_,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:s.EXTENT,radius:(o.clusterRadius!==void 0?o.clusterRadius:50)*_,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions)}onAdd(f){this.map=f,this.setData(this._data)}setData(f){return this._data=f,this._updateWorkerData(),this}getClusterExpansionZoom(f,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:f,source:this.id},o),this}getClusterChildren(f,o){return this.actor.send("geojson.getClusterChildren",{clusterId:f,source:this.id},o),this}getClusterLeaves(f,o,c,m){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:f,limit:o,offset:c},m),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const f=s.extend({},this.workerOptions),o=this._data;typeof o=="string"?(f.request=this.map._requestManager.transformRequest(s.exported.resolveURL(o),s.ResourceType.Source),f.request.collectResourceTiming=this._collectResourceTiming):f.data=JSON.stringify(o),this._pendingLoad=this.actor.send(`${this.type}.loadData`,f,(c,m)=>{if(this._loaded=!0,this._pendingLoad=null,c)this.fire(new s.ErrorEvent(c));else{const _={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&m&&m.resourceTiming&&m.resourceTiming[this.id]&&(_.resourceTiming=m.resourceTiming[this.id]),this.fire(new s.Event("data",_)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(f,o){const c=f.actor?"reloadTile":"loadTile";f.actor=this.actor,f.request=this.actor.send(c,{type:this.type,uid:f.uid,tileID:f.tileID,tileZoom:f.tileZoom,zoom:f.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(m,_)=>(delete f.request,f.unloadVectorData(),f.aborted?o(null):m?o(m):(f.loadVectorData(_,this.map.painter,c==="reloadTile"),o(null))),void 0,c==="loadTile")}abortTile(f){f.request&&(f.request.cancel(),delete f.request),f.aborted=!0}unloadTile(f){f.unloadVectorData(),this.actor.send("removeTile",{uid:f.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Gt{constructor(f,o,c,m){super(f,o,c,m),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const f=this.options;this.urls=[];for(const o of f.urls)this.urls.push(this.map._requestManager.transformRequest(o,s.ResourceType.Source).url);s.getVideo(this.urls,(o,c)=>{this._loaded=!0,o?this.fire(new s.ErrorEvent(o)):c&&(this.video=c,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(f){if(this.video){const o=this.video.seekable;f<o.start(0)||f>o.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=f}}getVideo(){return this.video}onAdd(f){this.map||(this.map=f,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const f=this.map.painter.context,o=f.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(f,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(f)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Gt,canvas:class extends Gt{constructor(f,o,c,m){super(f,o,c,m),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(v=>typeof v!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${f}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(f){this.map=f,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let f=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,f=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,f=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context;this.texture?(f||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(o,this.canvas,o.gl.RGBA,{premultiply:!0}),this._prepareData(o)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const f of[this.canvas.width,this.canvas.height])if(isNaN(f)||f<=0)return!0;return!1}},custom:class extends s.Evented{constructor(f,o,c,m){super(),this.id=f,this.type="custom",this._dataType="raster",this._dispatcher=c,this._implementation=o,this.setEventedParent(m),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Fn(this._implementation.bounds,this.minzoom,this.maxzoom)),o.update=this._update.bind(this),o.clearTiles=this._clearTiles.bind(this),o.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(o,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(f){this._map=f,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(f),this.load()}onRemove(f){this._implementation.onRemove&&this._implementation.onRemove(f)}hasTile(f){if(this._implementation.hasTile){const{x:o,y:c,z:m}=f.canonical;return this._implementation.hasTile({x:o,y:c,z:m})}return!this.tileBounds||this.tileBounds.contains(f.canonical)}loadTile(f,o){const{x:c,y:m,z:_}=f.tileID.canonical,v=new s.window.AbortController;f.request=Promise.resolve(this._implementation.loadTile({x:c,y:m,z:_},{signal:v.signal})).then(function(T){return delete f.request,f.aborted?(f.state="unloaded",o(null)):T===void 0?(f.state="errored",o(null)):T===null?(this.loadTileData(f,{width:this.tileSize,height:this.tileSize,data:null}),f.state="loaded",o(null)):function(S){return S instanceof s.window.ImageData||S instanceof s.window.HTMLCanvasElement||S instanceof s.window.ImageBitmap||S instanceof s.window.HTMLImageElement}(T)?(this.loadTileData(f,T),f.state="loaded",void o(null)):(f.state="errored",o(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(T=>{T.code!==20&&(f.state="errored",o(T))}),f.request.cancel=()=>v.abort()}loadTileData(f,o){nt.loadTileData(f,o,this._map.painter)}unloadTileData(f){nt.unloadTileData(f,this._map.painter)}unloadTile(f,o){if(this.unloadTileData(f),this._implementation.unloadTile){const{x:c,y:m,z:_}=f.tileID.canonical;this._implementation.unloadTile({x:c,y:m,z:_})}o()}abortTile(f,o){f.request&&f.request.cancel&&(f.request.cancel(),delete f.request),o()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(f=>({x:f.canonical.x,y:f.canonical.y,z:f.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Zt=function(f,o,c,m){const _=new jt[o.type](f,o,c,m);if(_.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${_.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],_),_};function tr(f,o){const c=s.identity([]);return s.scale(c,c,[.5*f.width,.5*-f.height,1]),s.translate(c,c,[1,-1,0]),s.multiply(c,c,f.calculateProjMatrix(o.toUnwrapped())),Float32Array.from(c)}function Ur(f,o,c,m,_,v,T,S=!1){const M=f.tilesIn(m,T,S);M.sort(Nn);const L=[];for(const D of M)L.push({wrappedTileID:D.tile.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(o,c,f._state,D,_,v,tr(f.transform,D.tile.tileID),S)});const k=function(D){const $={},W={};for(const K of D){const X=K.queryResults,Y=K.wrappedTileID,B=W[Y]=W[Y]||{};for(const H in X){const re=X[H],ne=B[H]=B[H]||{},pe=$[H]=$[H]||[];for(const ge of re)ne[ge.featureIndex]||(ne[ge.featureIndex]=!0,pe.push(ge))}}return $}(L);for(const D in k)k[D].forEach($=>{const W=$.feature,K=W.layer;K&&K.type!=="background"&&K.type!=="sky"&&(W.source=K.source,K["source-layer"]&&(W.sourceLayer=K["source-layer"]),W.state=W.id!==void 0?f.getFeatureState(K["source-layer"],W.id):{})});return k}function tn(f,o){const c=f.getRenderableIds().map(v=>f.getTileByID(v)),m=[],_={};for(let v=0;v<c.length;v++){const T=c[v],S=T.tileID.canonical.key;_[S]||(_[S]=!0,T.querySourceFeatures(m,o))}return m}function Nn(f,o){const c=f.tileID,m=o.tileID;return c.overscaledZ-m.overscaledZ||c.canonical.y-m.canonical.y||c.wrap-m.wrap||c.canonical.x-m.canonical.x}function _n(){return Oa.workerClass!=null?new Oa.workerClass:new s.window.Worker(Oa.workerUrl)}const so="mapboxgl_preloaded_worker_pool";class En{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<En.workerCount;)this.workers.push(new _n);return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[so]}numActive(){return Object.keys(this.active).length}}let qn;function ma(){return qn||(qn=new En),qn}function j0(f,o){const c={};for(const m in f)m!=="ref"&&(c[m]=f[m]);return s.refProperties.forEach(m=>{m in o&&(c[m]=o[m])}),c}function Ip(f){f=f.slice();const o=Object.create(null);for(let c=0;c<f.length;c++)o[f[c].id]=f[c];for(let c=0;c<f.length;c++)"ref"in f[c]&&(f[c]=j0(f[c],o[f[c].ref]));return f}En.workerCount=2;const ur={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function zh(f,o,c){c.push({command:ur.addSource,args:[f,o[f]]})}function Sl(f,o,c){o.push({command:ur.removeSource,args:[f]}),c[f]=!0}function Rh(f,o,c,m){Sl(f,c,m),zh(f,o,c)}function $c(f,o,c){let m;for(m in f[c])if(f[c].hasOwnProperty(m)&&m!=="data"&&!A(f[c][m],o[c][m]))return!1;for(m in o[c])if(o[c].hasOwnProperty(m)&&m!=="data"&&!A(f[c][m],o[c][m]))return!1;return!0}function ao(f,o,c,m,_,v){let T;for(T in o=o||{},f=f||{})f.hasOwnProperty(T)&&(A(f[T],o[T])||c.push({command:v,args:[m,T,o[T],_]}));for(T in o)o.hasOwnProperty(T)&&!f.hasOwnProperty(T)&&(A(f[T],o[T])||c.push({command:v,args:[m,T,o[T],_]}))}function Co(f){return f.id}function Dh(f,o){return f[o.id]=o,f}class Bh{constructor(o,c){this.reset(o,c)}reset(o,c){this.points=o||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(this.points.length===1)return this.points[0];o=s.clamp(o,0,1);let c=1,m=this._distances[c];const _=o*this.paddedLength+this.padding;for(;m<_&&c<this._distances.length;)m=this._distances[++c];const v=c-1,T=this._distances[v],S=m-T,M=S>0?(_-T)/S:0;return this.points[v].mult(1-M).add(this.points[c].mult(M))}}class zs{constructor(o,c,m){const _=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(o/m),this.yCellCount=Math.ceil(c/m);for(let T=0;T<this.xCellCount*this.yCellCount;T++)_.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=c,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,c,m,_,v){this._forEachCell(c,m,_,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(c),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(v)}insertCircle(o,c,m,_){this._forEachCell(c-_,m-_,c+_,m+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(c),this.circles.push(m),this.circles.push(_)}_insertBoxCell(o,c,m,_,v,T){this.boxCells[v].push(T)}_insertCircleCell(o,c,m,_,v,T){this.circleCells[v].push(T)}_query(o,c,m,_,v,T){if(m<0||o>this.width||_<0||c>this.height)return!v&&[];const S=[];if(o<=0&&c<=0&&this.width<=m&&this.height<=_){if(v)return!0;for(let M=0;M<this.boxKeys.length;M++)S.push({key:this.boxKeys[M],x1:this.bboxes[4*M],y1:this.bboxes[4*M+1],x2:this.bboxes[4*M+2],y2:this.bboxes[4*M+3]});for(let M=0;M<this.circleKeys.length;M++){const L=this.circles[3*M],k=this.circles[3*M+1],D=this.circles[3*M+2];S.push({key:this.circleKeys[M],x1:L-D,y1:k-D,x2:L+D,y2:k+D})}return T?S.filter(T):S}return this._forEachCell(o,c,m,_,this._queryCell,S,{hitTest:v,seenUids:{box:{},circle:{}}},T),v?S.length>0:S}_queryCircle(o,c,m,_,v){const T=o-m,S=o+m,M=c-m,L=c+m;if(S<0||T>this.width||L<0||M>this.height)return!_&&[];const k=[];return this._forEachCell(T,M,S,L,this._queryCellCircle,k,{hitTest:_,circle:{x:o,y:c,radius:m},seenUids:{box:{},circle:{}}},v),_?k.length>0:k}query(o,c,m,_,v){return this._query(o,c,m,_,!1,v)}hitTest(o,c,m,_,v){return this._query(o,c,m,_,!0,v)}hitTestCircle(o,c,m,_){return this._queryCircle(o,c,m,!0,_)}_queryCell(o,c,m,_,v,T,S,M){const L=S.seenUids,k=this.boxCells[v];if(k!==null){const $=this.bboxes;for(const W of k)if(!L.box[W]){L.box[W]=!0;const K=4*W;if(o<=$[K+2]&&c<=$[K+3]&&m>=$[K+0]&&_>=$[K+1]&&(!M||M(this.boxKeys[W]))){if(S.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[W],x1:$[K],y1:$[K+1],x2:$[K+2],y2:$[K+3]})}}}const D=this.circleCells[v];if(D!==null){const $=this.circles;for(const W of D)if(!L.circle[W]){L.circle[W]=!0;const K=3*W;if(this._circleAndRectCollide($[K],$[K+1],$[K+2],o,c,m,_)&&(!M||M(this.circleKeys[W]))){if(S.hitTest)return T.push(!0),!0;{const X=$[K],Y=$[K+1],B=$[K+2];T.push({key:this.circleKeys[W],x1:X-B,y1:Y-B,x2:X+B,y2:Y+B})}}}}}_queryCellCircle(o,c,m,_,v,T,S,M){const L=S.circle,k=S.seenUids,D=this.boxCells[v];if(D!==null){const W=this.bboxes;for(const K of D)if(!k.box[K]){k.box[K]=!0;const X=4*K;if(this._circleAndRectCollide(L.x,L.y,L.radius,W[X+0],W[X+1],W[X+2],W[X+3])&&(!M||M(this.boxKeys[K])))return T.push(!0),!0}}const $=this.circleCells[v];if($!==null){const W=this.circles;for(const K of $)if(!k.circle[K]){k.circle[K]=!0;const X=3*K;if(this._circlesCollide(W[X],W[X+1],W[X+2],L.x,L.y,L.radius)&&(!M||M(this.circleKeys[K])))return T.push(!0),!0}}}_forEachCell(o,c,m,_,v,T,S,M){const L=this._convertToXCellCoord(o),k=this._convertToYCellCoord(c),D=this._convertToXCellCoord(m),$=this._convertToYCellCoord(_);for(let W=L;W<=D;W++)for(let K=k;K<=$;K++)if(v.call(this,o,c,m,_,this.xCellCount*K+W,T,S,M))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,c,m,_,v,T){const S=_-o,M=v-c,L=m+T;return L*L>S*S+M*M}_circleAndRectCollide(o,c,m,_,v,T,S){const M=(T-_)/2,L=Math.abs(o-(_+M));if(L>M+m)return!1;const k=(S-v)/2,D=Math.abs(c-(v+k));if(D>k+m)return!1;if(L<=M||D<=k)return!0;const $=L-M,W=D-k;return $*$+W*W<=m*m}}const Mo={unknown:0,flipRequired:1,flipNotRequired:2},Al=Math.tan(85*Math.PI/180);function je(f,o,c,m,_,v,T){const S=s.create();if(c)if(v.name==="globe"){const M=s.calculateGlobeLabelMatrix(_,o);s.multiply(S,S,M)}else{const M=Te([],T);S[0]=M[0],S[1]=M[1],S[4]=M[2],S[5]=M[3],m||s.rotateZ(S,S,_.angle)}else s.multiply(S,_.labelPlaneMatrix,f);return S}function Po(f,o,c,m,_,v,T){const S=je(f,o,c,m,_,v,T);return v.name==="globe"&&c||(S[2]=S[6]=S[10]=S[14]=0),S}function rn(f,o,c,m,_,v,T){if(c){if(v.name==="globe"){const S=je(f,o,c,m,_,v,T);return s.invert(S,S),s.multiply(S,f,S),S}{const S=s.clone(f),M=s.identity([]);return M[0]=T[0],M[1]=T[1],M[4]=T[2],M[5]=T[3],s.multiply(S,S,M),m||s.rotateZ(S,S,-_.angle),S}}return _.glCoordMatrix}function Tn(f,o,c,m){const _=[f,o,c,1];c?s.transformMat4$1(_,_,m):Xt(_,_,m);const v=_[3];return _[0]/=v,_[1]/=v,_[2]/=v,_}function kp(f,o){return Math.min(.5+f/o*.5,1.5)}function lo(f,o){const c=f[0]/f[3],m=f[1]/f[3];return c>=-o[0]&&c<=o[0]&&m>=-o[1]&&m<=o[1]}function Fh(f,o,c,m,_,v,T,S,M,L){const k=c.transform,D=m?f.textSizeData:f.iconSizeData,$=s.evaluateSizeForZoom(D,c.transform.zoom),W=k.projection.name==="globe",K=[256/c.width*2+1,256/c.height*2+1],X=m?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;X.clear();let Y=null;W&&(Y=m?f.text.globeExtVertexArray:f.icon.globeExtVertexArray);const B=f.lineVertexArray,H=m?f.text.placedSymbolArray:f.icon.placedSymbolArray,re=c.transform.width/c.transform.height;let ne,pe=!1;for(let ge=0;ge<H.length;ge++){const me=H.get(ge),{numGlyphs:be,writingMode:xe}=me;if(xe!==s.WritingMode.vertical||pe||ne===s.WritingMode.horizontal||(pe=!0),ne=xe,(me.hidden||xe===s.WritingMode.vertical)&&!pe){Hi(be,X);continue}pe=!1;const Ie=new s.Point(me.tileAnchorX,me.tileAnchorY);let{x:Je,y:Ce,z:Ge}=k.projection.projectTilePoint(Ie.x,Ie.y,L.canonical);if(M){const[Rt,xt,kt]=M(Ie);Je+=Rt,Ce+=xt,Ge+=kt}const Re=[Je,Ce,Ge,1];if(s.transformMat4$1(Re,Re,o),!lo(Re,K)){Hi(be,X);continue}const Qe=kp(c.transform.cameraToCenterDistance,Re[3]),Pe=s.evaluateSizeForFeature(D,$,me),$e=T?Pe/Qe:Pe*Qe,tt=Tn(Je,Ce,Ge,_);if(tt[3]<=0){Hi(be,X);continue}let Ke={};const rt=T?null:M,At=pt(me,$e,!1,S,o,_,v,f.glyphOffsetArray,B,X,Y,tt,Ie,Ke,re,rt,k.projection,L,T);pe=At.useVertical,rt&&At.needsFlipping&&(Ke={}),(At.notEnoughRoom||pe||At.needsFlipping&&pt(me,$e,!0,S,o,_,v,f.glyphOffsetArray,B,X,Y,tt,Ie,Ke,re,rt,k.projection,L,T).notEnoughRoom)&&Hi(be,X)}m?(f.text.dynamicLayoutVertexBuffer.updateData(X),Y&&f.text.globeExtVertexBuffer.updateData(Y)):(f.icon.dynamicLayoutVertexBuffer.updateData(X),Y&&f.icon.globeExtVertexBuffer.updateData(Y))}function Lp(f,o,c,m,_,v,T,S,M,L,k,D,$,W,K,X){const{lineStartIndex:Y,glyphStartIndex:B,segment:H}=S,re=B+S.numGlyphs,ne=Y+S.lineLength,pe=o.getoffsetX(B),ge=o.getoffsetX(re-1),me=gi(f*pe,c,m,_,v,T,H,Y,ne,M,L,k,D,$,!0,W,K,X);if(!me)return null;const be=gi(f*ge,c,m,_,v,T,H,Y,ne,M,L,k,D,$,!0,W,K,X);return be?{first:me,last:be}:null}function ga(f,o,c,m){return f===s.WritingMode.horizontal&&Math.abs(m)>Math.abs(c)?{useVertical:!0}:f===s.WritingMode.vertical?m>0?{needsFlipping:!0}:null:o!==Mo.unknown&&function(_,v){return _===0||Math.abs(v/_)>Al}(c,m)?o===Mo.flipRequired?{needsFlipping:!0}:null:c<0?{needsFlipping:!0}:null}function pt(f,o,c,m,_,v,T,S,M,L,k,D,$,W,K,X,Y,B,H){const re=o/24,ne=f.lineOffsetX*re,pe=f.lineOffsetY*re,{lineStartIndex:ge,glyphStartIndex:me,numGlyphs:be,segment:xe,writingMode:Ie,flipState:Je}=f,Ce=ge+f.lineLength,Ge=Re=>{if(k){const[tt,Ke,rt]=Re.up,At=L.length;s.updateGlobeVertexNormal(k,At+0,tt,Ke,rt),s.updateGlobeVertexNormal(k,At+1,tt,Ke,rt),s.updateGlobeVertexNormal(k,At+2,tt,Ke,rt),s.updateGlobeVertexNormal(k,At+3,tt,Ke,rt)}const[Qe,Pe,$e]=Re.point;s.addDynamicAttributes(L,Qe,Pe,$e,Re.angle)};if(be>1){const Re=Lp(re,S,ne,pe,c,D,$,f,M,v,W,X,!1,Y,B,H);if(!Re)return{notEnoughRoom:!0};if(m&&!c){let[Qe,Pe,$e]=Re.first.point,[tt,Ke,rt]=Re.last.point;[Qe,Pe]=Tn(Qe,Pe,$e,T),[tt,Ke]=Tn(tt,Ke,rt,T);const At=ga(Ie,Je,(tt-Qe)*K,Ke-Pe);if(f.flipState=At&&At.needsFlipping?Mo.flipRequired:Mo.flipNotRequired,At)return At}Ge(Re.first);for(let Qe=me+1;Qe<me+be-1;Qe++){const Pe=gi(re*S.getoffsetX(Qe),ne,pe,c,D,$,xe,ge,Ce,M,v,W,X,!1,!1,Y,B,H);if(!Pe)return L.length-=4*(Qe-me),{notEnoughRoom:!0};Ge(Pe)}Ge(Re.last)}else{if(m&&!c){const Qe=Tn($.x,$.y,0,_),Pe=ge+xe+1,$e=new s.Point(M.getx(Pe),M.gety(Pe)),tt=Tn($e.x,$e.y,0,_),Ke=tt[3]>0?tt:Wt($,$e,Qe,1,_,void 0,Y,B.canonical),rt=ga(Ie,Je,(Ke[0]-Qe[0])*K,Ke[1]-Qe[1]);if(f.flipState=rt&&rt.needsFlipping?Mo.flipRequired:Mo.flipNotRequired,rt)return rt}const Re=gi(re*S.getoffsetX(me),ne,pe,c,D,$,xe,ge,Ce,M,v,W,X,!1,!1,Y,B,H);if(!Re)return{notEnoughRoom:!0};Ge(Re)}return{}}function Qt(f,o,c,m,_){const{x:v,y:T,z:S}=m.projectTilePoint(f.x,f.y,o);if(!_)return Tn(v,T,S,c);const[M,L,k]=_(f);return Tn(v+M,T+L,S+k,c)}function Wt(f,o,c,m,_,v,T,S){const M=Qt(f.sub(o)._unit()._add(f),S,_,T,v);return s.sub(M,c,M),s.normalize(M,M),s.scaleAndAdd(M,c,M,m)}function gi(f,o,c,m,_,v,T,S,M,L,k,D,$,W,K,X,Y,B){const H=m?f-o:f+o;let re=H>0?1:-1,ne=0;m&&(re*=-1,ne=Math.PI),re<0&&(ne+=Math.PI);let pe=S+T+(re>0?0:1)|0,ge=_,me=_,be=0,xe=0;const Ie=Math.abs(H),Je=[],Ce=[];let Ge=v,Re=Ge;const Qe=()=>Wt(Re,Ge,me,Ie-be+1,k,$,X,Y.canonical);for(;be+xe<=Ie;){if(pe+=re,pe<S||pe>=M)return null;if(me=ge,Re=Ge,Je.push(me),W&&Ce.push(Re),Ge=new s.Point(L.getx(pe),L.gety(pe)),ge=D[pe],!ge){const kt=Qt(Ge,Y.canonical,k,X,$);ge=kt[3]>0?D[pe]=kt:Qe()}be+=xe,xe=s.distance(me,ge)}K&&$&&(D[pe]&&(ge=Qe(),xe=s.distance(me,ge)),D[pe]=ge);const Pe=(Ie-be)/xe,$e=Ge.sub(Re)._mult(Pe)._add(Re),tt=s.sub([],ge,me),Ke=s.scaleAndAdd([],me,tt,Pe);let rt=[0,0,1],At=tt[0],Rt=tt[1];if(B&&(rt=X.upVector(Y.canonical,$e.x,$e.y),rt[0]!==0||rt[1]!==0||rt[2]!==1)){const kt=[rt[2],0,-rt[0]],Kt=s.cross([],rt,kt);s.normalize(kt,kt),s.normalize(Kt,Kt),At=s.dot(tt,kt),Rt=s.dot(tt,Kt)}if(c){const kt=s.cross([],rt,tt);s.normalize(kt,kt),s.scaleAndAdd(Ke,Ke,kt,c*re)}const xt=ne+Math.atan2(Rt,At);return Je.push(Ke),W&&Ce.push($e),{point:Ke,angle:xt,path:Je,tilePath:Ce,up:rt}}function Hi(f,o){const c=o.length,m=c+4*f;o.resize(m),o.float32.fill(-1/0,4*c,4*m)}function Xt(f,o,c){const m=o[0],_=o[1];return f[0]=c[0]*m+c[4]*_+c[12],f[1]=c[1]*m+c[5]*_+c[13],f[3]=c[3]*m+c[7]*_+c[15],f}const _i=100;class Cl{constructor(o,c,m=new zs(o.width+200,o.height+200,25),_=new zs(o.width+200,o.height+200,25)){this.transform=o,this.grid=m,this.ignoredGrid=_,this.pitchfactor=Math.cos(o._pitch)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+_i,this.screenBottomBoundary=o.height+_i,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.fogState=c}placeCollisionBox(o,c,m,_,v,T,S,M){let L=m.projectedAnchorX,k=m.projectedAnchorY,D=m.projectedAnchorZ;const $=m.elevation,W=m.tileID,K=o.getProjection();if($&&W){const[ge,me,be]=K.upVector(W.canonical,m.tileAnchorX,m.tileAnchorY),xe=K.upVectorScale(W.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;L+=ge*$*xe,k+=me*$*xe,D+=be*$*xe}const X=this.projectAndGetPerspectiveRatio(S,L,k,D,m.tileID,K.name==="globe"||!!$||this.transform.pitch>0,K),Y=T*X.perspectiveRatio,B=(m.x1*c+_.x-m.padding)*Y+X.point.x,H=(m.y1*c+_.y-m.padding)*Y+X.point.y,re=(m.x2*c+_.x+m.padding)*Y+X.point.x,ne=(m.y2*c+_.y+m.padding)*Y+X.point.y,pe=X.perspectiveRatio<=.55||X.occluded;return!this.isInsideGrid(B,H,re,ne)||!v&&this.grid.hitTest(B,H,re,ne,M)||pe?{box:[],offscreen:!1,occluded:X.occluded}:{box:[B,H,re,ne],offscreen:this.isOffscreen(B,H,re,ne),occluded:!1}}placeCollisionCircles(o,c,m,_,v,T,S,M,L,k,D,$,W,K,X){const Y=[],B=this.transform.elevation,H=o.getProjection(),re=B?B.getAtTileOffsetFunc(X,this.transform.center.lat,this.transform.worldSize,H):null,ne=new s.Point(m.tileAnchorX,m.tileAnchorY);let{x:pe,y:ge,z:me}=H.projectTilePoint(ne.x,ne.y,X.canonical);if(re){const[$e,tt,Ke]=re(ne);pe+=$e,ge+=tt,me+=Ke}const be=H.name==="globe",xe=this.projectAndGetPerspectiveRatio(S,pe,ge,me,X,be||!!B||this.transform.pitch>0,H),{perspectiveRatio:Ie}=xe,Je=(D?T/Ie:T*Ie)/s.ONE_EM,Ce=Tn(pe,ge,me,M),Ge=xe.signedDistanceFromCamera>0?Lp(Je,v,m.lineOffsetX*Je,m.lineOffsetY*Je,!1,Ce,ne,m,_,M,{},B&&!D?re:null,D&&!!B,H,X,D):null;let Re=!1,Qe=!1,Pe=!0;if(Ge&&!xe.occluded){const $e=.5*W*Ie+K,tt=new s.Point(-100,-100),Ke=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),rt=new Bh,{first:At,last:Rt}=Ge,xt=At.path.length;let kt=[];for(let Tt=xt-1;Tt>=1;Tt--)kt.push(At.path[Tt]);for(let Tt=1;Tt<Rt.path.length;Tt++)kt.push(Rt.path[Tt]);const Kt=2.5*$e;L&&(kt=kt.map(([Tt,fr,_r],yr)=>(re&&!be&&(_r=re(yr<xt-1?At.tilePath[xt-1-yr]:Rt.tilePath[yr-xt+2])[2]),Tn(Tt,fr,_r,L))),kt.some(Tt=>Tt[3]<=0)&&(kt=[]));let Ht=[];if(kt.length>0){let Tt=1/0,fr=-1/0,_r=1/0,yr=-1/0;for(const vr of kt)Tt=Math.min(Tt,vr[0]),_r=Math.min(_r,vr[1]),fr=Math.max(fr,vr[0]),yr=Math.max(yr,vr[1]);fr>=tt.x&&Tt<=Ke.x&&yr>=tt.y&&_r<=Ke.y&&(Ht=[kt.map(vr=>new s.Point(vr[0],vr[1]))],(Tt<tt.x||fr>Ke.x||_r<tt.y||yr>Ke.y)&&(Ht=s.clipLine(Ht,tt.x,tt.y,Ke.x,Ke.y)))}for(const Tt of Ht){rt.reset(Tt,.25*$e);let fr=0;fr=rt.length<=.5*$e?1:Math.ceil(rt.paddedLength/Kt)+1;for(let _r=0;_r<fr;_r++){const yr=_r/Math.max(fr-1,1),vr=rt.lerp(yr),Un=vr.x+_i,An=vr.y+_i;Y.push(Un,An,$e,0);const Li=Un-$e,fo=An-$e,Fr=Un+$e,xr=An+$e;if(Pe=Pe&&this.isOffscreen(Li,fo,Fr,xr),Qe=Qe||this.isInsideGrid(Li,fo,Fr,xr),!c&&this.grid.hitTestCircle(Un,An,$e,$)&&(Re=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Re,occluded:!1}}}}return{circles:!k&&Re||!Qe?[]:Y,offscreen:Pe,collisionDetected:Re,occluded:xe.occluded}}queryRenderedSymbols(o){if(o.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let m=1/0,_=1/0,v=-1/0,T=-1/0;for(const k of o){const D=new s.Point(k.x+_i,k.y+_i);m=Math.min(m,D.x),_=Math.min(_,D.y),v=Math.max(v,D.x),T=Math.max(T,D.y),c.push(D)}const S=this.grid.query(m,_,v,T).concat(this.ignoredGrid.query(m,_,v,T)),M={},L={};for(const k of S){const D=k.key;if(M[D.bucketInstanceId]===void 0&&(M[D.bucketInstanceId]={}),M[D.bucketInstanceId][D.featureIndex])continue;const $=[new s.Point(k.x1,k.y1),new s.Point(k.x2,k.y1),new s.Point(k.x2,k.y2),new s.Point(k.x1,k.y2)];s.polygonIntersectsPolygon(c,$)&&(M[D.bucketInstanceId][D.featureIndex]=!0,L[D.bucketInstanceId]===void 0&&(L[D.bucketInstanceId]=[]),L[D.bucketInstanceId].push(D.featureIndex))}return L}insertCollisionBox(o,c,m,_,v){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:_,collisionGroupID:v},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,c,m,_,v){const T=c?this.ignoredGrid:this.grid,S={bucketInstanceId:m,featureIndex:_,collisionGroupID:v};for(let M=0;M<o.length;M+=4)T.insertCircle(S,o[M],o[M+1],o[M+2])}projectAndGetPerspectiveRatio(o,c,m,_,v,T,S){const M=[c,m,_,1];let L=!1;_||this.transform.pitch>0?(s.transformMat4$1(M,M,o),this.fogState&&v&&S.name!=="globe"&&(L=function($,W,K,X,Y,B){const H=B.calculateFogTileMatrix(Y),re=[W,K,X];return s.transformMat4(re,re,H),Jt($,re,B.pitch,B._fov)}(this.fogState,c,m,_,v.toUnwrapped(),this.transform)>.9)):Xt(M,M,o);const k=M[3];return{point:new s.Point((M[0]/k+1)/2*this.transform.width+_i,(-M[1]/k+1)/2*this.transform.height+_i),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(S)/k*.5,1.5),signedDistanceFromCamera:k,occluded:T&&M[2]>k||L}}isOffscreen(o,c,m,_){return m<_i||o>=this.screenRightBoundary||_<_i||c>this.screenBottomBoundary}isInsideGrid(o,c,m,_){return m>=0&&o<this.gridRightBoundary&&_>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const o=s.identity([]);return s.translate(o,o,[-100,-100,0]),o}}function Rs(f,o,c){const m=o.createTileMatrix(f,f.worldSize,c.toUnwrapped());return s.multiply(new Float32Array(16),f.projMatrix,m)}function Mi(f,o,c){if(o.projection.name===c.projection.name)return f.projMatrix;const m=c.clone();return m.setProjection(o.projection),Rs(m,o.getProjection(),f)}function Br(f,o,c){return o.name===c.projection.name?f.projMatrix:Rs(c,o,f)}class Op{constructor(o,c,m,_){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?c:-c))):_&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Io{constructor(o,c,m,_,v,T=!1){this.text=new Op(o?o.text:null,c,m,v),this.icon=new Op(o?o.icon:null,c,_,v),this.clipped=T}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ml{constructor(o,c,m,_=!1){this.text=o,this.icon=c,this.skipFade=m,this.clipped=_}}class Pl{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Nh{constructor(o,c,m,_,v){this.bucketInstanceId=o,this.featureIndex=c,this.sourceLayerIndex=m,this.bucketIndex=_,this.tileID=v}}class zp{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const c=++this.maxGroupID;this.collisionGroups[o]={ID:c,predicate:m=>m.collisionGroupID===c}}return this.collisionGroups[o]}}function Il(f,o,c,m,_){const{horizontalAlign:v,verticalAlign:T}=s.getAnchorAlignment(f),S=-(v-.5)*o,M=-(T-.5)*c,L=s.evaluateVariableOffset(f,m);return new s.Point(S+L[0]*_,M+L[1]*_)}function kl(f,o,c,m,_){const v=new s.Point(f,o);return c&&v._rotate(m?_:-_),v}class Gc{constructor(o,c,m,_,v){this.transform=o.clone(),this.projection=o.projection.name,this.collisionIndex=new Cl(this.transform,v),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new zp(m),this.collisionCircleArrays={},this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(o,c,m,_){const v=m.getBucket(c),T=m.latestFeatureIndex;if(!v||!T||c.id!==v.layerIds[0])return;const S=v.layers[0].layout,M=m.collisionBoxArray,L=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),k=m.tileSize/s.EXTENT,D=m.tileID.toUnwrapped();this.transform.setProjection(v.projection);const $=(W=m.tileID,K=v.getProjection(),X=this.transform,K.name===this.projection?X.calculateProjMatrix(W.toUnwrapped()):Rs(X,K,W));var W,K,X;const Y=S.get("text-pitch-alignment")==="map",B=S.get("text-rotation-alignment")==="map";c.compileFilter();const H=c.dynamicFilter(),re=c.dynamicFilterNeedsFeature(),ne=this.transform.calculatePixelsToTileUnitsMatrix(m),pe=Po($,m.tileID.canonical,Y,B,this.transform,v.getProjection(),ne);let ge=null;if(Y){const xe=rn($,m.tileID.canonical,Y,B,this.transform,v.getProjection(),ne);ge=s.multiply([],this.transform.labelPlaneMatrix,xe)}let me=null;H&&m.latestFeatureIndex&&(me={unwrappedTileID:D,dynamicFilter:H,dynamicFilterNeedsFeature:re,featureIndex:m.latestFeatureIndex}),this.retainedQueryData[v.bucketInstanceId]=new Nh(v.bucketInstanceId,T,v.sourceLayerIndex,v.index,m.tileID);const be={bucket:v,layout:S,posMatrix:$,textLabelPlaneMatrix:pe,labelToScreenMatrix:ge,clippingData:me,scale:L,textPixelRatio:k,holdingForFade:m.holdingForFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(v.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(_)for(const xe of v.sortKeyRanges){const{sortKey:Ie,symbolInstanceStart:Je,symbolInstanceEnd:Ce}=xe;o.push({sortKey:Ie,symbolInstanceStart:Je,symbolInstanceEnd:Ce,parameters:be})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:be})}attemptAnchorPlacement(o,c,m,_,v,T,S,M,L,k,D,$,W,K,X,Y,B,H){const{textOffset0:re,textOffset1:ne,crossTileID:pe}=$,ge=[re,ne],me=Il(o,m,_,ge,v),be=this.collisionIndex.placeCollisionBox(K,v,c,kl(me.x,me.y,T,S,this.transform.angle),D,M,L,k.predicate);if(Y){const xe=K.getSymbolInstanceIconSize(H,this.transform.zoom,$.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(K,xe,Y,kl(me.x,me.y,T,S,this.transform.angle),D,M,L,k.predicate).box.length===0)return}if(be.box.length>0){let xe;return this.prevPlacement&&this.prevPlacement.variableOffsets[pe]&&this.prevPlacement.placements[pe]&&this.prevPlacement.placements[pe].text&&(xe=this.prevPlacement.variableOffsets[pe].anchor),this.variableOffsets[pe]={textOffset:ge,width:m,height:_,anchor:o,textScale:v,prevAnchor:xe},this.markUsedJustification(K,o,$,X),K.allowVerticalPlacement&&(this.markUsedOrientation(K,X,$),this.placedOrientations[pe]=X),{shift:me,placedGlyphBoxes:be}}}placeLayerBucketPart(o,c,m,_){const{bucket:v,layout:T,posMatrix:S,textLabelPlaneMatrix:M,labelToScreenMatrix:L,clippingData:k,textPixelRatio:D,holdingForFade:$,collisionBoxArray:W,partiallyEvaluatedTextSize:K,partiallyEvaluatedIconSize:X,collisionGroup:Y}=o.parameters,B=T.get("text-optional"),H=T.get("icon-optional"),re=T.get("text-allow-overlap"),ne=T.get("icon-allow-overlap"),pe=T.get("text-rotation-alignment")==="map",ge=T.get("text-pitch-alignment")==="map",me=T.get("icon-text-fit")!=="none",be=T.get("symbol-z-order")==="viewport-y";this.transform.setProjection(v.projection);let xe=re&&(ne||!v.hasIconData()||H),Ie=ne&&(re||!v.hasTextData()||B);!v.collisionArrays&&W&&v.deserializeCollisionBoxes(W),m&&_&&v.updateCollisionDebugBuffers(this.transform.zoom,W);const Je=(Ce,Ge,Re)=>{const{crossTileID:Qe,numVerticalGlyphVertices:Pe}=Ce;if(k){const Fr={zoom:this.transform.zoom,pitch:this.transform.pitch};let xr=null;if(k.dynamicFilterNeedsFeature){const sr=this.retainedQueryData[v.bucketInstanceId];xr=k.featureIndex.loadFeature({featureIndex:Ce.featureIndex,bucketIndex:sr.bucketIndex,sourceLayerIndex:sr.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,k.dynamicFilter)(Fr,xr,this.retainedQueryData[v.bucketInstanceId].tileID.canonical,new s.Point(Ce.tileAnchorX,Ce.tileAnchorY),this.transform.calculateDistanceTileData(k.unwrappedTileID)))return this.placements[Qe]=new Ml(!1,!1,!1,!0),void c.add(Qe)}if(c.has(Qe))return;if($)return void(this.placements[Qe]=new Ml(!1,!1,!1));let $e=!1,tt=!1,Ke=!0,rt=!1,At=!1,Rt=null,xt={box:null,offscreen:null,occluded:null},kt={box:null,offscreen:null,occluded:null},Kt=null,Ht=null,Tt=null,fr=0,_r=0,yr=0;Re.textFeatureIndex?fr=Re.textFeatureIndex:Ce.useRuntimeCollisionCircles&&(fr=Ce.featureIndex),Re.verticalTextFeatureIndex&&(_r=Re.verticalTextFeatureIndex);const vr=Fr=>{Fr.tileID=this.retainedQueryData[v.bucketInstanceId].tileID;const xr=this.transform.elevation;(xr||Fr.elevation)&&(Fr.elevation=xr?xr.getAtTileOffset(Fr.tileID,Fr.tileAnchorX,Fr.tileAnchorY):0)},Un=Re.textBox;if(Un){vr(Un);const Fr=sr=>{let nn=s.WritingMode.horizontal;if(v.allowVerticalPlacement&&!sr&&this.prevPlacement){const Wn=this.prevPlacement.placedOrientations[Qe];Wn&&(this.placedOrientations[Qe]=Wn,nn=Wn,this.markUsedOrientation(v,nn,Ce))}return nn},xr=(sr,nn)=>{if(v.allowVerticalPlacement&&Pe>0&&Re.verticalTextBox){for(const Wn of v.writingModes)if(Wn===s.WritingMode.vertical?(xt=nn(),kt=xt):xt=sr(),xt&&xt.box&&xt.box.length)break}else xt=sr()};if(T.get("text-variable-anchor")){let sr=T.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Qe]){const Or=this.prevPlacement.variableOffsets[Qe];sr.indexOf(Or.anchor)>0&&(sr=sr.filter(ti=>ti!==Or.anchor),sr.unshift(Or.anchor))}const nn=(Or,ti,_u)=>{const $s=v.getSymbolInstanceTextSize(K,Ce,this.transform.zoom,Ge),Yl=(Or.x2-Or.x1)*$s+2*Or.padding,Bo=(Or.y2-Or.y1)*$s+2*Or.padding,us=me&&!ne?ti:null;us&&vr(us);let Gs={box:[],offscreen:!1,occluded:!1};const yu=re?2*sr.length:sr.length;for(let Ql=0;Ql<yu;++Ql){const Pd=this.attemptAnchorPlacement(sr[Ql%sr.length],Or,Yl,Bo,$s,pe,ge,D,S,Y,Ql>=sr.length,Ce,Ge,v,_u,us,K,X);if(Pd&&(Gs=Pd.placedGlyphBoxes,Gs&&Gs.box&&Gs.box.length)){$e=!0,Rt=Pd.shift;break}}return Gs};xr(()=>nn(Un,Re.iconBox,s.WritingMode.horizontal),()=>{const Or=Re.verticalTextBox;return Or&&vr(Or),v.allowVerticalPlacement&&!(xt&&xt.box&&xt.box.length)&&Pe>0&&Or?nn(Or,Re.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),xt&&($e=xt.box,Ke=xt.offscreen,rt=xt.occluded);const Wn=Fr(!(!xt||!xt.box));if(!$e&&this.prevPlacement){const Or=this.prevPlacement.variableOffsets[Qe];Or&&(this.variableOffsets[Qe]=Or,this.markUsedJustification(v,Or.anchor,Ce,Wn))}}else{const sr=(nn,Wn)=>{const Or=v.getSymbolInstanceTextSize(K,Ce,this.transform.zoom,Ge),ti=this.collisionIndex.placeCollisionBox(v,Or,nn,new s.Point(0,0),re,D,S,Y.predicate);return ti&&ti.box&&ti.box.length&&(this.markUsedOrientation(v,Wn,Ce),this.placedOrientations[Qe]=Wn),ti};xr(()=>sr(Un,s.WritingMode.horizontal),()=>{const nn=Re.verticalTextBox;return v.allowVerticalPlacement&&Pe>0&&nn?(vr(nn),sr(nn,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Fr(!!(xt&&xt.box&&xt.box.length))}}if(Kt=xt,$e=Kt&&Kt.box&&Kt.box.length>0,Ke=Kt&&Kt.offscreen,rt=Kt&&Kt.occluded,Ce.useRuntimeCollisionCircles){const Fr=v.text.placedSymbolArray.get(Ce.centerJustifiedTextSymbolIndex>=0?Ce.centerJustifiedTextSymbolIndex:Ce.verticalPlacedTextSymbolIndex),xr=s.evaluateSizeForFeature(v.textSizeData,K,Fr),sr=T.get("text-padding");Ht=this.collisionIndex.placeCollisionCircles(v,re,Fr,v.lineVertexArray,v.glyphOffsetArray,xr,S,M,L,m,ge,Y.predicate,Ce.collisionCircleDiameter*xr/s.ONE_EM,sr,this.retainedQueryData[v.bucketInstanceId].tileID),$e=re||Ht.circles.length>0&&!Ht.collisionDetected,Ke=Ke&&Ht.offscreen,rt=Ht.occluded}if(Re.iconFeatureIndex&&(yr=Re.iconFeatureIndex),Re.iconBox){const Fr=xr=>{vr(xr);const sr=me&&Rt?kl(Rt.x,Rt.y,pe,ge,this.transform.angle):new s.Point(0,0),nn=v.getSymbolInstanceIconSize(X,this.transform.zoom,Ce.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(v,nn,xr,sr,ne,D,S,Y.predicate)};kt&&kt.box&&kt.box.length&&Re.verticalIconBox?(Tt=Fr(Re.verticalIconBox),tt=Tt.box.length>0):(Tt=Fr(Re.iconBox),tt=Tt.box.length>0),Ke=Ke&&Tt.offscreen,At=Tt.occluded}const An=B||Ce.numHorizontalGlyphVertices===0&&Pe===0,Li=H||Ce.numIconVertices===0;if(An||Li?Li?An||(tt=tt&&$e):$e=tt&&$e:tt=$e=tt&&$e,$e&&Kt&&Kt.box&&this.collisionIndex.insertCollisionBox(Kt.box,T.get("text-ignore-placement"),v.bucketInstanceId,kt&&kt.box&&_r?_r:fr,Y.ID),tt&&Tt&&this.collisionIndex.insertCollisionBox(Tt.box,T.get("icon-ignore-placement"),v.bucketInstanceId,yr,Y.ID),Ht&&($e&&this.collisionIndex.insertCollisionCircles(Ht.circles,T.get("text-ignore-placement"),v.bucketInstanceId,fr,Y.ID),m)){const Fr=v.bucketInstanceId;let xr=this.collisionCircleArrays[Fr];xr===void 0&&(xr=this.collisionCircleArrays[Fr]=new Pl);for(let sr=0;sr<Ht.circles.length;sr+=4)xr.circles.push(Ht.circles[sr+0]),xr.circles.push(Ht.circles[sr+1]),xr.circles.push(Ht.circles[sr+2]),xr.circles.push(Ht.collisionDetected?1:0)}const fo=v.projection.name!=="globe";xe=xe&&(fo||!rt),Ie=Ie&&(fo||!At),this.placements[Qe]=new Ml($e||xe,tt||Ie,Ke||v.justReloaded),c.add(Qe)};if(be){const Ce=v.getSortedSymbolIndexes(this.transform.angle);for(let Ge=Ce.length-1;Ge>=0;--Ge){const Re=Ce[Ge];Je(v.symbolInstances.get(Re),Re,v.collisionArrays[Re])}}else for(let Ce=o.symbolInstanceStart;Ce<o.symbolInstanceEnd;Ce++)Je(v.symbolInstances.get(Ce),Ce,v.collisionArrays[Ce]);if(m&&v.bucketInstanceId in this.collisionCircleArrays){const Ce=this.collisionCircleArrays[v.bucketInstanceId];s.invert(Ce.invProjMatrix,S),Ce.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(o,c,m,_){const{leftJustifiedTextSymbolIndex:v,centerJustifiedTextSymbolIndex:T,rightJustifiedTextSymbolIndex:S,verticalPlacedTextSymbolIndex:M,crossTileID:L}=m,k=s.getAnchorJustification(c),D=_===s.WritingMode.vertical?M:k==="left"?v:k==="center"?T:k==="right"?S:-1;v>=0&&(o.text.placedSymbolArray.get(v).crossTileID=D>=0&&v!==D?0:L),T>=0&&(o.text.placedSymbolArray.get(T).crossTileID=D>=0&&T!==D?0:L),S>=0&&(o.text.placedSymbolArray.get(S).crossTileID=D>=0&&S!==D?0:L),M>=0&&(o.text.placedSymbolArray.get(M).crossTileID=D>=0&&M!==D?0:L)}markUsedOrientation(o,c,m){const _=c===s.WritingMode.horizontal||c===s.WritingMode.horizontalOnly?c:0,v=c===s.WritingMode.vertical?c:0,{leftJustifiedTextSymbolIndex:T,centerJustifiedTextSymbolIndex:S,rightJustifiedTextSymbolIndex:M,verticalPlacedTextSymbolIndex:L}=m,k=o.text.placedSymbolArray;T>=0&&(k.get(T).placedOrientation=_),S>=0&&(k.get(S).placedOrientation=_),M>=0&&(k.get(M).placedOrientation=_),L>=0&&(k.get(L).placedOrientation=v)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let m=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const _=c?c.symbolFadeChange(o):1,v=c?c.opacities:{},T=c?c.variableOffsets:{},S=c?c.placedOrientations:{};for(const M in this.placements){const L=this.placements[M],k=v[M];k?(this.opacities[M]=new Io(k,_,L.text,L.icon,null,L.clipped),m=m||L.text!==k.text.placed||L.icon!==k.icon.placed):(this.opacities[M]=new Io(null,_,L.text,L.icon,L.skipFade,L.clipped),m=m||L.text||L.icon)}for(const M in v){const L=v[M];if(!this.opacities[M]){const k=new Io(L,_,!1,!1);k.isHidden()||(this.opacities[M]=k,m=m||L.text.placed||L.icon.placed)}}for(const M in T)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=T[M]);for(const M in S)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=S[M]);m?this.lastPlacementChangeTime=o:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:o)}updateLayerOpacities(o,c){const m=new Set;for(const _ of c){const v=_.getBucket(o);v&&_.latestFeatureIndex&&o.id===v.layerIds[0]&&this.updateBucketOpacities(v,m,_.collisionBoxArray)}}updateBucketOpacities(o,c,m){o.hasTextData()&&o.text.opacityVertexArray.clear(),o.hasIconData()&&o.icon.opacityVertexArray.clear(),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const _=o.layers[0].layout,v=!!o.layers[0].dynamicFilter(),T=new Io(null,0,!1,!1,!0),S=_.get("text-allow-overlap"),M=_.get("icon-allow-overlap"),L=_.get("text-variable-anchor"),k=_.get("text-rotation-alignment")==="map",D=_.get("text-pitch-alignment")==="map",$=_.get("icon-text-fit")!=="none",W=new Io(null,0,S&&(M||!o.hasIconData()||_.get("icon-optional")),M&&(S||!o.hasTextData()||_.get("text-optional")),!0);!o.collisionArrays&&m&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(m);const K=(Y,B,H)=>{for(let re=0;re<B/4;re++)Y.opacityVertexArray.emplaceBack(H)};let X=0;for(let Y=0;Y<o.symbolInstances.length;Y++){const B=o.symbolInstances.get(Y),{numHorizontalGlyphVertices:H,numVerticalGlyphVertices:re,crossTileID:ne,numIconVertices:pe}=B,ge=c.has(ne);let me=this.opacities[ne];ge?me=T:me||(me=W,this.opacities[ne]=me),c.add(ne);const be=H>0||re>0,xe=pe>0,Ie=this.placedOrientations[ne],Je=Ie===s.WritingMode.vertical,Ce=Ie===s.WritingMode.horizontal||Ie===s.WritingMode.horizontalOnly;if(!be&&!xe||me.isHidden()||X++,be){const Ge=Ll(me.text);K(o.text,H,Je?Hr:Ge),K(o.text,re,Ce?Hr:Ge);const Re=me.text.isHidden(),{leftJustifiedTextSymbolIndex:Qe,centerJustifiedTextSymbolIndex:Pe,rightJustifiedTextSymbolIndex:$e,verticalPlacedTextSymbolIndex:tt}=B,Ke=o.text.placedSymbolArray,rt=Re||Je?1:0;Qe>=0&&(Ke.get(Qe).hidden=rt),Pe>=0&&(Ke.get(Pe).hidden=rt),$e>=0&&(Ke.get($e).hidden=rt),tt>=0&&(Ke.get(tt).hidden=Re||Ce?1:0);const At=this.variableOffsets[ne];At&&this.markUsedJustification(o,At.anchor,B,Ie);const Rt=this.placedOrientations[ne];Rt&&(this.markUsedJustification(o,"left",B,Rt),this.markUsedOrientation(o,Rt,B))}if(xe){const Ge=Ll(me.icon),{placedIconSymbolIndex:Re,verticalPlacedIconSymbolIndex:Qe}=B,Pe=o.icon.placedSymbolArray,$e=me.icon.isHidden()?1:0;Re>=0&&(K(o.icon,pe,Je?Hr:Ge),Pe.get(Re).hidden=$e),Qe>=0&&(K(o.icon,B.numVerticalIconVertices,Ce?Hr:Ge),Pe.get(Qe).hidden=$e)}if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Ge=o.collisionArrays[Y];if(Ge){let Re=new s.Point(0,0),Qe=!0;if(Ge.textBox||Ge.verticalTextBox){if(L){const $e=this.variableOffsets[ne];$e?(Re=Il($e.anchor,$e.width,$e.height,$e.textOffset,$e.textScale),k&&Re._rotate(D?this.transform.angle:-this.transform.angle)):Qe=!1}v&&(Qe=!me.clipped),Ge.textBox&&_a(o.textCollisionBox.collisionVertexArray,me.text.placed,!Qe||Je,Re.x,Re.y),Ge.verticalTextBox&&_a(o.textCollisionBox.collisionVertexArray,me.text.placed,!Qe||Ce,Re.x,Re.y)}const Pe=Qe&&!!(!Ce&&Ge.verticalIconBox);Ge.iconBox&&_a(o.iconCollisionBox.collisionVertexArray,me.icon.placed,Pe,$?Re.x:0,$?Re.y:0),Ge.verticalIconBox&&_a(o.iconCollisionBox.collisionVertexArray,me.icon.placed,!Pe,$?Re.x:0,$?Re.y:0)}}}if(o.fullyClipped=X===0,o.sortFeatures(this.transform.angle),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[o.bucketInstanceId];o.placementInvProjMatrix=Y.invProjMatrix,o.placementViewportMatrix=Y.viewportMatrix,o.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[o.bucketInstanceId]}}symbolFadeChange(o){return this.fadeDuration===0?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,c){const m=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*m>o}setStale(){this.stale=!0}}function _a(f,o,c,m,_){f.emplaceBack(o?1:0,c?1:0,m||0,_||0),f.emplaceBack(o?1:0,c?1:0,m||0,_||0),f.emplaceBack(o?1:0,c?1:0,m||0,_||0),f.emplaceBack(o?1:0,c?1:0,m||0,_||0)}const Jn=Math.pow(2,25),Kr=Math.pow(2,24),jh=Math.pow(2,17),Uh=Math.pow(2,16),ei=Math.pow(2,9),Pi=Math.pow(2,8),Rp=Math.pow(2,1);function Ll(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const o=f.placed?1:0,c=Math.floor(127*f.opacity);return c*Jn+o*Kr+c*jh+o*Uh+c*ei+o*Pi+c*Rp+o}const Hr=0;class Ol{constructor(o){this._sortAcrossTiles=o.layout.get("symbol-z-order")!=="viewport-y"&&o.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(o,c,m,_,v){const T=this._bucketParts;for(;this._currentTileIndex<o.length;)if(c.getBucketParts(T,_,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((S,M)=>S.sortKey-M.sortKey));this._currentPartIndex<T.length;){const S=T[this._currentPartIndex];if(c.placeLayerBucketPart(S,this._seenCrossTileIDs,m,S.symbolInstanceStart===0),this._currentPartIndex++,v())return!0}return!1}}class Vh{constructor(o,c,m,_,v,T,S,M){this.placement=new Gc(o,v,T,S,M),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(o,c,m){const _=s.exported.now(),v=()=>{const T=s.exported.now()-_;return!this._forceFullPlacement&&T>2};for(;this._currentPlacementIndex>=0;){const T=c[o[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=S)&&(!T.maxzoom||T.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new Ol(T)),this._inProgressLayer.continuePlacement(m[T.source],this.placement,this._showCollisionBoxes,T,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const Ds=512/s.EXTENT/2;class Ln{constructor(o,c,m){this.tileID=o,this.bucketInstanceId=m,this.index=new s.KDBush(c.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const _=o.canonical.x*s.EXTENT,v=o.canonical.y*s.EXTENT;for(let T=0;T<c.length;T++){const{key:S,crossTileID:M,tileAnchorX:L,tileAnchorY:k}=c.get(T),D=Math.floor((_+L)*Ds),$=Math.floor((v+k)*Ds);this.index.add(D,$),this.keys.push(S),this.crossTileIDs.push(M)}this.index.finish()}findMatches(o,c,m){const _=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z),v=Ds/Math.pow(2,c.canonical.z-this.tileID.canonical.z),T=c.canonical.x*s.EXTENT,S=c.canonical.y*s.EXTENT;for(let M=0;M<o.length;M++){const L=o.get(M);if(L.crossTileID)continue;const{key:k,tileAnchorX:D,tileAnchorY:$}=L,W=Math.floor((T+D)*v),K=Math.floor((S+$)*v),X=this.index.range(W-_,K-_,W+_,K+_);for(const Y of X){const B=this.crossTileIDs[Y];if(this.keys[Y]===k&&!m.has(B)){m.add(B),L.crossTileID=B;break}}}}}class $h{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gh{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const c=Math.round((o-this.lng)/360);if(c!==0)for(const m in this.indexes){const _=this.indexes[m],v={};for(const T in _){const S=_[T];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+c),v[S.tileID.key]=S}this.indexes[m]=v}this.lng=o}addBucket(o,c,m){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let v=0;v<c.symbolInstances.length;v++)c.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]=new Set);const _=this.usedCrossTileIDs[o.overscaledZ];for(const v in this.indexes){const T=this.indexes[v];if(Number(v)>o.overscaledZ)for(const S in T){const M=T[S];M.tileID.isChildOf(o)&&M.findMatches(c.symbolInstances,o,_)}else{const S=T[o.scaledTo(Number(v)).key];S&&S.findMatches(c.symbolInstances,o,_)}}for(let v=0;v<c.symbolInstances.length;v++){const T=c.symbolInstances.get(v);T.crossTileID||(T.crossTileID=m.generate(),_.add(T.crossTileID))}return this.indexes[o.overscaledZ]===void 0&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new Ln(o,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(o,c){for(const m of c.crossTileIDs)this.usedCrossTileIDs[o].delete(m)}removeStaleBuckets(o){let c=!1;for(const m in this.indexes){const _=this.indexes[m];for(const v in _)o[_[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,_[v]),delete _[v],c=!0)}return c}}class ko{constructor(){this.layerIndexes={},this.crossTileIDs=new $h,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,c,m,_){let v=this.layerIndexes[o.id];v===void 0&&(v=this.layerIndexes[o.id]=new Gh);let T=!1;const S={};_.name!=="globe"&&v.handleWrapJump(m);for(const M of c){const L=M.getBucket(o);L&&o.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(M.tileID,L,this.crossTileIDs)&&(T=!0),S[L.bucketInstanceId]=!0)}return v.removeStaleBuckets(S)&&(T=!0),T}pruneUnusedLayers(o){const c={};o.forEach(m=>{c[m]=!0});for(const m in this.layerIndexes)c[m]||delete this.layerIndexes[m]}}const ls=(f,o)=>s.emitValidationErrors(f,o&&o.filter(c=>c.identifier!=="source.canvas")),Zc=s.pick(ur,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),U0=s.pick(ur,["setCenter","setZoom","setBearing","setPitch"]),Zh={version:8,layers:[],sources:{}},ya={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class co extends s.Evented{constructor(o,c={}){super(),this.map=o,this.dispatcher=new _t(ma(),this),this.imageManager=new zt,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(o._requestManager,c.localFontFamily?s.LocalGlyphMode.all:c.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,c.localFontFamily||c.localIdeographFontFamily),this.crossTileSymbolIndex=new ko,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const m=this;this._rtlTextPluginCallback=co.registerForPluginStateChange(_=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_.pluginStatus,pluginURL:_.pluginURL},(v,T)=>{if(s.triggerPluginCompletionEvent(v),T&&T.every(S=>S))for(const S in m._sourceCaches){const M=m._sourceCaches[S],L=M.getSource().type;L!=="vector"&&L!=="geojson"||M.reload()}})}),this.on("data",_=>{if(_.dataType!=="source"||_.sourceDataType!=="metadata")return;const v=this.getSource(_.sourceId);if(v&&v.vectorLayerIds)for(const T in this._layers){const S=this._layers[T];S.source===v.id&&this._validateLayer(S)}})}loadURL(o,c={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const m=typeof c.validate=="boolean"?c.validate:!s.isMapboxURL(o);o=this.map._requestManager.normalizeStyleURL(o,c.accessToken);const _=this.map._requestManager.transformRequest(o,s.ResourceType.Style);this._request=s.getJSON(_,(v,T)=>{this._request=null,v?this.fire(new s.ErrorEvent(v)):T&&this._load(T,m)})}loadJSON(o,c={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(o,c.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Zh,!1)}_updateLayerCount(o,c){const m=c?1:-1;o.is3D()&&(this._num3DLayers+=m),o.type==="circle"&&(this._numCircleLayers+=m),o.type==="symbol"&&(this._numSymbolLayers+=m)}_load(o,c){if(c&&ls(this,s.validateStyle(o)))return;this._loaded=!0,this.stylesheet=s.clone$1(o),this._updateMapProjection();for(const _ in o.sources)this.addSource(_,o.sources[_],{validate:!1});this._changed=!1,o.sprite?this._loadSprite(o.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(o.glyphs);const m=Ip(this.stylesheet.layers);this._order=m.map(_=>_.id),this._layers={},this._serializedLayers={};for(const _ of m){const v=s.createStyleLayer(_);v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new vt(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(o){o?this.stylesheet.projection=o:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(o){this._spriteRequest=function(c,m,_){let v,T,S;const M=s.exported.devicePixelRatio>1?"@2x":"";let L=s.getJSON(m.transformRequest(m.normalizeSpriteURL(c,M,".json"),s.ResourceType.SpriteJSON),($,W)=>{L=null,S||(S=$,v=W,D())}),k=s.getImage(m.transformRequest(m.normalizeSpriteURL(c,M,".png"),s.ResourceType.SpriteImage),($,W)=>{k=null,S||(S=$,T=W,D())});function D(){if(S)_(S);else if(v&&T){const $=s.exported.getImageData(T),W={};for(const K in v){const{width:X,height:Y,x:B,y:H,sdf:re,pixelRatio:ne,stretchX:pe,stretchY:ge,content:me}=v[K],be=new s.RGBAImage({width:X,height:Y});s.RGBAImage.copy($,be,{x:B,y:H},{x:0,y:0},{width:X,height:Y}),W[K]={data:be,pixelRatio:ne,sdf:re,stretchX:pe,stretchY:ge,content:me}}_(null,W)}}return{cancel(){L&&(L.cancel(),L=null),k&&(k.cancel(),k=null)}}}(o,this.map._requestManager,(c,m)=>{if(this._spriteRequest=null,c)this.fire(new s.ErrorEvent(c));else if(m)for(const _ in m)this.imageManager.addImage(_,m[_]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(o){const c=this.getSource(o.source);if(!c)return;const m=o.sourceLayer;m&&(c.type==="geojson"||c.vectorLayerIds&&c.vectorLayerIds.indexOf(m)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${c.id}" as specified by style layer "${o.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this._sourceCaches)if(!this._sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(o){const c=[];for(const m of o){const _=this._layers[m];_.type!=="custom"&&c.push(_.serialize())}return c}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const o in this._sourceCaches)if(this._sourceCaches[o].hasTransition())return!0;for(const o in this._layers)if(this._layers[o].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(o){return!!this.terrain&&(typeof o.isLayerDraped=="function"?o.isLayerDraped():ya[o.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(o){if(!this._loaded)return;const c=this._changed;if(this._changed){const _=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(_.length||v.length)&&this._updateWorkerLayers(_,v);for(const T in this._updatedSources){const S=this._updatedSources[T];S==="reload"?this._reloadSource(T):S==="clear"&&this._clearSource(T)}this._updateTilesForChangedImages();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(o);this.light.updateTransitions(o),this.fog&&this.fog.updateTransitions(o),this._resetUpdates()}const m={};for(const _ in this._sourceCaches){const v=this._sourceCaches[_];m[_]=v.used,v.used=!1}for(const _ of this._order){const v=this._layers[_];if(v.recalculate(o,this._availableImages),!v.isHidden(o.zoom)){const S=this._getLayerSourceCache(v);S&&(S.used=!0)}const T=this.map.painter;if(T){const S=v.getProgramIds();if(!S)continue;const M=v.getProgramConfiguration(o.zoom);for(const L of S)T.useProgram(L,M)}}for(const _ in m){const v=this._sourceCaches[_];m[_]!==v.used&&v.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v.getSource().id}))}this.light.recalculate(o),this.terrain&&this.terrain.recalculate(o),this.fog&&this.fog.recalculate(o),this.z=o.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),c&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const c in this._sourceCaches)this._sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateWorkerLayers(o,c){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(o),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(o){if(this._checkLoaded(),ls(this,s.validateStyle(o)))return!1;(o=s.clone$1(o)).layers=Ip(o.layers);const c=function(_,v){if(!_)return[{command:ur.setStyle,args:[v]}];let T=[];try{if(!A(_.version,v.version))return[{command:ur.setStyle,args:[v]}];A(_.center,v.center)||T.push({command:ur.setCenter,args:[v.center]}),A(_.zoom,v.zoom)||T.push({command:ur.setZoom,args:[v.zoom]}),A(_.bearing,v.bearing)||T.push({command:ur.setBearing,args:[v.bearing]}),A(_.pitch,v.pitch)||T.push({command:ur.setPitch,args:[v.pitch]}),A(_.sprite,v.sprite)||T.push({command:ur.setSprite,args:[v.sprite]}),A(_.glyphs,v.glyphs)||T.push({command:ur.setGlyphs,args:[v.glyphs]}),A(_.transition,v.transition)||T.push({command:ur.setTransition,args:[v.transition]}),A(_.light,v.light)||T.push({command:ur.setLight,args:[v.light]}),A(_.fog,v.fog)||T.push({command:ur.setFog,args:[v.fog]}),A(_.projection,v.projection)||T.push({command:ur.setProjection,args:[v.projection]});const S={},M=[];(function(D,$,W,K){let X;for(X in $=$||{},D=D||{})D.hasOwnProperty(X)&&($.hasOwnProperty(X)||Sl(X,W,K));for(X in $){if(!$.hasOwnProperty(X))continue;const Y=$[X];D.hasOwnProperty(X)?A(D[X],Y)||(D[X].type==="geojson"&&Y.type==="geojson"&&$c(D,$,X)?W.push({command:ur.setGeoJSONSourceData,args:[X,Y.data]}):Rh(X,$,W,K)):zh(X,$,W)}})(_.sources,v.sources,M,S);const L=[];_.layers&&_.layers.forEach(D=>{D.source&&S[D.source]?T.push({command:ur.removeLayer,args:[D.id]}):L.push(D)});let k=_.terrain;k&&S[k.source]&&(T.push({command:ur.setTerrain,args:[void 0]}),k=void 0),T=T.concat(M),A(k,v.terrain)||T.push({command:ur.setTerrain,args:[v.terrain]}),function(D,$,W){$=$||[];const K=(D=D||[]).map(Co),X=$.map(Co),Y=D.reduce(Dh,{}),B=$.reduce(Dh,{}),H=K.slice(),re=Object.create(null);let ne,pe,ge,me,be,xe,Ie;for(ne=0,pe=0;ne<K.length;ne++)ge=K[ne],B.hasOwnProperty(ge)?pe++:(W.push({command:ur.removeLayer,args:[ge]}),H.splice(H.indexOf(ge,pe),1));for(ne=0,pe=0;ne<X.length;ne++)ge=X[X.length-1-ne],H[H.length-1-ne]!==ge&&(Y.hasOwnProperty(ge)?(W.push({command:ur.removeLayer,args:[ge]}),H.splice(H.lastIndexOf(ge,H.length-pe),1)):pe++,xe=H[H.length-ne],W.push({command:ur.addLayer,args:[B[ge],xe]}),H.splice(H.length-ne,0,ge),re[ge]=!0);for(ne=0;ne<X.length;ne++)if(ge=X[ne],me=Y[ge],be=B[ge],!re[ge]&&!A(me,be))if(A(me.source,be.source)&&A(me["source-layer"],be["source-layer"])&&A(me.type,be.type)){for(Ie in ao(me.layout,be.layout,W,ge,null,ur.setLayoutProperty),ao(me.paint,be.paint,W,ge,null,ur.setPaintProperty),A(me.filter,be.filter)||W.push({command:ur.setFilter,args:[ge,be.filter]}),A(me.minzoom,be.minzoom)&&A(me.maxzoom,be.maxzoom)||W.push({command:ur.setLayerZoomRange,args:[ge,be.minzoom,be.maxzoom]}),me)me.hasOwnProperty(Ie)&&Ie!=="layout"&&Ie!=="paint"&&Ie!=="filter"&&Ie!=="metadata"&&Ie!=="minzoom"&&Ie!=="maxzoom"&&(Ie.indexOf("paint.")===0?ao(me[Ie],be[Ie],W,ge,Ie.slice(6),ur.setPaintProperty):A(me[Ie],be[Ie])||W.push({command:ur.setLayerProperty,args:[ge,Ie,be[Ie]]}));for(Ie in be)be.hasOwnProperty(Ie)&&!me.hasOwnProperty(Ie)&&Ie!=="layout"&&Ie!=="paint"&&Ie!=="filter"&&Ie!=="metadata"&&Ie!=="minzoom"&&Ie!=="maxzoom"&&(Ie.indexOf("paint.")===0?ao(me[Ie],be[Ie],W,ge,Ie.slice(6),ur.setPaintProperty):A(me[Ie],be[Ie])||W.push({command:ur.setLayerProperty,args:[ge,Ie,be[Ie]]}))}else W.push({command:ur.removeLayer,args:[ge]}),xe=H[H.lastIndexOf(ge)+1],W.push({command:ur.addLayer,args:[be,xe]})}(L,v.layers,T)}catch(S){console.warn("Unable to compute style diff:",S),T=[{command:ur.setStyle,args:[v]}]}return T}(this.serialize(),o).filter(_=>!(_.command in U0));if(c.length===0)return!1;const m=c.filter(_=>!(_.command in Zc));if(m.length>0)throw new Error(`Unimplemented: ${m.map(_=>_.command).join(", ")}.`);return c.forEach(_=>{_.command!=="setTransition"&&_.command!=="setProjection"&&this[_.command].apply(this,_.args)}),this.stylesheet=o,this._updateMapProjection(),!0}addImage(o,c){return this.getImage(o)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(o,c),this._afterImageUpdated(o),this)}updateImage(o,c){this.imageManager.updateImage(o,c)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){return this.getImage(o)?(this.imageManager.removeImage(o),this._afterImageUpdated(o),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(o,c,m={}){if(this._checkLoaded(),this.getSource(o)!==void 0)throw new Error("There is already a source with this ID");if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(s.validateSource,`sources.${o}`,c,null,m))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const _=Zt(o,c,this.dispatcher,this);_.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(o),source:_.serialize(),sourceId:o}));const v=T=>{const S=(T?"symbol:":"other:")+o,M=this._sourceCaches[S]=new s.SourceCache(S,_,T);(T?this._symbolSourceCaches:this._otherSourceCaches)[o]=M,M.style=this,M.onAdd(this.map)};v(!1),c.type!=="vector"&&c.type!=="geojson"||v(!0),_.onAdd&&_.onAdd(this.map),this._changed=!0}removeSource(o){this._checkLoaded();const c=this.getSource(o);if(!c)throw new Error("There is no source with this ID");for(const _ in this._layers)if(this._layers[_].source===o)return this.fire(new s.ErrorEvent(new Error(`Source "${o}" cannot be removed while layer "${_}" is using it.`)));if(this.terrain&&this.terrain.get().source===o)return this.fire(new s.ErrorEvent(new Error(`Source "${o}" cannot be removed while terrain is using it.`)));const m=this._getSourceCaches(o);for(const _ of m)delete this._sourceCaches[_.id],delete this._updatedSources[_.id],_.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:_.getSource().id})),_.setEventedParent(null),_.clearTiles();return delete this._otherSourceCaches[o],delete this._symbolSourceCaches[o],c.setEventedParent(null),c.onRemove&&c.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(o,c){this._checkLoaded(),this.getSource(o).setData(c),this._changed=!0}getSource(o){const c=this._getSourceCache(o);return c&&c.getSource()}_getSources(){const o=[];for(const c in this._otherSourceCaches){const m=this._getSourceCache(c);m&&o.push(m.getSource())}return o}addLayer(o,c,m={}){this._checkLoaded();const _=o.id;if(this.getLayer(_))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${_}" already exists on this map`)));let v;if(o.type==="custom"){if(ls(this,s.validateCustomStyleLayer(o)))return;v=s.createStyleLayer(o)}else{if(typeof o.source=="object"&&(this.addSource(_,o.source),o=s.clone$1(o),o=s.extend(o,{source:_})),this._validate(s.validateLayer,`layers.${_}`,o,{arrayIndex:-1},m))return;v=s.createStyleLayer(o),this._validateLayer(v),v.setEventedParent(this,{layer:{id:_}}),this._serializedLayers[v.id]=v.serialize(),this._updateLayerCount(v,!0)}const T=c?this._order.indexOf(c):this._order.length;if(c&&T===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`)));this._order.splice(T,0,_),this._layerOrderChanged=!0,this._layers[_]=v;const S=this._getLayerSourceCache(v);if(this._removedLayers[_]&&v.source&&S&&v.type!=="custom"){const M=this._removedLayers[_];delete this._removedLayers[_],M.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",S.pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(o,c){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new s.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===c)return;const m=this._order.indexOf(o);this._order.splice(m,1);const _=c?this._order.indexOf(c):this._order.length;c&&_===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${c}" does not exist on this map.`))):(this._order.splice(_,0,o),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(o){this._checkLoaded();const c=this._layers[o];if(!c)return void this.fire(new s.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be removed.`)));c.setEventedParent(null),this._updateLayerCount(c,!1);const m=this._order.indexOf(o);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=c,delete this._layers[o],delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],c.onRemove&&c.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(o){return this._layers[o]}hasLayer(o){return o in this._layers}hasLayerType(o){for(const c in this._layers)if(this._layers[c].type===o)return!0;return!1}setLayerZoomRange(o,c,m){this._checkLoaded();const _=this.getLayer(o);_?_.minzoom===c&&_.maxzoom===m||(c!=null&&(_.minzoom=c),m!=null&&(_.maxzoom=m),this._updateLayer(_)):this.fire(new s.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(o,c,m={}){this._checkLoaded();const _=this.getLayer(o);if(_){if(!A(_.filter,c))return c==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(s.validateFilter,`layers.${_.id}.filter`,c,{layerType:_.type},m)||(_.filter=s.clone$1(c),this._updateLayer(_)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be filtered.`)))}getFilter(o){const c=this.getLayer(o);return c&&s.clone$1(c.filter)}setLayoutProperty(o,c,m,_={}){this._checkLoaded();const v=this.getLayer(o);v?A(v.getLayoutProperty(c),m)||(v.setLayoutProperty(c,m,_),this._updateLayer(v)):this.fire(new s.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(o,c){const m=this.getLayer(o);if(m)return m.getLayoutProperty(c);this.fire(new s.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style.`)))}setPaintProperty(o,c,m,_={}){this._checkLoaded();const v=this.getLayer(o);v?A(v.getPaintProperty(c),m)||(v.setPaintProperty(c,m,_)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[o]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${o}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(o,c){const m=this.getLayer(o);return m&&m.getPaintProperty(c)}setFeatureState(o,c){this._checkLoaded();const m=o.source,_=o.sourceLayer,v=this.getSource(m);if(!v)return void this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const T=v.type;if(T==="geojson"&&_)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(T==="vector"&&!_)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));o.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const S=this._getSourceCaches(m);for(const M of S)M.setFeatureState(_,o.id,c)}removeFeatureState(o,c){this._checkLoaded();const m=o.source,_=this.getSource(m);if(!_)return void this.fire(new s.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const v=_.type,T=v==="vector"?o.sourceLayer:void 0;if(v==="vector"&&!T)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(c&&typeof o.id!="string"&&typeof o.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const S=this._getSourceCaches(m);for(const M of S)M.removeFeatureState(T,o.id,c)}getFeatureState(o){this._checkLoaded();const c=o.source,m=o.sourceLayer,_=this.getSource(c);if(_){if(_.type!=="vector"||m)return o.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(c)[0].getFeatureState(m,o.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const o={};for(const c in this._sourceCaches){const m=this._sourceCaches[c].getSource();o[m.id]||(o[m.id]=m.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:o,layers:this._serializeLayers(this._order)},c=>c!==void 0)}_updateLayer(o){this._updatedLayers[o.id]=!0;const c=this._getLayerSourceCache(o);o.source&&!this._updatedSources[o.source]&&c&&c.getSource().type!=="raster"&&(this._updatedSources[o.source]="reload",c.pause()),this._changed=!0,o.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(o){const c=T=>this._layers[T].type==="fill-extrusion",m={},_=[];for(let T=this._order.length-1;T>=0;T--){const S=this._order[T];if(c(S)){m[S]=T;for(const M of o){const L=M[S];if(L)for(const k of L)_.push(k)}}}_.sort((T,S)=>S.intersectionZ-T.intersectionZ);const v=[];for(let T=this._order.length-1;T>=0;T--){const S=this._order[T];if(c(S))for(let M=_.length-1;M>=0;M--){const L=_[M].feature;if(m[L.layer.id]<T)break;v.push(L),_.pop()}else for(const M of o){const L=M[S];if(L)for(const k of L)v.push(k.feature)}}return v}queryRenderedFeatures(o,c,m){c&&c.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",c.filter,null,c);const _={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const M of c.layers){const L=this._layers[M];if(!L)return this.fire(new s.ErrorEvent(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];_[L.source]=!0}}const v=[];c.availableImages=this._availableImages;const T=c&&c.layers?c.layers.some(M=>{const L=this.getLayer(M);return L&&L.is3D()}):this.has3DLayers(),S=qt.createFromScreenPoints(o,m);for(const M in this._sourceCaches){const L=this._sourceCaches[M].getSource().id;c.layers&&!_[L]||v.push(Ur(this._sourceCaches[M],this._layers,this._serializedLayers,S,c,m,T,!!this.map._showQueryGeometry))}return this.placement&&v.push(function(M,L,k,D,$,W,K){const X={},Y=W.queryRenderedSymbols(D),B=[];for(const H of Object.keys(Y).map(Number))B.push(K[H]);B.sort(Nn);for(const H of B){const re=H.featureIndex.lookupSymbolFeatures(Y[H.bucketInstanceId],L,H.bucketIndex,H.sourceLayerIndex,$.filter,$.layers,$.availableImages,M);for(const ne in re){const pe=X[ne]=X[ne]||[],ge=re[ne];ge.sort((me,be)=>{const xe=H.featureSortOrder;if(xe){const Ie=xe.indexOf(me.featureIndex);return xe.indexOf(be.featureIndex)-Ie}return be.featureIndex-me.featureIndex});for(const me of ge)pe.push(me)}}for(const H in X)X[H].forEach(re=>{const ne=re.feature,pe=k(M[H]);if(!pe)return;const ge=pe.getFeatureState(ne.layer["source-layer"],ne.id);ne.source=ne.layer.source,ne.layer["source-layer"]&&(ne.sourceLayer=ne.layer["source-layer"]),ne.state=ge});return X}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),S.screenGeometry,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(o,c){c&&c.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",c.filter,null,c);const m=this._getSourceCaches(o);let _=[];for(const v of m)_=_.concat(tn(v,c));return _}addSourceType(o,c,m){return co.getSourceType(o)?m(new Error(`A source type called "${o}" already exists.`)):(co.setSourceType(o,c),c.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:o,url:c.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(o,c={}){this._checkLoaded();const m=this.light.getLight();let _=!1;for(const T in o)if(!A(o[T],m[T])){_=!0;break}if(!_)return;const v=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(o,c),this.light.updateTransitions(v)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(o,c=1){if(this._checkLoaded(),!o)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let m=o;if(c===1){if(typeof m.source=="object"){const _="terrain-dem-src";this.addSource(_,m.source),m=s.clone$1(m),m=s.extend(m,{source:_})}if(this._validate(s.validateTerrain,"terrain",m))return}if(!this.terrain||this.terrain&&c!==this.terrain.drapeRenderMode){if(!m)return;this._createTerrain(m,c)}else{const _=this.terrain,v=_.get();for(const T of Object.keys(s.spec.terrain))!m.hasOwnProperty(T)&&s.spec.terrain[T].default&&(m[T]=s.spec.terrain[T].default);for(const T in m)if(!A(m[T],v[T])){_.set(m),this.stylesheet.terrain=m;const S=this._setTransitionParameters({duration:0});_.updateTransitions(S);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(o){const c=this.fog=new Et(o,this.map.transform);this.stylesheet.fog=o;const m=this._setTransitionParameters({duration:0});c.updateTransitions(m)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const o of this.map._markers)o._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(o){if(this._checkLoaded(),!o)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const c=this.fog,m=c.get();Object.keys(o).length===0&&c.set(o);for(const _ in o)if(!A(o[_],m[_])){c.set(o),this.stylesheet.fog=o;const v=this._setTransitionParameters({duration:0});c.updateTransitions(v);break}}else this._createFog(o);this._markersNeedUpdate=!0}_setTransitionParameters(o){return{now:s.exported.now(),transition:s.extend(o,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const o=this._order.filter(m=>this.isLayerDraped(this._layers[m])),c=this._order.filter(m=>!this.isLayerDraped(this._layers[m]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...o),this._drapedFirstOrder.push(...c)}_createTerrain(o,c){const m=this.terrain=new St(o,c);this.stylesheet.terrain=o,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const _=this._setTransitionParameters({duration:0});m.updateTransitions(_)}_force3DLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="fill-extrusion"&&this._updateLayer(c)}}_forceSymbolLayerUpdate(){for(const o in this._layers){const c=this._layers[o];c.type==="symbol"&&this._updateLayer(c)}}_validate(o,c,m,_,v={}){return(!v||v.validate!==!1)&&ls(this,o.call(s.validateStyle,s.extend({key:c,style:this.serialize(),value:m,styleSpec:s.spec},_)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this._sourceCaches)this._sourceCaches[o].clearTiles(),this._sourceCaches[o].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(o){const c=this._getSourceCaches(o);for(const m of c)m.clearTiles()}_reloadSource(o){const c=this._getSourceCaches(o);for(const m of c)m.resume(),m.reload()}_reloadSources(){for(const o of this._getSources())o.reload&&o.reload()}_updateSources(o){for(const c in this._sourceCaches)this._sourceCaches[c].update(o)}_generateCollisionBoxes(){for(const o in this._sourceCaches){const c=this._sourceCaches[o];c.resume(),c.reload()}}_updatePlacement(o,c,m,_,v=!1){let T=!1,S=!1;const M={};for(const L of this._order){const k=this._layers[L];if(k.type!=="symbol")continue;if(!M[k.source]){const $=this._getLayerSourceCache(k);if(!$)continue;M[k.source]=$.getRenderableIds(!0).map(W=>$.getTileByID(W)).sort((W,K)=>K.tileID.overscaledZ-W.tileID.overscaledZ||(W.tileID.isLessThan(K.tileID)?-1:1))}const D=this.crossTileSymbolIndex.addLayer(k,M[k.source],o.center.lng,o.projection);T=T||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),v=v||this._layerOrderChanged||m===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(v||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),o.zoom))&&(this.pauseablePlacement=new Vh(o,this._order,v,c,m,_,this.placement,this.fog&&o.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),S=!0),T&&this.pauseablePlacement.placement.setStale()),S||T)for(const L of this._order){const k=this._layers[L];k.type==="symbol"&&this.placement.updateLayerOpacities(k,M[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const o in this._sourceCaches)this._sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,c,m){this.imageManager.getImages(c.icons,m),this._updateTilesForChangedImages();const _=v=>{v&&v.setDependencies(c.tileID.key,c.type,c.icons)};_(this._otherSourceCaches[c.source]),_(this._symbolSourceCaches[c.source])}getGlyphs(o,c,m){this.glyphManager.getGlyphs(c.stacks,m)}getResource(o,c,m){return s.makeRequest(c,m)}_getSourceCache(o){return this._otherSourceCaches[o]}_getLayerSourceCache(o){return o.type==="symbol"?this._symbolSourceCaches[o.source]:this._otherSourceCaches[o.source]}_getSourceCaches(o){const c=[];return this._otherSourceCaches[o]&&c.push(this._otherSourceCaches[o]),this._symbolSourceCaches[o]&&c.push(this._symbolSourceCaches[o]),c}_isSourceCacheLoaded(o){const c=this._getSourceCaches(o);return c.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${o}'`))),!1):c.every(m=>m.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}co.getSourceType=function(f){return jt[f]},co.setSourceType=function(f,o){jt[f]=o},co.registerForPluginStateChange=s.registerForPluginStateChange;var Hh=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Bs="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Lo=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,zl=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Oo=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Hc={},va={};const Rl=[];xa(Hh,Rl),xa(Lo,Rl),xa(zl,Rl),xa(Oo,Rl),Hc=hr("",Lo),va=hr(Oo,zl);const Dp=hr(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),qc=Hh,qh=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Wh={background:hr(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:hr(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:hr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:hr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:hr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:hr("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:hr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:hr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:hr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:hr(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:hr(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:hr(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:hr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:hr(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:hr(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:hr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:hr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:hr(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:hr(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bs),skyboxGradient:hr(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bs),skyboxCapture:hr(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:hr(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:hr(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function xa(f,o){const c=f.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let m of c)if(m=m.trim(),m[0]==="#"&&m.includes("if")&&!m.includes("endif")){m=m.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const _=m.split(" ");for(const v of _)o.includes(v)||o.push(v)}}function hr(f,o){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=o.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),_={},v=[...Rl];return xa(f,v),xa(o,v),{fragmentSource:f=f.replace(c,(T,S,M,L,k)=>(_[k]=!0,S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
varying ${M} ${L} ${k};
#else
uniform ${M} ${L} u_${k};
#endif
`:`
#ifdef HAS_UNIFORM_u_${k}
    ${M} ${L} ${k} = u_${k};
#endif
`)),vertexSource:o=o.replace(c,(T,S,M,L,k)=>{const D=L==="float"?"vec2":"vec4",$=k.match(/color/)?"color":D;return _[k]?S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${M} ${D} a_${k};
varying ${M} ${L} ${k};
#else
uniform ${M} ${L} u_${k};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = a_${k};
#else
    ${M} ${L} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${k} = unpack_mix_${$}(a_${k}, u_${k}_t);
#else
    ${M} ${L} ${k} = u_${k};
#endif
`:S==="define"?`
#ifndef HAS_UNIFORM_u_${k}
uniform lowp float u_${k}_t;
attribute ${M} ${D} a_${k};
#else
uniform ${M} ${L} u_${k};
#endif
`:$==="vec4"?`
#ifndef HAS_UNIFORM_u_${k}
    ${M} ${L} ${k} = a_${k};
#else
    ${M} ${L} ${k} = u_${k};
#endif
`:`
#ifndef HAS_UNIFORM_u_${k}
    ${M} ${L} ${k} = unpack_mix_${$}(a_${k}, u_${k}_t);
#else
    ${M} ${L} ${k} = u_${k};
#endif
`}),staticAttributes:m,usedDefines:v}}class V0{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(o,c,m,_,v,T,S){this.context=o;let M=this.boundPaintVertexBuffers.length!==_.length;for(let k=0;!M&&k<_.length;k++)this.boundPaintVertexBuffers[k]!==_[k]&&(M=!0);let L=this.boundDynamicVertexBuffers.length!==S.length;for(let k=0;!L&&k<S.length;k++)this.boundDynamicVertexBuffers[k]!==S[k]&&(L=!0);if(!o.extVertexArrayObject||!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==m||M||L||this.boundIndexBuffer!==v||this.boundVertexOffset!==T)this.freshBind(c,m,_,v,T,S);else{o.bindVertexArrayOES.set(this.vao);for(const k of S)k&&k.bind();v&&v.dynamicDraw&&v.bind()}}freshBind(o,c,m,_,v,T){let S;const M=o.numAttributes,L=this.context,k=L.gl;if(L.extVertexArrayObject)this.vao&&this.destroy(),this.vao=L.extVertexArrayObject.createVertexArrayOES(),L.bindVertexArrayOES.set(this.vao),S=0,this.boundProgram=o,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=_,this.boundVertexOffset=v,this.boundDynamicVertexBuffers=T;else{S=L.currentNumAttributes||0;for(let D=M;D<S;D++)k.disableVertexAttribArray(D)}c.enableAttributes(k,o),c.bind(),c.setVertexAttribPointers(k,o,v);for(const D of m)D.enableAttributes(k,o),D.bind(),D.setVertexAttribPointers(k,o,v);for(const D of T)D&&(D.enableAttributes(k,o),D.bind(),D.setVertexAttribPointers(k,o,v));_&&_.bind(),L.currentNumAttributes=M}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Xh(f,o){const c=Math.pow(2,o.canonical.z),m=o.canonical.y;return[new s.MercatorCoordinate(0,m/c).toLngLat().lat,new s.MercatorCoordinate(0,(m+1)/c).toLngLat().lat]}function Bp(f,o,c,m,_,v,T){const S=f.context,M=S.gl,L=c.fbo;if(!L)return;f.prepareDrawTile();const k=f.useProgram("hillshade");S.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,L.colorAttachment.get());const D=((X,Y,B,H)=>{const re=B.paint.get("hillshade-shadow-color"),ne=B.paint.get("hillshade-highlight-color"),pe=B.paint.get("hillshade-accent-color");let ge=B.paint.get("hillshade-illumination-direction")*(Math.PI/180);B.paint.get("hillshade-illumination-anchor")==="viewport"&&(ge-=X.transform.angle);const me=!X.options.moving;return{u_matrix:H||X.transform.calculateProjMatrix(Y.tileID.toUnwrapped(),me),u_image:0,u_latrange:Xh(0,Y.tileID),u_light:[B.paint.get("hillshade-exaggeration"),ge],u_shadow:re,u_highlight:ne,u_accent:pe}})(f,c,m,f.terrain?o.projMatrix:null);f.prepareDrawProgram(S,k,o.toUnwrapped());const{tileBoundsBuffer:$,tileBoundsIndexBuffer:W,tileBoundsSegments:K}=f.getTileBoundsBuffers(c);k.draw(S,M.TRIANGLES,_,v,T,s.CullFaceMode.disabled,D,m.id,$,W,K)}function Kh(f,o,c){if(!o.needsDEMTextureUpload)return;const m=f.context,_=m.gl;m.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||f.getTileTexture(c.stride);const v=c.getPixels();o.demTexture?o.demTexture.update(v,{premultiply:!1}):o.demTexture=new s.Texture(m,v,_.RGBA,{premultiply:!1}),o.needsDEMTextureUpload=!1}function Fp(f,o,c,m,_,v){const T=f.context,S=T.gl;if(!o.dem)return;const M=o.dem;if(T.activeTexture.set(S.TEXTURE1),Kh(f,o,M),!o.demTexture)return;o.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);const L=M.dim;T.activeTexture.set(S.TEXTURE0);let k=o.fbo;if(!k){const K=new s.Texture(T,{width:L,height:L,data:null},S.RGBA);K.bind(S.LINEAR,S.CLAMP_TO_EDGE),k=o.fbo=T.createFramebuffer(L,L,!0),k.colorAttachment.set(K.texture)}T.bindFramebuffer.set(k.framebuffer),T.viewport.set([0,0,L,L]);const{tileBoundsBuffer:D,tileBoundsIndexBuffer:$,tileBoundsSegments:W}=f.getMercatorTileBoundsBuffers();f.useProgram("hillshadePrepare").draw(T,S.TRIANGLES,m,_,v,s.CullFaceMode.disabled,((K,X)=>{const Y=X.stride,B=s.create();return s.ortho(B,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(B,B,[0,-s.EXTENT,0]),{u_matrix:B,u_image:1,u_dimension:[Y,Y],u_zoom:K.overscaledZ,u_unpack:X.unpackVector}})(o.tileID,M),c.id,D,$,W),o.needsHillshadePrepare=!1}const Yh=f=>({u_matrix:new s.UniformMatrix4f(f),u_image0:new s.Uniform1i(f),u_skirt_height:new s.Uniform1f(f)}),ba=(f,o)=>({u_matrix:f,u_image0:0,u_skirt_height:o}),Wc=(f,o,c,m,_,v,T,S,M,L,k,D,$,W,K)=>({u_proj_matrix:Float32Array.from(f),u_globe_matrix:o,u_normalize_matrix:Float32Array.from(m),u_merc_matrix:c,u_zoom_transition:_,u_merc_center:v,u_image0:0,u_frustum_tl:T,u_frustum_tr:S,u_frustum_br:M,u_frustum_bl:L,u_globe_pos:k,u_globe_radius:D,u_viewport:$,u_grid_matrix:K?Float32Array.from(K):new Float32Array(9),u_skirt_height:W});function wa(f,o){return f!=null&&o!=null&&!(!f.hasData()||!o.hasData())&&f.demTexture!=null&&o.demTexture!=null&&f.tileID.key!==o.tileID.key}const zo=new class{constructor(){this.operations={}}newMorphing(f,o,c,m,_){if(f in this.operations){const v=this.operations[f];v.to.tileID.key!==c.tileID.key&&(v.queued=c)}else this.operations[f]={startTime:m,phase:0,duration:_,from:o,to:c,queued:null}}getMorphValuesForProxy(f){if(!(f in this.operations))return null;const o=this.operations[f];return{from:o.from,to:o.to,phase:o.phase}}update(f){for(const o in this.operations){const c=this.operations[o];for(c.phase=(f-c.startTime)/c.duration;c.phase>=1||!this._validOp(c);)if(!this._nextOp(c,f)){delete this.operations[o];break}}}_nextOp(f,o){return!!f.queued&&(f.from=f.to,f.to=f.queued,f.queued=null,f.phase=0,f.startTime=o,!0)}_validOp(f){return f.from.hasData()&&f.to.hasData()}},Fs={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Xc(f){return 6*Math.pow(1.5,22-f)}function Np(f,o){const c=1<<f.z;return!o&&(f.x===0||f.x===c-1)||f.y===0||f.y===c-1}const Dl=f=>({u_matrix:f});function Qh(f,o,c,m,_){if(_>0){const v=s.exported.now(),T=(v-f.timeAdded)/_,S=o?(v-o.timeAdded)/_:-1,M=c.getSource(),L=m.coveringZoomLevel({tileSize:M.tileSize,roundZoom:M.roundZoom}),k=!o||Math.abs(o.tileID.overscaledZ-L)>Math.abs(f.tileID.overscaledZ-L),D=k&&f.refreshedUponExpiration?1:s.clamp(k?T:1-S,0,1);return f.refreshedUponExpiration&&T>=1&&(f.refreshedUponExpiration=!1),o?{opacity:1,mix:1-D}:{opacity:D,mix:0}}return{opacity:1,mix:0}}class Jh extends s.SourceCache{constructor(o){const c={type:"raster-dem",maxzoom:o.transform.maxZoom},m=new _t(ma(),null),_=Zt("mock-dem",c,m,o.style);super("mock-dem",_,!1),_.setEventedParent(this),this._sourceLoaded=!0}_loadTile(o,c){o.state="loaded",c(null)}}class Kc extends s.SourceCache{constructor(o){const c=Zt("proxy",{type:"geojson",maxzoom:o.transform.maxZoom},new _t(ma(),null),o.style);super("proxy",c,!1),c.setEventedParent(this),this.map=this.getSource().map=o,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(o,c,m){if(o.freezeTileCoverage)return;this.transform=o;const _=o.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((v,T)=>{if(v[T.key]="",!this._tiles[T.key]){const S=new s.Tile(T,this._source.tileSize*T.overscaleFactor(),o.tileZoom);S.state="loaded",this._tiles[T.key]=S}return v},{});for(const v in this._tiles)v in _||(this.freeFBO(v),this._tiles[v].unloadVectorData(),delete this._tiles[v])}freeFBO(o){const c=this.proxyCachedFBO[o];if(c!==void 0){const m=Object.values(c);this.renderCachePool.push(...m),delete this.proxyCachedFBO[o]}}deallocRenderCache(){this.renderCache.forEach(o=>o.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Yc extends s.OverscaledTileID{constructor(o,c,m){super(o.overscaledZ,o.wrap,o.canonical.z,o.canonical.x,o.canonical.y),this.proxyTileKey=c,this.projMatrix=m}}class ed extends s.Elevation{constructor(o,c){super(),this.painter=o,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[m,_,v]=function(M){const L=new s.StructArrayLayout2i4,k=new s.StructArrayLayout3ui6,D=131;L.reserve(17161),k.reserve(33800);const $=s.EXTENT/128,W=s.EXTENT+$/2,K=W+$;for(let Y=-$;Y<K;Y+=$)for(let B=-$;B<K;B+=$){const H=B<0||B>W||Y<0||Y>W?24575:0,re=s.clamp(Math.round(B),0,s.EXTENT),ne=s.clamp(Math.round(Y),0,s.EXTENT);L.emplaceBack(re+H,ne)}const X=(Y,B)=>{const H=B*D+Y;k.emplaceBack(H+1,H,H+D),k.emplaceBack(H+D,H+D+1,H+1)};for(let Y=1;Y<129;Y++)for(let B=1;B<129;B++)X(B,Y);return[0,129].forEach(Y=>{for(let B=0;B<130;B++)X(B,Y),X(Y,B)}),[L,k,32768]}(),T=o.context;this.gridBuffer=T.createVertexBuffer(m,s.posAttributes.members),this.gridIndexBuffer=T.createIndexBuffer(_),this.gridSegments=s.SegmentVector.simpleSegment(0,0,m.length,_.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,m.length,v),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Kc(c.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const S=T.gl;this._overlapStencilMode=new s.StencilMode({func:S.GEQUAL,mask:255},0,255,S.KEEP,S.KEEP,S.REPLACE),this._previousZoom=o.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=c,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Jh(c.map)}set style(o){o.on("data",this._onStyleDataEvent.bind(this)),o.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=o,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(o,c,m){if(o&&o.terrain){this._style!==o&&(this.style=o),this.enabled=!0;const _=o.terrain.properties;this.sourceCache=o.terrain.drapeRenderMode===0?this._mockSourceCache:o._getSourceCache(_.get("source")),this._exaggeration=_.get("exaggeration");const v=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const T=this.getScaledDemTileSize();this.sourceCache.update(c,T,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,v(),this._initializing=!0),v(),c.updateElevation(!0,m),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(c),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(o){this._findCoveringTileCache[o]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const o=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||o.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${o.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${o.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(o){o.coord&&o.dataType==="source"?this._clearRenderCacheForTile(o.sourceCacheId,o.coord):o.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const o in this._style._sourceCaches)this._style._sourceCaches[o].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(o=>o.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const o=2*this.proxySourceCache.getSource().tileSize;return[o,o]}set useVertexMorphing(o){this._useVertexMorphing=o}updateTileBinding(o){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const c=this.proxySourceCache,m=this.painter.transform;this._initializing&&(this._initializing=m._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(m.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const _=this.proxyCoords=c.getIds().map(M=>{const L=c.getTileByID(M).tileID;return L.projMatrix=m.calculateProjMatrix(L.toUnwrapped()),L});(function(M,L){const k=L.transform.pointCoordinate(L.transform.getCameraPoint()),D=new s.Point(k.x,k.y);M.sort(($,W)=>{if(W.overscaledZ-$.overscaledZ)return W.overscaledZ-$.overscaledZ;const K=new s.Point($.canonical.x+(1<<$.canonical.z)*$.wrap,$.canonical.y),X=new s.Point(W.canonical.x+(1<<W.canonical.z)*W.wrap,W.canonical.y),Y=D.mult(1<<$.canonical.z);return Y.x-=.5,Y.y-=.5,Y.distSqr(K)-Y.distSqr(X)})})(_,this.painter),this._previousZoom=m.zoom;const v=this.proxyToSource||{};this.proxyToSource={},_.forEach(M=>{this.proxyToSource[M.key]={}}),this.terrainTileForTile={};const T=this._style._sourceCaches;for(const M in T){const L=T[M];if(!L.used||(L!==this.sourceCache&&this.resetTileLookupCache(L.id),this._setupProxiedCoordsForOrtho(L,o[M],v),L.usedForTerrain))continue;const k=o[M];L.getSource().reparseOverscaled&&this._assignTerrainTiles(k)}this.proxiedCoords[c.id]=_.map(M=>new Yc(M,M.key,this.orthoMatrix)),this._assignTerrainTiles(_),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(v),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const S={};this._visibleDemTiles=[];for(const M of this.proxyCoords){const L=this.terrainTileForTile[M.key];if(!L)continue;const k=L.tileID.key;k in S||(this._visibleDemTiles.push(L),S[k]=k)}}_assignTerrainTiles(o){this._initializing||o.forEach(c=>{if(this.terrainTileForTile[c.key])return;const m=this._findTileCoveringTileID(c,this.sourceCache);m&&(this.terrainTileForTile[c.key]=m)})}_prepareDEMTextures(){const o=this.painter.context,c=o.gl;for(const m in this.terrainTileForTile){const _=this.terrainTileForTile[m],v=_.dem;!v||_.demTexture&&!_.needsDEMTextureUpload||(o.activeTexture.set(c.TEXTURE1),Kh(this.painter,_,v))}}_prepareDemTileUniforms(o,c,m,_){if(!c||c.demTexture==null)return!1;const v=o.tileID.canonical,T=Math.pow(2,c.tileID.canonical.z-v.z),S=_||"";return m[`u_dem_tl${S}`]=[v.x*T%1,v.y*T%1],m[`u_dem_scale${S}`]=T,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const o=this.painter.context,c=o.gl;if(!this._emptyDepthBufferTexture){const m=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(o,m,c.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let o=0;const c=this._visibleDemTiles.reduce((m,_)=>{if(!_.dem)return m;const v=_.dem.tree.minimums[0];return v>0&&o++,m+v},0);return o?c/o:0}_updateEmptyDEMTexture(){const o=this.painter.context,c=o.gl;o.activeTexture.set(c.TEXTURE2);const m=this._getLoadedAreaMinimum(),_=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(m,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let v=this._emptyDEMTexture;return v?v.update(_,{premultiply:!1}):v=this._emptyDEMTexture=new s.Texture(o,_,c.RGBA,{premultiply:!1}),v}setupElevationDraw(o,c,m){const _=this.painter.context,v=_.gl,T=(S=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(S),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var S;T.u_dem_size=this.sourceCache.getSource().tileSize,T.u_exaggeration=this.exaggeration();let M=null,L=null,k=1;if(m&&m.morphing&&this._useVertexMorphing){const D=m.morphing.srcDemTile,$=m.morphing.dstDemTile;k=m.morphing.phase,D&&$&&(this._prepareDemTileUniforms(o,D,T,"_prev")&&(L=D),this._prepareDemTileUniforms(o,$,T)&&(M=$))}if(L&&M?(_.activeTexture.set(v.TEXTURE2),M.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE,v.NEAREST),_.activeTexture.set(v.TEXTURE4),L.demTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE,v.NEAREST),T.u_dem_lerp=k):(M=this.terrainTileForTile[o.tileID.key],_.activeTexture.set(v.TEXTURE2),(this._prepareDemTileUniforms(o,M,T)?M.demTexture:this.emptyDEMTexture).bind(v.NEAREST,v.CLAMP_TO_EDGE)),_.activeTexture.set(v.TEXTURE3),m&&m.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE),this._depthFBO&&(T.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(v.NEAREST,v.CLAMP_TO_EDGE),T.u_depth_size_inv=[1,1]),m&&m.useMeterToDem&&M){const D=(1<<M.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;T.u_meter_to_dem=D}if(m&&m.labelPlaneMatrixInv&&(T.u_label_plane_matrix_inv=m.labelPlaneMatrixInv),c.setTerrainUniformValues(_,T),this.painter.transform.projection.name==="globe"){const D=this.globeUniformValues(this.painter.transform,o.tileID.canonical,m&&m.useDenormalizedUpVectorScale);c.setGlobeUniformValues(_,D)}}globeUniformValues(o,c,m){const _=o.projection;return{u_tile_tl_up:_.upVector(c,0,0),u_tile_tr_up:_.upVector(c,s.EXTENT,0),u_tile_br_up:_.upVector(c,s.EXTENT,s.EXTENT),u_tile_bl_up:_.upVector(c,0,s.EXTENT),u_tile_up_scale:m?s.globeMetersToEcef(1):_.upVectorScale(c,o.center.lat,o.worldSize).metersToTile}}renderToBackBuffer(o){const c=this.painter,m=this.painter.context;o.length!==0&&(m.bindFramebuffer.set(null),m.viewport.set([0,0,c.width,c.height]),c.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(_,v,T,S,M){if(_.transform.projection.name==="globe")(function(L,k,D,$,W){const K=L.context,X=K.gl;let Y,B;const H=L.options.showTerrainWireframe?2:0,re=L.transform,ne=s.globeUseCustomAntiAliasing(L,K,re),pe=(Qe,Pe)=>{if(B===Qe)return;const $e=[Fs[Qe],"PROJECTION_GLOBE_VIEW"];ne&&$e.push("CUSTOM_ANTIALIASING"),Pe&&$e.push(Fs[H]),Y=L.useProgram("globeRaster",null,$e),B=Qe},ge=L.colorModeForRenderPass(),me=new s.DepthMode(X.LEQUAL,s.DepthMode.ReadWrite,L.depthRangeFor3D);zo.update(W);const be=s.calculateGlobeMercatorMatrix(re),xe=[s.mercatorXfromLng(re.center.lng),s.mercatorYfromLat(re.center.lat)],Ie=H?[!1,!0]:[!1],Je=L.globeSharedBuffers,Ce=[re.width*s.exported.devicePixelRatio,re.height*s.exported.devicePixelRatio],Ge=Float32Array.from(re.globeMatrix),Re={useDenormalizedUpVectorScale:!0};if(Ie.forEach(Qe=>{const Pe=L.transform,$e=Xc(Pe.zoom)*k.exaggeration();B=-1;const tt=Qe?X.LINES:X.TRIANGLES;for(const Ke of $){const rt=D.getTile(Ke),At=s.StencilMode.disabled,Rt=k.prevTerrainTileForTile[Ke.key],xt=k.terrainTileForTile[Ke.key];wa(Rt,xt)&&zo.newMorphing(Ke.key,Rt,xt,W,250),K.activeTexture.set(X.TEXTURE0),rt.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE);const kt=zo.getMorphValuesForProxy(Ke.key),Kt=kt?1:0;kt&&s.extend$1(Re,{morphing:{srcDemTile:kt.from,dstDemTile:kt.to,phase:s.easeCubicInOut(kt.phase)}});const Ht=s.tileCornersToBounds(Ke.canonical),Tt=s.getLatitudinalLod(Ht.getCenter().lat),fr=s.getGridMatrix(Ke.canonical,Ht,Tt,Pe.worldSize/Pe._pixelsPerMercatorPixel),_r=s.globeNormalizeECEF(s.globeTileBounds(Ke.canonical)),yr=Wc(Pe.projMatrix,Ge,be,_r,s.globeToMercatorTransition(Pe.zoom),xe,Pe.frustumCorners.TL,Pe.frustumCorners.TR,Pe.frustumCorners.BR,Pe.frustumCorners.BL,Pe.globeCenterInViewSpace,Pe.globeRadius,Ce,$e,fr);if(pe(Kt,Qe),k.setupElevationDraw(rt,Y,Re),L.prepareDrawProgram(K,Y,Ke.toUnwrapped()),Je){const[vr,Un,An]=Qe?Je.getWirefameBuffers(L.context,Tt):Je.getGridBuffers(Tt,$e!==0);Y.draw(K,tt,me,At,ge,s.CullFaceMode.backCCW,yr,"globe_raster",vr,Un,An)}}}),Je){const Qe=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];ne&&Qe.push("CUSTOM_ANTIALIASING"),Y=L.useProgram("globeRaster",null,Qe);for(const Pe of $){const{x:$e,y:tt,z:Ke}=Pe.canonical,rt=tt===0,At=tt===(1<<Ke)-1,[Rt,xt,kt,Kt]=Je.getPoleBuffers(Ke);if(Kt&&(rt||At)){const Ht=D.getTile(Pe);K.activeTexture.set(X.TEXTURE0),Ht.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE);let Tt=s.globePoleMatrixForTile(Ke,$e,re);const fr=s.globeNormalizeECEF(s.globeTileBounds(Pe.canonical)),_r=(yr,vr)=>yr.draw(K,X.TRIANGLES,me,s.StencilMode.disabled,ge,s.CullFaceMode.disabled,Wc(re.projMatrix,Tt,Tt,fr,0,xe,re.frustumCorners.TL,re.frustumCorners.TR,re.frustumCorners.BR,re.frustumCorners.BL,re.globeCenterInViewSpace,re.globeRadius,Ce,0),"globe_pole_raster",vr,kt,Kt);k.setupElevationDraw(Ht,Y,Re),L.prepareDrawProgram(K,Y,Pe.toUnwrapped()),rt&&_r(Y,Rt),At&&(Tt=s.scale(s.create(),Tt,[1,-1,1]),_r(Y,xt))}}}})(_,v,T,S,M);else{const L=_.context,k=L.gl;let D,$;const W=_.options.showTerrainWireframe?2:0,K=(re,ne)=>{if($===re)return;const pe=[Fs[re]];ne&&pe.push(Fs[W]),D=_.useProgram("terrainRaster",null,pe),$=re},X=_.colorModeForRenderPass(),Y=new s.DepthMode(k.LEQUAL,s.DepthMode.ReadWrite,_.depthRangeFor3D);zo.update(M);const B=_.transform,H=Xc(B.zoom)*v.exaggeration();(W?[!1,!0]:[!1]).forEach(re=>{$=-1;const ne=re?k.LINES:k.TRIANGLES,[pe,ge]=re?v.getWirefameBuffer():[v.gridIndexBuffer,v.gridSegments];for(const me of S){const be=T.getTile(me),xe=s.StencilMode.disabled,Ie=v.prevTerrainTileForTile[me.key],Je=v.terrainTileForTile[me.key];wa(Ie,Je)&&zo.newMorphing(me.key,Ie,Je,M,250),L.activeTexture.set(k.TEXTURE0),be.texture.bind(k.LINEAR,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST);const Ce=zo.getMorphValuesForProxy(me.key),Ge=Ce?1:0;let Re;Ce&&(Re={morphing:{srcDemTile:Ce.from,dstDemTile:Ce.to,phase:s.easeCubicInOut(Ce.phase)}});const Qe=ba(me.projMatrix,Np(me.canonical,B.renderWorldCopies)?H/10:H);K(Ge,re),v.setupElevationDraw(be,D,Re),_.prepareDrawProgram(L,D,me.toUnwrapped()),D.draw(L,ne,Y,xe,X,s.CullFaceMode.backCCW,Qe,"terrain_raster",v.gridBuffer,pe,ge)}})}}(c,this,this.proxySourceCache,o,this._updateTimestamp),this.renderingToTexture=!0,c.gpuTimingDeferredRenderEnd(),o.splice(0,o.length))}renderBatch(o){if(this._drapedRenderBatches.length===0)return o+1;this.renderingToTexture=!0;const c=this.painter,m=this.painter.context,_=this.proxySourceCache,v=this.proxiedCoords[_.id],T=this._drapedRenderBatches.shift(),S=[],M=c.style.order;let L=0;for(const k of v){const D=_.getTileByID(k.proxyTileKey),$=_.proxyCachedFBO[k.key]?_.proxyCachedFBO[k.key][o]:void 0,W=$!==void 0?_.renderCache[$]:this.pool[L++],K=$!==void 0;if(D.texture=W.tex,K&&!W.dirty){S.push(D.tileID);continue}let X;m.bindFramebuffer.set(W.fb.framebuffer),this.renderedToTile=!1,W.dirty&&(m.clear({color:s.Color.transparent,stencil:0}),W.dirty=!1);for(let Y=T.start;Y<=T.end;++Y){const B=c.style._layers[M[Y]];if(B.isHidden(c.transform.zoom))continue;const H=c.style._getLayerSourceCache(B),re=H?this.proxyToSource[k.key][H.id]:[k];if(!re)continue;const ne=re;m.viewport.set([0,0,W.fb.width,W.fb.height]),X!==(H?H.id:null)&&(this._setupStencil(W,re,B,H),X=H?H.id:null),c.renderLayer(c,H,B,ne)}this.renderedToTile?(W.dirty=!0,S.push(D.tileID)):K||--L,L===5&&(L=0,this.renderToBackBuffer(S))}return this.renderToBackBuffer(S),this.renderingToTexture=!1,m.bindFramebuffer.set(null),m.viewport.set([0,0,c.width,c.height]),T.end+1}postRender(){}renderCacheEfficiency(o){const c=o.order.length;if(c===0)return{efficiency:100};let m,_=0,v=0,T=!1;for(let S=0;S<c;++S){const M=o._layers[o.order[S]];this._style.isLayerDraped(M)?(T&&++_,++v):T||(T=!0,m=M.id)}return v===0?{efficiency:100}:{efficiency:100*(1-_/v),firstUndrapedLayer:m}}getMinElevationBelowMSL(){let o=0;return this._visibleDemTiles.filter(c=>c.dem).forEach(c=>{o=Math.min(o,c.dem.tree.minimums[0])}),o===0?o:(o-30)*this._exaggeration}raycast(o,c,m){if(!this._visibleDemTiles)return null;const _=this._visibleDemTiles.filter(v=>v.dem).map(v=>{const T=v.tileID,S=1<<T.overscaledZ,{x:M,y:L}=T.canonical,k=M/S,D=(M+1)/S,$=L/S,W=(L+1)/S;return{minx:k,miny:$,maxx:D,maxy:W,t:v.dem.tree.raycastRoot(k,$,D,W,o,c,m),tile:v}});_.sort((v,T)=>(v.t!==null?v.t:Number.MAX_VALUE)-(T.t!==null?T.t:Number.MAX_VALUE));for(const v of _){if(v.t==null)return null;const T=v.tile.dem.tree.raycast(v.minx,v.miny,v.maxx,v.maxy,o,c,m);if(T!=null)return T}return null}_createFBO(){const o=this.painter.context,c=o.gl,m=this.drapeBufferSize;o.activeTexture.set(c.TEXTURE0);const _=new s.Texture(o,{width:m[0],height:m[1],data:null},c.RGBA);_.bind(c.LINEAR,c.CLAMP_TO_EDGE);const v=o.createFramebuffer(m[0],m[1],!1);return v.colorAttachment.set(_.texture),v.depthAttachment=new _e(o,v.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=o.createRenderbuffer(o.gl.DEPTH_STENCIL,m[0],m[1]),this._stencilRef=0,v.depthAttachment.set(this._sharedDepthStencil),o.clear({stencil:0})):v.depthAttachment.set(this._sharedDepthStencil),o.extTextureFilterAnisotropic&&!o.extTextureFilterAnisotropicForceOff&&c.texParameterf(c.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax),{fb:v,tex:_,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const o in this._style._sourceCaches)if(this._style._sourceCaches[o].hasTransition())return!0;return this._style.order.some(o=>{const c=this._style._layers[o],m=c.isHidden(this.painter.transform.zoom);return c.type==="custom"?!m&&c.shouldRedrape():!m&&c.hasTransition()})}_clearLineLayersFromRenderCache(){let o=!1;for(const m of this._style._getSources())if(m instanceof lt){o=!0;break}if(!o)return;const c={};for(let m=0;m<this._style.order.length;++m){const _=this._style._layers[this._style.order[m]],v=this._style._getLayerSourceCache(_);if(v&&!c[v.id]&&!_.isHidden(this.painter.transform.zoom)&&_.type==="line"&&_.widthExpression()instanceof s.ZoomDependentExpression){c[v.id]=!0;for(const T of this.proxyCoords){const S=this.proxyToSource[T.key][v.id];if(S)for(const M of S)this._clearRenderCacheForTile(v.id,M)}}}}_clearRasterLayersFromRenderCache(){let o=!1;for(const m in this._style._sourceCaches)if(this._style._sourceCaches[m]._source instanceof nt){o=!0;break}if(!o)return;const c={};for(let m=0;m<this._style.order.length;++m){const _=this._style._layers[this._style.order[m]],v=this._style._getLayerSourceCache(_);if(!v||c[v.id]||_.isHidden(this.painter.transform.zoom)||_.type!=="raster")continue;const T=_.paint.get("raster-fade-duration");for(const S of this.proxyCoords){const M=this.proxyToSource[S.key][v.id];if(M)for(const L of M){const k=Qh(v.getTile(L),v.findLoadedParent(L,0),v,this.painter.transform,T);(k.opacity!==1||k.mix!==0)&&this._clearRenderCacheForTile(v.id,L)}}}}_setupDrapedRenderBatches(){const o=this._style.order,c=o.length;if(c===0)return;const m=[];let _,v=0,T=this._style._layers[o[v]];for(;!this._style.isLayerDraped(T)&&T.isHidden(this.painter.transform.zoom)&&++v<c;)T=this._style._layers[o[v]];for(;v<c;++v){const S=this._style._layers[o[v]];S.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(S)?_===void 0&&(_=v):_!==void 0&&(m.push({start:_,end:v-1}),_=void 0))}_!==void 0&&m.push({start:_,end:v-1}),this._drapedRenderBatches=m}_setupRenderCache(o){const c=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,c.renderCache.length>c.renderCachePool.length){const T=Object.values(c.proxyCachedFBO);c.proxyCachedFBO={};for(let S=0;S<T.length;++S){const M=Object.values(T[S]);c.renderCachePool.push(...M)}}return}this._clearRasterLayersFromRenderCache();const m=this.proxyCoords,_=this._tilesDirty;for(let T=m.length-1;T>=0;T--){const S=m[T];if(c.getTileByID(S.key),c.proxyCachedFBO[S.key]!==void 0){const M=o[S.key],L=this.proxyToSource[S.key];let k=0;for(const D in L){const $=L[D],W=M[D];if(!W||W.length!==$.length||$.some((K,X)=>K!==W[X]||_[D]&&_[D].hasOwnProperty(K.key))){k=-1;break}++k}for(const D in c.proxyCachedFBO[S.key])c.renderCache[c.proxyCachedFBO[S.key][D]].dirty=k<0||k!==Object.values(M).length}}const v=[...this._drapedRenderBatches];v.sort((T,S)=>S.end-S.start-(T.end-T.start));for(const T of v)for(const S of m){if(c.proxyCachedFBO[S.key])continue;let M=c.renderCachePool.pop();M===void 0&&c.renderCache.length<50&&(M=c.renderCache.length,c.renderCache.push(this._createFBO())),M!==void 0&&(c.proxyCachedFBO[S.key]={},c.proxyCachedFBO[S.key][T.start]=M,c.renderCache[M].dirty=!0)}this._tilesDirty={}}_setupStencil(o,c,m,_){if(!_||!this._sourceTilesOverlap[_.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const v=this.painter.context,T=v.gl;if(c.length<=1)return void(this._overlapStencilType=!1);let S;if(m.isTileClipped())S=c.length,this._overlapStencilMode.test={func:T.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(c[0].overscaledZ>c[c.length-1].overscaledZ))return void(this._overlapStencilType=!1);S=1,this._overlapStencilMode.test={func:T.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+S>255&&(v.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=S,this._overlapStencilMode.ref=this._stencilRef,m.isTileClipped()&&this._renderTileClippingMasks(c,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(o){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[o.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(o,c){const m=this.painter,_=this.painter.context,v=_.gl;m._tileClippingMaskIDs={},_.setColorMode(s.ColorMode.disabled),_.setDepthMode(s.DepthMode.disabled);const T=m.useProgram("clippingMask");for(const S of o){const M=m._tileClippingMaskIDs[S.key]=--c;T.draw(_,v.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:v.ALWAYS,mask:0},M,255,v.KEEP,v.KEEP,v.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Dl(S.projMatrix),"$clipping",m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}pointCoordinate(o){const c=this.painter.transform;if(o.x<0||o.x>c.width||o.y<0||o.y>c.height)return null;const m=[o.x,o.y,1,1];s.transformMat4$1(m,m,c.pixelMatrixInverse),s.scale$1(m,m,1/m[3]),m[0]/=c.worldSize,m[1]/=c.worldSize;const _=c._camera.position,v=s.mercatorZfromAltitude(1,c.center.lat),T=[_[0],_[1],_[2]/v,0],S=s.subtract([],m.slice(0,3),T);s.normalize(S,S);const M=this.raycast(T,S,this._exaggeration);return M!==null&&M?(s.scaleAndAdd(T,T,S,M),T[3]=T[2],T[2]*=v,T):null}drawDepth(){const o=this.painter,c=o.context,m=this.proxySourceCache,_=Math.ceil(o.width),v=Math.ceil(o.height);if(!this._depthFBO||this._depthFBO.width===_&&this._depthFBO.height===v||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const T=c.gl,S=c.createFramebuffer(_,v,!0);c.activeTexture.set(T.TEXTURE0);const M=new s.Texture(c,{width:_,height:v,data:null},T.RGBA);M.bind(T.NEAREST,T.CLAMP_TO_EDGE),S.colorAttachment.set(M.texture);const L=c.createRenderbuffer(c.gl.DEPTH_COMPONENT16,_,v);S.depthAttachment.set(L),this._depthFBO=S,this._depthTexture=M}c.bindFramebuffer.set(this._depthFBO.framebuffer),c.viewport.set([0,0,_,v]),function(T,S,M,L){if(T.transform.projection.name==="globe")return;const k=T.context,D=k.gl;k.clear({depth:1});const $=T.useProgram("terrainDepth"),W=new s.DepthMode(D.LESS,s.DepthMode.ReadWrite,T.depthRangeFor3D);for(const K of L){const X=M.getTile(K),Y=ba(K.projMatrix,0);S.setupElevationDraw(X,$),$.draw(k,D.TRIANGLES,W,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,Y,"terrain_depth",S.gridBuffer,S.gridIndexBuffer,S.gridNoSkirtSegments)}}(o,this,m,this.proxyCoords)}_setupProxiedCoordsForOrtho(o,c,m){if(o.getSource()instanceof Gt)return this._setupProxiedCoordsForImageSource(o,c,m);this._findCoveringTileCache[o.id]=this._findCoveringTileCache[o.id]||{};const _=this.proxiedCoords[o.id]=[],v=this.proxyCoords;for(let S=0;S<v.length;S++){const M=v[S],L=this._findTileCoveringTileID(M,o);if(L){const k=this._createProxiedId(M,L,m[M.key]&&m[M.key][o.id]);_.push(k),this.proxyToSource[M.key][o.id]=[k]}}let T=!1;for(let S=0;S<c.length;S++){const M=o.getTile(c[S]);if(!M||!M.hasData())continue;const L=this._findTileCoveringTileID(M.tileID,this.proxySourceCache);if(L&&L.tileID.canonical.z!==M.tileID.canonical.z){const k=this.proxyToSource[L.tileID.key][o.id],D=this._createProxiedId(L.tileID,M,m[L.tileID.key]&&m[L.tileID.key][o.id]);k?k.splice(k.length-1,0,D):this.proxyToSource[L.tileID.key][o.id]=[D],_.push(D),T=!0}}this._sourceTilesOverlap[o.id]=T}_setupProxiedCoordsForImageSource(o,c,m){if(!o.getSource().loaded())return;const _=this.proxiedCoords[o.id]=[],v=this.proxyCoords,T=o.getSource(),S=new s.Point(T.tileID.x,T.tileID.y)._div(1<<T.tileID.z),M=T.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((k,D)=>(k.min.x=Math.min(k.min.x,D.x-S.x),k.min.y=Math.min(k.min.y,D.y-S.y),k.max.x=Math.max(k.max.x,D.x-S.x),k.max.y=Math.max(k.max.y,D.y-S.y),k),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),L=(k,D)=>{const $=k.wrap+k.canonical.x/(1<<k.canonical.z),W=k.canonical.y/(1<<k.canonical.z),K=s.EXTENT/(1<<k.canonical.z),X=D.wrap+D.canonical.x/(1<<D.canonical.z),Y=D.canonical.y/(1<<D.canonical.z);return $+K<X+M.min.x||$>X+M.max.x||W+K<Y+M.min.y||W>Y+M.max.y};for(let k=0;k<v.length;k++){const D=v[k];for(let $=0;$<c.length;$++){const W=o.getTile(c[$]);if(!W||!W.hasData()||L(D,W.tileID))continue;const K=this._createProxiedId(D,W,m[D.key]&&m[D.key][o.id]),X=this.proxyToSource[D.key][o.id];X?X.push(K):this.proxyToSource[D.key][o.id]=[K],_.push(K)}}}_createProxiedId(o,c,m){let _=this.orthoMatrix;if(m){const v=m.find(T=>T.key===c.tileID.key);if(v)return v}if(c.tileID.key!==o.key){const v=o.canonical.z-c.tileID.canonical.z;let T,S,M;_=s.create();const L=c.tileID.wrap-o.wrap<<o.overscaledZ;v>0?(T=s.EXTENT>>v,S=T*((c.tileID.canonical.x<<v)-o.canonical.x+L),M=T*((c.tileID.canonical.y<<v)-o.canonical.y)):(T=s.EXTENT<<-v,S=s.EXTENT*(c.tileID.canonical.x-(o.canonical.x+L<<-v)),M=s.EXTENT*(c.tileID.canonical.y-(o.canonical.y<<-v))),s.ortho(_,0,T,0,T,0,1),s.translate(_,_,[S,M,0])}return new Yc(c.tileID,o.key,_)}_findTileCoveringTileID(o,c){let m=c.getTile(o);if(m&&m.hasData())return m;const _=this._findCoveringTileCache[c.id],v=_[o.key];if(m=v?c.getTileByID(v):null,m&&m.hasData()||v===null)return m;let T=m?m.tileID:o,S=T.overscaledZ;const M=c.getSource().minzoom,L=[];if(!v){const D=c.getSource().maxzoom;if(o.canonical.z>=D){const $=o.canonical.z-D;c.getSource().reparseOverscaled?(S=Math.max(o.canonical.z+2,c.transform.tileZoom),T=new s.OverscaledTileID(S,o.wrap,D,o.canonical.x>>$,o.canonical.y>>$)):$!==0&&(S=D,T=new s.OverscaledTileID(S,o.wrap,D,o.canonical.x>>$,o.canonical.y>>$))}T.key!==o.key&&(L.push(T.key),m=c.getTile(T))}const k=D=>{L.forEach($=>{_[$]=D}),L.length=0};for(S-=1;S>=M&&(!m||!m.hasData());S--){m&&k(m.tileID.key);const D=T.calculateScaledKey(S);if(m=c.getTileByID(D),m&&m.hasData())break;const $=_[D];if($===null)break;$===void 0?L.push(D):m=c.getTileByID($)}return k(m?m.tileID.key:null),m&&m.hasData()?m:null}findDEMTileFor(o){return this.enabled?this._findTileCoveringTileID(o,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(o,c){let m=this._tilesDirty[o];m||(m=this._tilesDirty[o]={}),m[c.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const o=function(c){let m=0;const _=new s.StructArrayLayout2ui4,v=131;for(let T=1;T<129;T++){for(let S=1;S<129;S++)m=T*v+S,_.emplaceBack(m,m+1),_.emplaceBack(m,m+v),_.emplaceBack(m+1,m+v),T===128&&_.emplaceBack(m+v,m+v+1);_.emplaceBack(m+1,m+1+v)}return _}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(o),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,o.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class rr{static cacheKey(o,c,m,_){let v=`${c}${_?_.cacheKey:""}`;for(const T of m)o.usedDefines.includes(T)&&(v+=`/${T}`);return v}constructor(o,c,m,_,v,T){const S=o.gl;this.program=S.createProgram();const M=function(B){const H=[];for(let re=0;re<B.length;re++){if(B[re]===null)continue;const ne=B[re].split(" ");H.push(ne.pop())}return H}(m.staticAttributes),L=_?_.getBinderAttributes():[],k=M.concat(L);let D=_?_.defines():[];D=D.concat(T.map(B=>`#define ${B}`));const $=o.isWebGL2?`#version 300 es
`:"",W=$+D.concat(o.extStandardDerivatives&&$.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(qh):qh,qh,qc,Dp.fragmentSource,va.fragmentSource,m.fragmentSource).join(`
`),K=$+D.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,qc,Dp.vertexSource,va.vertexSource,Hc.vertexSource,m.vertexSource).join(`
`),X=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);S.shaderSource(X,W),S.compileShader(X),S.attachShader(this.program,X);const Y=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())this.failedToCreate=!0;else{S.shaderSource(Y,K),S.compileShader(Y),S.attachShader(this.program,Y),this.attributes={},this.numAttributes=k.length;for(let B=0;B<this.numAttributes;B++)k[B]&&(S.bindAttribLocation(this.program,B,k[B]),this.attributes[k[B]]=B);S.linkProgram(this.program),S.deleteShader(Y),S.deleteShader(X),this.fixedUniforms=v(o),this.binderUniforms=_?_.getUniforms(o):[],T.includes("TERRAIN")&&(this.terrainUniforms=(B=>({u_dem:new s.Uniform1i(B),u_dem_prev:new s.Uniform1i(B),u_dem_unpack:new s.Uniform4f(B),u_dem_tl:new s.Uniform2f(B),u_dem_scale:new s.Uniform1f(B),u_dem_tl_prev:new s.Uniform2f(B),u_dem_scale_prev:new s.Uniform1f(B),u_dem_size:new s.Uniform1f(B),u_dem_lerp:new s.Uniform1f(B),u_exaggeration:new s.Uniform1f(B),u_depth:new s.Uniform1i(B),u_depth_size_inv:new s.Uniform2f(B),u_meter_to_dem:new s.Uniform1f(B),u_label_plane_matrix_inv:new s.UniformMatrix4f(B)}))(o)),T.includes("GLOBE")&&(this.globeUniforms=(B=>({u_tile_tl_up:new s.Uniform3f(B),u_tile_tr_up:new s.Uniform3f(B),u_tile_br_up:new s.Uniform3f(B),u_tile_bl_up:new s.Uniform3f(B),u_tile_up_scale:new s.Uniform1f(B)}))(o)),T.includes("FOG")&&(this.fogUniforms=(B=>({u_fog_matrix:new s.UniformMatrix4f(B),u_fog_range:new s.Uniform2f(B),u_fog_color:new s.Uniform4f(B),u_fog_horizon_blend:new s.Uniform1f(B),u_fog_temporal_offset:new s.Uniform1f(B),u_frustum_tl:new s.Uniform3f(B),u_frustum_tr:new s.Uniform3f(B),u_frustum_br:new s.Uniform3f(B),u_frustum_bl:new s.Uniform3f(B),u_globe_pos:new s.Uniform3f(B),u_globe_radius:new s.Uniform1f(B),u_globe_transition:new s.Uniform1f(B),u_is_globe:new s.Uniform1i(B),u_viewport:new s.Uniform2f(B)}))(o))}}setTerrainUniformValues(o,c){if(!this.terrainUniforms)return;const m=this.terrainUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const _ in c)m[_]&&m[_].set(this.program,_,c[_])}}setGlobeUniformValues(o,c){if(!this.globeUniforms)return;const m=this.globeUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const _ in c)m[_]&&m[_].set(this.program,_,c[_])}}setFogUniformValues(o,c){if(!this.fogUniforms)return;const m=this.fogUniforms;if(!this.failedToCreate){o.program.set(this.program);for(const _ in c)m[_].set(this.program,_,c[_])}}draw(o,c,m,_,v,T,S,M,L,k,D,$,W,K,X){const Y=o.gl;if(this.failedToCreate)return;o.program.set(this.program),o.setDepthMode(m),o.setStencilMode(_),o.setColorMode(v),o.setCullFace(T);for(const H of Object.keys(this.fixedUniforms))this.fixedUniforms[H].set(this.program,H,S[H]);K&&K.setUniforms(this.program,o,this.binderUniforms,$,{zoom:W});const B={[Y.LINES]:2,[Y.TRIANGLES]:3,[Y.LINE_STRIP]:1}[c];for(const H of D.get()){const re=H.vaos||(H.vaos={});(re[M]||(re[M]=new V0)).bind(o,this,L,K?K.getPaintVertexBuffers():[],k,H.vertexOffset,X||[]),Y.drawElements(c,H.primitiveLength*B,Y.UNSIGNED_SHORT,H.primitiveOffset*B*2)}}}function Bl(f,o){const c=Math.pow(2,o.tileID.overscaledZ),m=o.tileSize*Math.pow(2,f.transform.tileZoom)/c,_=m*(o.tileID.canonical.x+o.tileID.wrap*c),v=m*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_tile_units_to_pixels:1/It(o,1,f.transform.tileZoom),u_pixel_coord_upper:[_>>16,v>>16],u_pixel_coord_lower:[65535&_,65535&v]}}const jp=s.create(),td=(f,o,c,m,_,v,T,S,M,L,k)=>{const D=o.style.light,$=D.properties.get("position"),W=[$.x,$.y,$.z],K=s.create$1();D.properties.get("anchor")==="viewport"&&(s.fromRotation(K,-o.transform.angle),s.transformMat3(W,W,K));const X=D.properties.get("color"),Y=o.transform,B={u_matrix:f,u_lightpos:W,u_lightintensity:D.properties.get("intensity"),u_lightcolor:[X.r,X.g,X.b],u_vertical_gradient:+c,u_opacity:m,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:jp,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:_,u_edge_radius:v};return Y.projection.name==="globe"&&(B.u_tile_id=[T.canonical.x,T.canonical.y,1<<T.canonical.z],B.u_zoom_transition=M,B.u_inv_rot_matrix=k,B.u_merc_center=L,B.u_up_dir=Y.projection.upVector(new s.CanonicalTileID(0,0,0),L[0]*s.EXTENT,L[1]*s.EXTENT),B.u_height_lift=S),B},Up=(f,o,c,m,_,v,T,S,M,L,k,D)=>{const $=td(f,o,c,m,_,v,T,M,L,k,D),W={u_height_factor:-Math.pow(2,T.overscaledZ)/S.tileSize/8};return s.extend($,Bl(o,S),W)},Ns=f=>({u_matrix:f}),rd=(f,o,c)=>s.extend(Ns(f),Bl(o,c)),$0=(f,o)=>({u_matrix:f,u_world:o}),G0=(f,o,c,m)=>s.extend(rd(f,o,c),{u_world:m}),Z0=s.create(),nd=(f,o,c,m,_,v)=>{const T=f.transform,S=T.projection.name==="globe";let M;if(v.paint.get("circle-pitch-alignment")==="map")if(S){const k=s.globePixelsToTileUnits(T.zoom,o.canonical)*T._pixelsPerMercatorPixel;M=Float32Array.from([k,0,0,k])}else M=T.calculatePixelsToTileUnitsMatrix(c);else M=new Float32Array([T.pixelsToGLUnits[0],0,0,T.pixelsToGLUnits[1]]);const L={u_camera_to_center_distance:T.cameraToCenterDistance,u_matrix:f.translatePosMatrix(o.projMatrix,c,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:M,u_inv_rot_matrix:Z0,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(S){L.u_inv_rot_matrix=m,L.u_merc_center=_,L.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],L.u_zoom_transition=s.globeToMercatorTransition(T.zoom);const k=_[0]*s.EXTENT,D=_[1]*s.EXTENT;L.u_up_dir=T.projection.upVector(new s.CanonicalTileID(0,0,0),k,D)}return L},id=f=>{const o=[];return f.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),f.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o},od=(f,o,c,m)=>{const _=s.EXTENT/c.tileSize;return{u_matrix:f,u_camera_to_center_distance:o.getCameraToCenterDistance(m),u_extrude_scale:[o.pixelsToGLUnits[0]/_,o.pixelsToGLUnits[1]/_]}},Qc=(f,o,c=1)=>({u_matrix:f,u_color:o,u_overlay:0,u_overlay_scale:c}),Vp=s.create(),$p=(f,o,c,m,_,v,T)=>{const S=f.transform,M=S.projection.name==="globe",L=M?s.globePixelsToTileUnits(S.zoom,o.canonical)*S._pixelsPerMercatorPixel:It(c,1,v),k={u_matrix:o.projMatrix,u_extrude_scale:L,u_intensity:T,u_inv_rot_matrix:Vp,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(M){k.u_inv_rot_matrix=m,k.u_merc_center=_,k.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],k.u_zoom_transition=s.globeToMercatorTransition(S.zoom);const D=_[0]*s.EXTENT,$=_[1]*s.EXTENT;k.u_up_dir=S.projection.upVector(new s.CanonicalTileID(0,0,0),D,$)}return k},H0=(f,o,c,m,_,v,T)=>{const S=f.transform,M=S.calculatePixelsToTileUnitsMatrix(o);return{u_matrix:sd(f,o,c,m),u_pixels_to_tile_units:M,u_device_pixel_ratio:v,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:Nl(c)?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Ea(o,f.transform),u_alpha_discard_threshold:0,u_trim_offset:T}},Fl=(f,o,c,m,_)=>{const v=f.transform;return{u_matrix:sd(f,o,c,m),u_texsize:o.imageAtlasTexture.size,u_pixels_to_tile_units:v.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:_,u_image:0,u_tile_units_to_pixels:Ea(o,v),u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Ea(f,o){return 1/It(f,1,o.tileZoom)}function sd(f,o,c,m){return f.translatePosMatrix(m||o.tileID.projMatrix,o,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}function Nl(f){const o=f.paint.get("line-dasharray").value;return o.value||o.kind!=="constant"}const ad=(f,o,c,m,_,v)=>{return{u_matrix:f,u_tl_parent:o,u_scale_parent:c,u_fade_t:m.mix,u_opacity:m.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(S=_.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(T=_.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:uo(_.paint.get("raster-hue-rotate")),u_perspective_transform:v};var T,S};function uo(f){f*=Math.PI/180;const o=Math.sin(f),c=Math.cos(f);return[(2*c+1)/3,(-Math.sqrt(3)*o-c+1)/3,(Math.sqrt(3)*o-c+1)/3]}const Jc=s.create(),ld=(f,o,c,m,_,v,T,S,M,L,k,D,$,W,K,X)=>{const Y=_.transform,B={u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_rotate_symbol:+c,u_aspect_ratio:Y.width/Y.height,u_fade_change:_.options.fadeDuration?_.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:T,u_coord_matrix:S,u_is_text:+M,u_pitch_with_map:+m,u_texsize:L,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Jc,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Jc,u_up_vector:[0,-1,0]};return X.name==="globe"&&(B.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],B.u_zoom_transition=D,B.u_inv_rot_matrix=W,B.u_merc_center=$,B.u_camera_forward=Y._camera.forward(),B.u_ecef_origin=s.globeECEFOrigin(Y.globeMatrix,k.toUnwrapped()),B.u_tile_matrix=Float32Array.from(Y.globeMatrix),B.u_up_vector=K),B},eu=(f,o,c,m,_,v,T,S,M,L,k,D,$,W,K,X,Y)=>s.extend(ld(f,o,c,m,_,v,T,S,M,L,D,$,W,K,X,Y),{u_gamma_scale:m?_.transform.cameraToCenterDistance*Math.cos(_.terrain?0:_.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+k}),Gp=(f,o,c,m,_,v,T,S,M,L,k,D,$,W,K,X)=>s.extend(eu(f,o,c,m,_,v,T,S,!0,M,!0,k,D,$,W,K,X),{u_texsize_icon:L,u_texture_icon:1}),cd=(f,o,c)=>({u_matrix:f,u_opacity:o,u_color:c}),q0=(f,o,c,m,_)=>s.extend(function(v,T,S){const M=T.imageManager.getPattern(v.toString()),{width:L,height:k}=T.imageManager.getPixelSize(),D=Math.pow(2,S.tileID.overscaledZ),$=S.tileSize*Math.pow(2,T.transform.tileZoom)/D,W=$*(S.tileID.canonical.x+S.tileID.wrap*D),K=$*S.tileID.canonical.y;return{u_image:0,u_pattern_tl:M.tl,u_pattern_br:M.br,u_texsize:[L,k],u_pattern_size:M.displaySize,u_tile_units_to_pixels:1/It(S,1,T.transform.tileZoom),u_pixel_coord_upper:[W>>16,K>>16],u_pixel_coord_lower:[65535&W,65535&K]}}(m,c,_),{u_matrix:f,u_opacity:o}),ud={fillExtrusion:f=>({u_matrix:new s.UniformMatrix4f(f),u_lightpos:new s.Uniform3f(f),u_lightintensity:new s.Uniform1f(f),u_lightcolor:new s.Uniform3f(f),u_vertical_gradient:new s.Uniform1f(f),u_opacity:new s.Uniform1f(f),u_edge_radius:new s.Uniform1f(f),u_ao:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_up_dir:new s.Uniform3f(f),u_height_lift:new s.Uniform1f(f)}),fillExtrusionPattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_lightpos:new s.Uniform3f(f),u_lightintensity:new s.Uniform1f(f),u_lightcolor:new s.Uniform3f(f),u_vertical_gradient:new s.Uniform1f(f),u_height_factor:new s.Uniform1f(f),u_edge_radius:new s.Uniform1f(f),u_ao:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_up_dir:new s.Uniform3f(f),u_height_lift:new s.Uniform1f(f),u_image:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_pixel_coord_upper:new s.Uniform2f(f),u_pixel_coord_lower:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f),u_opacity:new s.Uniform1f(f)}),fill:f=>({u_matrix:new s.UniformMatrix4f(f)}),fillPattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_image:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_pixel_coord_upper:new s.Uniform2f(f),u_pixel_coord_lower:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f)}),fillOutline:f=>({u_matrix:new s.UniformMatrix4f(f),u_world:new s.Uniform2f(f)}),fillOutlinePattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_world:new s.Uniform2f(f),u_image:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_pixel_coord_upper:new s.Uniform2f(f),u_pixel_coord_lower:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f)}),circle:f=>({u_camera_to_center_distance:new s.Uniform1f(f),u_extrude_scale:new s.UniformMatrix2f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_up_dir:new s.Uniform3f(f)}),collisionBox:f=>({u_matrix:new s.UniformMatrix4f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_extrude_scale:new s.Uniform2f(f)}),collisionCircle:f=>({u_matrix:new s.UniformMatrix4f(f),u_inv_matrix:new s.UniformMatrix4f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_viewport_size:new s.Uniform2f(f)}),debug:f=>({u_color:new s.UniformColor(f),u_matrix:new s.UniformMatrix4f(f),u_overlay:new s.Uniform1i(f),u_overlay_scale:new s.Uniform1f(f)}),clippingMask:f=>({u_matrix:new s.UniformMatrix4f(f)}),heatmap:f=>({u_extrude_scale:new s.Uniform1f(f),u_intensity:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_up_dir:new s.Uniform3f(f)}),heatmapTexture:f=>({u_image:new s.Uniform1i(f),u_color_ramp:new s.Uniform1i(f),u_opacity:new s.Uniform1f(f)}),hillshade:f=>({u_matrix:new s.UniformMatrix4f(f),u_image:new s.Uniform1i(f),u_latrange:new s.Uniform2f(f),u_light:new s.Uniform2f(f),u_shadow:new s.UniformColor(f),u_highlight:new s.UniformColor(f),u_accent:new s.UniformColor(f)}),hillshadePrepare:f=>({u_matrix:new s.UniformMatrix4f(f),u_image:new s.Uniform1i(f),u_dimension:new s.Uniform2f(f),u_zoom:new s.Uniform1f(f),u_unpack:new s.Uniform4f(f)}),line:f=>({u_matrix:new s.UniformMatrix4f(f),u_pixels_to_tile_units:new s.UniformMatrix2f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_units_to_pixels:new s.Uniform2f(f),u_dash_image:new s.Uniform1i(f),u_gradient_image:new s.Uniform1i(f),u_image_height:new s.Uniform1f(f),u_texsize:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f),u_alpha_discard_threshold:new s.Uniform1f(f),u_trim_offset:new s.Uniform2f(f)}),linePattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_texsize:new s.Uniform2f(f),u_pixels_to_tile_units:new s.UniformMatrix2f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_image:new s.Uniform1i(f),u_units_to_pixels:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f),u_alpha_discard_threshold:new s.Uniform1f(f)}),raster:f=>({u_matrix:new s.UniformMatrix4f(f),u_tl_parent:new s.Uniform2f(f),u_scale_parent:new s.Uniform1f(f),u_fade_t:new s.Uniform1f(f),u_opacity:new s.Uniform1f(f),u_image0:new s.Uniform1i(f),u_image1:new s.Uniform1i(f),u_brightness_low:new s.Uniform1f(f),u_brightness_high:new s.Uniform1f(f),u_saturation_factor:new s.Uniform1f(f),u_contrast_factor:new s.Uniform1f(f),u_spin_weights:new s.Uniform3f(f),u_perspective_transform:new s.Uniform2f(f)}),symbolIcon:f=>({u_is_size_zoom_constant:new s.Uniform1i(f),u_is_size_feature_constant:new s.Uniform1i(f),u_size_t:new s.Uniform1f(f),u_size:new s.Uniform1f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_rotate_symbol:new s.Uniform1i(f),u_aspect_ratio:new s.Uniform1f(f),u_fade_change:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_label_plane_matrix:new s.UniformMatrix4f(f),u_coord_matrix:new s.UniformMatrix4f(f),u_is_text:new s.Uniform1i(f),u_pitch_with_map:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_camera_forward:new s.Uniform3f(f),u_tile_matrix:new s.UniformMatrix4f(f),u_up_vector:new s.Uniform3f(f),u_ecef_origin:new s.Uniform3f(f),u_texture:new s.Uniform1i(f)}),symbolSDF:f=>({u_is_size_zoom_constant:new s.Uniform1i(f),u_is_size_feature_constant:new s.Uniform1i(f),u_size_t:new s.Uniform1f(f),u_size:new s.Uniform1f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_rotate_symbol:new s.Uniform1i(f),u_aspect_ratio:new s.Uniform1f(f),u_fade_change:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_label_plane_matrix:new s.UniformMatrix4f(f),u_coord_matrix:new s.UniformMatrix4f(f),u_is_text:new s.Uniform1i(f),u_pitch_with_map:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_texture:new s.Uniform1i(f),u_gamma_scale:new s.Uniform1f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_tile_id:new s.Uniform3f(f),u_zoom_transition:new s.Uniform1f(f),u_inv_rot_matrix:new s.UniformMatrix4f(f),u_merc_center:new s.Uniform2f(f),u_camera_forward:new s.Uniform3f(f),u_tile_matrix:new s.UniformMatrix4f(f),u_up_vector:new s.Uniform3f(f),u_ecef_origin:new s.Uniform3f(f),u_is_halo:new s.Uniform1i(f)}),symbolTextAndIcon:f=>({u_is_size_zoom_constant:new s.Uniform1i(f),u_is_size_feature_constant:new s.Uniform1i(f),u_size_t:new s.Uniform1f(f),u_size:new s.Uniform1f(f),u_camera_to_center_distance:new s.Uniform1f(f),u_rotate_symbol:new s.Uniform1i(f),u_aspect_ratio:new s.Uniform1f(f),u_fade_change:new s.Uniform1f(f),u_matrix:new s.UniformMatrix4f(f),u_label_plane_matrix:new s.UniformMatrix4f(f),u_coord_matrix:new s.UniformMatrix4f(f),u_is_text:new s.Uniform1i(f),u_pitch_with_map:new s.Uniform1i(f),u_texsize:new s.Uniform2f(f),u_texsize_icon:new s.Uniform2f(f),u_texture:new s.Uniform1i(f),u_texture_icon:new s.Uniform1i(f),u_gamma_scale:new s.Uniform1f(f),u_device_pixel_ratio:new s.Uniform1f(f),u_is_halo:new s.Uniform1i(f)}),background:f=>({u_matrix:new s.UniformMatrix4f(f),u_opacity:new s.Uniform1f(f),u_color:new s.UniformColor(f)}),backgroundPattern:f=>({u_matrix:new s.UniformMatrix4f(f),u_opacity:new s.Uniform1f(f),u_image:new s.Uniform1i(f),u_pattern_tl:new s.Uniform2f(f),u_pattern_br:new s.Uniform2f(f),u_texsize:new s.Uniform2f(f),u_pattern_size:new s.Uniform2f(f),u_pixel_coord_upper:new s.Uniform2f(f),u_pixel_coord_lower:new s.Uniform2f(f),u_tile_units_to_pixels:new s.Uniform1f(f)}),terrainRaster:Yh,terrainDepth:Yh,skybox:f=>({u_matrix:new s.UniformMatrix4f(f),u_sun_direction:new s.Uniform3f(f),u_cubemap:new s.Uniform1i(f),u_opacity:new s.Uniform1f(f),u_temporal_offset:new s.Uniform1f(f)}),skyboxGradient:f=>({u_matrix:new s.UniformMatrix4f(f),u_color_ramp:new s.Uniform1i(f),u_center_direction:new s.Uniform3f(f),u_radius:new s.Uniform1f(f),u_opacity:new s.Uniform1f(f),u_temporal_offset:new s.Uniform1f(f)}),skyboxCapture:f=>({u_matrix_3f:new s.UniformMatrix3f(f),u_sun_direction:new s.Uniform3f(f),u_sun_intensity:new s.Uniform1f(f),u_color_tint_r:new s.Uniform4f(f),u_color_tint_m:new s.Uniform4f(f),u_luminance:new s.Uniform1f(f)}),globeRaster:f=>({u_proj_matrix:new s.UniformMatrix4f(f),u_globe_matrix:new s.UniformMatrix4f(f),u_normalize_matrix:new s.UniformMatrix4f(f),u_merc_matrix:new s.UniformMatrix4f(f),u_zoom_transition:new s.Uniform1f(f),u_merc_center:new s.Uniform2f(f),u_image0:new s.Uniform1i(f),u_grid_matrix:new s.UniformMatrix3f(f),u_skirt_height:new s.Uniform1f(f),u_frustum_tl:new s.Uniform3f(f),u_frustum_tr:new s.Uniform3f(f),u_frustum_br:new s.Uniform3f(f),u_frustum_bl:new s.Uniform3f(f),u_globe_pos:new s.Uniform3f(f),u_globe_radius:new s.Uniform1f(f),u_viewport:new s.Uniform2f(f)}),globeAtmosphere:f=>({u_frustum_tl:new s.Uniform3f(f),u_frustum_tr:new s.Uniform3f(f),u_frustum_br:new s.Uniform3f(f),u_frustum_bl:new s.Uniform3f(f),u_horizon:new s.Uniform1f(f),u_transition:new s.Uniform1f(f),u_fadeout_range:new s.Uniform1f(f),u_color:new s.Uniform4f(f),u_high_color:new s.Uniform4f(f),u_space_color:new s.Uniform4f(f),u_star_intensity:new s.Uniform1f(f),u_star_density:new s.Uniform1f(f),u_star_size:new s.Uniform1f(f),u_temporal_offset:new s.Uniform1f(f),u_horizon_angle:new s.Uniform1f(f),u_rotation_matrix:new s.UniformMatrix4f(f)})};let tu;function jl(f,o,c,m,_,v,T){const S=f.context,M=S.gl,L=f.transform,k=f.useProgram("collisionBox"),D=[];let $=0,W=0;for(let ne=0;ne<m.length;ne++){const pe=m[ne],ge=o.getTile(pe),me=ge.getBucket(c);if(!me)continue;const be=Mi(pe,me,L);let xe=be;_[0]===0&&_[1]===0||(xe=f.translatePosMatrix(be,ge,_,v));const Ie=T?me.textCollisionBox:me.iconCollisionBox,Je=me.collisionCircleArray;if(Je.length>0){const Ce=s.create(),Ge=xe;s.mul(Ce,me.placementInvProjMatrix,L.glCoordMatrix),s.mul(Ce,Ce,me.placementViewportMatrix),D.push({circleArray:Je,circleOffset:W,transform:Ge,invTransform:Ce,projection:me.getProjection()}),$+=Je.length/4,W=$}Ie&&(f.terrain&&f.terrain.setupElevationDraw(ge,k),k.draw(S,M.LINES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,od(xe,L,ge,me.getProjection()),c.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,null,L.zoom,null,[Ie.collisionVertexBuffer,Ie.collisionVertexBufferExt]))}if(!T||!D.length)return;const K=f.useProgram("collisionCircle"),X=new s.StructArrayLayout2f1f2i16;X.resize(4*$),X._trim();let Y=0;for(const ne of D)for(let pe=0;pe<ne.circleArray.length/4;pe++){const ge=4*pe,me=ne.circleArray[ge+0],be=ne.circleArray[ge+1],xe=ne.circleArray[ge+2],Ie=ne.circleArray[ge+3];X.emplace(Y++,me,be,xe,Ie,0),X.emplace(Y++,me,be,xe,Ie,1),X.emplace(Y++,me,be,xe,Ie,2),X.emplace(Y++,me,be,xe,Ie,3)}(!tu||tu.length<2*$)&&(tu=function(ne){const pe=2*ne,ge=new s.StructArrayLayout3ui6;ge.resize(pe),ge._trim();for(let me=0;me<pe;me++){const be=6*me;ge.uint16[be+0]=4*me+0,ge.uint16[be+1]=4*me+1,ge.uint16[be+2]=4*me+2,ge.uint16[be+3]=4*me+2,ge.uint16[be+4]=4*me+3,ge.uint16[be+5]=4*me+0}return ge}($));const B=S.createIndexBuffer(tu,!0),H=S.createVertexBuffer(X,s.collisionCircleLayout.members,!0);for(const ne of D){const pe={u_matrix:ne.transform,u_inv_matrix:ne.invTransform,u_camera_to_center_distance:(re=L).getCameraToCenterDistance(ne.projection),u_viewport_size:[re.width,re.height]};K.draw(S,M.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,f.colorModeForRenderPass(),s.CullFaceMode.disabled,pe,c.id,H,B,s.SegmentVector.simpleSegment(0,2*ne.circleOffset,ne.circleArray.length,ne.circleArray.length/2),null,L.zoom)}var re;H.destroy(),B.destroy()}const Zp=s.create();function hd({width:f,height:o,anchor:c,textOffset:m,textScale:_},v){const{horizontalAlign:T,verticalAlign:S}=s.getAnchorAlignment(c),M=-(T-.5)*f,L=-(S-.5)*o,k=s.evaluateVariableOffset(c,m);return new s.Point((M/_+k[0])*v,(L/_+k[1])*v)}function W0(f,o,c,m,_,v,T,S,M,L,k){const D=f.text.placedSymbolArray,$=f.text.dynamicLayoutVertexArray,W=f.icon.dynamicLayoutVertexArray,K={},X=f.getProjection(),Y=Br(S,X,v),B=v.elevation,H=X.upVectorScale(S.canonical,v.center.lat,v.worldSize).metersToTile;$.clear();for(let re=0;re<D.length;re++){const ne=D.get(re),{tileAnchorX:pe,tileAnchorY:ge,numGlyphs:me}=ne,be=ne.hidden||!ne.crossTileID||f.allowVerticalPlacement&&!ne.placedOrientation?null:m[ne.crossTileID];if(be){let xe=0,Ie=0,Je=0;if(B){const rt=B?B.getAtTileOffset(S,pe,ge):0,[At,Rt,xt]=X.upVector(S.canonical,pe,ge);xe=rt*At*H,Ie=rt*Rt*H,Je=rt*xt*H}let[Ce,Ge,Re,Qe]=Tn(ne.projectedAnchorX+xe,ne.projectedAnchorY+Ie,ne.projectedAnchorZ+Je,c?Y:T);const Pe=kp(v.getCameraToCenterDistance(X),Qe);let $e=_.evaluateSizeForFeature(f.textSizeData,L,ne)*Pe/s.ONE_EM;c&&($e*=f.tilePixelRatio/M);const tt=hd(be,$e);c?({x:Ce,y:Ge,z:Re}=X.projectTilePoint(pe+tt.x,ge+tt.y,S.canonical),[Ce,Ge,Re]=Tn(Ce+xe,Ge+Ie,Re+Je,T)):(o&&tt._rotate(-v.angle),Ce+=tt.x,Ge+=tt.y,Re=0);const Ke=f.allowVerticalPlacement&&ne.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let rt=0;rt<me;rt++)s.addDynamicAttributes($,Ce,Ge,Re,Ke);k&&ne.associatedIconIndex>=0&&(K[ne.associatedIconIndex]={x:Ce,y:Ge,z:Re,angle:Ke})}else Hi(me,$)}if(k){W.clear();const re=f.icon.placedSymbolArray;for(let ne=0;ne<re.length;ne++){const pe=re.get(ne),{numGlyphs:ge}=pe,me=K[ne];if(pe.hidden||!me)Hi(ge,W);else{const{x:be,y:xe,z:Ie,angle:Je}=me;for(let Ce=0;Ce<ge;Ce++)s.addDynamicAttributes(W,be,xe,Ie,Je)}}f.icon.dynamicLayoutVertexBuffer.updateData(W)}f.text.dynamicLayoutVertexBuffer.updateData($)}function dd(f,o,c){return c.iconsInText&&o?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function Hp(f,o,c,m,_,v,T,S,M,L,k,D){const $=f.context,W=$.gl,K=f.transform,X=S==="map",Y=M==="map",B=X&&c.layout.get("symbol-placement")!=="point",H=X&&!Y&&!B,re=c.layout.get("symbol-sort-key").constantOr(1)!==void 0;let ne=!1;const pe=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),ge=[s.mercatorXfromLng(K.center.lng),s.mercatorYfromLat(K.center.lat)],me=c.layout.get("text-variable-anchor"),be=K.projection.name==="globe",xe=[],Ie=[0,-1,0];let Je=Ie;!be&&!K.mercatorFromTransition||X||(Je=function(Ce){const Ge=Ce._camera.getWorldToCamera(Ce.worldSize,1),Re=s.multiply([],Ge,Ce.globeMatrix);s.invert(Re,Re);const Qe=[0,0,0],Pe=[0,1,0,0];return s.transformMat4$1(Pe,Pe,Re),Qe[0]=Pe[0],Qe[1]=Pe[1],Qe[2]=Pe[2],s.normalize(Qe,Qe),Qe}(K));for(const Ce of m){const Ge=o.getTile(Ce),Re=Ge.getBucket(c);if(!Re||Re.projection.name==="mercator"&&be)continue;const Qe=_?Re.text:Re.icon;if(!Qe||Re.fullyClipped||!Qe.segments.get().length)continue;const Pe=Qe.programConfigurations.get(c.id),$e=_||Re.sdfIcons,tt=_?Re.textSizeData:Re.iconSizeData,Ke=Y||K.pitch!==0,rt=s.evaluateSizeForZoom(tt,K.zoom);let At,Rt,xt,kt,Kt=[0,0],Ht=null;if(_)Rt=Ge.glyphAtlasTexture,xt=W.LINEAR,At=Ge.glyphAtlasTexture.size,Re.iconsInText&&(Kt=Ge.imageAtlasTexture.size,Ht=Ge.imageAtlasTexture,kt=Ke||f.options.rotating||f.options.zooming||tt.kind==="composite"||tt.kind==="camera"?W.LINEAR:W.NEAREST);else{const Bo=c.layout.get("icon-size").constantOr(0)!==1||Re.iconsNeedLinear;Rt=Ge.imageAtlasTexture,xt=$e||f.options.rotating||f.options.zooming||Bo||Ke?W.LINEAR:W.NEAREST,At=Ge.imageAtlasTexture.size}const Tt=Re.projection.name==="globe",fr=Tt?Je:Ie,_r=Tt?s.globeToMercatorTransition(K.zoom):0,yr=Br(Ce,Re.getProjection(),K),vr=K.calculatePixelsToTileUnitsMatrix(Ge),Un=je(yr,Ge.tileID.canonical,Y,X,K,Re.getProjection(),vr),An=f.terrain&&Y&&B?s.invert(s.create(),Un):Zp,Li=rn(yr,Ge.tileID.canonical,Y,X,K,Re.getProjection(),vr),fo=me&&Re.hasTextData(),Fr=c.layout.get("icon-text-fit")!=="none"&&fo&&Re.hasIconData();if(B){const Bo=K.elevation,us=Bo?Bo.getAtTileOffsetFunc(Ce,K.center.lat,K.worldSize,Re.getProjection()):null,Gs=Po(yr,Ge.tileID.canonical,Y,X,K,Re.getProjection(),vr);Fh(Re,yr,f,_,Gs,Li,Y,L,us,Ce)}const xr=B||_&&me||Fr,sr=f.translatePosMatrix(yr,Ge,v,T),nn=xr?Zp:Un,Wn=f.translatePosMatrix(Li,Ge,v,T,!0),Or=Re.getProjection().createInversionMatrix(K,Ce.canonical),ti=[];f.terrainRenderModeElevated()&&Y&&ti.push("PITCH_WITH_MAP_TERRAIN"),Tt&&ti.push("PROJECTION_GLOBE_VIEW"),xr&&ti.push("PROJECTED_POS_ON_VIEWPORT");const _u=$e&&c.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let $s;$s=$e?Re.iconsInText?Gp(tt.kind,rt,H,Y,f,sr,nn,Wn,At,Kt,Ce,_r,ge,Or,fr,Re.getProjection()):eu(tt.kind,rt,H,Y,f,sr,nn,Wn,_,At,!0,Ce,_r,ge,Or,fr,Re.getProjection()):ld(tt.kind,rt,H,Y,f,sr,nn,Wn,_,At,Ce,_r,ge,Or,fr,Re.getProjection());const Yl={program:f.useProgram(dd($e,_,Re),Pe,ti),buffers:Qe,uniformValues:$s,atlasTexture:Rt,atlasTextureIcon:Ht,atlasInterpolation:xt,atlasInterpolationIcon:kt,isSDF:$e,hasHalo:_u,tile:Ge,labelPlaneMatrixInv:An};if(re&&Re.canOverlap){ne=!0;const Bo=Qe.segments.get();for(const us of Bo)xe.push({segments:new s.SegmentVector([us]),sortKey:us.sortKey,state:Yl})}else xe.push({segments:Qe.segments,sortKey:0,state:Yl})}ne&&xe.sort((Ce,Ge)=>Ce.sortKey-Ge.sortKey);for(const Ce of xe){const Ge=Ce.state;if(f.terrain&&f.terrain.setupElevationDraw(Ge.tile,Ge.program,{useDepthForOcclusion:!be,labelPlaneMatrixInv:Ge.labelPlaneMatrixInv}),$.activeTexture.set(W.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,W.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&($.activeTexture.set(W.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,W.CLAMP_TO_EDGE)),Ge.isSDF){const Re=Ge.uniformValues;Ge.hasHalo&&(Re.u_is_halo=1,Ul(Ge.buffers,Ce.segments,c,f,Ge.program,pe,k,D,Re)),Re.u_is_halo=0}Ul(Ge.buffers,Ce.segments,c,f,Ge.program,pe,k,D,Ge.uniformValues)}}function Ul(f,o,c,m,_,v,T,S,M){const L=m.context,k=[f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer,f.globeExtVertexBuffer];_.draw(L,L.gl.TRIANGLES,v,T,S,s.CullFaceMode.disabled,M,c.id,f.layoutVertexBuffer,f.indexBuffer,o,c.paint,m.transform.zoom,f.programConfigurations.get(c.id),k)}function qp(f,o,c,m,_,v,T){const S=f.context.gl,M=c.paint.get("fill-pattern"),L=M&&M.constantOr(1);let k,D,$,W,K;T?(D=L&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=S.LINES):(D=L?"fillPattern":"fill",k=S.TRIANGLES);for(const X of m){const Y=o.getTile(X);if(L&&!Y.patternsLoaded())continue;const B=Y.getBucket(c);if(!B)continue;f.prepareDrawTile();const H=B.programConfigurations.get(c.id),re=f.useProgram(D,H);L&&(f.context.activeTexture.set(S.TEXTURE0),Y.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),H.updatePaintBuffers());const ne=M.constantOr(null);if(ne&&Y.imageAtlas){const ge=Y.imageAtlas.patternPositions[ne.toString()];ge&&H.setConstantPatternPositions(ge)}const pe=f.translatePosMatrix(X.projMatrix,Y,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(T){W=B.indexBuffer2,K=B.segments2;const ge=f.terrain&&f.terrain.renderingToTexture?f.terrain.drapeBufferSize:[S.drawingBufferWidth,S.drawingBufferHeight];$=D==="fillOutlinePattern"&&L?G0(pe,f,Y,ge):$0(pe,ge)}else W=B.indexBuffer,K=B.segments,$=L?rd(pe,f,Y):Ns(pe);f.prepareDrawProgram(f.context,re,X.toUnwrapped()),re.draw(f.context,k,_,f.stencilModeForClipping(X),v,s.CullFaceMode.disabled,$,c.id,B.layoutVertexBuffer,W,K,c.paint,f.transform.zoom,H)}}function ru(f,o,c,m,_,v,T){const S=f.context,M=S.gl,L=f.transform,k=c.paint.get("fill-extrusion-pattern"),D=k.constantOr(1),$=c.paint.get("fill-extrusion-opacity"),W=[c.paint.get("fill-extrusion-ambient-occlusion-intensity"),c.paint.get("fill-extrusion-ambient-occlusion-radius")],K=c.layout.get("fill-extrusion-edge-radius"),X=K>0&&!c.paint.get("fill-extrusion-rounded-roof"),Y=X?0:K,B=L.projection.name==="globe"?s.fillExtrusionHeightLift():0,H=L.projection.name==="globe",re=H?s.globeToMercatorTransition(L.zoom):0,ne=[s.mercatorXfromLng(L.center.lng),s.mercatorYfromLat(L.center.lat)],pe=[];H&&pe.push("PROJECTION_GLOBE_VIEW"),W[0]>0&&pe.push("FAUX_AO"),X&&pe.push("ZERO_ROOF_RADIUS");for(const ge of m){const me=o.getTile(ge),be=me.getBucket(c);if(!be||be.projection.name!==L.projection.name)continue;const xe=be.programConfigurations.get(c.id),Ie=f.useProgram(D?"fillExtrusionPattern":"fillExtrusion",xe,pe);if(f.terrain){const $e=f.terrain;if(f.style.terrainSetForDrapingOnly())$e.setupElevationDraw(me,Ie,{useMeterToDem:!0});else{if(!be.enableTerrain)continue;if($e.setupElevationDraw(me,Ie,{useMeterToDem:!0}),Wp(S,o,ge,be,c,$e),!be.centroidVertexBuffer){const tt=Ie.attributes.a_centroid_pos;tt!==void 0&&M.vertexAttrib2f(tt,0,0)}}}D&&(f.context.activeTexture.set(M.TEXTURE0),me.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),xe.updatePaintBuffers());const Je=k.constantOr(null);if(Je&&me.imageAtlas){const $e=me.imageAtlas.patternPositions[Je.toString()];$e&&xe.setConstantPatternPositions($e)}const Ce=f.translatePosMatrix(ge.projMatrix,me,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Ge=L.projection.createInversionMatrix(L,ge.canonical),Re=c.paint.get("fill-extrusion-vertical-gradient"),Qe=D?Up(Ce,f,Re,$,W,Y,ge,me,B,re,ne,Ge):td(Ce,f,Re,$,W,Y,ge,B,re,ne,Ge);f.prepareDrawProgram(S,Ie,ge.toUnwrapped());const Pe=[];f.terrain&&Pe.push(be.centroidVertexBuffer),H&&Pe.push(be.layoutVertexExtBuffer),Ie.draw(S,S.gl.TRIANGLES,_,v,T,s.CullFaceMode.backCCW,Qe,c.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,c.paint,f.transform.zoom,xe,Pe)}}function Wp(f,o,c,m,_,v){const T=[B=>{let H=B.canonical.x-1,re=B.wrap;return H<0&&(H=(1<<B.canonical.z)-1,re--),new s.OverscaledTileID(B.overscaledZ,re,B.canonical.z,H,B.canonical.y)},B=>{let H=B.canonical.x+1,re=B.wrap;return H===1<<B.canonical.z&&(H=0,re++),new s.OverscaledTileID(B.overscaledZ,re,B.canonical.z,H,B.canonical.y)},B=>new s.OverscaledTileID(B.overscaledZ,B.wrap,B.canonical.z,B.canonical.x,(B.canonical.y===0?1<<B.canonical.z:B.canonical.y)-1),B=>new s.OverscaledTileID(B.overscaledZ,B.wrap,B.canonical.z,B.canonical.x,B.canonical.y===(1<<B.canonical.z)-1?0:B.canonical.y+1)],S=B=>{const H=o.getSource().minzoom,re=pe=>{const ge=o.getTileByID(pe);if(ge&&ge.hasData())return ge.getBucket(_)},ne=[0,-1,1];for(const pe of ne){if(B.overscaledZ+pe<H)continue;const ge=re(B.calculateScaledKey(B.overscaledZ+pe));if(ge)return ge}},M=[0,0,0],L=(B,H)=>(M[0]=Math.min(B.min.y,H.min.y),M[1]=Math.max(B.max.y,H.max.y),M[2]=s.EXTENT-H.min.x>B.max.x?H.min.x-s.EXTENT:B.max.x,M),k=(B,H)=>(M[0]=Math.min(B.min.x,H.min.x),M[1]=Math.max(B.max.x,H.max.x),M[2]=s.EXTENT-H.min.y>B.max.y?H.min.y-s.EXTENT:B.max.y,M),D=[(B,H)=>L(B,H),(B,H)=>L(H,B),(B,H)=>k(B,H),(B,H)=>k(H,B)],$=new s.Point(0,0);let W,K,X;const Y=(B,H,re,ne,pe)=>{const ge=[[ne?re:B,ne?B:re,0],[ne?re:H,ne?H:re,0]],me=pe<0?s.EXTENT+pe:pe,be=[ne?me:(B+H)/2,ne?(B+H)/2:me,0];return re===0&&pe<0||re!==0&&pe>0?v.getForTilePoints(X,[be],!0,K):ge.push(be),v.getForTilePoints(c,ge,!0,W),Math.max(ge[0][2],ge[1][2],be[2])/v.exaggeration()};for(let B=0;B<4;B++){const H=(B<2?1:5)-B,re=m.borders[B];if(re.length===0)continue;const ne=X=T[B](c),pe=S(ne);if(!(pe&&pe instanceof s.FillExtrusionBucket&&pe.enableTerrain)||m.borderDoneWithNeighborZ[B]===pe.canonical.z&&pe.borderDoneWithNeighborZ[H]===m.canonical.z||(K=v.findDEMTileFor(ne),!K||!K.dem))continue;if(!W){const xe=v.findDEMTileFor(c);if(!xe||!xe.dem)return;W=xe}const ge=pe.borders[H];let me=0;const be=pe.borderDoneWithNeighborZ[H]!==m.canonical.z;if(m.canonical.z===pe.canonical.z){for(let xe=0;xe<re.length;xe++){const Ie=m.featuresOnBorder[re[xe]],Je=Ie.borders[B];let Ce;for(;me<ge.length&&(Ce=pe.featuresOnBorder[ge[me]],!(Ce.borders[H][1]>Je[0]+3));)be&&pe.encodeCentroid(void 0,Ce,!1),me++;if(Ce&&me<ge.length){const Ge=me;let Re=0;for(;!(Ce.borders[H][0]>Je[1]-3)&&(Re++,++me!==ge.length);)Ce=pe.featuresOnBorder[ge[me]];if(Ce=pe.featuresOnBorder[ge[Ge]],Ie.intersectsCount()>1||Ce.intersectsCount()>1||Re!==1){Re!==1&&(me=Ge),m.encodeCentroid(void 0,Ie,!1),be&&pe.encodeCentroid(void 0,Ce,!1);continue}const Qe=D[B](Ie,Ce),Pe=B%2?s.EXTENT-1:0;$.x=Y(Qe[0],Math.min(s.EXTENT-1,Qe[1]),Pe,B<2,Qe[2]),$.y=0,m.encodeCentroid($,Ie,!1),be&&pe.encodeCentroid($,Ce,!1)}else m.encodeCentroid(void 0,Ie,!1)}m.borderDoneWithNeighborZ[B]=pe.canonical.z,m.needsCentroidUpdate=!0,be&&(pe.borderDoneWithNeighborZ[H]=m.canonical.z,pe.needsCentroidUpdate=!0)}else{for(const xe of re)m.encodeCentroid(void 0,m.featuresOnBorder[xe],!1);if(be){for(const xe of ge)pe.encodeCentroid(void 0,pe.featuresOnBorder[xe],!1);pe.borderDoneWithNeighborZ[H]=m.canonical.z,pe.needsCentroidUpdate=!0}m.borderDoneWithNeighborZ[B]=pe.canonical.z,m.needsCentroidUpdate=!0}}(m.needsCentroidUpdate||!m.centroidVertexBuffer&&m.centroidVertexArray.length!==0)&&m.uploadCentroid(f)}const Ta=new s.Color(1,0,0,1),X0=new s.Color(0,1,0,1),K0=new s.Color(0,0,1,1),Y0=new s.Color(1,0,1,1),Q0=new s.Color(0,1,1,1);function J0(f,o,c){const m=f.context,_=f.transform,v=m.gl,T=_.projection.name==="globe",S=T?["PROJECTION_GLOBE_VIEW"]:null;let M=c.projMatrix;if(T&&s.globeToMercatorTransition(_.zoom)>0){const Ie=s.transitionTileAABBinECEF(c.canonical,_),Je=s.globeDenormalizeECEF(Ie);M=s.multiply(new Float32Array(16),_.globeMatrix,Je),s.multiply(M,_.projMatrix,M)}const L=f.useProgram("debug",null,S),k=o.getTileByID(c.key);f.terrain&&f.terrain.setupElevationDraw(k,L);const D=s.DepthMode.disabled,$=s.StencilMode.disabled,W=f.colorModeForRenderPass(),K="$debug";m.activeTexture.set(v.TEXTURE0),f.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),T?k._makeGlobeTileDebugBuffers(f.context,_):k._makeDebugTileBoundsBuffers(f.context,_.projection);const X=k._tileDebugBuffer||f.debugBuffer,Y=k._tileDebugIndexBuffer||f.debugIndexBuffer,B=k._tileDebugSegments||f.debugSegments;L.draw(m,v.LINE_STRIP,D,$,W,s.CullFaceMode.disabled,Qc(M,s.Color.red),K,X,Y,B,null,null,null,[k._globeTileDebugBorderBuffer]);const H=k.latestRawTileData,re=Math.floor((H&&H.byteLength||0)/1024),ne=o.getTile(c).tileSize,pe=512/Math.min(ne,512)*(c.overscaledZ/_.zoom)*.5;let ge=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ge+=` => ${c.overscaledZ}`),ge+=` ${re}kb`,function(Ie,Je){Ie.initDebugOverlayCanvas();const Ce=Ie.debugOverlayCanvas,Ge=Ie.context.gl,Re=Ie.debugOverlayCanvas.getContext("2d");Re.clearRect(0,0,Ce.width,Ce.height),Re.shadowColor="white",Re.shadowBlur=2,Re.lineWidth=1.5,Re.strokeStyle="white",Re.textBaseline="top",Re.font="bold 36px Open Sans, sans-serif",Re.fillText(Je,5,5),Re.strokeText(Je,5,5),Ie.debugOverlayTexture.update(Ce),Ie.debugOverlayTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE)}(f,ge);const me=k._tileDebugTextBuffer||f.debugBuffer,be=k._tileDebugTextIndexBuffer||f.quadTriangleIndexBuffer,xe=k._tileDebugTextSegments||f.debugSegments;L.draw(m,v.TRIANGLES,D,$,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,Qc(M,s.Color.transparent,pe),K,me,be,xe,null,null,null,[k._globeTileDebugTextBuffer])}function Xp(f,o,c,m){Sa(f,0,o+c/2,f.transform.width,c,m)}function nu(f,o,c,m){Sa(f,o-c/2,0,c,f.transform.height,m)}function Sa(f,o,c,m,_,v){const T=f.context,S=T.gl;S.enable(S.SCISSOR_TEST),S.scissor(o*s.exported.devicePixelRatio,c*s.exported.devicePixelRatio,m*s.exported.devicePixelRatio,_*s.exported.devicePixelRatio),T.clear({color:v}),S.disable(S.SCISSOR_TEST)}const Kp=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Yp}=Kp;function Ro(f,o,c,m){f.emplaceBack(o,c,m)}class iu{constructor(o){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,Ro(this.vertexArray,-1,-1,1),Ro(this.vertexArray,1,-1,1),Ro(this.vertexArray,-1,1,1),Ro(this.vertexArray,1,1,1),Ro(this.vertexArray,-1,-1,-1),Ro(this.vertexArray,1,-1,-1),Ro(this.vertexArray,-1,1,-1),Ro(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=o.createVertexBuffer(this.vertexArray,Yp),this.indexBuffer=o.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function Ii(f,o,c,m,_,v){const T=f.gl,S=o.paint.get("sky-atmosphere-color"),M=o.paint.get("sky-atmosphere-halo-color"),L=o.paint.get("sky-atmosphere-sun-intensity"),k=((D,$,W,K,X)=>({u_matrix_3f:D,u_sun_direction:$,u_sun_intensity:W,u_color_tint_r:[K.r,K.g,K.b,K.a],u_color_tint_m:[X.r,X.g,X.b,X.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),m),_,L,S,M);T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_CUBE_MAP_POSITIVE_X+v,o.skyboxTexture,0),c.draw(f,T.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,k,"skyboxCapture",o.skyboxGeometry.vertexBuffer,o.skyboxGeometry.indexBuffer,o.skyboxGeometry.segment)}const Vl=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Qp{constructor(o){const c=new s.StructArrayLayout5f20;c.emplaceBack(-1,1,1,0,0),c.emplaceBack(1,1,1,1,0),c.emplaceBack(1,-1,1,1,1),c.emplaceBack(-1,-1,1,0,1);const m=new s.StructArrayLayout3ui6;m.emplaceBack(0,1,2),m.emplaceBack(2,3,0),this.vertexBuffer=o.createVertexBuffer(c,Vl.members),this.indexBuffer=o.createIndexBuffer(m),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const js={symbol:function(f,o,c,m,_){if(f.renderPass!=="translucent")return;const v=s.StencilMode.disabled,T=f.colorModeForRenderPass();c.layout.get("text-variable-anchor")&&function(S,M,L,k,D,$,W){const K=M.transform,X=D==="map",Y=$==="map";for(const B of S){const H=k.getTile(B),re=H.getBucket(L);if(!re||!re.text||!re.text.segments.get().length)continue;const ne=s.evaluateSizeForZoom(re.textSizeData,K.zoom),pe=Br(B,re.getProjection(),K),ge=K.calculatePixelsToTileUnitsMatrix(H),me=je(pe,H.tileID.canonical,Y,X,K,re.getProjection(),ge),be=L.layout.get("icon-text-fit")!=="none"&&re.hasIconData();if(ne){const xe=Math.pow(2,K.zoom-H.tileID.overscaledZ);W0(re,X,Y,W,s.symbolSize,K,me,B,xe,ne,be)}}}(m,f,c,o,c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),_),c.paint.get("icon-opacity").constantOr(1)!==0&&Hp(f,o,c,m,!1,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),c.layout.get("icon-rotation-alignment"),c.layout.get("icon-pitch-alignment"),c.layout.get("icon-keep-upright"),v,T),c.paint.get("text-opacity").constantOr(1)!==0&&Hp(f,o,c,m,!0,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),c.layout.get("text-rotation-alignment"),c.layout.get("text-pitch-alignment"),c.layout.get("text-keep-upright"),v,T),o.map.showCollisionBoxes&&(jl(f,o,c,m,c.paint.get("text-translate"),c.paint.get("text-translate-anchor"),!0),jl(f,o,c,m,c.paint.get("icon-translate"),c.paint.get("icon-translate-anchor"),!1))},circle:function(f,o,c,m){if(f.renderPass!=="translucent")return;const _=c.paint.get("circle-opacity"),v=c.paint.get("circle-stroke-width"),T=c.paint.get("circle-stroke-opacity"),S=c.layout.get("circle-sort-key").constantOr(1)!==void 0;if(_.constantOr(1)===0&&(v.constantOr(1)===0||T.constantOr(1)===0))return;const M=f.context,L=M.gl,k=f.transform,D=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),$=s.StencilMode.disabled,W=f.colorModeForRenderPass(),K=k.projection.name==="globe",X=[s.mercatorXfromLng(k.center.lng),s.mercatorYfromLat(k.center.lat)],Y=[];for(let H=0;H<m.length;H++){const re=m[H],ne=o.getTile(re),pe=ne.getBucket(c);if(!pe||pe.projection.name!==k.projection.name)continue;const ge=pe.programConfigurations.get(c.id),me=id(c);K&&me.push("PROJECTION_GLOBE_VIEW");const be=f.useProgram("circle",ge,me),xe=pe.layoutVertexBuffer,Ie=pe.globeExtVertexBuffer,Je=pe.indexBuffer,Ce=k.projection.createInversionMatrix(k,re.canonical),Ge={programConfiguration:ge,program:be,layoutVertexBuffer:xe,globeExtVertexBuffer:Ie,indexBuffer:Je,uniformValues:nd(f,re,ne,Ce,X,c),tile:ne};if(S){const Re=pe.segments.get();for(const Qe of Re)Y.push({segments:new s.SegmentVector([Qe]),sortKey:Qe.sortKey,state:Ge})}else Y.push({segments:pe.segments,sortKey:0,state:Ge})}S&&Y.sort((H,re)=>H.sortKey-re.sortKey);const B={useDepthForOcclusion:!K};for(const H of Y){const{programConfiguration:re,program:ne,layoutVertexBuffer:pe,globeExtVertexBuffer:ge,indexBuffer:me,uniformValues:be,tile:xe}=H.state,Ie=H.segments;f.terrain&&f.terrain.setupElevationDraw(xe,ne,B),f.prepareDrawProgram(M,ne,xe.tileID.toUnwrapped()),ne.draw(M,L.TRIANGLES,D,$,W,s.CullFaceMode.disabled,be,c.id,pe,me,Ie,c.paint,k.zoom,re,[ge])}},heatmap:function(f,o,c,m){if(c.paint.get("heatmap-opacity")!==0)if(f.renderPass==="offscreen"){const _=f.context,v=_.gl,T=s.StencilMode.disabled,S=new s.ColorMode([v.ONE,v.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(W,K,X,Y){const B=W.gl,H=K.width*Y,re=K.height*Y;W.activeTexture.set(B.TEXTURE1),W.viewport.set([0,0,H,re]);let ne=X.heatmapFbo;if(!ne||ne&&(ne.width!==H||ne.height!==re)){ne&&ne.destroy();const pe=B.createTexture();B.bindTexture(B.TEXTURE_2D,pe),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR),ne=X.heatmapFbo=W.createFramebuffer(H,re,!1),function(ge,me,be,xe,Ie,Je){const Ce=ge.gl;Ce.texImage2D(Ce.TEXTURE_2D,0,ge.isWebGL2&&ge.extRenderToTextureHalfFloat?Ce.RGBA16F:Ce.RGBA,Ie,Je,0,Ce.RGBA,ge.extRenderToTextureHalfFloat?ge.isWebGL2?Ce.HALF_FLOAT:ge.extTextureHalfFloat.HALF_FLOAT_OES:Ce.UNSIGNED_BYTE,null),xe.colorAttachment.set(be)}(W,0,pe,ne,H,re)}else B.bindTexture(B.TEXTURE_2D,ne.colorAttachment.get()),W.bindFramebuffer.set(ne.framebuffer)})(_,f,c,f.transform.projection.name==="globe"?.5:.25),_.clear({color:s.Color.transparent});const M=f.transform,L=M.projection.name==="globe",k=L?["PROJECTION_GLOBE_VIEW"]:null,D=L?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,$=[s.mercatorXfromLng(M.center.lng),s.mercatorYfromLat(M.center.lat)];for(let W=0;W<m.length;W++){const K=m[W];if(o.hasRenderableParent(K))continue;const X=o.getTile(K),Y=X.getBucket(c);if(!Y||Y.projection.name!==M.projection.name)continue;const B=Y.programConfigurations.get(c.id),H=f.useProgram("heatmap",B,k),{zoom:re}=f.transform;f.terrain&&f.terrain.setupElevationDraw(X,H),f.prepareDrawProgram(_,H,K.toUnwrapped());const ne=M.projection.createInversionMatrix(M,K.canonical);H.draw(_,v.TRIANGLES,s.DepthMode.disabled,T,S,D,$p(f,K,X,ne,$,re,c.paint.get("heatmap-intensity")),c.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,c.paint,f.transform.zoom,B,L?[Y.globeExtVertexBuffer]:null)}_.viewport.set([0,0,f.width,f.height])}else f.renderPass==="translucent"&&(f.context.setColorMode(f.colorModeForRenderPass()),function(_,v){const T=_.context,S=T.gl,M=v.heatmapFbo;if(!M)return;T.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,M.colorAttachment.get()),T.activeTexture.set(S.TEXTURE1);let L=v.colorRampTexture;L||(L=v.colorRampTexture=new s.Texture(T,v.colorRamp,S.RGBA)),L.bind(S.LINEAR,S.CLAMP_TO_EDGE),_.useProgram("heatmapTexture").draw(T,S.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,_.colorModeForRenderPass(),s.CullFaceMode.disabled,((k,D,$,W)=>({u_image:0,u_color_ramp:1,u_opacity:D.paint.get("heatmap-opacity")}))(0,v),v.id,_.viewportBuffer,_.quadTriangleIndexBuffer,_.viewportSegments,v.paint,_.transform.zoom)}(f,c))},line:function(f,o,c,m){if(f.renderPass!=="translucent")return;const _=c.paint.get("line-opacity"),v=c.paint.get("line-width");if(_.constantOr(1)===0||v.constantOr(1)===0)return;const T=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),S=f.colorModeForRenderPass(),M=f.terrain&&f.terrain.renderingToTexture?1:s.exported.devicePixelRatio,L=c.paint.get("line-dasharray"),k=L.constantOr(1),D=c.layout.get("line-cap"),$=c.paint.get("line-pattern"),W=$.constantOr(1),K=c.paint.get("line-gradient"),X=W?"linePattern":"line",Y=f.context,B=Y.gl,H=(ne=>{const pe=[];Nl(ne)&&pe.push("RENDER_LINE_DASH"),ne.paint.get("line-gradient")&&pe.push("RENDER_LINE_GRADIENT");const ge=ne.paint.get("line-trim-offset");ge[0]===0&&ge[1]===0||pe.push("RENDER_LINE_TRIM_OFFSET");const me=ne.paint.get("line-pattern").constantOr(1),be=ne.paint.get("line-opacity").constantOr(1)!==1;return!me&&be&&pe.push("RENDER_LINE_ALPHA_DISCARD"),pe})(c);let re=H.includes("RENDER_LINE_ALPHA_DISCARD");f.terrain&&f.terrain.clipOrMaskOverlapStencilType()&&(re=!1);for(const ne of m){const pe=o.getTile(ne);if(W&&!pe.patternsLoaded())continue;const ge=pe.getBucket(c);if(!ge)continue;f.prepareDrawTile();const me=ge.programConfigurations.get(c.id),be=f.useProgram(X,me,H),xe=$.constantOr(null);if(xe&&pe.imageAtlas){const $e=pe.imageAtlas.patternPositions[xe.toString()];$e&&me.setConstantPatternPositions($e)}const Ie=L.constantOr(null),Je=D.constantOr(null);if(!W&&Ie&&Je&&pe.lineAtlas){const $e=pe.lineAtlas.getDash(Ie,Je);$e&&me.setConstantPatternPositions($e)}let[Ce,Ge]=c.paint.get("line-trim-offset");(Je==="round"||Je==="square")&&Ce!==Ge&&(Ce===0&&(Ce-=1),Ge===1&&(Ge+=1));const Re=f.terrain?ne.projMatrix:null,Qe=W?Fl(f,pe,c,Re,M):H0(f,pe,c,Re,ge.lineClipsArray.length,M,[Ce,Ge]);if(K){const $e=ge.gradients[c.id];let tt=$e.texture;if(c.gradientVersion!==$e.version){let Ke=256;if(c.stepInterpolant){const rt=o.getSource().maxzoom,At=ne.canonical.z===rt?Math.ceil(1<<f.transform.maxZoom-ne.canonical.z):1;Ke=s.clamp(s.nextPowerOfTwo(ge.maxLineLength/s.EXTENT*1024*At),256,Y.maxTextureSize)}$e.gradient=s.renderColorRamp({expression:c.gradientExpression(),evaluationKey:"lineProgress",resolution:Ke,image:$e.gradient||void 0,clips:ge.lineClipsArray}),$e.texture?$e.texture.update($e.gradient):$e.texture=new s.Texture(Y,$e.gradient,B.RGBA),$e.version=c.gradientVersion,tt=$e.texture}Y.activeTexture.set(B.TEXTURE1),tt.bind(c.stepInterpolant?B.NEAREST:B.LINEAR,B.CLAMP_TO_EDGE)}k&&(Y.activeTexture.set(B.TEXTURE0),pe.lineAtlasTexture.bind(B.LINEAR,B.REPEAT),me.updatePaintBuffers()),W&&(Y.activeTexture.set(B.TEXTURE0),pe.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),me.updatePaintBuffers()),f.prepareDrawProgram(Y,be,ne.toUnwrapped());const Pe=$e=>{be.draw(Y,B.TRIANGLES,T,$e,S,s.CullFaceMode.disabled,Qe,c.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,c.paint,f.transform.zoom,me,[ge.layoutVertexBuffer2])};if(re){const $e=f.stencilModeForClipping(ne).ref;$e===0&&f.terrain&&Y.clear({stencil:0});const tt={func:B.EQUAL,mask:255};Qe.u_alpha_discard_threshold=.8,Pe(new s.StencilMode(tt,$e,255,B.KEEP,B.KEEP,B.INVERT)),Qe.u_alpha_discard_threshold=0,Pe(new s.StencilMode(tt,$e,255,B.KEEP,B.KEEP,B.KEEP))}else Pe(f.stencilModeForClipping(ne))}re&&(f.resetStencilClippingMasks(),f.terrain&&Y.clear({stencil:0}))},fill:function(f,o,c,m){const _=c.paint.get("fill-color"),v=c.paint.get("fill-opacity");if(v.constantOr(1)===0)return;const T=f.colorModeForRenderPass(),S=c.paint.get("fill-pattern"),M=f.opaquePassEnabledForLayer()&&!S.constantOr(1)&&_.constantOr(s.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(f.renderPass===M){const L=f.depthModeForSublayer(1,f.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);qp(f,o,c,m,L,T,!1)}if(f.renderPass==="translucent"&&c.paint.get("fill-antialias")){const L=f.depthModeForSublayer(c.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);qp(f,o,c,m,L,T,!0)}},"fill-extrusion":function(f,o,c,m){const _=c.paint.get("fill-extrusion-opacity");if(_!==0&&f.renderPass==="translucent"){const v=new s.DepthMode(f.context.gl.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D);if(_!==1||c.paint.get("fill-extrusion-pattern").constantOr(1))ru(f,o,c,m,v,s.StencilMode.disabled,s.ColorMode.disabled),ru(f,o,c,m,v,f.stencilModeFor3D(),f.colorModeForRenderPass()),f.resetStencilClippingMasks();else{const T=f.colorModeForRenderPass();ru(f,o,c,m,v,s.StencilMode.disabled,T)}}},hillshade:function(f,o,c,m){if(f.renderPass!=="offscreen"&&f.renderPass!=="translucent")return;const _=f.context,v=f.depthModeForSublayer(0,s.DepthMode.ReadOnly),T=f.colorModeForRenderPass(),S=f.terrain&&f.terrain.renderingToTexture,[M,L]=f.renderPass!=="translucent"||S?[{},m]:f.stencilConfigForOverlap(m);for(const k of L){const D=o.getTile(k);if(D.needsHillshadePrepare&&f.renderPass==="offscreen")Fp(f,D,c,v,s.StencilMode.disabled,T);else if(f.renderPass==="translucent"){const $=S&&f.terrain?f.terrain.stencilModeForRTTOverlap(k):M[k.overscaledZ];Bp(f,k,D,c,v,$,T)}}_.viewport.set([0,0,f.width,f.height]),f.resetStencilClippingMasks()},raster:function(f,o,c,m,_,v){if(f.renderPass!=="translucent"||c.paint.get("raster-opacity")===0||!m.length)return;const T=f.context,S=T.gl,M=o.getSource(),L=f.useProgram("raster"),k=f.colorModeForRenderPass(),D=f.terrain&&f.terrain.renderingToTexture,[$,W]=M instanceof Gt||D?[{},m]:f.stencilConfigForOverlap(m),K=W[W.length-1].overscaledZ,X=!f.options.moving;for(const Y of W){const B=D?s.DepthMode.disabled:f.depthModeForSublayer(Y.overscaledZ-K,c.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,S.LESS),H=Y.toUnwrapped(),re=o.getTile(Y);if(D&&(!re||!re.hasData()))continue;const ne=D?Y.projMatrix:f.transform.calculateProjMatrix(H,X),pe=f.terrain&&D?f.terrain.stencilModeForRTTOverlap(Y):$[Y.overscaledZ],ge=v?0:c.paint.get("raster-fade-duration");re.registerFadeDuration(ge);const me=o.findLoadedParent(Y,0),be=Qh(re,me,o,f.transform,ge);let xe,Ie;f.terrain&&f.terrain.prepareDrawTile();const Je=c.paint.get("raster-resampling")==="nearest"?S.NEAREST:S.LINEAR;T.activeTexture.set(S.TEXTURE0),re.texture.bind(Je,S.CLAMP_TO_EDGE),T.activeTexture.set(S.TEXTURE1),me?(me.texture.bind(Je,S.CLAMP_TO_EDGE),xe=Math.pow(2,me.tileID.overscaledZ-re.tileID.overscaledZ),Ie=[re.tileID.canonical.x*xe%1,re.tileID.canonical.y*xe%1]):re.texture.bind(Je,S.CLAMP_TO_EDGE),re.texture.useMipmap&&T.extTextureFilterAnisotropic&&f.transform.pitch>20&&S.texParameterf(S.TEXTURE_2D,T.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,T.extTextureFilterAnisotropicMax);const Ce=ad(ne,Ie||[0,0],xe||1,be,c,M instanceof Gt?M.perspectiveTransform:[0,0]);if(f.prepareDrawProgram(T,L,H),M instanceof Gt)M.boundsBuffer&&M.boundsSegments&&L.draw(T,S.TRIANGLES,B,s.StencilMode.disabled,k,s.CullFaceMode.disabled,Ce,c.id,M.boundsBuffer,f.quadTriangleIndexBuffer,M.boundsSegments);else{const{tileBoundsBuffer:Ge,tileBoundsIndexBuffer:Re,tileBoundsSegments:Qe}=f.getTileBoundsBuffers(re);L.draw(T,S.TRIANGLES,B,pe,k,s.CullFaceMode.disabled,Ce,c.id,Ge,Re,Qe)}}f.resetStencilClippingMasks()},background:function(f,o,c,m){const _=c.paint.get("background-color"),v=c.paint.get("background-opacity");if(v===0)return;const T=f.context,S=T.gl,M=f.transform,L=M.tileSize,k=c.paint.get("background-pattern");if(f.isPatternMissing(k))return;const D=!k&&_.a===1&&v===1&&f.opaquePassEnabledForLayer()?"opaque":"translucent";if(f.renderPass!==D)return;const $=s.StencilMode.disabled,W=f.depthModeForSublayer(0,D==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),K=f.colorModeForRenderPass(),X=f.useProgram(k?"backgroundPattern":"background");let Y,B=m;B||(Y=f.getBackgroundTiles(),B=Object.values(Y).map(H=>H.tileID)),k&&(T.activeTexture.set(S.TEXTURE0),f.imageManager.bind(f.context));for(const H of B){const re=H.toUnwrapped(),ne=m?H.projMatrix:f.transform.calculateProjMatrix(re);f.prepareDrawTile();const pe=o?o.getTile(H):Y?Y[H.key]:new s.Tile(H,L,M.zoom,f),ge=k?q0(ne,v,f,k,{tileID:H,tileSize:L}):cd(ne,v,_);f.prepareDrawProgram(T,X,re);const{tileBoundsBuffer:me,tileBoundsIndexBuffer:be,tileBoundsSegments:xe}=f.getTileBoundsBuffers(pe);X.draw(T,S.TRIANGLES,W,$,K,s.CullFaceMode.disabled,ge,c.id,me,be,xe)}},sky:function(f,o,c){const m=f.transform,_=m.projection.name==="mercator"||m.projection.name==="globe"?1:s.smoothstep(7,8,m.zoom),v=c.paint.get("sky-opacity")*_;if(v===0)return;const T=f.context,S=c.paint.get("sky-type"),M=new s.DepthMode(T.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),L=f.frameCounter/1e3%1;S==="atmosphere"?f.renderPass==="offscreen"?c.needsSkyboxCapture(f)&&(function(k,D,$,W){const K=k.context,X=K.gl;let Y=D.skyboxFbo;if(!Y){Y=D.skyboxFbo=K.createFramebuffer(32,32,!1),D.skyboxGeometry=new iu(K),D.skyboxTexture=K.gl.createTexture(),X.bindTexture(X.TEXTURE_CUBE_MAP,D.skyboxTexture),X.texParameteri(X.TEXTURE_CUBE_MAP,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_CUBE_MAP,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_CUBE_MAP,X.TEXTURE_MIN_FILTER,X.LINEAR),X.texParameteri(X.TEXTURE_CUBE_MAP,X.TEXTURE_MAG_FILTER,X.LINEAR);for(let ne=0;ne<6;++ne)X.texImage2D(X.TEXTURE_CUBE_MAP_POSITIVE_X+ne,0,X.RGBA,32,32,0,X.RGBA,X.UNSIGNED_BYTE,null)}K.bindFramebuffer.set(Y.framebuffer),K.viewport.set([0,0,32,32]);const B=D.getCenter(k,!0),H=k.useProgram("skyboxCapture"),re=new Float64Array(16);s.identity(re),s.rotateY(re,re,.5*-Math.PI),Ii(K,D,H,re,B,0),s.identity(re),s.rotateY(re,re,.5*Math.PI),Ii(K,D,H,re,B,1),s.identity(re),s.rotateX(re,re,.5*-Math.PI),Ii(K,D,H,re,B,2),s.identity(re),s.rotateX(re,re,.5*Math.PI),Ii(K,D,H,re,B,3),s.identity(re),Ii(K,D,H,re,B,4),s.identity(re),s.rotateY(re,re,Math.PI),Ii(K,D,H,re,B,5),K.viewport.set([0,0,k.width,k.height])}(f,c),c.markSkyboxValid(f)):f.renderPass==="sky"&&function(k,D,$,W,K){const X=k.context,Y=X.gl,B=k.transform,H=k.useProgram("skybox");X.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_CUBE_MAP,D.skyboxTexture);const re=((ne,pe,ge,me,be)=>({u_matrix:ne,u_sun_direction:pe,u_cubemap:0,u_opacity:me,u_temporal_offset:be}))(B.skyboxMatrix,D.getCenter(k,!1),0,W,K);k.prepareDrawProgram(X,H),H.draw(X,Y.TRIANGLES,$,s.StencilMode.disabled,k.colorModeForRenderPass(),s.CullFaceMode.backCW,re,"skybox",D.skyboxGeometry.vertexBuffer,D.skyboxGeometry.indexBuffer,D.skyboxGeometry.segment)}(f,c,M,v,L):S==="gradient"&&f.renderPass==="sky"&&function(k,D,$,W,K){const X=k.context,Y=X.gl,B=k.transform,H=k.useProgram("skyboxGradient");D.skyboxGeometry||(D.skyboxGeometry=new iu(X)),X.activeTexture.set(Y.TEXTURE0);let re=D.colorRampTexture;re||(re=D.colorRampTexture=new s.Texture(X,D.colorRamp,Y.RGBA)),re.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const ne=((pe,ge,me,be,xe)=>({u_matrix:pe,u_color_ramp:0,u_center_direction:ge,u_radius:s.degToRad(me),u_opacity:be,u_temporal_offset:xe}))(B.skyboxMatrix,D.getCenter(k,!1),D.paint.get("sky-gradient-radius"),W,K);k.prepareDrawProgram(X,H),H.draw(X,Y.TRIANGLES,$,s.StencilMode.disabled,k.colorModeForRenderPass(),s.CullFaceMode.backCW,ne,"skyboxGradient",D.skyboxGeometry.vertexBuffer,D.skyboxGeometry.indexBuffer,D.skyboxGeometry.segment)}(f,c,M,v,L)},debug:function(f,o,c){for(let m=0;m<c.length;m++)J0(f,o,c[m])},custom:function(f,o,c,m){const _=f.context,v=c.implementation;if(!f.transform.projection.unsupportedLayers||!f.transform.projection.unsupportedLayers.includes("custom")||f.terrain&&(f.terrain.renderingToTexture||f.renderPass==="offscreen")&&c.isLayerDraped()){if(f.renderPass==="offscreen"){const T=v.prerender;if(T){if(f.setCustomLayerDefaults(),_.setColorMode(f.colorModeForRenderPass()),f.transform.projection.name==="globe"){const S=f.transform.pointMerc;T.call(v,_.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(f.transform.zoom),[S.x,S.y],f.transform.pixelsPerMeterRatio)}else T.call(v,_.gl,f.transform.customLayerMatrix());_.setDirty(),f.setBaseState()}}else if(f.renderPass==="translucent"){if(f.terrain&&f.terrain.renderingToTexture){const S=v.renderToTile;if(S){const M=m[0].canonical,L=new s.MercatorCoordinate(M.x+m[0].wrap*(1<<M.z),M.y,M.z);_.setDepthMode(s.DepthMode.disabled),_.setStencilMode(s.StencilMode.disabled),_.setColorMode(f.colorModeForRenderPass()),f.setCustomLayerDefaults(),S.call(v,_.gl,L),_.setDirty(),f.setBaseState()}return}f.setCustomLayerDefaults(),_.setColorMode(f.colorModeForRenderPass()),_.setStencilMode(s.StencilMode.disabled);const T=v.renderingMode==="3d"?new s.DepthMode(f.context.gl.LEQUAL,s.DepthMode.ReadWrite,f.depthRangeFor3D):f.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(_.setDepthMode(T),f.transform.projection.name==="globe"){const S=f.transform.pointMerc;v.render(_.gl,f.transform.customLayerMatrix(),f.transform.getProjection(),f.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(f.transform.zoom),[S.x,S.y],f.transform.pixelsPerMeterRatio)}else v.render(_.gl,f.transform.customLayerMatrix());_.setDirty(),f.setBaseState(),_.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Aa{constructor(o,c,m=!1){this.context=new st(o,m),this.transform=c,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(o,c){const m=!!o&&!!o.terrain&&this.transform.projection.supportsTerrain;if(!(m||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new ed(this,o));const _=this._terrain;this.transform.elevation=m?_:null,_.update(o,this.transform,c)}_updateFog(o){const c=o.fog;if(!c||this.transform.projection.name==="globe"||c.getOpacity(this.transform.pitch)<1||c.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[m,_]=c.getFovAdjustedRange(this.transform._fov);if(m>_)return void(this.transform.fogCullDistSq=null);const v=m+.78*(_-m);this.transform.fogCullDistSq=v*v}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(o,c){if(this.width=o*s.exported.devicePixelRatio,this.height=c*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style.order)this.style._layers[m].resize()}setup(){const o=this.context,c=new s.StructArrayLayout2i4;c.emplaceBack(0,0),c.emplaceBack(s.EXTENT,0),c.emplaceBack(0,s.EXTENT),c.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=o.createVertexBuffer(c,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const m=new s.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(s.EXTENT,0),m.emplaceBack(0,s.EXTENT),m.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=o.createVertexBuffer(m,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const _=new s.StructArrayLayout2i4;_.emplaceBack(-1,-1),_.emplaceBack(1,-1),_.emplaceBack(-1,1),_.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(_,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const v=new s.StructArrayLayout4i8;v.emplaceBack(0,0,0,0),v.emplaceBack(s.EXTENT,0,s.EXTENT,0),v.emplaceBack(0,s.EXTENT,0,s.EXTENT),v.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=o.createVertexBuffer(v,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const T=new s.StructArrayLayout3ui6;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(T);const S=new s.StructArrayLayout1ui2;for(const L of[0,1,3,2,0])S.emplaceBack(L);this.debugIndexBuffer=o.createIndexBuffer(S),this.emptyTexture=new s.Texture(o,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),o.gl.RGBA),this.identityMat=s.create();const M=this.context.gl;this.stencilClearMode=new s.StencilMode({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new Qp(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(o){return o._makeTileBoundsBuffers(this.context,this.transform.projection),o._tileBoundsBuffer?{tileBoundsBuffer:o._tileBoundsBuffer,tileBoundsIndexBuffer:o._tileBoundsIndexBuffer,tileBoundsSegments:o._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const o=this.context,c=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(o,c.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,Dl(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(o,c,m){if(!c||this.currentStencilSource===c.id||!o.isTileClipped()||!m||m.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let S=!1;for(const M of m)if(this._tileClippingMaskIDs[M.key]===void 0){S=!0;break}if(!S)return}this.currentStencilSource=c.id;const _=this.context,v=_.gl;this.nextStencilID+m.length>256&&this.clearStencil(),_.setColorMode(s.ColorMode.disabled),_.setDepthMode(s.DepthMode.disabled);const T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of m){const M=c.getTile(S),L=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,{tileBoundsBuffer:k,tileBoundsIndexBuffer:D,tileBoundsSegments:$}=this.getTileBoundsBuffers(M);T.draw(_,v.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:v.ALWAYS,mask:0},L,255,v.KEEP,v.KEEP,v.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,Dl(S.projMatrix),"$clipping",k,D,$)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,c=this.context.gl;return new s.StencilMode({func:c.NOTEQUAL,mask:255},o,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(o){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(o);const c=this.context.gl;return new s.StencilMode({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(o){const c=this.context.gl,m=o.sort((T,S)=>S.overscaledZ-T.overscaledZ),_=m[m.length-1].overscaledZ,v=m[0].overscaledZ-_+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const T={};for(let S=0;S<v;S++)T[S+_]=new s.StencilMode({func:c.GEQUAL,mask:255},S+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=v,[T,m]}return[{[_]:s.StencilMode.disabled},m]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([o.CONSTANT_COLOR,o.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(o,c,m){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new s.DepthMode(m||this.context.gl.LEQUAL,c,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,c){this.style=o,this.options=c,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const m=this.style.order,_=this.style._sourceCaches;for(const L in _){const k=_[L];k.used&&k.prepare(this.context)}const v={},T={},S={};for(const L in _){const k=_[L];v[L]=k.getVisibleCoordinates(),T[L]=v[L].slice().reverse(),S[L]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<m.length;L++)if(this.style._layers[m[L]].is3D()){this.opaquePassCutoff=L;break}if(this.terrain&&(this.terrain.updateTileBinding(S),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const L of m){const k=this.style._layers[L],D=o._getLayerSourceCache(k);if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const $=D?T[D.id]:void 0;(k.type==="custom"||k.isSky()||$&&$.length)&&this.renderLayer(this,D,k,$)}this.depthRangeFor3D=[0,1-(o.order.length+2)*this.numSublayers*this.depthEpsilon];const M=this.terrain;if(M&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&M.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:c.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=c.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const L=this.style._layers[m[this.currentLayer]],k=o._getLayerSourceCache(L);if(L.isSky())continue;const D=k?T[k.id]:void 0;this._renderTileClippingMasks(L,k,D),this.renderLayer(this,k,L,D)}if(this.style.fog&&this.transform.projection.supportsFog&&function(L,k){const D=L.context,$=D.gl,W=L.transform,K=new s.DepthMode($.LEQUAL,s.DepthMode.ReadOnly,[0,1]),X=L.useProgram("globeAtmosphere",null,W.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),Y=s.globeToMercatorTransition(W.zoom),B=k.properties.get("color").toArray01(),H=k.properties.get("high-color").toArray01(),re=k.properties.get("space-color").toArray01PremultipliedAlpha(),ne=s.identity$1([]);s.rotateY$1(ne,ne,-s.degToRad(W._center.lng)),s.rotateX$1(ne,ne,s.degToRad(W._center.lat)),s.rotateZ$1(ne,ne,W.angle),s.rotateX$1(ne,ne,-W._pitch);const pe=s.fromQuat(new Float32Array(16),ne),ge=s.mapValue(k.properties.get("star-intensity"),0,1,0,.25),me=5e-4,be=s.mapValue(k.properties.get("horizon-blend"),0,1,me,.25),xe=s.globeUseCustomAntiAliasing(L,D,W)&&be===me?W.worldSize/(2*Math.PI*1.025)-1:W.globeRadius,Ie=L.frameCounter/1e3%1,Je=s.length(W.globeCenterInViewSpace),Ce=Math.sqrt(Math.pow(Je,2)-Math.pow(xe,2)),Ge=Math.acos(Ce/Je),Re=((Pe,$e,tt,Ke,rt,At,Rt,xt,kt,Kt,Ht,Tt,fr,_r)=>({u_frustum_tl:Pe,u_frustum_tr:$e,u_frustum_br:tt,u_frustum_bl:Ke,u_horizon:rt,u_transition:At,u_fadeout_range:Rt,u_color:xt,u_high_color:kt,u_space_color:Kt,u_star_intensity:Ht,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Tt,u_horizon_angle:fr,u_rotation_matrix:_r}))(W.frustumCorners.TL,W.frustumCorners.TR,W.frustumCorners.BR,W.frustumCorners.BL,W.frustumCorners.horizon,Y,be,B,H,re,ge,Ie,Ge,pe);L.prepareDrawProgram(D,X);const Qe=L.atmosphereBuffer;Qe&&X.draw(D,$.TRIANGLES,K,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,Re,"skybox",Qe.vertexBuffer,Qe.indexBuffer,Qe.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const L=this.style._layers[m[this.currentLayer]],k=o._getLayerSourceCache(L);L.isSky()&&this.renderLayer(this,k,L,k?T[k.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;){const L=this.style._layers[m[this.currentLayer]],k=o._getLayerSourceCache(L);if(L.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(L)){if(L.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const D=k?(L.type==="symbol"?S:T)[k.id]:void 0;this._renderTileClippingMasks(L,k,k?v[k.id]:void 0),this.renderLayer(this,k,L,D),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let L=null;s.values(this.style._layers).forEach(k=>{const D=o._getLayerSourceCache(k);D&&!k.isHidden(this.transform.zoom)&&(!L||L.getSource().maxzoom<D.getSource().maxzoom)&&(L=D)}),L&&this.options.showTileBoundaries&&js.debug(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){const k=L.transform.padding;Xp(L,L.transform.height-(k.top||0),3,Ta),Xp(L,k.bottom||0,3,X0),nu(L,k.left||0,3,K0),nu(L,L.transform.width-(k.right||0),3,Y0);const D=L.transform.centerPoint;(function($,W,K,X){Sa($,W-1,K-10,2,20,X),Sa($,W-10,K-1,20,2,X)})(L,D.x,L.transform.height-D.y,Q0)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(o,c,m,_){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="sky"||m.type==="custom"||_&&_.length)&&(this.id=m.id,this.gpuTimingStart(m),(!o.transform.projection.unsupportedLayers||!o.transform.projection.unsupportedLayers.includes(m.type)||o.terrain&&m.type==="custom")&&js[m.type](o,c,m,_,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(o){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;let m=this.gpuTimers[o.id];m||(m=this.gpuTimers[o.id]={calls:0,cpuTime:0,query:c.createQueryEXT()}),m.calls++,c.beginQueryEXT(c.TIME_ELAPSED_EXT,m.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const o=this.context.extTimerQuery,c=o.createQueryEXT();this.deferredRenderGpuTimeQueries.push(c),o.beginQueryEXT(o.TIME_ELAPSED_EXT,c)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;o.endQueryEXT(o.TIME_ELAPSED_EXT)}collectGpuTimers(){const o=this.gpuTimers;return this.gpuTimers={},o}collectDeferredRenderGpuQueries(){const o=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],o}queryGpuTimers(o){const c={};for(const m in o){const _=o[m],v=this.context.extTimerQuery,T=v.getQueryObjectEXT(_.query,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(_.query),c[m]=T}return c}queryGpuTimeDeferredRender(o){if(!this.options.gpuTimingDeferredRender)return 0;const c=this.context.extTimerQuery;let m=0;for(const _ of o)m+=c.getQueryObjectEXT(_,c.QUERY_RESULT_EXT)/1e6,c.deleteQueryEXT(_);return m}translatePosMatrix(o,c,m,_,v){if(!m[0]&&!m[1])return o;const T=v?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(T){const L=Math.sin(T),k=Math.cos(T);m=[m[0]*k-m[1]*L,m[0]*L+m[1]*k]}const S=[v?m[0]:It(c,m[0],this.transform.zoom),v?m[1]:It(c,m[1],this.transform.zoom),0],M=new Float32Array(16);return s.translate(M,o,S),M}saveTileTexture(o){const c=this._tileTextures[o.size[0]];c?c.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const c=this._tileTextures[o];return c&&c.length>0?c.pop():null}isPatternMissing(o){return o===null||o!==void 0&&!this.imageManager.getPattern(o.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const o=this.terrain&&this.terrain.renderingToTexture,c=this.terrain&&this.terrain.exaggeration()===0,m=this.style&&this.style.fog,_=[];return this.terrainRenderModeElevated()&&_.push("TERRAIN"),this.transform.projection.name==="globe"&&_.push("GLOBE"),c&&_.push("ZERO_EXAGGERATION"),m&&!o&&m.getOpacity(this.transform.pitch)!==0&&_.push("FOG"),o&&_.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&_.push("OVERDRAW_INSPECTOR"),_}useProgram(o,c,m){this.cache=this.cache||{};const _=m||[],v=this.currentGlobalDefines().concat(_),T=rr.cacheKey(Wh[o],o,v,c);return this.cache[T]||(this.cache[T]=new rr(this.context,o,Wh[o],c,ud[o],v)),this.cache[T]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(o,c,m){if(this.terrain&&this.terrain.renderingToTexture)return;const _=this.style.fog;if(_){const v=_.getOpacity(this.transform.pitch),T=((S,M,L,k,D,$,W,K,X,Y,B)=>{const H=S.transform,re=M.properties.get("color").toArray01();re[3]=k;const ne=S.frameCounter/1e3%1;return{u_fog_matrix:L?H.calculateFogTileMatrix(L):S.identityMat,u_fog_range:M.getFovAdjustedRange(H._fov),u_fog_color:re,u_fog_horizon_blend:M.properties.get("horizon-blend"),u_fog_temporal_offset:ne,u_frustum_tl:D,u_frustum_tr:$,u_frustum_br:W,u_frustum_bl:K,u_globe_pos:X,u_globe_radius:Y,u_viewport:B,u_globe_transition:s.globeToMercatorTransition(H.zoom),u_is_globe:+(H.projection.name==="globe")}})(this,_,m,v,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);c.setFogUniformValues(o,T)}}setTileLoadedFlag(o){this.tileLoaded=o}saveCanvasCopy(){const o=this.canvasCopy();o&&(this.frameCopies.push(o),this.tileLoaded=!1)}canvasCopy(){const o=this.context.gl,c=o.createTexture();return o.bindTexture(o.TEXTURE_2D,c),o.copyTexImage2D(o.TEXTURE_2D,0,o.RGBA,0,0,o.drawingBufferWidth,o.drawingBufferHeight,0),c}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const o=this.style&&this.style.fog;return!!o&&o.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const o=this._backgroundTiles,c=this._backgroundTiles={},m=this.transform.coveringTiles({tileSize:512});for(const _ of m)c[_.key]=o[_.key]||new s.Tile(_,512,this.transform.tileZoom,this);return c}clearBackgroundTiles(){this._backgroundTiles={}}}class ou{constructor(o=0,c=0,m=0,_=0){if(isNaN(o)||o<0||isNaN(c)||c<0||isNaN(m)||m<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=c,this.left=m,this.right=_}interpolate(o,c,m){return c.top!=null&&o.top!=null&&(this.top=s.number(o.top,c.top,m)),c.bottom!=null&&o.bottom!=null&&(this.bottom=s.number(o.bottom,c.bottom,m)),c.left!=null&&o.left!=null&&(this.left=s.number(o.left,c.left,m)),c.right!=null&&o.right!=null&&(this.right=s.number(o.right,c.right,m)),this}getCenter(o,c){const m=s.clamp((this.left+o-this.right)/2,0,o),_=s.clamp((this.top+c-this.bottom)/2,0,c);return new s.Point(m,_)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new ou(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function su(f,o){const c=s.getColumn(f,3);s.fromQuat(f,o),s.setColumn(f,3,c)}function ir(f,o){const c=s.identity$1([]);return s.rotateZ$1(c,c,-o),s.rotateX$1(c,c,-f),c}function $l(f,o){const c=[f[0],f[1],0],m=[o[0],o[1],0];if(s.length(c)>=1e-15){const T=s.normalize([],c);s.scale$2(m,T,s.dot(m,T)),o[0]=m[0],o[1]=m[1]}const _=s.cross([],o,f);if(s.len(_)<1e-15)return null;const v=Math.atan2(-_[1],_[0]);return ir(Math.atan2(Math.sqrt(f[0]*f[0]+f[1]*f[1]),-f[2]),v)}class Jp{constructor(o,c){this.position=o,this.orientation=c}get position(){return this._position}set position(o){if(o){const c=o instanceof s.MercatorCoordinate?o:new s.MercatorCoordinate(o[0],o[1],o[2]);this._renderWorldCopies&&(c.x=s.wrap(c.x,0,1)),this._position=c}else this._position=null}lookAtPoint(o,c){if(this.orientation=null,!this.position)return;const m=this.position,_=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(o)):0,v=s.MercatorCoordinate.fromLngLat(o,_),T=[v.x-m.x,v.y-m.y,v.z-m.z];c||(c=[0,0,1]),c[2]=Math.abs(c[2]),this.orientation=$l(T,c)}setPitchBearing(o,c){this.orientation=ir(s.degToRad(o),s.degToRad(-c))}}class au{constructor(o,c){this._transform=s.identity([]),this.orientation=c,this.position=o}get mercatorPosition(){const o=this.position;return new s.MercatorCoordinate(o[0],o[1],o[2])}get position(){const o=s.getColumn(this._transform,3);return[o[0],o[1],o[2]]}set position(o){var c;o&&s.setColumn(this._transform,3,[(c=o)[0],c[1],c[2],1])}get orientation(){return this._orientation}set orientation(o){this._orientation=o||s.identity$1([]),o&&su(this._transform,this._orientation)}getPitchBearing(){const o=this.forward(),c=this.right();return{bearing:Math.atan2(-c[1],c[0]),pitch:Math.atan2(Math.sqrt(o[0]*o[0]+o[1]*o[1]),-o[2])}}setPitchBearing(o,c){this._orientation=ir(o,c),su(this._transform,this._orientation)}forward(){const o=s.getColumn(this._transform,2);return[-o[0],-o[1],-o[2]]}up(){const o=s.getColumn(this._transform,1);return[-o[0],-o[1],-o[2]]}right(){const o=s.getColumn(this._transform,0);return[o[0],o[1],o[2]]}getCameraToWorld(o,c){const m=new Float64Array(16);return s.invert(m,this.getWorldToCamera(o,c)),m}getWorldToCameraPosition(o,c,m){const _=this.position;s.scale$2(_,_,-o);const v=new Float64Array(16);return s.fromScaling(v,[m,m,m]),s.translate(v,v,_),v[10]*=c,v}getWorldToCamera(o,c){const m=new Float64Array(16),_=new Float64Array(4),v=this.position;return s.conjugate(_,this._orientation),s.scale$2(v,v,-o),s.fromQuat(m,_),s.translate(m,m,v),m[1]*=-1,m[5]*=-1,m[9]*=-1,m[13]*=-1,m[8]*=c,m[9]*=c,m[10]*=c,m[11]*=c,m}getCameraToClipPerspective(o,c,m,_){const v=new Float64Array(16);return s.perspective(v,o,c,m,_),v}getDistanceToElevation(o,c=!1){const m=o===0?0:s.mercatorZfromAltitude(o,c?s.latFromMercatorY(this.position[1]):this.position[1]),_=this.forward();return(m-this.position[2])/_[2]}clone(){return new au([...this.position],[...this.orientation])}}function Ca(f,o){const c=lu(f.projection,f.zoom,f.width,f.height),m=function(v,T,S,M,L){const k=new s.LngLat(S.lng-180*Do,S.lat),D=new s.LngLat(S.lng+180*Do,S.lat),$=v.project(k.lng,k.lat),W=v.project(D.lng,D.lat),K=-Math.atan2(W.y-$.y,W.x-$.x),X=s.MercatorCoordinate.fromLngLat(S);X.y=s.clamp(X.y,-1+Do,1-Do);const Y=X.toLngLat(),B=v.project(Y.lng,Y.lat),H=s.MercatorCoordinate.fromLngLat(Y);H.x+=Do;const re=H.toLngLat(),ne=v.project(re.lng,re.lat),pe=cu(ne.x-B.x,ne.y-B.y,K),ge=s.MercatorCoordinate.fromLngLat(Y);ge.y+=Do;const me=ge.toLngLat(),be=v.project(me.lng,me.lat),xe=cu(be.x-B.x,be.y-B.y,K),Ie=Math.abs(pe.x)/Math.abs(xe.y),Je=s.identity([]);s.rotateZ(Je,Je,-K*(1-(L?0:M)));const Ce=s.identity([]);return s.scale(Ce,Ce,[1,1-(1-Ie)*M,1]),Ce[4]=-xe.x/xe.y*M,s.rotateZ(Ce,Ce,K),s.multiply(Ce,Je,Ce),Ce}(f.projection,0,f.center,c,o),_=em(f);return s.scale(m,m,[_,_,1]),m}function em(f){const o=f.projection,c=lu(f.projection,f.zoom,f.width,f.height),m=tm(o,f.center),_=tm(o,s.LngLat.convert(o.center));return Math.pow(2,m*c+(1-c)*_)}function lu(f,o,c,m,_=1/0){const v=f.range;if(!v)return 0;const T=Math.min(_,Math.max(c,m)),S=Math.log(T/1024)/Math.LN2;return s.smoothstep(v[0]+S,v[1]+S,o)}const Do=1/4e4;function tm(f,o){const c=s.clamp(o.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),m=new s.LngLat(o.lng-180*Do,c),_=new s.LngLat(o.lng+180*Do,c),v=f.project(m.lng,c),T=f.project(_.lng,c),S=s.MercatorCoordinate.fromLngLat(m),M=s.MercatorCoordinate.fromLngLat(_),L=T.x-v.x,k=T.y-v.y,D=M.x-S.x,$=M.y-S.y,W=Math.sqrt((D*D+$*$)/(L*L+k*k));return Math.log(W)/Math.LN2}function cu(f,o,c){const m=Math.cos(c),_=Math.sin(c);return{x:f*m-o*_,y:f*_+o*m}}class Ma{constructor(o,c,m,_,v,T,S){this.tileSize=512,this._renderWorldCopies=v===void 0||v,this._minZoom=o||0,this._maxZoom=c||22,this._minPitch=m??0,this._maxPitch=_??60,this.setProjection(T),this.setMaxBounds(S),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ou,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new au,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const o=new Ma(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return o._elevation=this._elevation,o._centerAltitude=this._centerAltitude,o._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,o.tileSize=this.tileSize,o.mercatorFromTransition=this.mercatorFromTransition,o.width=this.width,o.height=this.height,o.cameraElevationReference=this.cameraElevationReference,o._center=this._center,o._setZoom(this.zoom),o._seaLevelZoom=this._seaLevelZoom,o.angle=this.angle,o._fov=this._fov,o._pitch=this._pitch,o._nearZ=this._nearZ,o._farZ=this._farZ,o._averageElevation=this._averageElevation,o._unmodified=this._unmodified,o._edgeInsets=this._edgeInsets.clone(),o._camera=this._camera.clone(),o._calcMatrices(),o.freezeTileCoverage=this.freezeTileCoverage,o.frustumCorners=this.frustumCorners,o}get elevation(){return this._elevation}set elevation(o){this._elevation!==o&&(this._elevation=o,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(o,c=!1){const m=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||m)&&this._updateCameraOnTerrain(),(o||m)&&this._constrainCamera(c),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(o){this.projectionOptions=o||{name:"mercator"};const c=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const m=!A(c,this.getProjection());return m&&this._calcMatrices(),this.mercatorFromTransition=!1,m}setMercatorFromTransition(){const o=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const c=o!==this.projection.name;return c&&this._calcMatrices(),c}get minZoom(){return this._minZoom}set minZoom(o){this._minZoom!==o&&(this._minZoom=o,this.zoom=Math.max(this.zoom,o))}get maxZoom(){return this._maxZoom}set maxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.zoom=Math.min(this.zoom,o))}get minPitch(){return this._minPitch}set minPitch(o){this._minPitch!==o&&(this._minPitch=o,this.pitch=Math.max(this.pitch,o))}get maxPitch(){return this._maxPitch}set maxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.pitch=Math.min(this.pitch,o))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(o){o===void 0?o=!0:o===null&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get cameraWorldSize(){const o=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(o))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(o){this.rotation=o}get rotation(){return-this.angle/Math.PI*180}set rotation(o){const c=-o*Math.PI/180;var m;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=(m=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(_,v,T){var S=v[0],M=v[1],L=v[2],k=v[3],D=Math.sin(T),$=Math.cos(T);_[0]=S*$+L*D,_[1]=M*$+k*D,_[2]=S*-D+L*$,_[3]=M*-D+k*$}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(o){const c=s.clamp(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const o=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/o)}set fov(o){o=Math.max(.01,Math.min(60,o)),this._fov!==o&&(this._unmodified=!1,this._fov=s.degToRad(o),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(o){this._averageElevation=o,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(o){const c=Math.min(Math.max(o,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._setZoom(c),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(o){this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const o=this._elevation;this._centerAltitude=o.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=o.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const o=this._elevation,c=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],m=this.horizonLineFromTop();let _=0,v=0;for(let T=0;T<c.length;T++){const S=new s.Point(c[T][0]*this.width,m+c[T][1]*(this.height-m)),M=o.pointCoordinate(S);if(!M)continue;const L=1/Math.hypot(M[0]-this._camera.position[0],M[1]-this._camera.position[1]);_+=M[3]*L,v+=L}return v===0?NaN:_/v}get center(){return this._center}set center(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const o=this._seaLevelZoom,c=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),m=this.pixelsPerMeter/this.worldSize*c,_=this._mercatorZfromZoom(o),v=this._mercatorZfromZoom(this._maxZoom),T=Math.max(_-m,v);this._setZoom(this._zoomFromMercatorZ(T))}get padding(){return this._edgeInsets.toJSON()}set padding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}computeZoomRelativeTo(o){const c=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,o.toAltitude()));let m;m=o.z<this._camera.position[2]?[c.x,c.y,c.z]:[o.x,o.y,o.z];const _=s.length(s.sub([],this._camera.position,m));return s.clamp(this._zoomFromMercatorZ(_),this._minZoom,this._maxZoom)}setFreeCameraOptions(o){if(!this.height||!o.position&&!o.orientation)return;this._updateCameraState();let c=!1;if(o.orientation&&!s.exactEquals(o.orientation,this._camera.orientation)&&(c=this._setCameraOrientation(o.orientation)),o.position){const m=[o.position.x,o.position.y,o.position.z];s.exactEquals$1(m,this._camera.position)||(this._setCameraPosition(m),c=!0)}c&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const o=this._camera.position,c=new Jp;return c.position=new s.MercatorCoordinate(o[0],o[1],o[2]),c.orientation=this._camera.orientation,c._elevation=this.elevation,c._renderWorldCopies=this.renderWorldCopies,c}_setCameraOrientation(o){if(!s.length$1(o))return!1;s.normalize$1(o,o);const c=s.transformQuat([],[0,0,-1],o),m=s.transformQuat([],[0,-1,0],o);if(m[2]<0)return!1;const _=$l(c,m);return!!_&&(this._camera.orientation=_,!0)}_setCameraPosition(o){const c=this.zoomScale(this.minZoom)*this.tileSize,m=this.zoomScale(this.maxZoom)*this.tileSize,_=this.cameraToCenterDistance;o[2]=s.clamp(o[2],_/m,_/c),this._camera.position=o}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,c,m){this._unmodified=!1,this._edgeInsets.interpolate(o,c,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(o){const c=(o.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/o.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(o){const c=[new s.UnwrappedTileID(0,o)];if(this.renderWorldCopies){const m=this.pointCoordinate(new s.Point(0,0)),_=this.pointCoordinate(new s.Point(this.width,0)),v=this.pointCoordinate(new s.Point(this.width,this.height)),T=this.pointCoordinate(new s.Point(0,this.height)),S=Math.floor(Math.min(m.x,_.x,v.x,T.x)),M=Math.floor(Math.max(m.x,_.x,v.x,T.x)),L=1;for(let k=S-L;k<=M+L;k++)k!==0&&c.push(new s.UnwrappedTileID(k,o))}return c}coveringTiles(o){let c=this.coveringZoomLevel(o);const m=c,_=this.elevation&&!o.isTerrainDEM,v=this.projection.name==="mercator";if(o.minzoom!==void 0&&c<o.minzoom)return[];o.maxzoom!==void 0&&c>o.maxzoom&&(c=o.maxzoom);const T=this.locationCoordinate(this.center),S=this.center.lat,M=1<<c,L=[M*T.x,M*T.y,0],k=this.projection.name==="globe",D=!k,$=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,c,D),W=k?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),K=M*s.mercatorZfromAltitude(1,this.center.lat),X=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),Y=[M*W.x,M*W.y,X*(D?1:K)],B=this.cameraToCenterDistance/o.tileSize*(o.roundZoom?1:.502),H=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?c:0,re=o.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,ne=o.isTerrainDEM?-re:this._elevation?this._elevation.getMinElevationBelowMSL():0,pe=this.projection.isReprojectedInTileSpace?em(this):1,ge=Pe=>{const tt=new s.MercatorCoordinate(Pe.x+25e-6,Pe.y,Pe.z),Ke=new s.MercatorCoordinate(Pe.x,Pe.y+25e-6,Pe.z),rt=Pe.toLngLat(),At=tt.toLngLat(),Rt=Ke.toLngLat(),xt=this.locationCoordinate(rt),kt=this.locationCoordinate(At),Kt=this.locationCoordinate(Rt),Ht=Math.hypot(kt.x-xt.x,kt.y-xt.y),Tt=Math.hypot(Kt.x-xt.x,Kt.y-xt.y);return Math.sqrt(Ht*Tt)*pe/25e-6},me=Pe=>{const $e=re,tt=ne;return{aabb:s.tileAABB(this,M,0,0,0,Pe,tt,$e,this.projection),zoom:0,x:0,y:0,minZ:tt,maxZ:$e,wrap:Pe,fullyVisible:!1}},be=[];let xe=[];const Ie=c,Je=o.reparseOverscaled?m:c,Ce=Pe=>Pe*Pe,Ge=Ce((X-this._centerAltitude)*K),Re=Pe=>{if(!this._elevation||!Pe.tileID||!v)return;const $e=this._elevation.getMinMaxForTile(Pe.tileID),tt=Pe.aabb;$e?(tt.min[2]=$e.min,tt.max[2]=$e.max,tt.center[2]=(tt.min[2]+tt.max[2])/2):(Pe.shouldSplit=Qe(Pe),Pe.shouldSplit||(tt.min[2]=tt.max[2]=tt.center[2]=this._centerAltitude))},Qe=Pe=>{if(Pe.zoom<H)return!0;if(Pe.zoom===Ie)return!1;if(Pe.shouldSplit!=null)return Pe.shouldSplit;const $e=Pe.aabb.distanceX(Y),tt=Pe.aabb.distanceY(Y);let Ke=Ge,rt=1;if(k){Ke=Ce(Pe.aabb.distanceZ(Y));const xt=Math.pow(2,Pe.zoom),kt=s.latFromMercatorY((Pe.y+1)/xt),Kt=s.latFromMercatorY(Pe.y/xt),Ht=Math.min(Math.max(S,kt),Kt),Tt=s.circumferenceAtLatitude(Ht)/s.circumferenceAtLatitude(S);if(rt=Ht===S?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Tt/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&Pe.zoom===Ie-1&&Tt>=.9)return!0}else if(_&&(Ke=Ce(Pe.aabb.distanceZ(Y)*K)),this.projection.isReprojectedInTileSpace&&m<=5){const xt=Math.pow(2,Pe.zoom),kt=ge(new s.MercatorCoordinate((Pe.x+.5)/xt,(Pe.y+.5)/xt));rt=kt>.85?1:kt}const At=$e*$e+tt*tt+Ke,Rt=Ce((1<<Ie-Pe.zoom)*B*rt*((xt,kt)=>{if(kt*Ce(.707)<xt)return 1;const Kt=Math.sqrt(kt/xt);return Kt/(1.4144271570014144+(Math.pow(1.1,Kt-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Ke,Ge),At));return At<Rt};if(this.renderWorldCopies)for(let Pe=1;Pe<=3;Pe++)be.push(me(-Pe)),be.push(me(Pe));for(be.push(me(0));be.length>0;){const Pe=be.pop(),$e=Pe.x,tt=Pe.y;let Ke=Pe.fullyVisible;if(!Ke){const rt=Pe.aabb.intersects($);if(rt===0)continue;Ke=rt===2}if(Pe.zoom!==Ie&&Qe(Pe))for(let rt=0;rt<4;rt++){const At=($e<<1)+rt%2,Rt=(tt<<1)+(rt>>1),xt={aabb:v?Pe.aabb.quadrant(rt):s.tileAABB(this,M,Pe.zoom+1,At,Rt,Pe.wrap,Pe.minZ,Pe.maxZ,this.projection),zoom:Pe.zoom+1,x:At,y:Rt,wrap:Pe.wrap,fullyVisible:Ke,tileID:void 0,shouldSplit:void 0,minZ:Pe.minZ,maxZ:Pe.maxZ};_&&!k&&(xt.tileID=new s.OverscaledTileID(Pe.zoom+1===Ie?Je:Pe.zoom+1,Pe.wrap,Pe.zoom+1,At,Rt),Re(xt)),be.push(xt)}else{const rt=Pe.zoom===Ie?Je:Pe.zoom;if(o.minzoom&&o.minzoom>rt)continue;const At=L[0]-(.5+$e+(Pe.wrap<<Pe.zoom))*(1<<c-Pe.zoom),Rt=L[1]-.5-tt,xt=Pe.tileID?Pe.tileID:new s.OverscaledTileID(rt,Pe.wrap,Pe.zoom,$e,tt);xe.push({tileID:xt,distanceSq:At*At+Rt*Rt})}}if(this.fogCullDistSq){const Pe=this.fogCullDistSq,$e=this.horizonLineFromTop();xe=xe.filter(tt=>{const Ke=[0,0,0,1],rt=[s.EXTENT,s.EXTENT,0,1],At=this.calculateFogTileMatrix(tt.tileID.toUnwrapped());s.transformMat4$1(Ke,Ke,At),s.transformMat4$1(rt,rt,At);const Rt=s.getAABBPointSquareDist(Ke,rt);if(Rt===0)return!0;let xt=!1;const kt=this._elevation;if(kt&&Rt>Pe&&$e!==0){const Kt=this.calculateProjMatrix(tt.tileID.toUnwrapped());let Ht;o.isTerrainDEM||(Ht=kt.getMinMaxForTile(tt.tileID)),Ht||(Ht={min:ne,max:re});const Tt=s.furthestTileCorner(this.rotation),fr=[Tt[0]*s.EXTENT,Tt[1]*s.EXTENT,Ht.max];s.transformMat4(fr,fr,Kt),xt=(1-fr[1])*this.height*.5<$e}return Rt<Pe||xt})}return xe.sort((Pe,$e)=>Pe.distanceSq-$e.distanceSq).map(Pe=>Pe.tileID)}resize(o,c){this.width=o,this.height=c,this.pixelsToGLUnits=[2/o,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(o){return Math.pow(2,o)}scaleZoom(o){return Math.log(o)/Math.LN2}project(o){const c=s.clamp(o.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),m=this.projection.project(o.lng,c);return new s.Point(m.x*this.worldSize,m.y*this.worldSize)}unproject(o){return this.projection.unproject(o.x/this.worldSize,o.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(o,c){let m,_;const v=this.centerPoint;if(this.projection.name==="globe"){const S=this.worldSize;m=(c.x-v.x)/S,_=(c.y-v.y)/S}else{const S=this.pointCoordinate(c),M=this.pointCoordinate(v);m=S.x-M.x,_=S.y-M.y}const T=this.locationCoordinate(o);this.setLocation(new s.MercatorCoordinate(T.x-m,T.y-_))}setLocation(o){this.center=this.coordinateLocation(o),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(o){return this.projection.locationPoint(this,o)}locationPoint3D(o){return this.projection.locationPoint(this,o,!0)}pointLocation(o){return this.coordinateLocation(this.pointCoordinate(o))}pointLocation3D(o){return this.coordinateLocation(this.pointCoordinate3D(o))}locationCoordinate(o,c){const m=c?s.mercatorZfromAltitude(c,o.lat):void 0,_=this.projection.project(o.lng,o.lat);return new s.MercatorCoordinate(_.x,_.y,m)}coordinateLocation(o){return this.projection.unproject(o.x,o.y)}pointRayIntersection(o,c){const m=c??this._centerAltitude,_=[o.x,o.y,0,1],v=[o.x,o.y,1,1];s.transformMat4$1(_,_,this.pixelMatrixInverse),s.transformMat4$1(v,v,this.pixelMatrixInverse);const T=v[3];s.scale$1(_,_,1/_[3]),s.scale$1(v,v,1/T);const S=_[2],M=v[2];return{p0:_,p1:v,t:S===M?0:(m-S)/(M-S)}}screenPointToMercatorRay(o){const c=[o.x,o.y,0,1],m=[o.x,o.y,1,1];return s.transformMat4$1(c,c,this.pixelMatrixInverse),s.transformMat4$1(m,m,this.pixelMatrixInverse),s.scale$1(c,c,1/c[3]),s.scale$1(m,m,1/m[3]),c[2]=s.mercatorZfromAltitude(c[2],this._center.lat)*this.worldSize,m[2]=s.mercatorZfromAltitude(m[2],this._center.lat)*this.worldSize,s.scale$1(c,c,1/this.worldSize),s.scale$1(m,m,1/this.worldSize),new s.Ray([c[0],c[1],c[2]],s.normalize([],s.sub([],m,c)))}rayIntersectionCoordinate(o){const{p0:c,p1:m,t:_}=o,v=s.mercatorZfromAltitude(c[2],this._center.lat),T=s.mercatorZfromAltitude(m[2],this._center.lat);return new s.MercatorCoordinate(s.number(c[0],m[0],_)/this.worldSize,s.number(c[1],m[1],_)/this.worldSize,s.number(v,T,_))}pointCoordinate(o,c=this._centerAltitude){return this.projection.pointCoordinate(this,o.x,o.y,c)}pointCoordinate3D(o){if(!this.elevation)return this.pointCoordinate(o);let c=this.projection.pointCoordinate3D(this,o.x,o.y);if(c)return new s.MercatorCoordinate(c[0],c[1],c[2]);let m=0,_=this.horizonLineFromTop();if(o.y>_)return this.pointCoordinate(o);const v=.02*_,T=o.clone();for(let S=0;S<10&&_-m>v;S++){T.y=s.number(m,_,.66);const M=this.projection.pointCoordinate3D(this,T.x,T.y);M?(_=T.y,c=M):m=T.y}return c?new s.MercatorCoordinate(c[0],c[1],c[2]):this.pointCoordinate(o)}isPointAboveHorizon(o){return this.projection.isPointAboveHorizon(this,o)}isPointOnSurface(o){if(o.y<0||o.y>this.height||o.x<0||o.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(o);const c=this.pointCoordinate(o);return c.y>=0&&c.y<=1}_coordinatePoint(o,c){const m=c&&this.elevation?this.elevation.getAtPointOrZero(o,this._centerAltitude):this._centerAltitude,_=[o.x*this.worldSize,o.y*this.worldSize,m+o.toAltitude(),1];return s.transformMat4$1(_,_,this.pixelMatrix),_[3]>0?new s.Point(_[0]/_[3],_[1]/_[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:o,left:c}=this._edgeInsets,m=this.height-this._edgeInsets.bottom,_=this.width-this._edgeInsets.right,v=this.pointLocation3D(new s.Point(c,o)),T=this.pointLocation3D(new s.Point(_,o)),S=this.pointLocation3D(new s.Point(_,m)),M=this.pointLocation3D(new s.Point(c,m));let L=Math.min(v.lng,T.lng,S.lng,M.lng),k=Math.max(v.lng,T.lng,S.lng,M.lng),D=Math.min(v.lat,T.lat,S.lat,M.lat),$=Math.max(v.lat,T.lat,S.lat,M.lat);const W=Math.pow(2,-this.zoom)/16*270,K=this.projection.name==="globe"?1:4,X=(Y,B,H,re,ne)=>{const pe=(Y+H)/2,ge=(B+re)/2,me=new s.Point(pe,ge),{lng:be,lat:xe}=this.pointLocation3D(me),Ie=Math.max(0,L-be,D-xe,be-k,xe-$);L=Math.min(L,be),k=Math.max(k,be),D=Math.min(D,xe),$=Math.max($,xe),(ne<K||Ie>W)&&(X(Y,B,pe,ge,ne+1),X(pe,ge,H,re,ne+1))};if(X(c,o,_,o,1),X(_,o,_,m,1),X(_,m,c,m,1),X(c,m,c,o,1),this.projection.name==="globe"){const[Y,B]=s.polesInViewport(this);Y?($=90,k=180,L=-180):B&&(D=-90,k=180,L=-180)}return new s.LngLatBounds(new s.LngLat(L,D),new s.LngLat(k,$))}_getBoundsRectangular(o,c){const{top:m,left:_}=this._edgeInsets,v=this.height-this._edgeInsets.bottom,T=this.width-this._edgeInsets.right,S=new s.Point(_,m),M=new s.Point(T,m),L=new s.Point(T,v),k=new s.Point(_,v);let D=this.pointCoordinate(S,o),$=this.pointCoordinate(M,o);const W=this.pointCoordinate(L,c),K=this.pointCoordinate(k,c),X=(Y,B)=>(B.y-Y.y)/(B.x-Y.x);return D.y>1&&$.y>=0?D=new s.MercatorCoordinate((1-K.y)/X(K,D)+K.x,1):D.y<0&&$.y<=1&&(D=new s.MercatorCoordinate(-K.y/X(K,D)+K.x,0)),$.y>1&&D.y>=0?$=new s.MercatorCoordinate((1-W.y)/X(W,$)+W.x,1):$.y<0&&D.y<=1&&($=new s.MercatorCoordinate(-W.y/X(W,$)+W.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(D)).extend(this.coordinateLocation($)).extend(this.coordinateLocation(K)).extend(this.coordinateLocation(W))}_getBoundsRectangularTerrain(){const o=this.elevation;if(!o.visibleDemTiles.length||o.isUsingMockSource())return this._getBoundsRectangular(0,0);const c=o.visibleDemTiles.reduce((m,_)=>{if(_.dem){const v=_.dem.tree;m.min=Math.min(m.min,v.minimums[0]),m.max=Math.max(m.max,v.maximums[0])}return m},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(c.min*o.exaggeration(),c.max*o.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(o=!0){const c=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,m=this.height/2-c*(1-this._horizonShift);return o?Math.max(0,m):m}getMaxBounds(){return this.maxBounds}setMaxBounds(o){this.maxBounds=o,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,o&&(this.minLat=o.getSouth(),this.maxLat=o.getNorth(),this.minLng=o.getWest(),this.maxLng=o.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(o,c){return this.projection.createTileMatrix(this,c,o)}calculateDistanceTileData(o){const c=o.key,m=this._distanceTileDataCache;if(m[c])return m[c];const _=o.canonical,v=1/this.height,T=this.cameraWorldSize,S=T/this.zoomScale(_.z),M=(_.x+Math.pow(2,_.z)*o.wrap)*S,L=_.y*S,k=this.point;k.x*=T/this.worldSize,k.y*=T/this.worldSize;const D=this.angle,$=Math.sin(-D),W=-Math.cos(-D);return m[c]={bearing:[$,W],center:[(k.x-M)*v,(k.y-L)*v],scale:S/s.EXTENT*v},m[c]}calculateFogTileMatrix(o){const c=o.key,m=this._fogTileMatrixCache;if(m[c])return m[c];const _=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,o);return s.multiply(_,this.worldToFogMatrix,_),m[c]=new Float32Array(_),m[c]}calculateProjMatrix(o,c=!1){const m=o.key,_=c?this._alignedProjMatrixCache:this._projMatrixCache;if(_[m])return _[m];const v=this.calculatePosMatrix(o,this.worldSize);return s.multiply(v,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:c?this.alignedProjMatrix:this.projMatrix,v),_[m]=new Float32Array(v),_[m]}calculatePixelsToTileUnitsMatrix(o){const c=o.tileID.key,m=this._pixelsToTileUnitsCache;if(m[c])return m[c];const _=function(v,T){const{scale:S}=v.tileTransform,M=S*s.EXTENT/(v.tileSize*Math.pow(2,T.zoom-v.tileID.overscaledZ+v.tileID.canonical.z));return L=new Float32Array(4),$=(k=T.inverseAdjustmentMatrix)[1],W=k[2],K=k[3],Y=(D=[M,M])[1],L[0]=k[0]*(X=D[0]),L[1]=$*X,L[2]=W*Y,L[3]=K*Y,L;var L,k,D,$,W,K,X,Y}(o,this);return m[c]=_,m[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const o=1/this.worldSize,c=s.fromScaling([],[o,o,o]);return s.multiply(c,c,this.globeMatrix),c}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const o=this._elevation;this._updateCameraState();const c=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,m=this._computeCameraPosition(c),_=this._camera.forward(),v=s.mercatorZfromAltitude(1,this._center.lat);m[2]/=v,_[2]/=v,s.normalize(_,_);const T=o.raycast(m,_,o.exaggeration());if(T){const S=s.scaleAndAdd([],m,_,T),M=new s.MercatorCoordinate(S[0],S[1],s.mercatorZfromAltitude(S[2],s.latFromMercatorY(S[1]))),L=(M.z+s.length([M.x-m[0],M.y-m[1],M.z-m[2]*v]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(L),this._centerAltitude=M.toAltitude(),this._center=this.coordinateLocation(M),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(o=!1){if(!this._elevation)return;const c=this._elevation,m=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(m),v=c.getAtPointOrZero(new s.MercatorCoordinate(..._)),T=this.pixelsPerMeter/this.worldSize*v,S=this._minimumHeightOverTerrain(),M=_[2]-T;if(M<=S)if(M<0||o){const L=this.locationCoordinate(this._center,this._centerAltitude),k=[_[0],_[1],L.z-_[2]],D=s.length(k);k[2]-=(S-M)/this._pixelsPerMercatorPixel;const $=s.length(k);if($===0)return;s.scale$2(k,k,D/$*this._pixelsPerMercatorPixel),this._camera.position=[_[0],_[1],L.z*this._pixelsPerMercatorPixel-k[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const o=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||o){const $=this.center;return $.lat=s.clamp($.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!o)&&($.lng=s.clamp($.lng,this.minLng,this.maxLng)),this.center=$,void(this._constraining=!1)}const c=this._unmodified,{x:m,y:_}=this.point;let v=0,T=m,S=_;const M=this.width/2,L=this.height/2,k=this.worldMinY*this.scale,D=this.worldMaxY*this.scale;if(_-L<k&&(S=k+L),_+L>D&&(S=D-L),D-k<this.height&&(v=Math.max(v,this.height/(D-k)),S=(D+k)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const $=this.worldMinX*this.scale,W=this.worldMaxX*this.scale,K=this.worldSize/2-($+W)/2;T=(m+K+this.worldSize)%this.worldSize-K,T-M<$&&(T=$+M),T+M>W&&(T=W-M),W-$<this.width&&(v=Math.max(v,this.width/(W-$)),T=(W+$)/2)}T===m&&S===_||(this.center=this.unproject(new s.Point(T,S))),v&&(this.zoom+=this.scaleZoom(v)),this._constrainCamera(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){let o=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(o=Math.max(o,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),o}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const o=this.centerOffset,c=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const m=lu(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,m),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const _=this.projection.zAxisUnit==="meters"?c:1,v=this._camera.getWorldToCamera(this.worldSize,_),T=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);T[8]=2*-o.x/this.width,T[9]=2*o.y/this.height;let S=s.mul([],T,v);if(this.projection.isReprojectedInTileSpace){const ge=this.locationCoordinate(this.center),me=s.identity([]);s.translate(me,me,[ge.x*this.worldSize,ge.y*this.worldSize,0]),s.multiply(me,me,Ca(this)),s.translate(me,me,[-ge.x*this.worldSize,-ge.y*this.worldSize,0]),s.multiply(S,S,me),this.inverseAdjustmentMatrix=function(be){const xe=Ca(be,!0);return Te([],[xe[0],xe[1],xe[4],xe[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],S,[this.worldSize,this.worldSize,this.worldSize/_,1]),this.projMatrix=S,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const M=s.invert([],T);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(M,this.horizonLineFromTop(),this.height);const L=new Float32Array(16);s.identity(L),s.scale(L,L,[1,-1,1]),s.rotateX(L,L,this._pitch),s.rotateZ(L,L,this.angle);const k=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),D=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;k[8]=2*-o.x/this.width,k[9]=2*(o.y+D)/this.height,this.skyboxMatrix=s.multiply(L,k,L);const $=this.point,W=$.x,K=$.y,X=this.width%2/2,Y=this.height%2/2,B=Math.cos(this.angle),H=Math.sin(this.angle),re=W-Math.round(W)+B*X+H*Y,ne=K-Math.round(K)+B*Y+H*X,pe=new Float64Array(S);if(s.translate(pe,pe,[re>.5?re-1:re,ne>.5?ne-1:ne,0]),this.alignedProjMatrix=pe,S=s.create(),s.scale(S,S,[this.width/2,-this.height/2,1]),s.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=s.create(),s.scale(S,S,[1,-1,1]),s.translate(S,S,[-1,-1,0]),s.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},S=s.invert(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=S,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const ge=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4(ge,ge,v),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=S;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const o=this.cameraWorldSizeForFog,c=this.cameraPixelsPerMeter,m=this._camera.position,_=1/this.height/this._pixelsPerMercatorPixel,v=[o,o,c];s.scale$2(v,v,_),s.scale$2(m,m,-1),s.multiply$2(m,m,v);const T=s.create();s.translate(T,T,m),s.scale(T,T,v),this.mercatorFogMatrix=T,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(o,c,_)}_computeCameraPosition(o){const c=(o=o||this.pixelsPerMeter)/this.pixelsPerMeter,m=this._camera.forward(),_=this.point,v=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*c-o/this.worldSize*this._centerAltitude;return[_.x/this.worldSize-m[0]*v,_.y/this.worldSize-m[1]*v,o/this.worldSize*this._centerAltitude-m[2]*v]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(o){const c=this._maxCameraBoundsDistance()*Math.cos(this._pitch),m=this._camera.position[2],_=o[2];let v=1;this.projection.wrap&&(this.center=this.center.wrap()),_>0&&(v=Math.min((c-m)/_,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,o,v),this._updateStateFromCamera()}_updateStateFromCamera(){const o=this._camera.position,c=this._camera.forward(),{pitch:m,bearing:_}=this._camera.getPitchBearing(),v=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,T=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),S=Math.max((o[2]-v)/Math.cos(m),T),M=this._zoomFromMercatorZ(S);s.scaleAndAdd(o,o,c,S),this._pitch=s.clamp(m,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(_,-Math.PI,Math.PI),this._setZoom(s.clamp(M,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(o[0],o[1],o[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(o){return Math.pow(2,o)*this.tileSize}_mercatorZfromZoom(o){return this.cameraToCenterDistance/this._worldSizeFromZoom(o)}_minimumHeightOverTerrain(){const o=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(o)}_zoomFromMercatorZ(o){return this.scaleZoom(this.cameraToCenterDistance/(o*this.tileSize))}zoomFromMercatorZAdjusted(o){let c=0,m=s.GLOBE_ZOOM_THRESHOLD_MAX,_=0,v=1/0;for(;m-c>1e-6&&m>c;){const T=c+.5*(m-c),S=this.tileSize*Math.pow(2,T),M=this.getCameraToCenterDistance(this.projection,T,S),L=this.scaleZoom(M/(o*this.tileSize)),k=Math.abs(T-L);k<v&&(v=k,_=T),T<L?c=T:m=T}return _}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(o,c){const m=Math.min(o.x,c.x),_=Math.max(o.x,c.x),v=Math.min(o.y,c.y),T=Math.max(o.y,c.y);if(v<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const S=[new s.Point(m,v),new s.Point(_,T),new s.Point(m,T),new s.Point(_,v)],M=this.renderWorldCopies?-3:0,L=this.renderWorldCopies?4:1;for(const k of S){const D=this.pointRayIntersection(k);if(D.t<0)return!0;const $=this.rayIntersectionCoordinate(D);if($.x<M||$.y<0||$.x>L||$.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(o,c){const m=s.length(s.sub([],this._camera.position,o)),_=this._zoomFromMercatorZ(m)+c;return m-this._mercatorZfromZoom(_)}getCameraPoint(){if(this.projection.name==="globe"){const o=function([c,m,_],v){const T=[c,m,_,1];s.transformMat4$1(T,T,v);const S=T[3]=Math.max(T[3],1e-6);return T[0]/=S,T[1]/=S,T[2]/=S,T}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(o[0],o[1])}{const o=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,o))}}getCameraToCenterDistance(o,c=this.zoom,m=this.worldSize){const _=lu(o,c,this.width,this.height,1024),v=o.pixelSpaceConversion(this.center.lat,m,_);return .5/Math.tan(.5*this._fov)*this.height*v}getWorldToCameraMatrix(){const o=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(o,o,this.globeMatrix),o}}function Pa(f,o){let c=!1,m=null;const _=()=>{m=null,c&&(f(),m=setTimeout(_,o),c=!1)};return()=>(c=!0,m||_(),m)}class fd{constructor(o){this._hashName=o&&encodeURIComponent(o),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Pa(this._updateHashUnthrottled.bind(this),300)}addTo(o){return this._map=o,s.window.addEventListener("hashchange",this._onHashChange,!1),o.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const o=this._map;if(!o)return"";const c=Gl(o);if(this._hashName){const m=this._hashName;let _=!1;const v=s.window.location.hash.slice(1).split("&").map(T=>{const S=T.split("=")[0];return S===m?(_=!0,`${S}=${c}`):T}).filter(T=>T);return _||v.push(`${m}=${c}`),`#${v.join("&")}`}return`#${c}`}_getCurrentHash(){const o=s.window.location.hash.replace("#","");if(this._hashName){let c;return o.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(c=m)}),(c&&c[1]||"").split("/")}return o.split("/")}_onHashChange(){const o=this._map;if(!o)return!1;const c=this._getCurrentHash();if(c.length>=3&&!c.some(m=>isNaN(m))){const m=o.dragRotate.isEnabled()&&o.touchZoomRotate.isEnabled()?+(c[3]||0):o.getBearing();return o.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:m,pitch:+(c[4]||0)}),!0}return!1}_updateHashUnthrottled(){const o=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,o)}}function Gl(f,o){const c=f.getCenter(),m=Math.round(100*f.getZoom())/100,_=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,_),T=Math.round(c.lng*v)/v,S=Math.round(c.lat*v)/v,M=f.getBearing(),L=f.getPitch();let k=o?`/${T}/${S}/${m}`:`${m}/${S}/${T}`;return(M||L)&&(k+="/"+Math.round(10*M)/10),L&&(k+=`/${Math.round(L)}`),k}const Zl={linearity:.3,easing:s.bezier(0,0,.3,1)},uu=s.extend({deceleration:2500,maxSpeed:1400},Zl),hu=s.extend({deceleration:20,maxSpeed:1400},Zl),mt=s.extend({deceleration:1e3,maxSpeed:360},Zl),qi=s.extend({deceleration:1e3,maxSpeed:90},Zl);class rm{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,c=s.exported.now();for(;o.length>0&&c-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const c={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)c.zoom+=v.zoomDelta||0,c.bearing+=v.bearingDelta||0,c.pitch+=v.pitchDelta||0,v.panDelta&&c.pan._add(v.panDelta),v.around&&(c.around=v.around),v.pinchAround&&(c.pinchAround=v.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(c.pan.mag()){const v=ql(c.pan.mag(),m,s.extend({},uu,o||{}));_.offset=c.pan.mult(v.amount/c.pan.mag()),_.center=this._map.transform.center,Hl(_,v)}if(c.zoom){const v=ql(c.zoom,m,hu);_.zoom=this._map.transform.zoom+v.amount,Hl(_,v)}if(c.bearing){const v=ql(c.bearing,m,mt);_.bearing=this._map.transform.bearing+s.clamp(v.amount,-179,179),Hl(_,v)}if(c.pitch){const v=ql(c.pitch,m,qi);_.pitch=this._map.transform.pitch+v.amount,Hl(_,v)}if(_.zoom||_.bearing){const v=c.pinchAround===void 0?c.around:c.pinchAround;_.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),_.noMoveStart=!0,_}}function Hl(f,o){(!f.duration||f.duration<o.duration)&&(f.duration=o.duration,f.easing=o.easing)}function ql(f,o,c){const{maxSpeed:m,linearity:_,deceleration:v}=c,T=s.clamp(f*_/(o/1e3),-m,m),S=Math.abs(T)/(v*_);return{easing:c.easing,duration:1e3*S,amount:T*(S/2)}}class Sn extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,m,_={}){const v=ke(c.getCanvasContainer(),m),T=c.unproject(v);super(o,s.extend({point:v,lngLat:T,originalEvent:m},_)),this._defaultPrevented=!1,this.target=c}}class Wl extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,m){const _=o==="touchend"?m.changedTouches:m.touches,v=Fe(c.getCanvasContainer(),_),T=v.map(M=>c.unproject(M)),S=v.reduce((M,L,k,D)=>M.add(L.div(D.length)),new s.Point(0,0));super(o,{points:v,point:S,lngLats:T,lngLat:c.unproject(S),originalEvent:m}),this._defaultPrevented=!1}}class du extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,c,m){super(o,{originalEvent:m}),this._defaultPrevented=!1}}class pd{constructor(o,c){this._map=o,this._clickTolerance=c.clickTolerance}reset(){this._mousedownPos=void 0}wheel(o){return this._firePreventable(new du(o.type,this._map,o))}mousedown(o,c){return this._mousedownPos=c,this._firePreventable(new Sn(o.type,this._map,o))}mouseup(o){this._map.fire(new Sn(o.type,this._map,o))}preclick(o){const c=s.extend({},o);c.type="preclick",this._map.fire(new Sn(c.type,this._map,c))}click(o,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||(this.preclick(o),this._map.fire(new Sn(o.type,this._map,o)))}dblclick(o){return this._firePreventable(new Sn(o.type,this._map,o))}mouseover(o){this._map.fire(new Sn(o.type,this._map,o))}mouseout(o){this._map.fire(new Sn(o.type,this._map,o))}touchstart(o){return this._firePreventable(new Wl(o.type,this._map,o))}touchmove(o){this._map.fire(new Wl(o.type,this._map,o))}touchend(o){this._map.fire(new Wl(o.type,this._map,o))}touchcancel(o){this._map.fire(new Wl(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fu{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(o){this._map.fire(new Sn(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Sn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._map.fire(new Sn(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class nm{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,c){this.isEnabled()&&o.shiftKey&&o.button===0&&(J(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(o,c){if(!this._active)return;const m=c,_=this._startPos,v=this._lastPos;if(!_||!v||v.equals(m)||!this._box&&m.dist(_)<this._clickTolerance)return;this._lastPos=m,this._box||(this._box=q("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",o));const T=Math.min(_.x,m.x),S=Math.max(_.x,m.x),M=Math.min(_.y,m.y),L=Math.max(_.y,m.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${T}px,${M}px)`,this._box.style.width=S-T+"px",this._box.style.height=L-M+"px")})}mouseupWindow(o,c){if(!this._active)return;const m=this._startPos,_=c;if(m&&o.button===0){if(this.reset(),Ee(),m.x!==_.x||m.y!==_.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:o})),{cameraAnimation:v=>v.fitScreenCoordinates(m,_,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",o)}}keydown(o){this._active&&o.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",o))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Z(),delete this._startPos,delete this._lastPos}_fireEvent(o,c){return this._map.fire(new s.Event(o,{originalEvent:c}))}}function pu(f,o){const c={};for(let m=0;m<f.length;m++)c[f[m].identifier]=o[m];return c}class Ia{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(o,c,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=o.timeStamp),m.length===this.numTouches&&(this.centroid=function(_){const v=new s.Point(0,0);for(const T of _)v._add(T);return v.div(_.length)}(c),this.touches=pu(m,c)))}touchmove(o,c,m){if(this.aborted||!this.centroid)return;const _=pu(m,c);for(const v in this.touches){const T=_[v];(!T||T.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(o,c,m){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class md{constructor(o){this.singleTap=new Ia(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(o,c,m){this.singleTap.touchstart(o,c,m)}touchmove(o,c,m){this.singleTap.touchmove(o,c,m)}touchend(o,c,m){const _=this.singleTap.touchend(o,c,m);if(_){const v=o.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(_)<30;if(v&&T||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class ey{constructor(){this._zoomIn=new md({numTouches:1,numTaps:2}),this._zoomOut=new md({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,c,m){this._zoomIn.touchstart(o,c,m),this._zoomOut.touchstart(o,c,m)}touchmove(o,c,m){this._zoomIn.touchmove(o,c,m),this._zoomOut.touchmove(o,c,m)}touchend(o,c,m){const _=this._zoomIn.touchend(o,c,m),v=this._zoomOut.touchend(o,c,m);return _?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()+1,around:T.unproject(_)},{originalEvent:o})}):v?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:T.getZoom()-1,around:T.unproject(v)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const im={0:1,2:2};class ka{constructor(o){this.reset(),this._clickTolerance=o.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(o,c){return!1}_move(o,c){return{}}mousedown(o,c){if(this._lastPoint)return;const m=We(o);this._correctButton(o,m)&&(this._lastPoint=c,this._eventButton=m)}mousemoveWindow(o,c){const m=this._lastPoint;if(m){if(o.preventDefault(),this._eventButton!=null&&function(_,v){const T=im[v];return _.buttons===void 0||(_.buttons&T)!==T}(o,this._eventButton))this.reset();else if(this._moved||!(c.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=c,this._move(m,c)}}mouseupWindow(o){this._lastPoint&&We(o)===this._eventButton&&(this._moved&&Ee(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gd extends ka{mousedown(o,c){super.mousedown(o,c),this._lastPoint&&(this._active=!0)}_correctButton(o,c){return c===0&&!o.ctrlKey}_move(o,c){return{around:c,panDelta:c.sub(o)}}}class _d extends ka{_correctButton(o,c){return c===0&&o.ctrlKey||c===2}_move(o,c){const m=.8*(c.x-o.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(o){o.preventDefault()}}class yd extends ka{_correctButton(o,c){return c===0&&o.ctrlKey||c===2}_move(o,c){const m=-.5*(c.y-o.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(o){o.preventDefault()}}class mu{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._minTouches=1,this._clickTolerance=c.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(o,c,m){return this._calculateTransform(o,c,m)}touchmove(o,c,m){if(this._active&&!(m.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(m.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return o.cancelable&&o.preventDefault(),this._calculateTransform(o,c,m)}}touchend(o,c,m){this._calculateTransform(o,c,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,c,m){m.length>0&&(this._active=!0);const _=pu(m,c),v=new s.Point(0,0),T=new s.Point(0,0);let S=0;for(const L in _){const k=_[L],D=this._touches[L];D&&(v._add(k),T._add(k.sub(D)),S++,_[L]=k)}if(this._touches=_,S<this._minTouches||!T.mag())return;const M=T.div(S);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(S),panDelta:M}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=q("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Xl{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(o){}_move(o,c,m){return{}}touchstart(o,c,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([c[0],c[1]]))}touchmove(o,c,m){const _=this._firstTwoTouches;if(!_)return;o.preventDefault();const[v,T]=_,S=Kl(m,c,v),M=Kl(m,c,T);if(!S||!M)return;const L=this._aroundCenter?null:S.add(M).div(2);return this._move([S,M],L,o)}touchend(o,c,m){if(!this._firstTwoTouches)return;const[_,v]=this._firstTwoTouches,T=Kl(m,c,_),S=Kl(m,c,v);T&&S||(this._active&&Ee(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&o.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Kl(f,o,c){for(let m=0;m<f.length;m++)if(f[m].identifier===c)return o[m]}function vd(f,o){return Math.log(f/o)/Math.LN2}class om extends Xl{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,c){const m=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(vd(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vd(this._distance,m),pinchAround:c}}}function xd(f,o){return 180*f.angleWith(o)/Math.PI}class sm extends Xl{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,c){const m=this._vector;if(this._vector=o[0].sub(o[1]),m&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:xd(this._vector,m),pinchAround:c}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const c=25/(Math.PI*this._minDiameter)*360,m=this._startVector;if(!m)return!1;const _=xd(o,m);return Math.abs(_)<c}}function cs(f){return Math.abs(f.y)>Math.abs(f.x)}class am extends Xl{constructor(o){super(),this._map=o}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(o){this._lastPoints=o,cs(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,c,m){const _=this._lastPoints;if(!_)return;const v=o[0].sub(_[0]),T=o[1].sub(_[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&m.touches.length<3||(this._valid=this.gestureBeginsVertically(v,T,m.timeStamp),!this._valid)?void 0:(this._lastPoints=o,this._active=!0,{pitchDelta:(v.y+T.y)/2*-.5})}gestureBeginsVertically(o,c,m){if(this._valid!==void 0)return this._valid;const _=o.mag()>=2,v=c.mag()>=2;if(!_&&!v)return;if(!_||!v)return this._firstMove==null&&(this._firstMove=m),m-this._firstMove<100&&void 0;const T=o.y>0==c.y>0;return cs(o)&&cs(c)&&T}}const lm={panStep:100,bearingStep:15,pitchStep:10};class ty{constructor(){const o=lm;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let c=0,m=0,_=0,v=0,T=0;switch(o.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:o.shiftKey?m=-1:(o.preventDefault(),v=-1);break;case 39:o.shiftKey?m=1:(o.preventDefault(),v=1);break;case 38:o.shiftKey?_=1:(o.preventDefault(),T=-1);break;case 40:o.shiftKey?_=-1:(o.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(m=0,_=0),{cameraAnimation:S=>{const M=S.getZoom();S.easeTo({duration:300,easeId:"keyboardHandler",easing:cm,zoom:c?Math.round(M)+c*(o.shiftKey?2:1):M,bearing:S.getBearing()+m*this._bearingStep,pitch:S.getPitch()+_*this._pitchStep,offset:[-v*this._panStep,-T*this._panStep],center:S.getCenter()},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function cm(f){return f*(2-f)}const bd=4.000244140625;class um{constructor(o,c){this._map=o,this._el=o.getCanvasContainer(),this._handler=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&o.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(o){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(o.ctrlKey||o.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let c=o.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const m=s.exported.now(),_=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,c!==0&&c%bd==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(_*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),o.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=o,this._delta-=c,this._active||this._start(o)),o.preventDefault()}_onTimeout(o){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(o)}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=ke(this._el,o);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:c,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._map.transform;this._type==="wheel"&&o.projection.wrap&&(o._center.lng>=180||o._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const c=()=>o._terrainEnabled()&&this._aroundCoord?o.computeZoomRelativeTo(this._aroundCoord):o.zoom;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>bd?this._wheelZoomRate:this._defaultZoomRate;let L=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&L!==0&&(L=1/L);const k=c(),D=Math.pow(2,k),$=typeof this._targetZoom=="number"?o.zoomScale(this._targetZoom):D;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom($*L))),this._type==="wheel"&&(this._startZoom=k,this._easing=this._smoothOutEasing(200)),this._delta=0}const m=typeof this._targetZoom=="number"?this._targetZoom:c(),_=this._startZoom,v=this._easing;let T,S=!1;if(this._type==="wheel"&&_&&v){const M=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),L=v(M);T=s.number(_,m,L),M<1?this._frameId||(this._frameId=!0):S=!0}else T=m,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:T-c(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let c=s.ease;if(this._prevEase){const m=this._prevEase,_=(s.exported.now()-m.start)/m.duration,v=m.easing(_+.01)-m.easing(_),T=.27/Math.sqrt(v*v+1e-4)*.01,S=Math.sqrt(.0729-T*T);c=s.bezier(T,S,.25,1)}return this._prevEase={start:s.exported.now(),duration:o,easing:c},c}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=q("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class hm{constructor(o,c){this._clickZoom=o,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class jn{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(o,c){return o.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(o.shiftKey?-1:1),around:m.unproject(c)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ry{constructor(){this._tap=new md({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(o,c,m){this._swipePoint||(this._tapTime&&o.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=c[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(o,c,m))}touchmove(o,c,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const _=c[0],v=_.y-this._swipePoint.y;return this._swipePoint=_,o.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(o,c,m)}touchend(o,c,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(o,c,m)&&(this._tapTime=o.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dm{constructor(o,c,m){this._el=o,this._mousePan=c,this._touchPan=m}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ny{constructor(o,c,m){this._pitchWithRotate=o.pitchWithRotate,this._mouseRotate=c,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class iy{constructor(o,c,m,_){this._el=o,this._touchZoom=c,this._touchRotate=m,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ki=f=>f.zoom||f.drag||f.pitch||f.rotate;class fm extends s.Event{}class oy{constructor(){this.constants=[1,1,.01],this.radius=0}setup(o,c){const m=s.sub([],c,o);this.radius=s.length(m[2]<0?s.div([],m,this.constants):[m[0],m[1],0])}projectRay(o){s.div(o,o,this.constants),s.normalize(o,o),s.mul$1(o,o,this.constants);const c=s.scale$2([],o,this.radius);if(c[2]>0){const m=s.scale$2([],[0,0,1],s.dot(c,[0,0,1])),_=s.scale$2([],s.normalize([],[c[0],c[1],0]),this.radius),v=s.add([],c,s.scale$2([],s.sub([],s.add([],_,m),c),2));c[0]=v[0],c[1]=v[1]}return c}}function Wi(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class ho{constructor(o,c){this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rm(o),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new oy,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(c),s.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[_,v,T]of this._listeners)_.addEventListener(v,_===s.window.document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[o,c,m]of this._listeners)o.removeEventListener(c,o===s.window.document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(o){const c=this._map,m=c.getCanvasContainer();this._add("mapEvent",new pd(c,o));const _=c.boxZoom=new nm(c,o);this._add("boxZoom",_);const v=new ey,T=new jn;c.doubleClickZoom=new hm(T,v),this._add("tapZoom",v),this._add("clickZoom",T);const S=new ry;this._add("tapDragZoom",S);const M=c.touchPitch=new am(c);this._add("touchPitch",M);const L=new _d(o),k=new yd(o);c.dragRotate=new ny(o,L,k),this._add("mouseRotate",L,["mousePitch"]),this._add("mousePitch",k,["mouseRotate"]);const D=new gd(o),$=new mu(c,o);c.dragPan=new dm(m,D,$),this._add("mousePan",D),this._add("touchPan",$,["touchZoom","touchRotate"]);const W=new sm,K=new om;c.touchZoomRotate=new iy(m,K,W,S),this._add("touchRotate",W,["touchPan","touchZoom"]),this._add("touchZoom",K,["touchPan","touchRotate"]),this._add("blockableMapEvent",new fu(c));const X=c.scrollZoom=new um(c,this);this._add("scrollZoom",X,["mousePan"]);const Y=c.keyboard=new ty;this._add("keyboard",Y);for(const B of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])o.interactive&&o[B]&&c[B].enable(o[B])}_add(o,c,m){this._handlers.push({handlerName:o,handler:c,allowed:m}),this._handlersById[o]=c}stop(o){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ki(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(o,c,m){for(const _ in o)if(_!==m&&(!c||c.indexOf(_)<0))return!0;return!1}handleWindowEvent(o){this.handleEvent(o,`${o.type}Window`)}_getMapTouches(o){const c=[];for(const m of o)this._el.contains(m.target)&&c.push(m);return c}handleEvent(o,c){this._updatingCamera=!0;const m=o.type==="renderFrame",_=m?void 0:o,v={needsRenderFrame:!1},T={},S={},M=o.touches?this._getMapTouches(o.touches):void 0,L=M?Fe(this._el,M):m?void 0:ke(this._el,o);for(const{handlerName:$,handler:W,allowed:K}of this._handlers){if(!W.isEnabled())continue;let X;this._blockedByActive(S,K,$)?W.reset():W[c||o.type]&&(X=W[c||o.type](o,L,M),this.mergeHandlerResult(v,T,X,$,_),X&&X.needsRenderFrame&&this._triggerRenderFrame()),(X||W.isActive())&&(S[$]=W)}const k={};for(const $ in this._previousActiveHandlers)S[$]||(k[$]=_);this._previousActiveHandlers=S,(Object.keys(k).length||Wi(v))&&(this._changes.push([v,T,k]),this._triggerRenderFrame()),(Object.keys(S).length||Wi(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:D}=v;D&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],D(this._map))}mergeHandlerResult(o,c,m,_,v){if(!m)return;s.extend(o,m);const T={handlerName:_,originalEvent:m.originalEvent||v};m.zoomDelta!==void 0&&(c.zoom=T),m.panDelta!==void 0&&(c.drag=T),m.pitchDelta!==void 0&&(c.pitch=T),m.bearingDelta!==void 0&&(c.rotate=T)}_applyChanges(){const o={},c={},m={};for(const[_,v,T]of this._changes)_.panDelta&&(o.panDelta=(o.panDelta||new s.Point(0,0))._add(_.panDelta)),_.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(o.around=_.around),_.aroundCoord!==void 0&&(o.aroundCoord=_.aroundCoord),_.pinchAround!==void 0&&(o.pinchAround=_.pinchAround),_.noInertia&&(o.noInertia=_.noInertia),s.extend(c,v),s.extend(m,T);this._updateMapTransform(o,c,m),this._changes=[]}_updateMapTransform(o,c,m){const _=this._map,v=_.transform,T=H=>[H.x,H.y,H.z];if((H=>{const re=this._eventsInProgress.drag;return re&&!this._handlersById[re.handlerName].isActive()})()&&!Wi(o)){const H=v.zoom;v.cameraElevationReference="sea",v.recenterOnTerrain(),v.cameraElevationReference="ground",H!==v.zoom&&this._map._update(!0)}if(v._isCameraConstrained&&_._stop(!0),!Wi(o))return void this._fireEvents(c,m,!0);let{panDelta:S,zoomDelta:M,bearingDelta:L,pitchDelta:k,around:D,aroundCoord:$,pinchAround:W}=o;v._isCameraConstrained&&(M>0&&(M=0),v._isCameraConstrained=!1),W!==void 0&&(D=W),(M||(H=>c[H]&&!this._eventsInProgress[H])("drag"))&&D&&(this._dragOrigin=T(v.pointCoordinate3D(D)),this._trackingEllipsoid.setup(v._camera.position,this._dragOrigin)),v.cameraElevationReference="sea",_._stop(!0),D=D||_.transform.centerPoint,L&&(v.bearing+=L),k&&(v.pitch+=k),v._updateCameraState();const K=[0,0,0];if(S)if(v.projection.name==="mercator"){const H=this._trackingEllipsoid.projectRay(v.screenPointToMercatorRay(D).dir),re=this._trackingEllipsoid.projectRay(v.screenPointToMercatorRay(D.sub(S)).dir);K[0]=re[0]-H[0],K[1]=re[1]-H[1]}else{const H=v.pointCoordinate(D);if(v.projection.name==="globe"){S=S.rotate(-v.angle);const re=v._pixelsPerMercatorPixel/v.worldSize;K[0]=-S.x*s.mercatorScale(s.latFromMercatorY(H.y))*re,K[1]=-S.y*s.mercatorScale(v.center.lat)*re}else{const re=v.pointCoordinate(D.sub(S));H&&re&&(K[0]=re.x-H.x,K[1]=re.y-H.y)}}const X=v.zoom,Y=[0,0,0];if(M){const H=T($||v.pointCoordinate3D(D)),re={dir:s.normalize([],s.sub([],H,v._camera.position))};if(re.dir[2]<0){const ne=v.zoomDeltaToMovement(H,M);s.scale$2(Y,re.dir,ne)}}const B=s.add(K,K,Y);v._translateCameraConstrained(B),M&&Math.abs(v.zoom-X)>1e-4&&v.recenterOnTerrain(),v.cameraElevationReference="ground",this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(c,m,!0)}_fireEvents(o,c,m){const _=ki(this._eventsInProgress),v=ki(o),T={};for(const k in o){const{originalEvent:D}=o[k];this._eventsInProgress[k]||(T[`${k}start`]=D),this._eventsInProgress[k]=o[k]}!_&&v&&this._fireEvent("movestart",v.originalEvent);for(const k in T)this._fireEvent(k,T[k]);v&&this._fireEvent("move",v.originalEvent);for(const k in o){const{originalEvent:D}=o[k];this._fireEvent(k,D)}const S={};let M;for(const k in this._eventsInProgress){const{handlerName:D,originalEvent:$}=this._eventsInProgress[k];this._handlersById[D].isActive()||(delete this._eventsInProgress[k],M=c[D]||$,S[`${k}end`]=M)}for(const k in S)this._fireEvent(k,S[k]);const L=ki(this._eventsInProgress);if(m&&(_||v)&&!L){this._updatingCamera=!0;const k=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),D=$=>$!==0&&-this._bearingSnap<$&&$<this._bearingSnap;k?(D(k.bearing||this._map.getBearing())&&(k.bearing=0),this._map.easeTo(k,{originalEvent:M})):(this._map.fire(new s.Event("moveend",{originalEvent:M})),D(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(o,c){this._map.fire(new s.Event(o,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{this._frameId=void 0,this.handleEvent(new fm("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Us="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class gu extends s.Evented{constructor(o,c){super(),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=c.bearingSnap,this._respectPrefersReducedMotion=c.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(o,c){return this.jumpTo({center:o},c)}panBy(o,c,m){return o=s.Point.convert(o).mult(-1),this.panTo(this.transform.center,s.extend({offset:o},c),m)}panTo(o,c,m){return this.easeTo(s.extend({center:o},c),m)}getZoom(){return this.transform.zoom}setZoom(o,c){return this.jumpTo({zoom:o},c),this}zoomTo(o,c,m){return this.easeTo(s.extend({zoom:o},c),m)}zoomIn(o,c){return this.zoomTo(this.getZoom()+1,o,c),this}zoomOut(o,c){return this.zoomTo(this.getZoom()-1,o,c),this}getBearing(){return this.transform.bearing}setBearing(o,c){return this.jumpTo({bearing:o},c),this}getPadding(){return this.transform.padding}setPadding(o,c){return this.jumpTo({padding:o},c),this}rotateTo(o,c,m){return this.easeTo(s.extend({bearing:o},c),m)}resetNorth(o,c){return this.rotateTo(0,s.extend({duration:1e3},o),c),this}resetNorthPitch(o,c){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},o),c),this}snapToNorth(o,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,c):this}getPitch(){return this.transform.pitch}setPitch(o,c){return this.jumpTo({pitch:o},c),this}cameraForBounds(o,c){o=s.LngLatBounds.convert(o);const m=c&&c.bearing||0,_=c&&c.pitch||0,v=o.getNorthWest(),T=o.getSouthEast();return this._cameraForBounds(this.transform,v,T,m,_,c)}_extendCameraOptions(o){const c={top:0,bottom:0,right:0,left:0};if(typeof(o=s.extend({padding:c,offset:[0,0],maxZoom:this.transform.maxZoom},o)).padding=="number"){const m=o.padding;o.padding={top:m,bottom:m,right:m,left:m}}return o.padding=s.extend(c,o.padding),o}_minimumAABBFrustumDistance(o,c){const m=c.max[0]-c.min[0],_=c.max[1]-c.min[1];return m/_>o.aspect?m/(2*Math.tan(.5*o.fovX)*o.aspect):_/(2*Math.tan(.5*o.fovY)*o.aspect)}_cameraForBoundsOnGlobe(o,c,m,_,v,T){const S=o.clone(),M=this._extendCameraOptions(T);S.bearing=_,S.pitch=v;const L=s.LngLat.convert(c),k=s.LngLat.convert(m),D=.5*(L.lat+k.lat),$=.5*(L.lng+k.lng),W=s.latLngToECEF(D,$),K=s.normalize([],W),X=s.normalize([],s.cross([],K,[0,1,0])),Y=s.cross([],X,K),B=[X[0],X[1],X[2],0,Y[0],Y[1],Y[2],0,K[0],K[1],K[2],0,0,0,0,1],H=[W,s.latLngToECEF(L.lat,L.lng),s.latLngToECEF(k.lat,L.lng),s.latLngToECEF(k.lat,k.lng),s.latLngToECEF(L.lat,k.lng),s.latLngToECEF(D,L.lng),s.latLngToECEF(D,k.lng),s.latLngToECEF(L.lat,$),s.latLngToECEF(k.lat,$)];let re=s.Aabb.fromPoints(H.map(Ke=>[s.dot(X,Ke),s.dot(Y,Ke),s.dot(K,Ke)]));const ne=s.transformMat4([],re.center,B);s.squaredLength(ne)===0&&s.set(ne,0,0,1),s.normalize(ne,ne),s.scale$2(ne,ne,s.GLOBE_RADIUS),S.center=s.ecefToLatLng(ne);const pe=S.getWorldToCameraMatrix(),ge=s.invert(new Float64Array(16),pe);re=s.Aabb.applyTransform(re,s.multiply([],pe,B)),s.transformMat4(ne,ne,pe);const me=.5*(re.max[2]-re.min[2]),be=this._minimumAABBFrustumDistance(S,re),xe=s.scale$2([],[0,0,1],me),Ie=s.add(xe,ne,xe),Je=be+(S.pitch===0?0:s.distance(ne,Ie)),Ce=S.globeCenterInViewSpace,Ge=s.sub([],ne,[Ce[0],Ce[1],Ce[2]]);s.normalize(Ge,Ge),s.scale$2(Ge,Ge,Je);const Re=s.add([],ne,Ge);s.transformMat4(Re,Re,ge);const Qe=s.earthRadius/s.GLOBE_RADIUS,Pe=s.length(Re),$e=s.mercatorZfromAltitude(Math.max(Pe*Qe-s.earthRadius,Number.EPSILON),0),tt=Math.min(S.zoomFromMercatorZAdjusted($e),M.maxZoom);return tt>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(S.setProjection({name:"mercator"}),S.zoom=tt,this._cameraForBounds(S,c,m,_,v,T)):{center:S.center,zoom:tt,bearing:_,pitch:v}}queryTerrainElevation(o,c){const m=this.transform.elevation;return m?(c=s.extend({},{exaggerated:!0},c),m.getAtPoint(s.MercatorCoordinate.fromLngLat(o),null,c.exaggerated)):null}_cameraForBounds(o,c,m,_,v,T){if(o.projection.name==="globe")return this._cameraForBoundsOnGlobe(o,c,m,_,v,T);const S=o.clone(),M=this._extendCameraOptions(T),L=S.padding;S.bearing=_,S.pitch=v;const k=s.LngLat.convert(c),D=s.LngLat.convert(m),$=new s.LngLat(k.lng,D.lat),W=new s.LngLat(D.lng,k.lat),K=S.project(k),X=S.project(D),Y=this.queryTerrainElevation(k),B=this.queryTerrainElevation(D),H=this.queryTerrainElevation($),re=this.queryTerrainElevation(W),ne=[[K.x,K.y,Math.min(Y||0,B||0,H||0,re||0)],[X.x,X.y,Math.max(Y||0,B||0,H||0,re||0)]];let pe=s.Aabb.fromPoints(ne);const ge=S.getWorldToCameraMatrix(),me=s.invert(new Float64Array(16),ge);pe=s.Aabb.applyTransform(pe,ge);const be=s.sub([],pe.max,pe.min),xe=L.left||0,Ie=L.right||0,Je=L.bottom||0,Ce=L.top||0,{left:Ge,right:Re,top:Qe,bottom:Pe}=M.padding,$e=.5*(xe+Ie),tt=.5*(Ce+Je),Ke=Math.min(S.scaleZoom(S.scale*Math.min((S.width-(xe+Ie+Ge+Re))/be[0],(S.height-(Je+Ce+Pe+Qe))/be[1])),M.maxZoom),rt=S.scale/S.zoomScale(Ke);pe=new s.Aabb([pe.min[0]-(Ge+$e)*rt,pe.min[1]-(Pe+tt)*rt,pe.min[2]],[pe.max[0]+(Re+$e)*rt,pe.max[1]+(Qe+tt)*rt,pe.max[2]]);const At=.5*be[2],Rt=this._minimumAABBFrustumDistance(S,pe),xt=[0,0,1,0];s.transformMat4$1(xt,xt,ge),s.normalize$2(xt,xt);const kt=s.scale$2([],xt,Rt+At),Kt=s.add([],pe.center,kt),Ht=(typeof M.offset.x=="number"&&typeof M.offset.y=="number"?new s.Point(M.offset.x,M.offset.y):s.Point.convert(M.offset)).rotate(-s.degToRad(_));pe.center[0]-=Ht.x*rt,pe.center[1]+=Ht.y*rt,s.transformMat4(pe.center,pe.center,me),s.transformMat4(Kt,Kt,me);const Tt=[pe.center[0],pe.center[1],Kt[2]*S.pixelsPerMeter];s.scale$2(Tt,Tt,1/S.worldSize);const fr=s.lngFromMercatorX(Tt[0]),_r=s.latFromMercatorY(Tt[1]),yr=Math.min(S._zoomFromMercatorZ(Tt[2]),M.maxZoom),vr=new s.LngLat(fr,_r);return S.mercatorFromTransition&&yr<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(S.setProjection({name:"globe"}),S.zoom=yr,this._cameraForBounds(S,c,m,_,v,T)):{center:vr,zoom:yr,bearing:_,pitch:v}}fitBounds(o,c,m){const _=this.cameraForBounds(o,c);return this._fitInternal(_,c,m)}fitScreenCoordinates(o,c,m,_,v){const T=s.Point.convert(o),S=s.Point.convert(c),M=new s.Point(Math.min(T.x,S.x),Math.min(T.y,S.y)),L=new s.Point(Math.max(T.x,S.x),Math.max(T.y,S.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(T,S))return this;const k=this.transform.pointLocation3D(M),D=this.transform.pointLocation3D(L),$=this.transform.pointLocation3D(new s.Point(M.x,L.y)),W=this.transform.pointLocation3D(new s.Point(L.x,M.y)),K=[Math.min(k.lng,D.lng,$.lng,W.lng),Math.min(k.lat,D.lat,$.lat,W.lat)],X=[Math.max(k.lng,D.lng,$.lng,W.lng),Math.max(k.lat,D.lat,$.lat,W.lat)],Y=_&&_.pitch?_.pitch:this.getPitch(),B=this._cameraForBounds(this.transform,K,X,m,Y,_);return this._fitInternal(B,_,v)}_fitInternal(o,c,m){return o?(delete(c=s.extend(o,c)).padding,c.linear?this.easeTo(c,m):this.flyTo(c,m)):this}jumpTo(o,c){this.stop();const m=o.preloadOnly?this.transform.clone():this.transform;let _=!1,v=!1,T=!1;return"zoom"in o&&m.zoom!==+o.zoom&&(_=!0,m.zoom=+o.zoom),o.center!==void 0&&(m.center=s.LngLat.convert(o.center)),"bearing"in o&&m.bearing!==+o.bearing&&(v=!0,m.bearing=+o.bearing),"pitch"in o&&m.pitch!==+o.pitch&&(T=!0,m.pitch=+o.pitch),o.padding==null||m.isPaddingEqual(o.padding)||(m.padding=o.padding),o.preloadOnly?(this._preloadTiles(m),this):(this.fire(new s.Event("movestart",c)).fire(new s.Event("move",c)),_&&this.fire(new s.Event("zoomstart",c)).fire(new s.Event("zoom",c)).fire(new s.Event("zoomend",c)),v&&this.fire(new s.Event("rotatestart",c)).fire(new s.Event("rotate",c)).fire(new s.Event("rotateend",c)),T&&this.fire(new s.Event("pitchstart",c)).fire(new s.Event("pitch",c)).fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(Us),this.transform.getFreeCameraOptions()}setFreeCameraOptions(o,c){const m=this.transform;if(!m.projection.supportsFreeCamera)return s.warnOnce(Us),this;this.stop();const _=m.zoom,v=m.pitch,T=m.bearing;m.setFreeCameraOptions(o);const S=_!==m.zoom,M=v!==m.pitch,L=T!==m.bearing;return this.fire(new s.Event("movestart",c)).fire(new s.Event("move",c)),S&&this.fire(new s.Event("zoomstart",c)).fire(new s.Event("zoom",c)).fire(new s.Event("zoomend",c)),L&&this.fire(new s.Event("rotatestart",c)).fire(new s.Event("rotate",c)).fire(new s.Event("rotateend",c)),M&&this.fire(new s.Event("pitchstart",c)).fire(new s.Event("pitch",c)).fire(new s.Event("pitchend",c)),this.fire(new s.Event("moveend",c)),this}easeTo(o,c){this._stop(!1,o.easeId),((o=s.extend({offset:[0,0],duration:500,easing:s.ease},o)).animate===!1||this._prefersReducedMotion(o))&&(o.duration=0);const m=this.transform,_=this.getZoom(),v=this.getBearing(),T=this.getPitch(),S=this.getPadding(),M="zoom"in o?+o.zoom:_,L="bearing"in o?this._normalizeBearing(o.bearing,v):v,k="pitch"in o?+o.pitch:T,D="padding"in o?o.padding:m.padding,$=s.Point.convert(o.offset);let W,K,X;if(m.projection.name==="globe"){const xe=s.MercatorCoordinate.fromLngLat(m.center),Ie=$.rotate(-m.angle);xe.x+=Ie.x/m.worldSize,xe.y+=Ie.y/m.worldSize;const Je=xe.toLngLat(),Ce=s.LngLat.convert(o.center||Je);this._normalizeCenter(Ce),W=m.centerPoint.add(Ie),K=new s.Point(xe.x,xe.y).mult(m.worldSize),X=new s.Point(s.mercatorXfromLng(Ce.lng),s.mercatorYfromLat(Ce.lat)).mult(m.worldSize).sub(K)}else{W=m.centerPoint.add($);const xe=m.pointLocation(W),Ie=s.LngLat.convert(o.center||xe);this._normalizeCenter(Ie),K=m.project(xe),X=m.project(Ie).sub(K)}const Y=m.zoomScale(M-_);let B,H;o.around&&(B=s.LngLat.convert(o.around),H=m.locationPoint(B));const re=this._zooming||M!==_,ne=this._rotating||v!==L,pe=this._pitching||k!==T,ge=!m.isPaddingEqual(D),me=xe=>Ie=>{if(re&&(xe.zoom=s.number(_,M,Ie)),ne&&(xe.bearing=s.number(v,L,Ie)),pe&&(xe.pitch=s.number(T,k,Ie)),ge&&(xe.interpolatePadding(S,D,Ie),W=xe.centerPoint.add($)),B)xe.setLocationAtPoint(B,H);else{const Je=xe.zoomScale(xe.zoom-_),Ce=M>_?Math.min(2,Y):Math.max(.5,Y),Ge=Math.pow(Ce,1-Ie),Re=xe.unproject(K.add(X.mult(Ie*Ge)).mult(Je));xe.setLocationAtPoint(xe.renderWorldCopies?Re.wrap():Re,W)}return o.preloadOnly||this._fireMoveEvents(c),xe};if(o.preloadOnly){const xe=this._emulate(me,o.duration,m);return this._preloadTiles(xe),this}const be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=re,this._rotating=ne,this._pitching=pe,this._padding=ge,this._easeId=o.easeId,this._prepareEase(c,o.noMoveStart,be),this._ease(me(m),xe=>{m.recenterOnTerrain(),this._afterEase(c,xe)},o),this}_prepareEase(o,c,m={}){this._moving=!0,this.transform.cameraElevationReference="sea",c||m.moving||this.fire(new s.Event("movestart",o)),this._zooming&&!m.zooming&&this.fire(new s.Event("zoomstart",o)),this._rotating&&!m.rotating&&this.fire(new s.Event("rotatestart",o)),this._pitching&&!m.pitching&&this.fire(new s.Event("pitchstart",o))}_fireMoveEvents(o){this.fire(new s.Event("move",o)),this._zooming&&this.fire(new s.Event("zoom",o)),this._rotating&&this.fire(new s.Event("rotate",o)),this._pitching&&this.fire(new s.Event("pitch",o))}_afterEase(o,c){if(this._easeId&&c&&this._easeId===c)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const m=this._zooming,_=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new s.Event("zoomend",o)),_&&this.fire(new s.Event("rotateend",o)),v&&this.fire(new s.Event("pitchend",o)),this.fire(new s.Event("moveend",o))}flyTo(o,c){if(this._prefersReducedMotion(o)){const Ke=s.pick(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ke,c)}this.stop(),o=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},o);const m=this.transform,_=this.getZoom(),v=this.getBearing(),T=this.getPitch(),S=this.getPadding(),M="zoom"in o?s.clamp(+o.zoom,m.minZoom,m.maxZoom):_,L="bearing"in o?this._normalizeBearing(o.bearing,v):v,k="pitch"in o?+o.pitch:T,D="padding"in o?o.padding:m.padding,$=m.zoomScale(M-_),W=s.Point.convert(o.offset);let K=m.centerPoint.add(W);const X=m.pointLocation(K),Y=s.LngLat.convert(o.center||X);this._normalizeCenter(Y);const B=m.project(X),H=m.project(Y).sub(B);let re=o.curve;const ne=Math.max(m.width,m.height),pe=ne/$,ge=H.mag();if("minZoom"in o){const Ke=s.clamp(Math.min(o.minZoom,_,M),m.minZoom,m.maxZoom),rt=ne/m.zoomScale(Ke-_);re=Math.sqrt(rt/ge*2)}const me=re*re;function be(Ke){const rt=(pe*pe-ne*ne+(Ke?-1:1)*me*me*ge*ge)/(2*(Ke?pe:ne)*me*ge);return Math.log(Math.sqrt(rt*rt+1)-rt)}function xe(Ke){return(Math.exp(Ke)-Math.exp(-Ke))/2}function Ie(Ke){return(Math.exp(Ke)+Math.exp(-Ke))/2}const Je=be(0);let Ce=function(Ke){return Ie(Je)/Ie(Je+re*Ke)},Ge=function(Ke){return ne*((Ie(Je)*(xe(rt=Je+re*Ke)/Ie(rt))-xe(Je))/me)/ge;var rt},Re=(be(1)-Je)/re;if(Math.abs(ge)<1e-6||!isFinite(Re)){if(Math.abs(ne-pe)<1e-6)return this.easeTo(o,c);const Ke=pe<ne?-1:1;Re=Math.abs(Math.log(pe/ne))/re,Ge=function(){return 0},Ce=function(rt){return Math.exp(Ke*re*rt)}}o.duration="duration"in o?+o.duration:1e3*Re/("screenSpeed"in o?+o.screenSpeed/re:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0);const Qe=v!==L,Pe=k!==T,$e=!m.isPaddingEqual(D),tt=Ke=>rt=>{const At=rt*Re,Rt=1/Ce(At);Ke.zoom=rt===1?M:_+Ke.scaleZoom(Rt),Qe&&(Ke.bearing=s.number(v,L,rt)),Pe&&(Ke.pitch=s.number(T,k,rt)),$e&&(Ke.interpolatePadding(S,D,rt),K=Ke.centerPoint.add(W));const xt=rt===1?Y:Ke.unproject(B.add(H.mult(Ge(At))).mult(Rt));return Ke.setLocationAtPoint(Ke.renderWorldCopies?xt.wrap():xt,K),Ke._updateCameraOnTerrain(),o.preloadOnly||this._fireMoveEvents(c),Ke};if(o.preloadOnly){const Ke=this._emulate(tt,o.duration,m);return this._preloadTiles(Ke),this}return this._zooming=!0,this._rotating=Qe,this._pitching=Pe,this._padding=$e,this._prepareEase(c,!1),this._ease(tt(m),()=>this._afterEase(c),o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,c){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const m=this._onEaseEnd;this._onEaseEnd=void 0,m.call(this,c)}if(!o){const m=this.handlers;m&&m.stop(!1)}return this}_ease(o,c,m){m.animate===!1||m.duration===0?(o(1),c()):(this._easeStart=s.exported.now(),this._easeOptions=m,this._onEaseFrame=o,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const o=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),c=this._onEaseFrame;c&&c(this._easeOptions.easing(o)),o<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(o,c){o=s.wrap(o,-180,180);const m=Math.abs(o-c);return Math.abs(o-360-c)<m&&(o-=360),Math.abs(o+360-c)<m&&(o+=360),o}_normalizeCenter(o){const c=this.transform;if(!c.renderWorldCopies||c.maxBounds)return;const m=o.lng-c.center.lng;o.lng+=m>180?-360:m<-180?360:0}_prefersReducedMotion(o){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(o&&o.essential)}_emulate(o,c,m){const _=Math.ceil(15*c/1e3),v=[],T=o(m.clone());for(let S=0;S<=_;S++){const M=T(S/_);v.push(M.clone())}return v}}class yt{constructor(o={}){this.options=o,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(o){const c=this.options&&this.options.compact;return this._map=o,this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=q("button","mapboxgl-ctrl-attrib-button",this._container),q("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=q("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),c&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),c===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(o,c){const m=this._map._getUIString(`AttributionControl.${c}`);o.setAttribute("aria-label",m),o.removeAttribute("title"),o.firstElementChild&&o.firstElementChild.setAttribute("title",m)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let o=this._editLink;o||(o=this._editLink=this._container.querySelector(".mapbox-improve-map"));const c=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(o){const m=c.reduce((_,v,T)=>(v.value&&(_+=`${v.key}=${v.value}${T<c.length-1?"&":""}`),_),"?");o.href=`${s.config.FEEDBACK_URL}/${m}#${Gl(this._map,!0)}`,o.rel="noopener nofollow",this._setElementTitle(o,"MapFeedback")}}_updateData(o){!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let o=[];if(this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const c=this._map.style._sourceCaches;for(const _ in c){const v=c[_];if(v.used){const T=v.getSource();T.attribution&&o.indexOf(T.attribution)<0&&o.push(T.attribution)}}o.sort((_,v)=>_.length-v.length),o=o.filter((_,v)=>{for(let T=v+1;T<o.length;T++)if(o[T].indexOf(_)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=[...this.options.customAttribution,...o]:o.unshift(this.options.customAttribution));const m=o.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,o.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class wd{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(o){this._map=o,this._container=q("div","mapboxgl-ctrl");const c=q("a","mapboxgl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://www.mapbox.com/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(o){o&&o.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const o=this._map.style._sourceCaches;if(Object.entries(o).length===0)return!0;for(const c in o){const m=o[c].getSource();if(m.hasOwnProperty("mapbox_logo")&&!m.mapbox_logo)return!1}return!0}_updateCompact(){const o=this._container.children;if(o.length){const c=o[0];this._map.getCanvasContainer().offsetWidth<250?c.classList.add("mapboxgl-compact"):c.classList.remove("mapboxgl-compact")}}}class Ed{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const c=++this._id;return this._queue.push({callback:o,id:c,cancelled:!1}),c}remove(o){const c=this._currentlyRunning,m=c?this._queue.concat(c):this._queue;for(const _ of m)if(_.id===o)return void(_.cancelled=!0)}run(o=0){const c=this._currentlyRunning=this._queue;this._queue=[];for(const m of c)if(!m.cancelled&&(m.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function La(f,o,c){if(f=new s.LngLat(f.lng,f.lat),o){const m=new s.LngLat(f.lng-360,f.lat),_=new s.LngLat(f.lng+360,f.lat),v=360*Math.ceil(Math.abs(f.lng-c.center.lng)/360),T=c.locationPoint(f).distSqr(o),S=o.x<0||o.y<0||o.x>c.width||o.y>c.height;c.locationPoint(m).distSqr(o)<T&&(S||Math.abs(m.lng-c.center.lng)<v)?f=m:c.locationPoint(_).distSqr(o)<T&&(S||Math.abs(_.lng-c.center.lng)<v)&&(f=_)}for(;Math.abs(f.lng-c.center.lng)>180;){const m=c.locationPoint(f);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;f.lng>c.center.lng?f.lng-=360:f.lng+=360}return f}const Vs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class ft extends s.Evented{constructor(o,c){if(super(),(o instanceof s.window.HTMLElement||c)&&(o=s.extend({element:o},c)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&o.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=o&&o.occludedOpacity||.2,o&&o.element)this._element=o.element,this._offset=s.Point.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=q("div");const _=41,v=27,T=fe("svg",{display:"block",height:_*this._scale+"px",width:v*this._scale+"px",viewBox:`0 0 ${v} ${_}`},this._element),S=fe("radialGradient",{id:"shadowGradient"},fe("defs",{},T));fe("stop",{offset:"10%","stop-opacity":.4},S),fe("stop",{offset:"100%","stop-opacity":.05},S),fe("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},T),fe("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},T),fe("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},T),fe("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},T),this._offset=s.Point.convert(o&&o.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",_=>{_.preventDefault()}),this._element.addEventListener("mousedown",_=>{_.preventDefault()});const m=this._element.classList;for(const _ in Vs)m.remove(`mapboxgl-marker-anchor-${_}`);m.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(o){return o===this._map||(this.remove(),this._map=o,o.getCanvasContainer().appendChild(this._element),o.on("move",this._updateMoving),o.on("moveend",this._update),o.on("remove",this._clearFadeTimer),o._addMarker(this),this.setDraggable(this._draggable),this._update(),o.on("click",this._onMapClick)),this}remove(){const o=this._map;return o&&(o.off("click",this._onMapClick),o.off("move",this._updateMoving),o.off("moveend",this._update),o.off("mousedown",this._addDragHandler),o.off("touchstart",this._addDragHandler),o.off("mouseup",this._onUp),o.off("touchend",this._onUp),o.off("mousemove",this._onMove),o.off("touchmove",this._onMove),o.off("remove",this._clearFadeTimer),o._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=s.LngLat.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const _=Math.sqrt(Math.pow(13.5,2)/2);o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=o,o._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(o){const c=o.code,m=o.charCode||o.keyCode;c!=="Space"&&c!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(o){const c=o.originalEvent.target,m=this._element;this._popup&&(c===m||m.contains(c))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const o=this._popup;return o?(o.isOpen()?(o.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(o.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const o=this._map,c=this._pos;if(!o||!c)return!1;const m=o.unproject(c),_=o.getFreeCameraOptions();if(!_.position)return!1;const v=_.position.toLngLat();return v.distanceTo(m)<.9*v.distanceTo(this._lngLat)}_evaluateOpacity(){const o=this._map;if(!o)return;const c=this._pos;if(!c||c.x<0||c.x>o.transform.width||c.y<0||c.y>o.transform.height)return void this._clearFadeTimer();const m=o.unproject(c);let _;o._showingGlobe()&&s.isLngLatBehindGlobe(o.transform,this._lngLat)?_=0:(_=1-o._queryFogOpacity(m),o.transform._terrainEnabled()&&o.getTerrain()&&this._behindTerrain()&&(_*=this._occludedOpacity)),this._element.style.opacity=`${_}`,this._element.style.pointerEvents=_>0?"auto":"none",this._popup&&this._popup._setOpacity(_),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const o=this._pos;if(!o||!this._map)return;const c=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${o.x}px,${o.y}px)
            ${Vs[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${c.x}px,${c.y}px)
        `}_calculateXYTransform(){const o=this._pos,c=this._map,m=this.getPitchAlignment();if(!c||!o||m!=="map")return"";if(!c._showingGlobe()){const M=c.getPitch();return M?`rotateX(${M}deg)`:""}const _=s.radToDeg(s.globeTiltAtLngLat(c.transform,this._lngLat)),v=o.sub(s.globeCenterToScreenPoint(c.transform)),T=Math.abs(v.x)+Math.abs(v.y);if(T===0)return"";const S=_/T;return`rotateX(${-v.y*S}deg) rotateY(${v.x*S}deg)`}_calculateZTransform(){const o=this._pos,c=this._map;if(!c||!o)return"";let m=0;const _=this.getRotationAlignment();if(_==="map")if(c._showingGlobe()){const v=c.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),T=c.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(v);m=s.radToDeg(Math.atan2(T.y,T.x))-90}else m=-c.getBearing();else if(_==="horizon"){const v=s.smoothstep(4,6,c.getZoom()),T=s.globeCenterToScreenPoint(c.transform);T.y+=v*c.transform.height;const S=o.sub(T),M=s.radToDeg(Math.atan2(S.y,S.x));m=(M>90?M-270:M+90)*(1-v)}return m+=this._rotation,m?`rotateZ(${m}deg)`:""}_update(o){s.window.cancelAnimationFrame(this._updateFrameId);const c=this._map;c&&(c.transform.renderWorldCopies&&(this._lngLat=La(this._lngLat,this._pos,c.transform)),this._pos=c.project(this._lngLat),o===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),c._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(c._showingGlobe()||c.getTerrain()||c.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(o){return this._offset=s.Point.convert(o),this._update(),this}_onMove(o){const c=this._map;if(!c)return;const m=this._pointerdownPos,_=this._positionDelta;if(m&&_){if(!this._isDragging){const v=this._clickTolerance||c._clickTolerance;if(o.point.dist(m)<v)return;this._isDragging=!0}this._pos=o.point.sub(_),this._lngLat=c.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const o=this._map;o&&(o.off("mousemove",this._onMove),o.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(o){const c=this._map,m=this._pos;c&&m&&this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(m),this._pointerdownPos=o.point,this._state="pending",c.on("mousemove",this._onMove),c.on("touchmove",this._onMove),c.once("mouseup",this._onUp),c.once("touchend",this._onUp))}setDraggable(o){this._draggable=!!o;const c=this._map;return c&&(o?(c.on("mousedown",this._addDragHandler),c.on("touchstart",this._addDragHandler)):(c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(o){return this._occludedOpacity=o||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Td={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},sy=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function pm(f=new s.Point(0,0),o="bottom"){if(typeof f=="number"){const c=Math.round(Math.sqrt(.5*Math.pow(f,2)));switch(o){case"top":return new s.Point(0,f);case"top-left":return new s.Point(c,c);case"top-right":return new s.Point(-c,c);case"bottom":return new s.Point(0,-f);case"bottom-left":return new s.Point(c,-c);case"bottom-right":return new s.Point(-c,-c);case"left":return new s.Point(f,0);case"right":return new s.Point(-f,0)}return new s.Point(0,0)}return f instanceof s.Point||Array.isArray(f)?s.Point.convert(f):s.Point.convert(f[o]||[0,0])}class Sd{constructor(o){this.jumpTo(o)}getValue(o){if(o<=this._startTime)return this._start;if(o>=this._endTime)return this._end;const c=s.easeCubicInOut((o-this._startTime)/(this._endTime-this._startTime));return this._start*(1-c)+this._end*c}isEasing(o){return o>=this._startTime&&o<=this._endTime}jumpTo(o){this._startTime=-1/0,this._endTime=-1/0,this._start=o,this._end=o}easeTo(o,c,m){this._start=this.getValue(c),this._end=o,this._startTime=c,this._endTime=c+m}}const mm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},gm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},ay={showCompass:!0,showZoom:!0,visualizePitch:!1};class ly{constructor(o,c,m=!1){this._clickTolerance=10,this.element=c,this.mouseRotate=new _d({clickTolerance:o.dragRotate._mouseRotate._clickTolerance}),this.map=o,m&&(this.mousePitch=new yd({clickTolerance:o.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener("mousedown",this.mousedown),c.addEventListener("touchstart",this.touchstart,{passive:!1}),c.addEventListener("touchmove",this.touchmove),c.addEventListener("touchend",this.touchend),c.addEventListener("touchcancel",this.reset)}down(o,c){this.mouseRotate.mousedown(o,c),this.mousePitch&&this.mousePitch.mousedown(o,c),J()}move(o,c){const m=this.map,_=this.mouseRotate.mousemoveWindow(o,c),v=_&&_.bearingDelta;if(v&&m.setBearing(m.getBearing()+v),this.mousePitch){const T=this.mousePitch.mousemoveWindow(o,c),S=T&&T.pitchDelta;S&&m.setPitch(m.getPitch()+S)}}off(){const o=this.element;o.removeEventListener("mousedown",this.mousedown),o.removeEventListener("touchstart",this.touchstart,{passive:!1}),o.removeEventListener("touchmove",this.touchmove),o.removeEventListener("touchend",this.touchend),o.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Z(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(o){this.down(s.extend({},o,{ctrlKey:!0,preventDefault:()=>o.preventDefault()}),ke(this.element,o)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(o){this.move(o,ke(this.element,o))}mouseup(o){this.mouseRotate.mouseupWindow(o),this.mousePitch&&this.mousePitch.mouseupWindow(o),this.offTemp()}touchstart(o){o.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Fe(this.element,o.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>o.preventDefault()},this._startPos))}touchmove(o){o.targetTouches.length!==1?this.reset():(this._lastPos=Fe(this.element,o.targetTouches)[0],this.move({preventDefault:()=>o.preventDefault()},this._lastPos))}touchend(o){o.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Ad={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Cd={maxWidth:100,unit:"metric"},Md={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Oa={version:s.version,supported:R,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends gu{constructor(f){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(f=s.extend({},gm,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(f.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(f.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ma(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),f),this._interactive=f.interactive,this._minTileCacheSize=f.minTileCacheSize,this._maxTileCacheSize=f.maxTileCacheSize,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._useWebGL2=f.useWebGL2,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=f.crossSourceCollisions,this._collectResourceTiming=f.collectResourceTiming,this._optimizeForTerrain=f.optimizeForTerrain,this._language=this._parseLanguage(f.language),this._worldview=f.worldview,this._renderTaskQueue=new Ed,this._domRenderTaskQueue=new Ed,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},mm,f.locale),this._clickTolerance=f.clickTolerance,this._cooperativeGestures=f.cooperativeGestures,this._performanceMetricsCollection=f.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Sd(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(f.transformRequest,f.accessToken,f.testMode),this._silenceAuthErrors=!!f.testMode,typeof f.container=="string"){if(this._container=s.window.document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),f.maxBounds&&this.setMaxBounds(f.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new ho(this,f),this._localFontFamily=f.localFontFamily,this._localIdeographFontFamily=f.localIdeographFontFamily,f.style&&this.setStyle(f.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),f.projection&&this.setProjection(f.projection),this._hash=f.hash&&new fd(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,s.extend({},f.fitBoundsOptions,{duration:0})))),this.resize(),f.attributionControl&&this.addControl(new yt({customAttribution:f.customAttribution})),this._logoControl=new wd,this.addControl(this._logoControl,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new s.Event(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new s.Event(`${o.dataType}dataloading`,o))})}_getMapId(){return this._mapId}addControl(f,o){if(o===void 0&&(o=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=f.onAdd(this);this._controls.push(f);const m=this._controlPositions[o];return o.indexOf("bottom")!==-1?m.insertBefore(c,m.firstChild):m.appendChild(c),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(f);return o>-1&&this._controls.splice(o,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(f){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const o=!this._moving;return o&&this.fire(new s.Event("movestart",f)).fire(new s.Event("move",f)),this.fire(new s.Event("resize",f)),o&&this.fire(new s.Event("moveend",f)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(f){return this.transform.setMaxBounds(s.LngLatBounds.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f?this.setZoom(f):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f?this.setZoom(f):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f?this.setPitch(f):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f?this.setPitch(f):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(f){return f==="auto"?s.window.navigator.language:Array.isArray(f)?f.length===0?void 0:f.map(o=>o==="auto"?s.window.navigator.language:o):f}setLanguage(f){const o=this._parseLanguage(f);if(!this.style||o===this._language)return this;this._language=o,this.style._reloadSources();for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(f){return this.style&&f!==this._worldview?(this._worldview=f,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(f){return this._lazyInitEmptyStyle(),f?typeof f=="string"&&(f={name:f}):f=null,this._useExplicitProjection=!!f,this._prioritizeAndUpdateProjection(f,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const f=this.transform,o=f.projection.name;let c;o==="globe"&&f.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(f.setMercatorFromTransition(),c=!0):o==="mercator"&&f.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(f.setProjection({name:"globe"}),c=!0),c&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(f,o){return this._updateProjection(f||o||{name:"mercator"})}_updateProjection(f){let o;if(o=f.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(f),this.style.applyProjectionUpdate(),o){this.painter.clearBackgroundTiles();for(const c in this.style._sourceCaches)this.style._sourceCaches[c].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(f){return this.transform.locationPoint3D(s.LngLat.convert(f))}unproject(f){return this.transform.pointLocation3D(s.Point.convert(f))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(f,o,c){if(f==="mouseenter"||f==="mouseover"){let m=!1;const _=T=>{const S=o.filter(L=>this.getLayer(L)),M=S.length?this.queryRenderedFeatures(T.point,{layers:S}):[];M.length?m||(m=!0,c.call(this,new Sn(f,this,T.originalEvent,{features:M}))):m=!1},v=()=>{m=!1};return{layers:new Set(o),listener:c,delegates:{mousemove:_,mouseout:v}}}if(f==="mouseleave"||f==="mouseout"){let m=!1;const _=T=>{const S=o.filter(M=>this.getLayer(M));(S.length?this.queryRenderedFeatures(T.point,{layers:S}):[]).length?m=!0:m&&(m=!1,c.call(this,new Sn(f,this,T.originalEvent)))},v=T=>{m&&(m=!1,c.call(this,new Sn(f,this,T.originalEvent)))};return{layers:new Set(o),listener:c,delegates:{mousemove:_,mouseout:v}}}{const m=_=>{const v=o.filter(S=>this.getLayer(S)),T=v.length?this.queryRenderedFeatures(_.point,{layers:v}):[];T.length&&(_.features=T,c.call(this,_),delete _.features)};return{layers:new Set(o),listener:c,delegates:{[f]:m}}}}on(f,o,c){if(c===void 0)return super.on(f,o);Array.isArray(o)||(o=[o]);const m=this._createDelegatedListener(f,o,c);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(m);for(const _ in m.delegates)this.on(_,m.delegates[_]);return this}once(f,o,c){if(c===void 0)return super.once(f,o);Array.isArray(o)||(o=[o]);const m=this._createDelegatedListener(f,o,c);for(const _ in m.delegates)this.once(_,m.delegates[_]);return this}off(f,o,c){if(c===void 0)return super.off(f,o);o=new Set(Array.isArray(o)?o:[o]);const m=(v,T)=>{if(v.size!==T.size)return!1;for(const S of v)if(!T.has(S))return!1;return!0},_=this._delegatedListeners?this._delegatedListeners[f]:void 0;return _&&(v=>{for(let T=0;T<v.length;T++){const S=v[T];if(S.listener===c&&m(S.layers,o)){for(const M in S.delegates)this.off(M,S.delegates[M]);return v.splice(T,1),this}}})(_),this}queryRenderedFeatures(f,o){return this.style?(o!==void 0||f===void 0||f instanceof s.Point||Array.isArray(f)||(o=f,f=void 0),this.style.queryRenderedFeatures(f=f||[[0,0],[this.transform.width,this.transform.height]],o=o||{},this.transform)):[]}querySourceFeatures(f,o){return this.style.querySourceFeatures(f,o)}isPointOnSurface(f){const{name:o}=this.transform.projection;return o!=="globe"&&o!=="mercator"&&s.warnOnce(`${o} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(f))}setStyle(f,o){return(o=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},o)).diff!==!1&&o.localIdeographFontFamily===this._localIdeographFontFamily&&o.localFontFamily===this._localFontFamily&&this.style&&f?(this._diffStyle(f,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._localFontFamily=o.localFontFamily,this._updateStyle(f,o))}_getUIString(f){const o=this._locale[f];if(o==null)throw new Error(`Missing UI string '${f}'`);return o}_updateStyle(f,o){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),f&&(this.style=new co(this,o||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f):this.style.loadJSON(f)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new co(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,o){if(typeof f=="string"){const c=this._requestManager.normalizeStyleURL(f),m=this._requestManager.transformRequest(c,s.ResourceType.Style);s.getJSON(m,(_,v)=>{_?this.fire(new s.ErrorEvent(_)):v&&this._updateDiff(v,o)})}else typeof f=="object"&&this._updateDiff(f,o)}_updateDiff(f,o){try{this.style.setState(f)&&this._update(!0)}catch(c){s.warnOnce(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(f,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(f,o){return this._lazyInitEmptyStyle(),this.style.addSource(f,o),this._update(!0)}isSourceLoaded(f){return!!this.style&&this.style._isSourceCacheLoaded(f)}areTilesLoaded(){const f=this.style&&this.style._sourceCaches;for(const o in f){const c=f[o]._tiles;for(const m in c){const _=c[m];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}addSourceType(f,o,c){this._lazyInitEmptyStyle(),this.style.addSourceType(f,o,c)}removeSource(f){return this.style.removeSource(f),this._updateTerrain(),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,o,{pixelRatio:c=1,sdf:m=!1,stretchX:_,stretchY:v,content:T}={}){if(this._lazyInitEmptyStyle(),o instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&o instanceof s.window.ImageBitmap){const{width:S,height:M,data:L}=s.exported.getImageData(o);this.style.addImage(f,{data:new s.RGBAImage({width:S,height:M},L),pixelRatio:c,stretchX:_,stretchY:v,content:T,sdf:m,version:0})}else if(o.width===void 0||o.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:S,height:M}=o,L=o;this.style.addImage(f,{data:new s.RGBAImage({width:S,height:M},new Uint8Array(L.data)),pixelRatio:c,stretchX:_,stretchY:v,content:T,sdf:m,version:0,userImage:L}),L.onAdd&&L.onAdd(this,f)}}updateImage(f,o){const c=this.style.getImage(f);if(!c)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=o instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&o instanceof s.window.ImageBitmap?s.exported.getImageData(o):o,{width:_,height:v}=m;_!==void 0&&v!==void 0?_===c.data.width&&v===c.data.height?(c.data.replace(m.data,!(o instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&o instanceof s.window.ImageBitmap)),this.style.updateImage(f,c)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${_}, ${v})
                must be that same as the previous version of the image
                (${c.data.width}, ${c.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f,o){s.getImage(this._requestManager.transformRequest(f,s.ResourceType.Image),(c,m)=>{o(c,m instanceof s.window.HTMLImageElement?s.exported.getImageData(m):m)})}listImages(){return this.style.listImages()}addLayer(f,o){return this._lazyInitEmptyStyle(),this.style.addLayer(f,o),this._update(!0)}moveLayer(f,o){return this.style.moveLayer(f,o),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}setLayerZoomRange(f,o,c){return this.style.setLayerZoomRange(f,o,c),this._update(!0)}setFilter(f,o,c={}){return this.style.setFilter(f,o,c),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,o,c,m={}){return this.style.setPaintProperty(f,o,c,m),this._update(!0)}getPaintProperty(f,o){return this.style.getPaintProperty(f,o)}setLayoutProperty(f,o,c,m={}){return this.style.setLayoutProperty(f,o,c,m),this._update(!0)}getLayoutProperty(f,o){return this.style.getLayoutProperty(f,o)}setLight(f,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,o),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(f){return this._lazyInitEmptyStyle(),!f&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(f),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(f){return this._lazyInitEmptyStyle(),this.style.setFog(f),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(f){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(f),this.transform):0}setFeatureState(f,o){return this.style.setFeatureState(f,o),this._update()}removeFeatureState(f,o){return this.style.removeFeatureState(f,o),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}_updateContainerDimensions(){if(!this._container)return;const f=this._container.getBoundingClientRect().width||400,o=this._container.getBoundingClientRect().height||300;let c,m,_,v=this._container;for(;v&&(!m||!_);){const T=s.window.getComputedStyle(v).transform;T&&T!=="none"&&(c=T.match(/matrix.*\((.+)\)/)[1].split(", "),c[0]&&c[0]!=="0"&&c[0]!=="1"&&(m=c[0]),c[3]&&c[3]!=="0"&&c[3]!=="1"&&(_=c[3])),v=v.parentElement}this._containerWidth=m?Math.abs(f/m):f,this._containerHeight=_?Math.abs(o/_):o}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const f=this._container;f.classList.add("mapboxgl-map"),(this._missingCSSCanary=q("div","mapboxgl-canary",f)).style.visibility="hidden",this._detectMissingCSS();const o=this._canvasContainer=q("div","mapboxgl-canvas-container",f);this._interactive&&o.classList.add("mapboxgl-interactive"),this._canvas=q("canvas","mapboxgl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const c=this._controlContainer=q("div","mapboxgl-control-container",f),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(_=>{m[_]=q("div",`mapboxgl-ctrl-${_}`,c)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,o){const c=s.exported.devicePixelRatio||1;this._canvas.width=c*Math.ceil(f),this._canvas.height=c*Math.ceil(o),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${o}px`}_addMarker(f){this._markers.push(f)}_removeMarker(f){const o=this._markers.indexOf(f);o!==-1&&this._markers.splice(o,1)}_addPopup(f){this._popups.push(f)}_removePopup(f){const o=this._popups.indexOf(f);o!==-1&&this._popups.splice(o,1)}_setupPainter(){const f=s.extend({},R.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._useWebGL2&&this._canvas.getContext("webgl2",f),c=o||this._canvas.getContext("webgl",f)||this._canvas.getContext("experimental-webgl",f);c?(this._useWebGL2&&!o&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(c,!0),this.painter=new Aa(c,this.transform,!!o),this.on("data",m=>{m.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(c)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(f){f.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:f}))}_contextRestored(f){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:f}))}_onMapScroll(f){if(f.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_requestDomTask(f){!this.loaded()||this.loaded()&&!this.isMoving()?f():this._domRenderTaskQueue.add(f)}_render(f){let o;const c=this.painter.context.extTimerQuery,m=s.exported.now();if(this.listens("gpu-timing-frame")&&(o=c.createQueryEXT(),c.beginQueryEXT(c.TIME_ELAPSED_EXT,o)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(f),this._domRenderTaskQueue.run(f),this._removed)return;this._updateProjectionTransition();const _=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const S=this.transform.zoom,M=this.transform.pitch,L=s.exported.now(),k=new s.EvaluationParameters(S,{now:L,fadeDuration:_,pitch:M,transition:this.style.getTransition()});this.style.update(k)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let v=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),v=this._updateAverageElevation(m),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):v=this._updateAverageElevation(m),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,_,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:_,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),o){const S=s.exported.now()-m;c.endQueryEXT(c.TIME_ELAPSED_EXT,o),setTimeout(()=>{const M=c.getQueryObjectEXT(o,c.QUERY_RESULT_EXT)/1e6;c.deleteQueryEXT(o),this.fire(new s.Event("gpu-timing-frame",{cpuTime:S,gpuTime:M})),s.window.performance.mark("frame-gpu",{startTime:m,detail:{gpuTime:M}})},50)}if(this.listens("gpu-timing-layer")){const S=this.painter.collectGpuTimers();setTimeout(()=>{const M=this.painter.queryGpuTimers(S);this.fire(new s.Event("gpu-timing-layer",{layerTimes:M}))},50)}if(this.listens("gpu-timing-deferred-render")){const S=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const M=this.painter.queryGpuTimeDeferredRender(S);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:M}))},50)}const T=this._sourcesDirty||this._styleDirty||this._placementDirty||v;if(T||this._repaint)this.triggerRepaint();else{const S=!this.isMoving()&&this.loaded();if(S&&(v=this._updateAverageElevation(m,!0)),v)this.triggerRepaint();else if(this._triggerFrame(!1),S&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const M=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:M})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||T||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(f){for(const o of this._markers)f&&!this.getRenderWorldCopies()&&(o._lngLat=o._lngLat.wrap()),o._update();for(const o of this._popups)!f||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}_updateAverageElevation(f,o=!1){const c=m=>(this.transform.averageElevation=m,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&c(0);if((o||f-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(f)){const m=this.transform.averageElevation;let _=this.transform.sampleAverageElevation(),v=!1;this.transform.elevation&&(v=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(_)?_=0:this._averageElevationLastSampledAt=f;const T=Math.abs(m-_);if(T>1){if(this._isInitialLoad||v)return this._averageElevation.jumpTo(_),c(_);this._averageElevation.easeTo(_,f,300)}else if(T>1e-4)return this._averageElevation.jumpTo(_),c(_)}return!!this._averageElevation.isEasing(f)&&c(this._averageElevation.getValue(f))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,f=>{if(f&&(f.message===s.AUTH_ERR_MSG||f.status===401)){const o=this.painter.context.gl;s.storeAuthState(o,!1),this._logoControl instanceof wd&&this._logoControl._updateLogo(),o&&o.clear(o.DEPTH_BUFFER_BIT|o.COLOR_BUFFER_BIT|o.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const f=this._isDragging();this.painter.updateTerrain(this.style,f)}_calculateSpeedIndex(){const f=this.painter.canvasCopy(),o=this.painter.getCanvasCopiesAndTimestamps();o.timeStamps.push(performance.now());const c=this.painter.context.gl,m=c.createFramebuffer();function _(v){c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,v,0);const T=new Uint8Array(c.drawingBufferWidth*c.drawingBufferHeight*4);return c.readPixels(0,0,c.drawingBufferWidth,c.drawingBufferHeight,c.RGBA,c.UNSIGNED_BYTE,T),T}return c.bindFramebuffer(c.FRAMEBUFFER,m),this._canvasPixelComparison(_(f),o.canvasCopies.map(_),o.timeStamps)}_canvasPixelComparison(f,o,c){let m=c[1]-c[0];const _=f.length/4;for(let v=0;v<o.length;v++){const T=o[v];let S=0;for(let M=0;M<T.length;M+=4)T[M]===f[M]&&T[M+1]===f[M+1]&&T[M+2]===f[M+2]&&T[M+3]===f[M+3]&&(S+=1);m+=(c[v+2]-c[v+1])*(1-S/_)}return m}remove(){this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const f=this.painter.context.gl.getExtension("WEBGL_lose_context");f&&f.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(f){this._renderNextFrame=this._renderNextFrame||f,this.style&&!this._frame&&(this._frame=s.exported.frame(o=>{const c=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,c&&this._render(o)}))}_preloadTiles(f){const o=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(o,(c,m)=>c._preloadTiles(f,m),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(f){this._trackResize&&this.resize({originalEvent:f})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(f){this._showTerrainWireframe!==f&&(this._showTerrainWireframe=f,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(f){this._speedIndexTiming!==f&&(this._speedIndexTiming=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(f){this._showTileAABBs!==f&&(this._showTileAABBs=f,f&&this._update())}_setCacheLimits(f,o){s.setCacheLimits(f,o)}get version(){return s.version}},NavigationControl:class{constructor(f){this.options=s.extend({},ay,f),this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",o=>{this._map&&this._map.zoomIn({},{originalEvent:o})}),q("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",o=>{this._map&&this._map.zoomOut({},{originalEvent:o})}),q("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",o=>{const c=this._map;c&&(this.options.visualizePitch?c.resetNorthPitch({},{originalEvent:o}):c.resetNorth({},{originalEvent:o}))}),this._compassIcon=q("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const f=this._map;if(!f)return;const o=f.getZoom(),c=o===f.getMaxZoom(),m=o===f.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())}_rotateCompassArrow(){const f=this._map;if(!f)return;const o=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(f.transform.pitch*(Math.PI/180)),.5)}) rotateX(${f.transform.pitch}deg) rotateZ(${f.transform.angle*(180/Math.PI)}deg)`:`rotate(${f.transform.angle*(180/Math.PI)}deg)`;f._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=o)})}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),f.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&f.on("pitch",this._rotateCompassArrow),f.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ly(f,this._compass,this.options.visualizePitch)),this._container}onRemove(){const f=this._map;f&&(this._container.remove(),this.options.showZoom&&f.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&f.off("pitch",this._rotateCompassArrow),f.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(f,o){const c=q("button",f,this._container);return c.type="button",c.addEventListener("click",o),c}_setButtonTitle(f,o){if(!this._map)return;const c=this._map._getUIString(`NavigationControl.${o}`);f.setAttribute("aria-label",c),f.firstElementChild&&f.firstElementChild.setAttribute("title",c)}},GeolocateControl:class extends s.Evented{constructor(f){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},Ad,f),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Pa(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(f){return this._map=f,this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(f){const o=(c=!!this.options.geolocation)=>{this._supportsGeolocation=c,f(c)};this._supportsGeolocation!==void 0?f(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(c=>o(c.state!=="denied")).catch(()=>o()):o()}_isOutOfMapMaxBounds(f){const o=this._map.getMaxBounds(),c=f.coords;return!!o&&(c.longitude<o.getWest()||c.longitude>o.getEast()||c.latitude<o.getSouth()||c.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(f){if(this._map){if(this._isOutOfMapMaxBounds(f))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",f)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=f,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(f),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(f),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",f)),this._finish()}}_updateCamera(f){const o=new s.LngLat(f.coords.longitude,f.coords.latitude),c=f.coords.accuracy,m=this._map.getBearing(),_=s.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(c),_,{geolocateSource:!0})}_updateMarker(f){if(f){const o=new s.LngLat(f.coords.longitude,f.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=f.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const f=this._map.transform,o=s.mercatorZfromAltitude(1,f._center.lat)*f.worldSize,c=Math.ceil(2*this._accuracy*o);this._circleElement.style.width=`${c}px`,this._circleElement.style.height=`${c}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(f){if(this._map){if(this.options.trackUserLocation)if(f.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(f.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",f)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(f){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=q("button","mapboxgl-ctrl-geolocate",this._container),q("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",f===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",o),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=q("div","mapboxgl-user-location"),this._dotElement.appendChild(q("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(q("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new ft({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=q("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ft({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(f){this._userLocationDotMarker&&(f.webkitCompassHeading?this._heading=f.webkitCompassHeading:f.absolute===!0&&(this._heading=-1*f.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(f={maximumAge:6e5,timeout:0},this._noTimeout=!0):(f=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,f),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const f=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(o=>{o==="granted"&&f()}).catch(console.error):f()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:yt,ScaleControl:class{constructor(f){this.options=s.extend({},Cd,f),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const f=this.options.maxWidth||100,o=this._map,c=o._containerHeight/2,m=o._containerWidth/2-f/2,_=o.unproject([m,c]),v=o.unproject([m+f,c]),T=_.distanceTo(v);if(this.options.unit==="imperial"){const S=3.2808*T;S>5280?this._setScale(f,S/5280,"mile"):this._setScale(f,S,"foot")}else this.options.unit==="nautical"?this._setScale(f,T/1852,"nautical-mile"):T>=1e3?this._setScale(f,T/1e3,"kilometer"):this._setScale(f,T,"meter")}_setScale(f,o,c){this._map._requestDomTask(()=>{const m=function(v){const T=Math.pow(10,`${Math.floor(v)}`.length-1);let S=v/T;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(M){const L=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*L)/L}(S),T*S}(o),_=m/o;this._container.innerHTML=this._isNumberFormatSupported&&c!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:c}).format(m):`${m}&nbsp;${Md[c]}`,this._container.style.width=f*_+"px"})}onAdd(f){return this._map=f,this._language=f.getLanguage(),this._container=q("div","mapboxgl-ctrl mapboxgl-ctrl-scale",f.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(f){this._language=f,this._update()}setUnit(f){this.options.unit=f,this._update()}},FullscreenControl:class{constructor(f){this._fullscreen=!1,f&&f.container&&(f.container instanceof s.window.HTMLElement?this._container=f.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=q("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const f=this._fullscreenButton=q("button","mapboxgl-ctrl-fullscreen",this._controlContainer);q("span","mapboxgl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",f)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(f){super(),this.options=s.extend(Object.create(Td),f),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(f&&f.className?f.className.trim().split(/\s+/):[])}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&f.on("preclick",this._onClose),this.options.closeOnMove&&f.on("move",this._onClose),f.on("remove",this.remove),this._update(),f._addPopup(this),this._focusFirstElement(),this._trackPointer?(f.on("mousemove",this._onMouseEvent),f.on("mouseup",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")):f.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const f=this._map;return f&&(f.off("move",this._update),f.off("move",this._onClose),f.off("preclick",this._onClose),f.off("click",this._onClose),f.off("remove",this.remove),f.off("mousemove",this._onMouseEvent),f.off("mouseup",this._onMouseEvent),f.off("drag",this._onMouseEvent),f._canvasContainer&&f._canvasContainer.classList.remove("mapboxgl-track-pointer"),f._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(f){this._lngLat=s.LngLat.convert(f),this._pos=null,this._trackPointer=!1,this._update();const o=this._map;return o&&(o.on("move",this._update),o.off("mousemove",this._onMouseEvent),o._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const f=this._map;return f&&(f.off("move",this._update),f.on("mousemove",this._onMouseEvent),f.on("drag",this._onMouseEvent),f._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(s.window.document.createTextNode(f))}setHTML(f){const o=s.window.document.createDocumentFragment(),c=s.window.document.createElement("body");let m;for(c.innerHTML=f;m=c.firstChild,m;)o.appendChild(m);return this.setDOMContent(o)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){let o=this._content;if(o)for(;o.hasChildNodes();)o.firstChild&&o.removeChild(o.firstChild);else o=this._content=q("div","mapboxgl-popup-content",this._container||void 0);if(o.appendChild(f),this.options.closeButton){const c=this._closeButton=q("button","mapboxgl-popup-close-button",o);c.type="button",c.setAttribute("aria-label","Close popup"),c.setAttribute("aria-hidden","true"),c.innerHTML="&#215;",c.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(f){return this._classList.add(f),this._updateClassList(),this}removeClassName(f){return this._classList.delete(f),this._updateClassList(),this}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){let o;return this._classList.delete(f)?o=!1:(this._classList.add(f),o=!0),this._updateClassList(),o}_onMouseEvent(f){this._update(f.point)}_getAnchor(f){if(this.options.anchor)return this.options.anchor;const o=this._map,c=this._container,m=this._pos;if(!o||!c||!m)return"bottom";const _=c.offsetWidth,v=c.offsetHeight,T=m.x<_/2,S=m.x>o.transform.width-_/2;if(m.y+f<v)return T?"top-left":S?"top-right":"top";if(m.y>o.transform.height-v){if(T)return"bottom-left";if(S)return"bottom-right"}return T?"left":S?"right":"bottom"}_updateClassList(){const f=this._container;if(!f)return;const o=[...this._classList];o.push("mapboxgl-popup"),this._anchor&&o.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&o.push("mapboxgl-popup-track-pointer"),f.className=o.join(" ")}_update(f){const o=this._map,c=this._content;if(!o||!this._lngLat&&!this._trackPointer||!c)return;let m=this._container;if(m||(m=this._container=q("div","mapboxgl-popup",o.getContainer()),this._tip=q("div","mapboxgl-popup-tip",m),m.appendChild(c)),this.options.maxWidth&&m.style.maxWidth!==this.options.maxWidth&&(m.style.maxWidth=this.options.maxWidth),o.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=La(this._lngLat,this._pos,o.transform)),!this._trackPointer||f){const _=this._pos=this._trackPointer&&f?f:o.project(this._lngLat),v=pm(this.options.offset),T=this._anchor=this._getAnchor(v.y),S=pm(this.options.offset,T),M=_.add(S).round();o._requestDomTask(()=>{this._container&&T&&(this._container.style.transform=`${Vs[T]} translate(${M.x}px,${M.y}px)`)})}if(!this._marker&&o._showingGlobe()){const _=s.isLngLatBehindGlobe(o.transform,this._lngLat)?0:1;this._setOpacity(_)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(sy);f&&f.focus()}_onClose(){this.remove()}_setOpacity(f){this._container&&(this._container.style.opacity=`${f}`),this._content&&(this._content.style.pointerEvents=f?"auto":"none")}},Marker:ft,Style:co,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:Jp,Evented:s.Evented,config:s.config,prewarm:function(){ma().acquire(so)},clearPrewarmedResources:function(){const f=qn;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(so),qn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(f){s.config.ACCESS_TOKEN=f},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(f){s.config.API_URL=f},get workerCount(){return En.workerCount},set workerCount(f){En.workerCount=f},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(f){s.config.MAX_PARALLEL_IMAGE_REQUESTS=f},clearStorage(f){s.clearTileCache(f)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return Oa});var E=d;return E})})(kP);var fF=kP.exports;const fc=dp(fF);var kh=mF,pF=Object.prototype.hasOwnProperty;function mF(){for(var e={},r=0;r<arguments.length;r++){var a=arguments[r];for(var h in a)pF.call(a,h)&&(e[h]=a[h])}return e}var OP={exports:{}};(function(e,r){(function(){var a={};e.exports=a,a.simpleFilter=function(h,d){return d.filter(function(x){return a.test(h,x)})},a.test=function(h,d){return a.match(h,d)!==null},a.match=function(h,d,x){x=x||{};var E=0,s=[],A=d.length,R=0,U=0,N=x.pre||"",q=x.post||"",fe=x.caseSensitive&&d||d.toLowerCase(),ae;h=x.caseSensitive&&h||h.toLowerCase();for(var se=0;se<A;se++)ae=d[se],fe[se]===h[E]?(ae=N+ae+q,E+=1,U+=1+U):U=0,R+=U,s[s.length]=ae;return E===h.length?(R=fe===h?1/0:R,{rendered:s.join(""),score:R}):null},a.filter=function(h,d,x){return!d||d.length===0?[]:typeof h!="string"?d:(x=x||{},d.reduce(function(E,s,A,R){var U=s;x.extract&&(U=x.extract(s));var N=a.match(h,U,x);return N!=null&&(E[E.length]={string:N.rendered,score:N.score,index:A,original:s}),E},[]).sort(function(E,s){var A=s.score-E.score;return A||E.index-s.index}))}})()})(OP);var gF=OP.exports,Zi=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};Zi.prototype.show=function(){this.element.style.display="block"};Zi.prototype.hide=function(){this.element.style.display="none"};Zi.prototype.add=function(e){this.items.push(e)};Zi.prototype.clear=function(){this.items=[],this.active=0};Zi.prototype.isEmpty=function(){return!this.items.length};Zi.prototype.isVisible=function(){return this.element.style.display==="block"};Zi.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};Zi.prototype.drawItem=function(e,r){var a=document.createElement("li"),h=document.createElement("a");r&&(a.className+=" active"),h.innerHTML=e.string,a.appendChild(h),this.element.appendChild(a),a.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),a.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};Zi.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};Zi.prototype.move=function(e){this.active=e,this.draw()};Zi.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Zi.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Zi.prototype.drawError=function(e){var r=document.createElement("li");r.innerHTML=e,this.element.appendChild(r),this.show()};var _F=Zi,yF=kh,vF=gF,xF=_F,fi=function(e,r,a){return a=a||{},this.options=yF({minLength:2,limit:5,filter:!0,hideOnBlur:!0},a),this.el=e,this.data=r||[],this.list=new xF(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(h){this.handleKeyUp(h.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(h){this.handleKeyDown(h)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(h){this.handlePaste(h)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};fi.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};fi.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};fi.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};fi.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var r=this;setTimeout(function(){r.handleInputChange(e.target.value)},100)}};fi.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(r){for(var a=0;a<r.length&&(this.list.add(r[a]),a!==this.options.limit-1);a++);this.list.draw()}.bind(this))};fi.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};fi.prototype.update=function(e){this.data=e,this.handleKeyUp()};fi.prototype.clear=function(){this.data=[],this.list.clear()};fi.prototype.normalize=function(e){return e=e.toLowerCase(),e};fi.prototype.match=function(e,r){return e.indexOf(r)>-1};fi.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var r=document.createEvent("HTMLEvents");r.initEvent("change",!0,!1),this.el.dispatchEvent(r)}else this.el.fireEvent("onchange")};fi.prototype.getCandidates=function(e){var r={pre:"<strong>",post:"</strong>",extract:function(h){return this.getItemValue(h)}.bind(this)},a;this.options.filter?(a=vF.filter(this.query,this.data,r),a=a.map(function(h){return{original:h.original,string:this.render(h.original,h.string)}}.bind(this))):a=this.data.map(function(h){var d=this.render(h);return{original:h,string:d}}.bind(this)),e(a)};fi.prototype.getItemValue=function(e){return e};fi.prototype.render=function(e,r){if(r)return r;for(var a=e.original?this.getItemValue(e.original):this.getItemValue(e),h=this.normalize(a),d=h.lastIndexOf(this.query);d>-1;){var x=d+this.query.length;a=a.slice(0,d)+"<strong>"+a.slice(d,x)+"</strong>"+a.slice(x),d=h.slice(0,d).lastIndexOf(this.query)}return a};fi.prototype.renderError=function(e){this.list.drawError(e)};var bF=fi,zP=bF,wF=zP;typeof window<"u"&&(window.Suggestions=zP);var EF="Expected a function",xA=0/0,TF="[object Symbol]",SF=/^\s+|\s+$/g,AF=/^[-+]0x[0-9a-f]+$/i,CF=/^0b[01]+$/i,MF=/^0o[0-7]+$/i,PF=parseInt,IF=typeof bi=="object"&&bi&&bi.Object===Object&&bi,kF=typeof self=="object"&&self&&self.Object===Object&&self,LF=IF||kF||Function("return this")(),OF=Object.prototype,zF=OF.toString,RF=Math.max,DF=Math.min,r1=function(){return LF.Date.now()};function BF(e,r,a){var h,d,x,E,s,A,R=0,U=!1,N=!1,q=!0;if(typeof e!="function")throw new TypeError(EF);r=bA(r)||0,Px(a)&&(U=!!a.leading,N="maxWait"in a,x=N?RF(bA(a.maxWait)||0,r):x,q="trailing"in a?!!a.trailing:q);function fe(Fe){var We=h,Ve=d;return h=d=void 0,R=Fe,E=e.apply(Ve,We),E}function ae(Fe){return R=Fe,s=setTimeout(J,r),U?fe(Fe):E}function se(Fe){var We=Fe-A,Ve=Fe-R,Te=r-We;return N?DF(Te,x-Ve):Te}function ve(Fe){var We=Fe-A,Ve=Fe-R;return A===void 0||We>=r||We<0||N&&Ve>=x}function J(){var Fe=r1();if(ve(Fe))return Z(Fe);s=setTimeout(J,se(Fe))}function Z(Fe){return s=void 0,q&&h?fe(Fe):(h=d=void 0,E)}function te(){s!==void 0&&clearTimeout(s),R=0,h=A=d=s=void 0}function Ee(){return s===void 0?E:Z(r1())}function ke(){var Fe=r1(),We=ve(Fe);if(h=arguments,d=this,A=Fe,We){if(s===void 0)return ae(A);if(N)return s=setTimeout(J,r),fe(A)}return s===void 0&&(s=setTimeout(J,r)),E}return ke.cancel=te,ke.flush=Ee,ke}function Px(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function FF(e){return!!e&&typeof e=="object"}function NF(e){return typeof e=="symbol"||FF(e)&&zF.call(e)==TF}function bA(e){if(typeof e=="number")return e;if(NF(e))return xA;if(Px(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Px(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(SF,"");var a=CF.test(e);return a||MF.test(e)?PF(e.slice(2),a?2:8):AF.test(e)?xA:+e}var RP=BF,mw={exports:{}},lh=typeof Reflect=="object"?Reflect:null,wA=lh&&typeof lh.apply=="function"?lh.apply:function(r,a,h){return Function.prototype.apply.call(r,a,h)},Zg;lh&&typeof lh.ownKeys=="function"?Zg=lh.ownKeys:Object.getOwnPropertySymbols?Zg=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Zg=function(r){return Object.getOwnPropertyNames(r)};function jF(e){console&&console.warn&&console.warn(e)}var DP=Number.isNaN||function(r){return r!==r};function Nr(){Nr.init.call(this)}mw.exports=Nr;mw.exports.once=GF;Nr.EventEmitter=Nr;Nr.prototype._events=void 0;Nr.prototype._eventsCount=0;Nr.prototype._maxListeners=void 0;var EA=10;function k0(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Nr,"defaultMaxListeners",{enumerable:!0,get:function(){return EA},set:function(e){if(typeof e!="number"||e<0||DP(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");EA=e}});Nr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Nr.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||DP(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function BP(e){return e._maxListeners===void 0?Nr.defaultMaxListeners:e._maxListeners}Nr.prototype.getMaxListeners=function(){return BP(this)};Nr.prototype.emit=function(r){for(var a=[],h=1;h<arguments.length;h++)a.push(arguments[h]);var d=r==="error",x=this._events;if(x!==void 0)d=d&&x.error===void 0;else if(!d)return!1;if(d){var E;if(a.length>0&&(E=a[0]),E instanceof Error)throw E;var s=new Error("Unhandled error."+(E?" ("+E.message+")":""));throw s.context=E,s}var A=x[r];if(A===void 0)return!1;if(typeof A=="function")wA(A,this,a);else for(var R=A.length,U=VP(A,R),h=0;h<R;++h)wA(U[h],this,a);return!0};function FP(e,r,a,h){var d,x,E;if(k0(a),x=e._events,x===void 0?(x=e._events=Object.create(null),e._eventsCount=0):(x.newListener!==void 0&&(e.emit("newListener",r,a.listener?a.listener:a),x=e._events),E=x[r]),E===void 0)E=x[r]=a,++e._eventsCount;else if(typeof E=="function"?E=x[r]=h?[a,E]:[E,a]:h?E.unshift(a):E.push(a),d=BP(e),d>0&&E.length>d&&!E.warned){E.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=r,s.count=E.length,jF(s)}return e}Nr.prototype.addListener=function(r,a){return FP(this,r,a,!1)};Nr.prototype.on=Nr.prototype.addListener;Nr.prototype.prependListener=function(r,a){return FP(this,r,a,!0)};function UF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function NP(e,r,a){var h={fired:!1,wrapFn:void 0,target:e,type:r,listener:a},d=UF.bind(h);return d.listener=a,h.wrapFn=d,d}Nr.prototype.once=function(r,a){return k0(a),this.on(r,NP(this,r,a)),this};Nr.prototype.prependOnceListener=function(r,a){return k0(a),this.prependListener(r,NP(this,r,a)),this};Nr.prototype.removeListener=function(r,a){var h,d,x,E,s;if(k0(a),d=this._events,d===void 0)return this;if(h=d[r],h===void 0)return this;if(h===a||h.listener===a)--this._eventsCount===0?this._events=Object.create(null):(delete d[r],d.removeListener&&this.emit("removeListener",r,h.listener||a));else if(typeof h!="function"){for(x=-1,E=h.length-1;E>=0;E--)if(h[E]===a||h[E].listener===a){s=h[E].listener,x=E;break}if(x<0)return this;x===0?h.shift():VF(h,x),h.length===1&&(d[r]=h[0]),d.removeListener!==void 0&&this.emit("removeListener",r,s||a)}return this};Nr.prototype.off=Nr.prototype.removeListener;Nr.prototype.removeAllListeners=function(r){var a,h,d;if(h=this._events,h===void 0)return this;if(h.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):h[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete h[r]),this;if(arguments.length===0){var x=Object.keys(h),E;for(d=0;d<x.length;++d)E=x[d],E!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(a=h[r],typeof a=="function")this.removeListener(r,a);else if(a!==void 0)for(d=a.length-1;d>=0;d--)this.removeListener(r,a[d]);return this};function jP(e,r,a){var h=e._events;if(h===void 0)return[];var d=h[r];return d===void 0?[]:typeof d=="function"?a?[d.listener||d]:[d]:a?$F(d):VP(d,d.length)}Nr.prototype.listeners=function(r){return jP(this,r,!0)};Nr.prototype.rawListeners=function(r){return jP(this,r,!1)};Nr.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):UP.call(e,r)};Nr.prototype.listenerCount=UP;function UP(e){var r=this._events;if(r!==void 0){var a=r[e];if(typeof a=="function")return 1;if(a!==void 0)return a.length}return 0}Nr.prototype.eventNames=function(){return this._eventsCount>0?Zg(this._events):[]};function VP(e,r){for(var a=new Array(r),h=0;h<r;++h)a[h]=e[h];return a}function VF(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}function $F(e){for(var r=new Array(e.length),a=0;a<r.length;++a)r[a]=e[a].listener||e[a];return r}function GF(e,r){return new Promise(function(a,h){function d(E){e.removeListener(r,x),h(E)}function x(){typeof e.removeListener=="function"&&e.removeListener("error",d),a([].slice.call(arguments))}$P(e,r,x,{once:!0}),r!=="error"&&ZF(e,d,{once:!0})})}function ZF(e,r,a){typeof e.on=="function"&&$P(e,"error",r,a)}function $P(e,r,a,h){if(typeof e.on=="function")h.once?e.once(r,a):e.on(r,a);else if(typeof e.addEventListener=="function")e.addEventListener(r,function d(x){h.once&&e.removeEventListener(r,d),a(x)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var HF=mw.exports,qF={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function WF(e){var r=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return r?{key:r[1],value:r[2]}:null}function XF(e){var r=e.match(/<?([^>]*)>(.*)/);if(!r)return null;var a=r[1],h=r[2].split(";"),d=null,x=h.reduce(function(E,s){var A=WF(s);return A?A.key==="rel"?(d||(d=A.value),E):(E[A.key]=A.value,E):E},{});return d?{url:a,rel:d,params:x}:null}function KF(e){return e?e.split(/,\s*</).reduce(function(r,a){var h=XF(a);if(!h)return r;var d=h.rel.split(/\s+/);return d.forEach(function(x){r[x]||(r[x]={url:h.url,params:h.params})}),r},{}):{}}var YF=KF,QF=YF;function gw(e,r){this.request=e,this.headers=r.headers,this.rawBody=r.body,this.statusCode=r.statusCode;try{this.body=JSON.parse(r.body||"{}")}catch{this.body=r.body}this.links=QF(this.headers.link)}gw.prototype.hasNextPage=function(){return!!this.links.next};gw.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var JF=gw,L0={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},TA=L0;function eN(e){var r=e.type||TA.ERROR_HTTP,a;if(e.body)try{a=JSON.parse(e.body)}catch{a=e.body}else a=null;var h=e.message||null;h||(typeof a=="string"?h=a:a&&typeof a.message=="string"?h=a.message:r===TA.ERROR_REQUEST_ABORTED&&(h="Request aborted")),this.message=h,this.type=r,this.statusCode=e.statusCode||null,this.request=e.request,this.body=a}var tN=eN;function rN(e){var r=e.indexOf(":"),a=e.substring(0,r).trim().toLowerCase(),h=e.substring(r+1).trim();return{name:a,value:h}}function nN(e){var r={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(a){var h=rN(a);r[h.name]=h.value}),r}var iN=nN,oN=JF,SA=tN,n1=L0,sN=iN,w_={};function aN(e){var r=w_[e.id];r&&(r.abort(),delete w_[e.id])}function lN(e,r){return new oN(e,{body:r.response,headers:sN(r.getAllResponseHeaders()),statusCode:r.status})}function AA(e){var r=e.total,a=e.loaded,h=100*a/r;return{total:r,transferred:a,percent:h}}function GP(e,r){return new Promise(function(a,h){r.onprogress=function(E){e.emitter.emit(n1.EVENT_PROGRESS_DOWNLOAD,AA(E))};var d=e.file;d&&(r.upload.onprogress=function(E){e.emitter.emit(n1.EVENT_PROGRESS_UPLOAD,AA(E))}),r.onerror=function(E){h(E)},r.onabort=function(){var E=new SA({request:e,type:n1.ERROR_REQUEST_ABORTED});h(E)},r.onload=function(){if(delete w_[e.id],r.status<200||r.status>=400){var E=new SA({request:e,body:r.response,statusCode:r.status});h(E);return}a(r)};var x=e.body;typeof x=="string"?r.send(x):x?r.send(JSON.stringify(x)):d?r.send(d):r.send(),w_[e.id]=r}).then(function(a){return lN(e,a)})}function ZP(e,r){var a=e.url(r),h=new window.XMLHttpRequest;return h.open(e.method,a),Object.keys(e.headers).forEach(function(d){h.setRequestHeader(d,e.headers[d])}),h}function cN(e){return Promise.resolve().then(function(){var r=ZP(e,e.client.accessToken);return GP(e,r)})}var uN={browserAbort:aN,sendRequestXhr:GP,browserSend:cN,createRequestXhr:ZP},E_={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */E_.exports;(function(e,r){(function(a){var h=r,d=e&&e.exports==h&&e,x=typeof bi=="object"&&bi;(x.global===x||x.window===x)&&(a=x);var E=function(ae){this.message=ae};E.prototype=new Error,E.prototype.name="InvalidCharacterError";var s=function(ae){throw new E(ae)},A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=/[\t\n\f\r ]/g,U=function(ae){ae=String(ae).replace(R,"");var se=ae.length;se%4==0&&(ae=ae.replace(/==?$/,""),se=ae.length),(se%4==1||/[^+a-zA-Z0-9/]/.test(ae))&&s("Invalid character: the string to be decoded is not correctly encoded.");for(var ve=0,J,Z,te="",Ee=-1;++Ee<se;)Z=A.indexOf(ae.charAt(Ee)),J=ve%4?J*64+Z:Z,ve++%4&&(te+=String.fromCharCode(255&J>>(-2*ve&6)));return te},N=function(ae){ae=String(ae),/[^\0-\xFF]/.test(ae)&&s("The string to be encoded contains characters outside of the Latin1 range.");for(var se=ae.length%3,ve="",J=-1,Z,te,Ee,ke,Fe=ae.length-se;++J<Fe;)Z=ae.charCodeAt(J)<<16,te=ae.charCodeAt(++J)<<8,Ee=ae.charCodeAt(++J),ke=Z+te+Ee,ve+=A.charAt(ke>>18&63)+A.charAt(ke>>12&63)+A.charAt(ke>>6&63)+A.charAt(ke&63);return se==2?(Z=ae.charCodeAt(J)<<8,te=ae.charCodeAt(++J),ke=Z+te,ve+=A.charAt(ke>>10)+A.charAt(ke>>4&63)+A.charAt(ke<<2&63)+"="):se==1&&(ke=ae.charCodeAt(J),ve+=A.charAt(ke>>2)+A.charAt(ke<<4&63)+"=="),ve},q={encode:N,decode:U,version:"0.1.0"};if(h&&!h.nodeType)if(d)d.exports=q;else for(var fe in q)q.hasOwnProperty(fe)&&(h[fe]=q[fe]);else a.base64=q})(bi)})(E_,E_.exports);var hN=E_.exports,dN=hN,i1={};function fN(e){if(i1[e])return i1[e];var r=e.split("."),a=r[0],h=r[1];if(!h)throw new Error("Invalid token");var d=pN(h),x={usage:a,user:d.u};return pc(d,"a")&&(x.authorization=d.a),pc(d,"exp")&&(x.expires=d.exp*1e3),pc(d,"iat")&&(x.created=d.iat*1e3),pc(d,"scopes")&&(x.scopes=d.scopes),pc(d,"client")&&(x.client=d.client),pc(d,"ll")&&(x.lastLogin=d.ll),pc(d,"iu")&&(x.impersonator=d.iu),i1[e]=x,x}function pN(e){try{return JSON.parse(dN.decode(e))}catch{throw new Error("Invalid token")}}function pc(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var HP=fN,qP={exports:{}};(function(e){var r=Object.prototype.hasOwnProperty,a="~";function h(){}Object.create&&(h.prototype=Object.create(null),new h().__proto__||(a=!1));function d(A,R,U){this.fn=A,this.context=R,this.once=U||!1}function x(A,R,U,N,q){if(typeof U!="function")throw new TypeError("The listener must be a function");var fe=new d(U,N||A,q),ae=a?a+R:R;return A._events[ae]?A._events[ae].fn?A._events[ae]=[A._events[ae],fe]:A._events[ae].push(fe):(A._events[ae]=fe,A._eventsCount++),A}function E(A,R){--A._eventsCount===0?A._events=new h:delete A._events[R]}function s(){this._events=new h,this._eventsCount=0}s.prototype.eventNames=function(){var R=[],U,N;if(this._eventsCount===0)return R;for(N in U=this._events)r.call(U,N)&&R.push(a?N.slice(1):N);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(U)):R},s.prototype.listeners=function(R){var U=a?a+R:R,N=this._events[U];if(!N)return[];if(N.fn)return[N.fn];for(var q=0,fe=N.length,ae=new Array(fe);q<fe;q++)ae[q]=N[q].fn;return ae},s.prototype.listenerCount=function(R){var U=a?a+R:R,N=this._events[U];return N?N.fn?1:N.length:0},s.prototype.emit=function(R,U,N,q,fe,ae){var se=a?a+R:R;if(!this._events[se])return!1;var ve=this._events[se],J=arguments.length,Z,te;if(ve.fn){switch(ve.once&&this.removeListener(R,ve.fn,void 0,!0),J){case 1:return ve.fn.call(ve.context),!0;case 2:return ve.fn.call(ve.context,U),!0;case 3:return ve.fn.call(ve.context,U,N),!0;case 4:return ve.fn.call(ve.context,U,N,q),!0;case 5:return ve.fn.call(ve.context,U,N,q,fe),!0;case 6:return ve.fn.call(ve.context,U,N,q,fe,ae),!0}for(te=1,Z=new Array(J-1);te<J;te++)Z[te-1]=arguments[te];ve.fn.apply(ve.context,Z)}else{var Ee=ve.length,ke;for(te=0;te<Ee;te++)switch(ve[te].once&&this.removeListener(R,ve[te].fn,void 0,!0),J){case 1:ve[te].fn.call(ve[te].context);break;case 2:ve[te].fn.call(ve[te].context,U);break;case 3:ve[te].fn.call(ve[te].context,U,N);break;case 4:ve[te].fn.call(ve[te].context,U,N,q);break;default:if(!Z)for(ke=1,Z=new Array(J-1);ke<J;ke++)Z[ke-1]=arguments[ke];ve[te].fn.apply(ve[te].context,Z)}}return!0},s.prototype.on=function(R,U,N){return x(this,R,U,N,!1)},s.prototype.once=function(R,U,N){return x(this,R,U,N,!0)},s.prototype.removeListener=function(R,U,N,q){var fe=a?a+R:R;if(!this._events[fe])return this;if(!U)return E(this,fe),this;var ae=this._events[fe];if(ae.fn)ae.fn===U&&(!q||ae.once)&&(!N||ae.context===N)&&E(this,fe);else{for(var se=0,ve=[],J=ae.length;se<J;se++)(ae[se].fn!==U||q&&!ae[se].once||N&&ae[se].context!==N)&&ve.push(ae[se]);ve.length?this._events[fe]=ve.length===1?ve[0]:ve:E(this,fe)}return this},s.prototype.removeAllListeners=function(R){var U;return R?(U=a?a+R:R,this._events[U]&&E(this,U)):(this._events=new h,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=a,s.EventEmitter=s,e.exports=s})(qP);var mN=qP.exports;function gN(e){return e.map(encodeURIComponent).join(",")}function WP(e){return Array.isArray(e)?gN(e):encodeURIComponent(String(e))}function XP(e,r,a){if(a===!1||a===null)return e;var h=/\?/.test(e)?"&":"?",d=encodeURIComponent(r);return a!==void 0&&a!==""&&a!==!0&&(d+="="+WP(a)),""+e+h+d}function _N(e,r){if(!r)return e;var a=e;return Object.keys(r).forEach(function(h){var d=r[h];d!==void 0&&(Array.isArray(d)&&(d=d.filter(function(x){return x!=null}).join(",")),a=XP(a,h,d))}),a}function yN(e,r){if(!r||e.slice(0,4)==="http")return e;var a=e[0]==="/"?"":"/";return""+r.replace(/\/$/,"")+a+e}function vN(e,r){return r?e.replace(/\/:([a-zA-Z0-9]+)/g,function(a,h){var d=r[h];if(d===void 0)throw new Error("Unspecified route parameter "+h);var x=WP(d);return"/"+x}):e}var xN={appendQueryObject:_N,appendQueryParam:XP,prependOrigin:yN,interpolateRouteParams:vN},bN=HP,_w=kh,wN=mN,Cg=xN,CA=L0,EN=1;function ml(e,r){if(!e)throw new Error("MapiRequest requires a client");if(!r||!r.path||!r.method)throw new Error("MapiRequest requires an options object with path and method properties");var a={};r.body&&(a["content-type"]="application/json");var h=_w(a,r.headers),d=Object.keys(h).reduce(function(x,E){return x[E.toLowerCase()]=h[E],x},{});this.id=EN++,this._options=r,this.emitter=new wN,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=r.path,this.method=r.method,this.origin=r.origin||e.origin,this.query=r.query||{},this.params=r.params||{},this.body=r.body||null,this.file=r.file||null,this.encoding=r.encoding||"utf8",this.sendFileAs=r.sendFileAs||null,this.headers=d}ml.prototype.url=function(r){var a=Cg.prependOrigin(this.path,this.origin);a=Cg.appendQueryObject(a,this.query);var h=this.params,d=r??this.client.accessToken;if(d){a=Cg.appendQueryParam(a,"access_token",d);var x=bN(d).user;h=_w({ownerId:x},h)}return a=Cg.interpolateRouteParams(a,h),a};ml.prototype.send=function(){var r=this;if(r.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return r.sent=!0,r.client.sendRequest(r).then(function(a){return r.response=a,r.emitter.emit(CA.EVENT_RESPONSE,a),a},function(a){throw r.error=a,r.emitter.emit(CA.EVENT_ERROR,a),a})};ml.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};ml.prototype.eachPage=function(r){var a=this;function h(E){function s(){delete a._nextPageRequest;var A=E.nextPage();A&&(a._nextPageRequest=A,x(A))}r(null,E,s)}function d(E){r(E,null,function(){})}function x(E){E.send().then(h,d)}x(this)};ml.prototype.clone=function(){return this._extend()};ml.prototype._extend=function(r){var a=_w(this._options,r);return new ml(this.client,a)};var TN=ml,SN=HP,AN=TN,CN=L0;function KP(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");SN(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||CN.API_ORIGIN}KP.prototype.createRequest=function(r){return new AN(this,r)};var YP=KP,QP=uN,JP=YP;function vh(e){JP.call(this,e)}vh.prototype=Object.create(JP.prototype);vh.prototype.constructor=vh;vh.prototype.sendRequest=QP.browserSend;vh.prototype.abortRequest=QP.browserAbort;function MN(e){return new vh(e)}var eI=MN,PN=eI,IN=PN,kN=Object.prototype.toString,LN=function(e){var r;return kN.call(e)==="[object Object]"&&(r=Object.getPrototypeOf(e),r===null||r===Object.getPrototypeOf({}))},ON=LN,zN=kh,tI="value",o1=`
  `,Zr={};Zr.assert=function(e,r){return r=r||{},function(a){var h=gl(e,a);if(h){var d=yw(h,r);throw r.apiName&&(d=r.apiName+": "+d),new Error(d)}}};Zr.shape=function(r){var a=FN(r);return function(d){var x=gl(Zr.plainObject,d);if(x)return x;for(var E,s,A=[],R=0;R<a.length;R++)E=a[R].key,s=a[R].value,x=gl(s,d[E]),x&&A.push([E].concat(x));return A.length<2?A[0]:function(U){A=A.map(function(fe){var ae=fe[0],se=yw(fe,U).split(`
`).join(o1);return"- "+ae+": "+se});var N=U.path.join("."),q=N===tI?"":" of "+N;return"The following properties"+q+" have invalid values:"+o1+A.join(o1)}}};Zr.strictShape=function(r){var a=Zr.shape(r);return function(d){var x=a(d);if(x)return x;var E=Object.keys(d).reduce(function(s,A){return r[A]===void 0&&s.push(A),s},[]);if(E.length!==0)return function(){return"The following keys are invalid: "+E.join(", ")}}};Zr.arrayOf=function(r){return rI(r)};Zr.tuple=function(){var r=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return rI(r)};function rI(e){var r=Array.isArray(e),a=function(h){return r?e[h]:e};return function(d){var x=gl(Zr.plainArray,d);if(x)return x;if(r&&d.length!==e.length)return"an array with "+e.length+" items";for(var E=0;E<d.length;E++)if(x=gl(a(E),d[E]),x)return[E].concat(x)}}Zr.required=function(r){function a(h){return h==null?function(d){return nI(d,iI(d.path)?"cannot be undefined/null.":"is required.")}:r.apply(this,arguments)}return a.__required=!0,a};Zr.oneOfType=function(){var r=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(h){var d=r.map(function(x){return gl(x,h)}).filter(Boolean);if(d.length===r.length)return d.every(function(x){return x.length===1&&typeof x[0]=="string"})?RN(d.map(function(x){return x[0]})):d.reduce(function(x,E){return E.length>x.length?E:x})}};Zr.equal=function(r){return function(h){if(h!==r)return JSON.stringify(r)}};Zr.oneOf=function(){var r=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),a=r.map(function(h){return Zr.equal(h)});return Zr.oneOfType.apply(this,a)};Zr.range=function(r){var a=r[0],h=r[1];return function(x){var E=gl(Zr.number,x);if(E||x<a||x>h)return"number between "+a+" & "+h+" (inclusive)"}};Zr.any=function(){};Zr.boolean=function(r){if(typeof r!="boolean")return"boolean"};Zr.number=function(r){if(typeof r!="number")return"number"};Zr.plainArray=function(r){if(!Array.isArray(r))return"array"};Zr.plainObject=function(r){if(!ON(r))return"object"};Zr.string=function(r){if(typeof r!="string")return"string"};Zr.func=function(r){if(typeof r!="function")return"function"};function gl(e,r){if(!(r==null&&!e.hasOwnProperty("__required"))){var a=e(r);if(a)return Array.isArray(a)?a:[a]}}function yw(e,r){var a=e.length,h=e[a-1],d=e.slice(0,a-1);return d.length===0&&(d=[tI]),r=zN(r,{path:d}),typeof h=="function"?h(r):nI(r,DN(h))}function RN(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function DN(e){return"must be "+BN(e)+"."}function BN(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function nI(e,r){var a=iI(e.path),h=e.path.join(".")+" "+r,d=a?"Item at position ":"";return d+h}function iI(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function FN(e){return Object.keys(e||{}).map(function(r){return{key:r,value:e[r]}})}Zr.validate=gl;Zr.processMessage=yw;var NN=Zr,jN=kh,ch=NN;function UN(e){if(typeof window<"u")return e instanceof bi.Blob||e instanceof bi.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function VN(e,r){return ch.assert(ch.strictShape(e),r)}function $N(e){var r="date";if(typeof e=="boolean")return r;try{var a=new Date(e);if(a.getTime&&isNaN(a.getTime()))return r}catch{return r}}function GN(e){return ch.tuple(ch.number,ch.number)(e)}var ZN=jN(ch,{file:UN,date:$N,coordinates:GN,assertShape:VN});function HN(e,r){var a=function(h,d){return r.indexOf(h)!==-1&&d!==void 0};return typeof r=="function"&&(a=r),Object.keys(e).filter(function(h){return a(h,e[h])}).reduce(function(h,d){return h[d]=e[d],h},{})}var qN=HN;function WN(e,r){return Object.keys(e).reduce(function(a,h){return a[h]=r(h,e[h]),a},{})}var XN=WN,KN=XN;function YN(e){return KN(e,function(r,a){return typeof a=="boolean"?JSON.stringify(a):a})}var QN=YN,JN=YP,ej=eI;function tj(e){return function(r){var a;JN.prototype.isPrototypeOf(r)?a=r:a=ej(r);var h=Object.create(e);return h.client=a,h}}var rj=tj,oI=kh,pr=ZN,T_=qN,sI=QN,nj=rj,vw={},aI=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];vw.forwardGeocode=function(e){pr.assertShape({query:pr.required(pr.string),mode:pr.oneOf("mapbox.places","mapbox.places-permanent"),countries:pr.arrayOf(pr.string),proximity:pr.oneOf(pr.coordinates,"ip"),types:pr.arrayOf(pr.oneOf(aI)),autocomplete:pr.boolean,bbox:pr.arrayOf(pr.number),limit:pr.number,language:pr.arrayOf(pr.string),routing:pr.boolean,fuzzyMatch:pr.boolean,worldview:pr.string})(e),e.mode=e.mode||"mapbox.places";var r=sI(oI({country:e.countries},T_(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:T_(e,["mode","query"]),query:r})};vw.reverseGeocode=function(e){pr.assertShape({query:pr.required(pr.coordinates),mode:pr.oneOf("mapbox.places","mapbox.places-permanent"),countries:pr.arrayOf(pr.string),types:pr.arrayOf(pr.oneOf(aI)),bbox:pr.arrayOf(pr.number),limit:pr.number,language:pr.arrayOf(pr.string),reverseMode:pr.oneOf("distance","score"),routing:pr.boolean,worldview:pr.string})(e),e.mode=e.mode||"mapbox.places";var r=sI(oI({country:e.countries},T_(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:T_(e,["mode","query"]),query:r})};var ij=nj(vw);let oj="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",lI=e=>crypto.getRandomValues(new Uint8Array(e)),cI=(e,r,a)=>{let h=(2<<Math.log(e.length-1)/Math.LN2)-1,d=-~(1.6*h*r/e.length);return(x=r)=>{let E="";for(;;){let s=a(d),A=d;for(;A--;)if(E+=e[s[A]&h]||"",E.length===x)return E}}},sj=(e,r=21)=>cI(e,r,lI),aj=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((r,a)=>(a&=63,a<36?r+=a.toString(36):a<62?r+=(a-26).toString(36).toUpperCase():a>62?r+="-":r+="_",r),"");const lj=Object.freeze(Object.defineProperty({__proto__:null,customAlphabet:sj,customRandom:cI,nanoid:aj,random:lI,urlAlphabet:oj},Symbol.toStringTag,{value:"Module"})),cj=Wx(lj);var uj=cj.nanoid;function uI(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}uI.prototype={select:function(e,r){var a=this.getSelectedIndex(e,r),h=this.getEventPayload("search.select",r);if(h.resultIndex=a,h.resultPlaceName=e.place_name,h.resultId=e.id,!(a===this.lastSentIndex&&h.queryString===this.lastSentInput||a==-1)&&(this.lastSentIndex=a,this.lastSentInput=h.queryString,!!h.queryString))return this.push(h)},start:function(e){var r=this.getEventPayload("search.start",e);if(r.queryString)return this.push(r)},keyevent:function(e,r){if(e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var a=this.getEventPayload("search.keystroke",r);if(a.lastAction=e.key,!!a.queryString)return this.push(a)}},send:function(e,r){if(!this.enableEventLogging)return r?r():void 0;var a=this.getRequestOptions(e);this.request(a,function(h){if(h)return this.handleError(h,r);if(r)return r()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var r={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return r},getEventPayload:function(e,r){var a;r.options.proximity?typeof r.options.proximity=="object"?a=[r.options.proximity.longitude,r.options.proximity.latitude]:r.options.proximity==="ip"?a=[999,999]:a=r.options.proximity:a=null;var h=r._map?r._map.getZoom():void 0,d={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:r.options.autocomplete,fuzzyMatch:r.options.fuzzyMatch,proximity:a,limit:r.options.limit,routing:r.options.routing,worldview:r.options.worldview,mapZoom:h,keyboardLocale:this.locale};return e==="search.select"?d.queryString=r.inputString:e!="search.select"&&r._inputEl?d.queryString=r._inputEl.value:d.queryString=r.inputString,d},request:function(e,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(this.readyState==4)return this.status==204?r(null):r(this.statusText)},a.open(e.method,e.host+"/"+e.path,!0);for(var h in e.headers){var d=e.headers[h];a.setRequestHeader(h,d)}a.send(e.body)},handleError:function(e,r){if(r)return r(e)},generateSessionID:function(){return uj()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,r){if(r._typeahead){var a=r._typeahead.data,h=e.id,d=a.map(function(E){return E.id}),x=d.indexOf(h);return x}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,r){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||r)&&this.flush()},remove:function(){this.flush()}};var hj=uI,dj={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"",ja:"",lv:"Meklt",pt:"Procurar",sr:"",zh:"",cs:"Vyhledvn",hu:"Keress",ka:"",nb:"Ske",sk:"Vyhadvanie",th:"",fi:"Hae",is:"Leita",ko:"",pl:"Szukaj",sl:"Iskanje",fa:"",ru:""},fj={placeholder:dj},hI={exports:{}};(function(e){(function(r,a,h){e.exports?e.exports=h():r[a]=h()})(bi,"subtag",function(){var r="",a=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function h(A){return A.match(a)||[]}function d(A){return h(A).filter(function(R,U){return R&&U})}function x(A){return A=h(A),{language:A[1]||r,extlang:A[2]||r,script:A[3]||r,region:A[4]||r}}function E(A,R,U){Object.defineProperty(A,R,{value:U,enumerable:!0})}function s(A,R,U){function N(q){return h(q)[A]||r}E(N,"pattern",R),E(x,U,N)}return s(1,/^[a-zA-Z]{2,3}$/,"language"),s(2,/^[a-zA-Z]{3}$/,"extlang"),s(3,/^[a-zA-Z]{4}$/,"script"),s(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),E(x,"split",d),x})})(hI);var pj=hI.exports;function dI(){}dI.prototype={isSupport:function(){return!!window.navigator.geolocation},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(r,a){window.navigator.geolocation.getCurrentPosition(r,a,e)})}};var mj=dI;function gj(e,r){const a=fI(e),h=["address","street","place","country"];var d;if(typeof r=="function")return r(a);const x=h.indexOf(r);return x===-1?d=h:d=h.slice(x),d.reduce(function(E,s){return a[s]?(E!==""&&(E=E+", "),E+a[s]):E},"")}function fI(e){const r=e.address||"",a=e.text||"",h=e.place_name||"",x={address:h.split(",")[0],houseNumber:r,street:a,placeName:h};return e.context.forEach(function(E){const s=E.id.split(".")[0];x[s]=E.text}),x}const _j=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var yj={transformFeatureToGeolocationText:gj,getAddressInfo:fI,REVERSE_GEOCODE_COORD_RGX:_j},vj=wF,xj=RP,_c=kh,bj=HF.EventEmitter,MA=qF,s1=IN,a1=ij,wj=hj,Ej=fj,Tj=pj,Sj=mj,PA=yj;const Wa={FORWARD:0,LOCAL:1,REVERSE:2};function Aj(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function pI(e){this._eventEmitter=new bj,this.options=_c({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new Sj}pI.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var r=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+r[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+r.splice(1,r.length).join(",")+"</div></div>"}},addTo:function(e){function r(a,h){if(!document.body.contains(h))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const d=a.onAdd();h.appendChild(d)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)r(this,e);else if(typeof e=="string"){const a=document.querySelectorAll(e);if(a.length===0)throw new Error("Element ",e,"not found.");if(a.length>1)throw new Error("Geocoder can only be added to a single html element");r(this,a[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=a1(s1({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new wj(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var r=this.container=document.createElement("div");r.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var a=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",xj(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(R){this.eventManager.keyevent(R,this)}.bind(this));var h=document.createElement("div");h.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var d=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(d),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),h.appendChild(this._clearEl),h.appendChild(this._loadingEl),r.appendChild(a),r.appendChild(this._inputEl),r.appendChild(h),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var x=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(x),h.appendChild(this._geolocateEl),this._showGeolocateButton()}var E=this._typeahead=new vj(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),E.getItemValue=this.options.getItemValue;var s=E.list.draw,A=this._footerNode=Aj();return E.list.draw=function(){s.call(this),A.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),A.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(A)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),r},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const r={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(r),this._fly(r),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(r),this._showClearButton(),this.fresh=!1;const a={limit:1,language:[this.options.language],query:r.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const h=r.geometry.coordinates[0]+","+r.geometry.coordinates[1];this._setInputValue(h),this._eventEmitter.emit("result",{result:r})}else this.geocoderService.reverseGeocode(a).send().then(function(h){const d=h.body.features[0];if(d){const x=PA.transformFeatureToGeolocationText(d,this.options.addressAccuracy);this._setInputValue(x),d.user_coordinates=r.geometry.coordinates,this._eventEmitter.emit("result",{result:d})}else this._eventEmitter.emit("result",{result:{user_coordinates:r.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,r){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");return a.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),a.setAttribute("viewBox","0 0 18 18"),a.setAttribute("xml:space","preserve"),a.setAttribute("width",18),a.setAttribute("height",18),a.innerHTML=r,a},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var r=(e.clipboardData||window.clipboardData).getData("text");r.length>=this.options.minLength&&this._geocode(r)},_onKeyDown:function(e){var r=27,a=9;if(e.keyCode===r&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var h=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,d=h?h.value:"";if(!d)return this.fresh=!0,e.keyCode!==a&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[a,r,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&h.value.length>=this.options.minLength&&this._geocode(h.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var r;if(e.properties&&MA[e.properties.short_code])r=_c({},this.options.flyTo),this._map&&this._map.fitBounds(MA[e.properties.short_code].bbox,r);else if(e.bbox){var a=e.bbox;r=_c({},this.options.flyTo),this._map&&this._map.fitBounds([[a[0],a[1]],[a[2],a[3]]],r)}else{var h={zoom:this.options.zoom};r=_c({},h,this.options.flyTo),e.center?r.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(r.center=e.geometry.coordinates),this._map&&this._map.flyTo(r)}},_requestType:function(e,r){var a;return e.localGeocoderOnly?a=Wa.LOCAL:e.reverseGeocode&&PA.REVERSE_GEOCODE_COORD_RGX.test(r)?a=Wa.REVERSE:a=Wa.FORWARD,a},_setupConfig:function(e,r){const a=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],h=/[\s,]+/;var d=this,x=a.reduce(function(s,A){if(d.options[A]===void 0||d.options[A]===null)return s;["countries","types","language"].indexOf(A)>-1?s[A]=d.options[A].split(h):s[A]=d.options[A];const R=typeof d.options[A].longitude=="number"&&typeof d.options[A].latitude=="number";if(A==="proximity"&&R){const U=d.options[A].longitude,N=d.options[A].latitude;s[A]=[U,N]}return s},{});switch(e){case Wa.REVERSE:{var E=r.split(h).map(function(s){return parseFloat(s,10)});d.options.flipCoordinates||E.reverse(),x.types&&x.types[0],x=_c(x,{query:E,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(s){s in x&&delete x[s]})}break;case Wa.FORWARD:{const s=r.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(s)&&(r=r.replace(/,/g," ")),x=_c(x,{query:r})}break}return x},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const r=this._requestType(this.options,e),a=this._setupConfig(r,e);var h;switch(r){case Wa.LOCAL:h=Promise.resolve();break;case Wa.FORWARD:h=this.geocoderService.forwardGeocode(a).send();break;case Wa.REVERSE:h=this.geocoderService.reverseGeocode(a).send();break}var d=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],x=[],E=null;return h.catch(function(s){E=s}.bind(this)).then(function(s){this._hideLoadingIcon();var A={};return s?s.statusCode=="200"&&(A=s.body,A.request=s.request,A.headers=s.headers):A={type:"FeatureCollection",features:[]},A.config=a,this.fresh&&(this.eventManager.start(this),this.fresh=!1),A.features=A.features?d.concat(A.features):d,this.options.externalGeocoder?(x=this.options.externalGeocoder(e,A.features)||Promise.resolve([]),x.then(function(R){return A.features=A.features?R.concat(A.features):R,A},function(){return A})):A}.bind(this)).then(function(s){if(E)throw E;this.options.filter&&s.features.length&&(s.features=s.features.filter(this.options.filter)),s.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",s),this._typeahead.update(s.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",s))}.bind(this)).catch(function(s){this._hideLoadingIcon(),this._hideAttribution(),d.length&&this.options.localGeocoder||x.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(d)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:d}),this._eventEmitter.emit("error",{error:s})}.bind(this)),h},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var r=this;e.relatedTarget&&r._clear(e)},_onQueryResult:function(e){var r=e.body;if(r.features.length){var a=r.features[0];this._typeahead.selected=a,this._inputEl.value=a.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],r=Tj.language(e),a=Ej.placeholder[r];if(a)return a}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,r=!0){return this.options.proximity=e,r&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var r=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||r,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=a1(s1({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=a1(s1({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(this._map){this._removeMarker();var r={color:"#4668F2"},a=_c({},r,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(a),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,r){return this._eventEmitter.on(e,r),this},off:function(e,r){return this._eventEmitter.removeListener(e,r),this.eventManager.remove(),this}};var Cj=pI;const Mj=dp(Cj);const Pj=()=>(Xe.useEffect(()=>{fc.accessToken="pk.eyJ1IjoidGVreXJleSIsImEiOiJja3NieGJqMHYwYmFoMndwZmN1b3l1N3g2In0.n0e_g3FQlcLUiuiwnDL9fw";const e=new fc.Map({container:"map",style:"mapbox://styles/tekyrey/clpsk2qjk018g01pa0g0nhbfu",center:[36.8219,1.2921],zoom:7});e.addControl(new fc.NavigationControl,"top-right");const r=new Mj({accessToken:fc.accessToken,mapboxgl:fc,placeholder:"Search for a location",marker:!1,countries:"KE",bbox:[33.501,-4.04,41.899,5.62]});return e.addControl(r,"top-left"),new fc.Marker().setLngLat([36.8219,1.2921]).addTo(e),e.on("click",async function(a){var x;if(a.lngLat.lng<33.501||a.lngLat.lng>41.899||a.lngLat.lat<-4.04||a.lngLat.lat>5.62)return;const h=e.queryRenderedFeatures(a.point,{layers:["ke_forests_deqcbs"]}),d=a.lngLat.toArray();if(h.length===0){const E=new fc.Popup().setLngLat([d[0],d[1]]).setHTML(`<div>
              <p>Plant a tree here!</p>
              <button id="buyTreeBtn" style="background-color: #4CAF50; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer;">Buy Tree</button>
            </div>`).addTo(e);E.on("close",()=>{E.remove()}),(x=document.getElementById("buyTreeBtn"))==null||x.addEventListener("click",()=>{window.location.href="/buy-a-tree"})}}),e.on("load",()=>{e.addSource("counties",{type:"vector",url:"mapbox://mapbox.kenya-counties"}),e.addLayer({id:"counties-fill",type:"fill",source:"counties","source-layer":"KenyaCounties-4w17y0",paint:{"fill-color":"#627BC1","fill-opacity":.5}}),e.addLayer({id:"counties-outline",type:"line",source:"counties","source-layer":"KenyaCounties-4w17y0",paint:{"line-color":"#627BC1","line-width":2}}),e.addLayer({id:"counties-label",type:"symbol",source:"counties","source-layer":"KenyaCounties-4w17y0",layout:{"text-field":["get","COUNTY"],"text-font":["Open Sans Bold"],"text-size":12},paint:{"text-color":"#333"}})}),()=>e.remove()},[]),we.jsx("div",{id:"map"})),Ij="/assets/moringa-62ac2ed5.jpeg",kj="/assets/meruoak-26a6e383.jpeg",Lj="/assets/leadtree-b15c769b.jpeg",Oj="/assets/kassodtree-c741be77.jpeg",zj="/assets/africanolive-28cef26c.jpeg",Rj="/assets/Croton-megalocarpus-b70df155.jpeg",Dj="/assets/Erthyrina-burtii-93cffeb5.jpg",Bj="/assets/Syzygium-guineense-3bc42d99.jpeg",Fj="/assets/fevertree-fa652e8f.jpeg",Nj="/assets/floweringtree-16e89bc6.jpeg",jj="/assets/Red-Stinkwood-1dfa0084.jpeg",Uj="/assets/Yellowwood-3efa15bd.jpeg";var Ix={exports:{}},Oc={},kx={exports:{}},ns={},Lx={exports:{}};(function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=U;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var a="none",h="contents",d=/input|select|textarea|button|object|iframe/;function x(N,q){return q.getPropertyValue("overflow")!=="visible"||N.scrollWidth<=0&&N.scrollHeight<=0}function E(N){var q=N.offsetWidth<=0&&N.offsetHeight<=0;if(q&&!N.innerHTML)return!0;try{var fe=window.getComputedStyle(N),ae=fe.getPropertyValue("display");return q?ae!==h&&x(N,fe):ae===a}catch{return console.warn("Failed to inspect element style"),!1}}function s(N){for(var q=N,fe=N.getRootNode&&N.getRootNode();q&&q!==document.body;){if(fe&&q===fe&&(q=fe.host.parentNode),E(q))return!1;q=q.parentNode}return!0}function A(N,q){var fe=N.nodeName.toLowerCase(),ae=d.test(fe)&&!N.disabled||fe==="a"&&N.href||q;return ae&&s(N)}function R(N){var q=N.getAttribute("tabindex");q===null&&(q=void 0);var fe=isNaN(q);return(fe||q>=0)&&A(N,!fe)}function U(N){var q=[].slice.call(N.querySelectorAll("*"),0).reduce(function(fe,ae){return fe.concat(ae.shadowRoot?U(ae.shadowRoot):[ae])},[]);return q.filter(R)}e.exports=r.default})(Lx,Lx.exports);var mI=Lx.exports;Object.defineProperty(ns,"__esModule",{value:!0});ns.resetState=Zj;ns.log=Hj;ns.handleBlur=lp;ns.handleFocus=cp;ns.markForFocusLater=qj;ns.returnFocus=Wj;ns.popWithoutFocus=Xj;ns.setupScopedFocus=Kj;ns.teardownScopedFocus=Yj;var Vj=mI,$j=Gj(Vj);function Gj(e){return e&&e.__esModule?e:{default:e}}var xh=[],eh=null,Ox=!1;function Zj(){xh=[]}function Hj(){}function lp(){Ox=!0}function cp(){if(Ox){if(Ox=!1,!eh)return;setTimeout(function(){if(!eh.contains(document.activeElement)){var e=(0,$j.default)(eh)[0]||eh;e.focus()}},0)}}function qj(){xh.push(document.activeElement)}function Wj(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,r=null;try{xh.length!==0&&(r=xh.pop(),r.focus({preventScroll:e}));return}catch{console.warn(["You tried to return focus to",r,"but it is not in the DOM anymore"].join(" "))}}function Xj(){xh.length>0&&xh.pop()}function Kj(e){eh=e,window.addEventListener?(window.addEventListener("blur",lp,!1),document.addEventListener("focus",cp,!0)):(window.attachEvent("onBlur",lp),document.attachEvent("onFocus",cp))}function Yj(){eh=null,window.addEventListener?(window.removeEventListener("blur",lp),document.removeEventListener("focus",cp)):(window.detachEvent("onBlur",lp),document.detachEvent("onFocus",cp))}var zx={exports:{}};(function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=E;var a=mI,h=d(a);function d(s){return s&&s.__esModule?s:{default:s}}function x(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return s.activeElement.shadowRoot?x(s.activeElement.shadowRoot):s.activeElement}function E(s,A){var R=(0,h.default)(s);if(!R.length){A.preventDefault();return}var U=void 0,N=A.shiftKey,q=R[0],fe=R[R.length-1],ae=x();if(s===ae){if(!N)return;U=fe}if(fe===ae&&!N&&(U=q),q===ae&&N&&(U=fe),U){A.preventDefault(),U.focus();return}var se=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),ve=se!=null&&se[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(ve){var J=R.indexOf(ae);if(J>-1&&(J+=N?-1:1),U=R[J],typeof U>"u"){A.preventDefault(),U=N?fe:q,U.focus();return}A.preventDefault(),U.focus()}}e.exports=r.default})(zx,zx.exports);var Qj=zx.exports,is={},Jj=function(){},eU=Jj,ts={},gI={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(e){(function(){var r=!!(typeof window<"u"&&window.document&&window.document.createElement),a={canUseDOM:r,canUseWorkers:typeof Worker<"u",canUseEventListeners:r&&!!(window.addEventListener||window.attachEvent),canUseViewport:r&&!!window.screen};e.exports?e.exports=a:window.ExecutionEnvironment=a})()})(gI);var tU=gI.exports;Object.defineProperty(ts,"__esModule",{value:!0});ts.canUseDOM=ts.SafeNodeList=ts.SafeHTMLCollection=void 0;var rU=tU,nU=iU(rU);function iU(e){return e&&e.__esModule?e:{default:e}}var O0=nU.default,oU=O0.canUseDOM?window.HTMLElement:{};ts.SafeHTMLCollection=O0.canUseDOM?window.HTMLCollection:{};ts.SafeNodeList=O0.canUseDOM?window.NodeList:{};ts.canUseDOM=O0.canUseDOM;ts.default=oU;Object.defineProperty(is,"__esModule",{value:!0});is.resetState=uU;is.log=hU;is.assertNodeList=_I;is.setElement=dU;is.validateElement=xw;is.hide=fU;is.show=pU;is.documentNotReadyOrSSRTesting=mU;var sU=eU,aU=cU(sU),lU=ts;function cU(e){return e&&e.__esModule?e:{default:e}}var yo=null;function uU(){yo&&(yo.removeAttribute?yo.removeAttribute("aria-hidden"):yo.length!=null?yo.forEach(function(e){return e.removeAttribute("aria-hidden")}):document.querySelectorAll(yo).forEach(function(e){return e.removeAttribute("aria-hidden")})),yo=null}function hU(){}function _I(e,r){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+r+".")}function dU(e){var r=e;if(typeof r=="string"&&lU.canUseDOM){var a=document.querySelectorAll(r);_I(a,r),r=a}return yo=r||yo,yo}function xw(e){var r=e||yo;return r?Array.isArray(r)||r instanceof HTMLCollection||r instanceof NodeList?r:[r]:((0,aU.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function fU(e){var r=!0,a=!1,h=void 0;try{for(var d=xw(e)[Symbol.iterator](),x;!(r=(x=d.next()).done);r=!0){var E=x.value;E.setAttribute("aria-hidden","true")}}catch(s){a=!0,h=s}finally{try{!r&&d.return&&d.return()}finally{if(a)throw h}}}function pU(e){var r=!0,a=!1,h=void 0;try{for(var d=xw(e)[Symbol.iterator](),x;!(r=(x=d.next()).done);r=!0){var E=x.value;E.removeAttribute("aria-hidden")}}catch(s){a=!0,h=s}finally{try{!r&&d.return&&d.return()}finally{if(a)throw h}}}function mU(){yo=null}var Lh={};Object.defineProperty(Lh,"__esModule",{value:!0});Lh.resetState=gU;Lh.log=_U;var Df={},Bf={};function IA(e,r){e.classList.remove(r)}function gU(){var e=document.getElementsByTagName("html")[0];for(var r in Df)IA(e,Df[r]);var a=document.body;for(var h in Bf)IA(a,Bf[h]);Df={},Bf={}}function _U(){}var yU=function(r,a){return r[a]||(r[a]=0),r[a]+=1,a},vU=function(r,a){return r[a]&&(r[a]-=1),a},xU=function(r,a,h){h.forEach(function(d){yU(a,d),r.add(d)})},bU=function(r,a,h){h.forEach(function(d){vU(a,d),a[d]===0&&r.remove(d)})};Lh.add=function(r,a){return xU(r.classList,r.nodeName.toLowerCase()=="html"?Df:Bf,a.split(" "))};Lh.remove=function(r,a){return bU(r.classList,r.nodeName.toLowerCase()=="html"?Df:Bf,a.split(" "))};var Oh={};Object.defineProperty(Oh,"__esModule",{value:!0});Oh.log=EU;Oh.resetState=TU;function wU(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var yI=function e(){var r=this;wU(this,e),this.register=function(a){r.openInstances.indexOf(a)===-1&&(r.openInstances.push(a),r.emit("register"))},this.deregister=function(a){var h=r.openInstances.indexOf(a);h!==-1&&(r.openInstances.splice(h,1),r.emit("deregister"))},this.subscribe=function(a){r.subscribers.push(a)},this.emit=function(a){r.subscribers.forEach(function(h){return h(a,r.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},S_=new yI;function EU(){console.log("portalOpenInstances ----------"),console.log(S_.openInstances.length),S_.openInstances.forEach(function(e){return console.log(e)}),console.log("end portalOpenInstances ----------")}function TU(){S_=new yI}Oh.default=S_;var bw={};Object.defineProperty(bw,"__esModule",{value:!0});bw.resetState=MU;bw.log=PU;var SU=Oh,AU=CU(SU);function CU(e){return e&&e.__esModule?e:{default:e}}var ui=void 0,Ko=void 0,Tc=[];function MU(){for(var e=[ui,Ko],r=0;r<e.length;r++){var a=e[r];a&&a.parentNode&&a.parentNode.removeChild(a)}ui=Ko=null,Tc=[]}function PU(){console.log("bodyTrap ----------"),console.log(Tc.length);for(var e=[ui,Ko],r=0;r<e.length;r++){var a=e[r],h=a||{};console.log(h.nodeName,h.className,h.id)}console.log("edn bodyTrap ----------")}function kA(){Tc.length!==0&&Tc[Tc.length-1].focusContent()}function IU(e,r){!ui&&!Ko&&(ui=document.createElement("div"),ui.setAttribute("data-react-modal-body-trap",""),ui.style.position="absolute",ui.style.opacity="0",ui.setAttribute("tabindex","0"),ui.addEventListener("focus",kA),Ko=ui.cloneNode(),Ko.addEventListener("focus",kA)),Tc=r,Tc.length>0?(document.body.firstChild!==ui&&document.body.insertBefore(ui,document.body.firstChild),document.body.lastChild!==Ko&&document.body.appendChild(Ko)):(ui.parentElement&&ui.parentElement.removeChild(ui),Ko.parentElement&&Ko.parentElement.removeChild(Ko))}AU.default.subscribe(IU);(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var a=Object.assign||function(Ot){for(var St=1;St<arguments.length;St++){var Jt=arguments[St];for(var Ze in Jt)Object.prototype.hasOwnProperty.call(Jt,Ze)&&(Ot[Ze]=Jt[Ze])}return Ot},h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ot){return typeof Ot}:function(Ot){return Ot&&typeof Symbol=="function"&&Ot.constructor===Symbol&&Ot!==Symbol.prototype?"symbol":typeof Ot},d=function(){function Ot(St,Jt){for(var Ze=0;Ze<Jt.length;Ze++){var Oe=Jt[Ze];Oe.enumerable=Oe.enumerable||!1,Oe.configurable=!0,"value"in Oe&&(Oe.writable=!0),Object.defineProperty(St,Oe.key,Oe)}}return function(St,Jt,Ze){return Jt&&Ot(St.prototype,Jt),Ze&&Ot(St,Ze),St}}(),x=Xe,E=Ph,s=ke(E),A=ns,R=Ee(A),U=Qj,N=ke(U),q=is,fe=Ee(q),ae=Lh,se=Ee(ae),ve=ts,J=ke(ve),Z=Oh,te=ke(Z);function Ee(Ot){if(Ot&&Ot.__esModule)return Ot;var St={};if(Ot!=null)for(var Jt in Ot)Object.prototype.hasOwnProperty.call(Ot,Jt)&&(St[Jt]=Ot[Jt]);return St.default=Ot,St}function ke(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}}function Fe(Ot,St){if(!(Ot instanceof St))throw new TypeError("Cannot call a class as a function")}function We(Ot,St){if(!Ot)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return St&&(typeof St=="object"||typeof St=="function")?St:Ot}function Ve(Ot,St){if(typeof St!="function"&&St!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof St);Ot.prototype=Object.create(St&&St.prototype,{constructor:{value:Ot,enumerable:!1,writable:!0,configurable:!0}}),St&&(Object.setPrototypeOf?Object.setPrototypeOf(Ot,St):Ot.__proto__=St)}var Te={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},dt=function(St){return St.code==="Tab"||St.keyCode===9},zt=function(St){return St.code==="Escape"||St.keyCode===27},at=0,vt=function(Ot){Ve(St,Ot);function St(Jt){Fe(this,St);var Ze=We(this,(St.__proto__||Object.getPrototypeOf(St)).call(this,Jt));return Ze.setOverlayRef=function(Oe){Ze.overlay=Oe,Ze.props.overlayRef&&Ze.props.overlayRef(Oe)},Ze.setContentRef=function(Oe){Ze.content=Oe,Ze.props.contentRef&&Ze.props.contentRef(Oe)},Ze.afterClose=function(){var Oe=Ze.props,Et=Oe.appElement,_t=Oe.ariaHideApp,It=Oe.htmlOpenClassName,qt=Oe.bodyOpenClassName,nr=Oe.parentSelector,Lr=nr&&nr().ownerDocument||document;qt&&se.remove(Lr.body,qt),It&&se.remove(Lr.getElementsByTagName("html")[0],It),_t&&at>0&&(at-=1,at===0&&fe.show(Et)),Ze.props.shouldFocusAfterRender&&(Ze.props.shouldReturnFocusAfterClose?(R.returnFocus(Ze.props.preventScroll),R.teardownScopedFocus()):R.popWithoutFocus()),Ze.props.onAfterClose&&Ze.props.onAfterClose(),te.default.deregister(Ze)},Ze.open=function(){Ze.beforeOpen(),Ze.state.afterOpen&&Ze.state.beforeClose?(clearTimeout(Ze.closeTimer),Ze.setState({beforeClose:!1})):(Ze.props.shouldFocusAfterRender&&(R.setupScopedFocus(Ze.node),R.markForFocusLater()),Ze.setState({isOpen:!0},function(){Ze.openAnimationFrame=requestAnimationFrame(function(){Ze.setState({afterOpen:!0}),Ze.props.isOpen&&Ze.props.onAfterOpen&&Ze.props.onAfterOpen({overlayEl:Ze.overlay,contentEl:Ze.content})})}))},Ze.close=function(){Ze.props.closeTimeoutMS>0?Ze.closeWithTimeout():Ze.closeWithoutTimeout()},Ze.focusContent=function(){return Ze.content&&!Ze.contentHasFocus()&&Ze.content.focus({preventScroll:!0})},Ze.closeWithTimeout=function(){var Oe=Date.now()+Ze.props.closeTimeoutMS;Ze.setState({beforeClose:!0,closesAt:Oe},function(){Ze.closeTimer=setTimeout(Ze.closeWithoutTimeout,Ze.state.closesAt-Date.now())})},Ze.closeWithoutTimeout=function(){Ze.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},Ze.afterClose)},Ze.handleKeyDown=function(Oe){dt(Oe)&&(0,N.default)(Ze.content,Oe),Ze.props.shouldCloseOnEsc&&zt(Oe)&&(Oe.stopPropagation(),Ze.requestClose(Oe))},Ze.handleOverlayOnClick=function(Oe){Ze.shouldClose===null&&(Ze.shouldClose=!0),Ze.shouldClose&&Ze.props.shouldCloseOnOverlayClick&&(Ze.ownerHandlesClose()?Ze.requestClose(Oe):Ze.focusContent()),Ze.shouldClose=null},Ze.handleContentOnMouseUp=function(){Ze.shouldClose=!1},Ze.handleOverlayOnMouseDown=function(Oe){!Ze.props.shouldCloseOnOverlayClick&&Oe.target==Ze.overlay&&Oe.preventDefault()},Ze.handleContentOnClick=function(){Ze.shouldClose=!1},Ze.handleContentOnMouseDown=function(){Ze.shouldClose=!1},Ze.requestClose=function(Oe){return Ze.ownerHandlesClose()&&Ze.props.onRequestClose(Oe)},Ze.ownerHandlesClose=function(){return Ze.props.onRequestClose},Ze.shouldBeClosed=function(){return!Ze.state.isOpen&&!Ze.state.beforeClose},Ze.contentHasFocus=function(){return document.activeElement===Ze.content||Ze.content.contains(document.activeElement)},Ze.buildClassName=function(Oe,Et){var _t=(typeof Et>"u"?"undefined":h(Et))==="object"?Et:{base:Te[Oe],afterOpen:Te[Oe]+"--after-open",beforeClose:Te[Oe]+"--before-close"},It=_t.base;return Ze.state.afterOpen&&(It=It+" "+_t.afterOpen),Ze.state.beforeClose&&(It=It+" "+_t.beforeClose),typeof Et=="string"&&Et?It+" "+Et:It},Ze.attributesFromObject=function(Oe,Et){return Object.keys(Et).reduce(function(_t,It){return _t[Oe+"-"+It]=Et[It],_t},{})},Ze.state={afterOpen:!1,beforeClose:!1},Ze.shouldClose=null,Ze.moveFromContentToOverlay=null,Ze}return d(St,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(Ze,Oe){this.props.isOpen&&!Ze.isOpen?this.open():!this.props.isOpen&&Ze.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!Oe.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var Ze=this.props,Oe=Ze.appElement,Et=Ze.ariaHideApp,_t=Ze.htmlOpenClassName,It=Ze.bodyOpenClassName,qt=Ze.parentSelector,nr=qt&&qt().ownerDocument||document;It&&se.add(nr.body,It),_t&&se.add(nr.getElementsByTagName("html")[0],_t),Et&&(at+=1,fe.hide(Oe)),te.default.register(this)}},{key:"render",value:function(){var Ze=this.props,Oe=Ze.id,Et=Ze.className,_t=Ze.overlayClassName,It=Ze.defaultStyles,qt=Ze.children,nr=Et?{}:It.content,Lr=_t?{}:It.overlay;if(this.shouldBeClosed())return null;var Si={ref:this.setOverlayRef,className:this.buildClassName("overlay",_t),style:a({},Lr,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},wn=a({id:Oe,ref:this.setContentRef,style:a({},nr,this.props.style.content),className:this.buildClassName("content",Et),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",a({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Fn=this.props.contentElement(wn,qt);return this.props.overlayElement(Si,Fn)}}]),St}(x.Component);vt.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},vt.propTypes={isOpen:s.default.bool.isRequired,defaultStyles:s.default.shape({content:s.default.object,overlay:s.default.object}),style:s.default.shape({content:s.default.object,overlay:s.default.object}),className:s.default.oneOfType([s.default.string,s.default.object]),overlayClassName:s.default.oneOfType([s.default.string,s.default.object]),parentSelector:s.default.func,bodyOpenClassName:s.default.string,htmlOpenClassName:s.default.string,ariaHideApp:s.default.bool,appElement:s.default.oneOfType([s.default.instanceOf(J.default),s.default.instanceOf(ve.SafeHTMLCollection),s.default.instanceOf(ve.SafeNodeList),s.default.arrayOf(s.default.instanceOf(J.default))]),onAfterOpen:s.default.func,onAfterClose:s.default.func,onRequestClose:s.default.func,closeTimeoutMS:s.default.number,shouldFocusAfterRender:s.default.bool,shouldCloseOnOverlayClick:s.default.bool,shouldReturnFocusAfterClose:s.default.bool,preventScroll:s.default.bool,role:s.default.string,contentLabel:s.default.string,aria:s.default.object,data:s.default.object,children:s.default.node,shouldCloseOnEsc:s.default.bool,overlayRef:s.default.func,contentRef:s.default.func,id:s.default.string,overlayElement:s.default.func,contentElement:s.default.func,testId:s.default.string},r.default=vt,e.exports=r.default})(kx,kx.exports);var kU=kx.exports;function vI(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function xI(e){function r(a){var h=this.constructor.getDerivedStateFromProps(e,a);return h??null}this.setState(r.bind(this))}function bI(e,r){try{var a=this.props,h=this.state;this.props=e,this.state=r,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(a,h)}finally{this.props=a,this.state=h}}vI.__suppressDeprecationWarning=!0;xI.__suppressDeprecationWarning=!0;bI.__suppressDeprecationWarning=!0;function LU(e){var r=e.prototype;if(!r||!r.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof r.getSnapshotBeforeUpdate!="function")return e;var a=null,h=null,d=null;if(typeof r.componentWillMount=="function"?a="componentWillMount":typeof r.UNSAFE_componentWillMount=="function"&&(a="UNSAFE_componentWillMount"),typeof r.componentWillReceiveProps=="function"?h="componentWillReceiveProps":typeof r.UNSAFE_componentWillReceiveProps=="function"&&(h="UNSAFE_componentWillReceiveProps"),typeof r.componentWillUpdate=="function"?d="componentWillUpdate":typeof r.UNSAFE_componentWillUpdate=="function"&&(d="UNSAFE_componentWillUpdate"),a!==null||h!==null||d!==null){var x=e.displayName||e.name,E=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+x+" uses "+E+" but also contains the following legacy lifecycles:"+(a!==null?`
  `+a:"")+(h!==null?`
  `+h:"")+(d!==null?`
  `+d:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(r.componentWillMount=vI,r.componentWillReceiveProps=xI),typeof r.getSnapshotBeforeUpdate=="function"){if(typeof r.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");r.componentWillUpdate=bI;var s=r.componentDidUpdate;r.componentDidUpdate=function(R,U,N){var q=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:N;s.call(this,R,U,q)}}return e}const OU=Object.freeze(Object.defineProperty({__proto__:null,polyfill:LU},Symbol.toStringTag,{value:"Module"})),zU=Wx(OU);Object.defineProperty(Oc,"__esModule",{value:!0});Oc.bodyOpenClassName=Oc.portalClassName=void 0;var LA=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},RU=function(){function e(r,a){for(var h=0;h<a.length;h++){var d=a[h];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(r,d.key,d)}}return function(r,a,h){return a&&e(r.prototype,a),h&&e(r,h),r}}(),wI=Xe,A_=Cp(wI),DU=$b,C_=Cp(DU),BU=Ph,Yt=Cp(BU),FU=kU,OA=Cp(FU),NU=is,jU=VU(NU),nl=ts,zA=Cp(nl),UU=zU;function VU(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r.default=e,r}function Cp(e){return e&&e.__esModule?e:{default:e}}function $U(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function RA(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r&&(typeof r=="object"||typeof r=="function")?r:e}function GU(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}var ZU=Oc.portalClassName="ReactModalPortal",HU=Oc.bodyOpenClassName="ReactModal__Body--open",yc=nl.canUseDOM&&C_.default.createPortal!==void 0,DA=function(r){return document.createElement(r)},BA=function(){return yc?C_.default.createPortal:C_.default.unstable_renderSubtreeIntoContainer};function Mg(e){return e()}var Mp=function(e){GU(r,e);function r(){var a,h,d,x;$U(this,r);for(var E=arguments.length,s=Array(E),A=0;A<E;A++)s[A]=arguments[A];return x=(h=(d=RA(this,(a=r.__proto__||Object.getPrototypeOf(r)).call.apply(a,[this].concat(s))),d),d.removePortal=function(){!yc&&C_.default.unmountComponentAtNode(d.node);var R=Mg(d.props.parentSelector);R&&R.contains(d.node)?R.removeChild(d.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},d.portalRef=function(R){d.portal=R},d.renderPortal=function(R){var U=BA(),N=U(d,A_.default.createElement(OA.default,LA({defaultStyles:r.defaultStyles},R)),d.node);d.portalRef(N)},h),RA(d,x)}return RU(r,[{key:"componentDidMount",value:function(){if(nl.canUseDOM){yc||(this.node=DA("div")),this.node.className=this.props.portalClassName;var h=Mg(this.props.parentSelector);h.appendChild(this.node),!yc&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(h){var d=Mg(h.parentSelector),x=Mg(this.props.parentSelector);return{prevParent:d,nextParent:x}}},{key:"componentDidUpdate",value:function(h,d,x){if(nl.canUseDOM){var E=this.props,s=E.isOpen,A=E.portalClassName;h.portalClassName!==A&&(this.node.className=A);var R=x.prevParent,U=x.nextParent;U!==R&&(R.removeChild(this.node),U.appendChild(this.node)),!(!h.isOpen&&!s)&&!yc&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!nl.canUseDOM||!this.node||!this.portal)){var h=this.portal.state,d=Date.now(),x=h.isOpen&&this.props.closeTimeoutMS&&(h.closesAt||d+this.props.closeTimeoutMS);x?(h.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,x-d)):this.removePortal()}}},{key:"render",value:function(){if(!nl.canUseDOM||!yc)return null;!this.node&&yc&&(this.node=DA("div"));var h=BA();return h(A_.default.createElement(OA.default,LA({ref:this.portalRef,defaultStyles:r.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(h){jU.setElement(h)}}]),r}(wI.Component);Mp.propTypes={isOpen:Yt.default.bool.isRequired,style:Yt.default.shape({content:Yt.default.object,overlay:Yt.default.object}),portalClassName:Yt.default.string,bodyOpenClassName:Yt.default.string,htmlOpenClassName:Yt.default.string,className:Yt.default.oneOfType([Yt.default.string,Yt.default.shape({base:Yt.default.string.isRequired,afterOpen:Yt.default.string.isRequired,beforeClose:Yt.default.string.isRequired})]),overlayClassName:Yt.default.oneOfType([Yt.default.string,Yt.default.shape({base:Yt.default.string.isRequired,afterOpen:Yt.default.string.isRequired,beforeClose:Yt.default.string.isRequired})]),appElement:Yt.default.oneOfType([Yt.default.instanceOf(zA.default),Yt.default.instanceOf(nl.SafeHTMLCollection),Yt.default.instanceOf(nl.SafeNodeList),Yt.default.arrayOf(Yt.default.instanceOf(zA.default))]),onAfterOpen:Yt.default.func,onRequestClose:Yt.default.func,closeTimeoutMS:Yt.default.number,ariaHideApp:Yt.default.bool,shouldFocusAfterRender:Yt.default.bool,shouldCloseOnOverlayClick:Yt.default.bool,shouldReturnFocusAfterClose:Yt.default.bool,preventScroll:Yt.default.bool,parentSelector:Yt.default.func,aria:Yt.default.object,data:Yt.default.object,role:Yt.default.string,contentLabel:Yt.default.string,shouldCloseOnEsc:Yt.default.bool,overlayRef:Yt.default.func,contentRef:Yt.default.func,id:Yt.default.string,overlayElement:Yt.default.func,contentElement:Yt.default.func};Mp.defaultProps={isOpen:!1,portalClassName:ZU,bodyOpenClassName:HU,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(r,a){return A_.default.createElement("div",r,a)},contentElement:function(r,a){return A_.default.createElement("div",r,a)}};Mp.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,UU.polyfill)(Mp);Oc.default=Mp;(function(e,r){Object.defineProperty(r,"__esModule",{value:!0});var a=Oc,h=d(a);function d(x){return x&&x.__esModule?x:{default:x}}r.default=h.default,e.exports=r.default})(Ix,Ix.exports);var qU=Ix.exports;const WU=dp(qU),XU=({isOpen:e,onClose:r})=>{const a={content:{width:"400px",height:"400px",margin:"auto",padding:"20px",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.5)"}};return we.jsx(WU,{isOpen:e,onRequestClose:r,style:a,children:we.jsx("div",{children:we.jsx("h2",{className:"text-2xl mb-4",children:"Payment Details"})})})},EI=()=>{const[e,r]=Xe.useState(!1),[a,h]=Xe.useState(null),d=N=>{a&&h(N),r(!0)},x=()=>{r(!1)},E=[{tree:"Moringa Tree",price:"Ksh500",image:Ij},{tree:"Meru Oak Tree",price:"Ksh200",image:kj},{tree:"Lead Tree",price:"Ksh200",image:Lj}],s=[{tree:"Kassod Tree",price:"Ksh500",image:Oj},{tree:"African Olive Tree",price:"Ksh200",image:zj},{tree:"Croton Megalocarpus Tree",price:"Ksh200",image:Rj}],A=[{tree:"Erthyrina Burtii Tree",price:"$2000",image:Dj},{tree:"Syzygium Guineense Tree",price:"Ksh800",image:Bj},{tree:"Fever Tree",price:"Ksh800",image:Fj}],R=[{tree:"Flowering Tree",price:"Ksh600",image:Nj},{tree:"Red Stinkwood Tree",price:"Ksh600",image:jj},{tree:"Yellow Wood Tree",price:"$2200",image:Uj}],U=N=>we.jsx("div",{className:"w-full h-auto mt-4 flex gap-4",children:N.map((q,fe)=>we.jsx("div",{className:"md:px-6 px-3",children:we.jsxs(Fi,{cardClass:"overflow-hidden shadow-md rounded-lg cursor-pointer group",imageAlt:q.tree,imageSrc:q.image,imageWrapperClass:"w-full h-[250px] overflow-hidden",cover:"group-hover:scale-125 transition duration-500 ease",textWrapperClass:"flex flex-col gap-4 w-full px-5 py-5",children:[we.jsxs("div",{className:"flex justify-between items-center",children:[we.jsx(mr,{as:"h4",className:"text-base font-medium text-color3",children:q.tree}),we.jsx(mr,{as:"small",className:" text-color3 font-light text-sm",children:q.price})]}),we.jsx("div",{className:"w-full flex items-center text-color3",children:we.jsx(Lc,{className:"text-color3 bg-green-500 px-6 py-1 rounded-full",onClick:()=>d(q),children:"Buy Tree"})})]})},fe))});return we.jsxs("section",{className:"w-full h-auto flex flex-col items-center justify-center relative lg:px-24 md:px-20 px-6 my-20",children:[we.jsx(mr,{as:"p",className:"font-light text-base text-color3/80 tracking-widest",children:ZS.firstText}),we.jsx(mr,{as:"h2",className:"md:text-4xl text-2xl font-medium capitalize text-color3",children:ZS.secondText}),U(E),U(s),U(A),U(R),we.jsx(XU,{isOpen:e,onClose:x})]})},KU=()=>we.jsx(we.Fragment,{children:we.jsx(EI,{})}),YU=({containerClass:e,inputClass:r,children:a,...h})=>we.jsxs("div",{className:e,children:[we.jsx("input",{className:r,...h}),a]}),QU=()=>we.jsxs("form",{className:"flex md:flex-row flex-col items-stretch gap-2",children:[we.jsx(YU,{containerClass:"relative",inputClass:"border-none rounded-lg outline-none w-[300px] h-[50px] focus:outline-none text-color3 pr-4 pl-9 py-1",type:"email",placeholder:xx.placeholderText,children:we.jsx("div",{className:"absolute top-4 left-3 text-color3/80",children:we.jsx(eP,{size:18,color:"currentColor",weight:"fill"})})}),we.jsx(Lc,{type:"submit",className:"border-none outline-none bg-color1 py-2 px-6 text-white font-light text-base rounded-lg",children:xx.buttonText})]}),JU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAADCCAYAAAChblcUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANLSURBVHgB7d09ThtBGMbxd3YXUeUEJBJKRxlEFymYIj1t0sANEEfgBhzBdDS5gxUJoVShSlo3VE4TpQlivZOxBdJixhsZeT8e+/8rYIxHZuCRl1ey/OCswofd3Z0iSbYma7+5+e3q6uqPdZjaeX2aHluS7E9v3N+fObPhvL1Z1QONk+S1c25nsi6K4mf41OkfXO28Qc+8P5qusuzC8nw4b2NikEBQIghKBEGJICgRrjzSPr/XvQkfX02X3t96s9+xbU2OwmrnfTKCzyqKXjjz9sOtQVgPo/vC6J6VR9rKb+jc5JezFf9+zY3Caue18gg+y7nZffFHCKM7lz4R2Yb33+82Nn7E7kzv7t5Zmr6drAuzrz7LRrF9o9HolzVE7bw2Hp+HZ0Q/ep/3J+FZdThdF8VpuETeRPfl+Y2zCu/39j4+XmbGWfbl+vr61jpM7bzh71c/BPV4WTxweT6Yt5dLnwiCEkFQIghKBEGJqHw9qjwKNzrSvpDaeZ+M7mEENwAAAAAAAAAAAAAAAAAAAGDtVL6RjS6kei1yXrqQWrTIeXk3hwiCEkFQIghKBEGJoAupZss6L11INVvWebn0iaALqWbLOi9dSC1a5Lxc+kQQlAiCEkFQIghKBF1ILZLrbgIAAAAAAAAAAAAAAAAAAACWrvKNbOlnf5yY7U/W94Wd2aUbWoetbReSeet5Z0cPGy9ys6F1GF1IaB1BiSAoEQQlgqBEuPIIPqsw64X5fXt6w9vAufjU1+TovrZdSOUR/NnjPL3R8xbX5OhOFxI6LRvndp6l1o/d6RM7Cc+qw8m6cHaajO0mti//G/96HehCij3QJ993j5fFwg7ySzewDqMLCa0jKBEEJYKgRBCUiOr/zVEa3ZscwV+KLiQAAAAAAAAAAAAAAAAAAABATeUb2Va5W6gLltaFtMrdQl1AF9IKIigRBCWCoEQQlAi3rt1Ccl1I69otZHQhoQ7ZunYLWUMa6UJa5W6hLqALaQURlAiCEkFQIghKROXrUXQL1YsuJAAAAAAAAAAAAAAAAAAAAIAupBbRhWR0IaElBCWCoEQQlAiCEkEXUs3oQvoPupDQCrqQakYXUgRdSGgdQYkgKBEEJYKgRNCF1KJFzvsP+J1rUhGPHVcAAAAASUVORK5CYII=",e7=()=>we.jsxs("section",{className:"w-full my-32 flex justify-between relative items-start h-[400px]",children:[we.jsx("div",{className:"bg-color3/10 w-[30%] h-[70%] self-end rounded-r-xl"}),we.jsx("div",{className:"bg-color3/10 w-[30%] h-[70%] rounded-l-xl"}),we.jsxs("div",{className:`w-full bg-color3/5 h-[100%] absolute flex flex-col items-center
            justify-center md:gap-16 gap-10 px-5`,children:[we.jsx(mr,{as:"h1",className:"lg:text-3xl md:text-2xl text-xl text-center text-color3/70 lg:w-3/5 w-full",children:xx.firstText}),we.jsx(QU,{})]}),we.jsx(kc,{image:JU,alt:"Plus",className:"absolute -bottom-16 right-2 h-32"})]});var TI={},SI={},z0={},AI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r={animating:!1,autoplaying:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,dragging:!1,edgeDragged:!1,initialized:!1,lazyLoadedList:[],listHeight:null,listWidth:null,scrolling:!1,slideCount:null,slideHeight:null,slideWidth:null,swipeLeft:null,swiped:!1,swiping:!1,touchObject:{startX:0,startY:0,curX:0,curY:0},trackStyle:{},trackWidth:0,targetSlide:0},a=r;e.default=a})(AI);var CI={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var r={}.hasOwnProperty;function a(){for(var h=[],d=0;d<arguments.length;d++){var x=arguments[d];if(x){var E=typeof x;if(E==="string"||E==="number")h.push(x);else if(Array.isArray(x)){if(x.length){var s=a.apply(null,x);s&&h.push(s)}}else if(E==="object"){if(x.toString!==Object.prototype.toString&&!x.toString.toString().includes("[native code]")){h.push(x.toString());continue}for(var A in x)r.call(x,A)&&x[A]&&h.push(A)}}}return h.join(" ")}e.exports?(a.default=a,e.exports=a):window.classNames=a})()})(CI);var R0=CI.exports,wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkSpecKeys=wt.checkNavigable=wt.changeSlide=wt.canUseDOM=wt.canGoNext=void 0;wt.clamp=MI;wt.swipeStart=wt.swipeMove=wt.swipeEnd=wt.slidesOnRight=wt.slidesOnLeft=wt.slideHandler=wt.siblingDirection=wt.safePreventDefault=wt.lazyStartIndex=wt.lazySlidesOnRight=wt.lazySlidesOnLeft=wt.lazyEndIndex=wt.keyHandler=wt.initializedState=wt.getWidth=wt.getTrackLeft=wt.getTrackCSS=wt.getTrackAnimateCSS=wt.getTotalSlides=wt.getSwipeDirection=wt.getSlideCount=wt.getRequiredLazySlides=wt.getPreClones=wt.getPostClones=wt.getOnDemandLazySlides=wt.getNavigableIndexes=wt.getHeight=wt.extractObject=void 0;var t7=r7(Xe);function r7(e){return e&&e.__esModule?e:{default:e}}function FA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);r&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,h)}return a}function Jr(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?FA(Object(a),!0).forEach(function(h){n7(e,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):FA(Object(a)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(a,h))})}return e}function n7(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function MI(e,r,a){return Math.max(r,Math.min(e,a))}var Sc=function(r){var a=["onTouchStart","onTouchMove","onWheel"];a.includes(r._reactName)||r.preventDefault()};wt.safePreventDefault=Sc;var ww=function(r){for(var a=[],h=Ew(r),d=Tw(r),x=h;x<d;x++)r.lazyLoadedList.indexOf(x)<0&&a.push(x);return a};wt.getOnDemandLazySlides=ww;var i7=function(r){for(var a=[],h=Ew(r),d=Tw(r),x=h;x<d;x++)a.push(x);return a};wt.getRequiredLazySlides=i7;var Ew=function(r){return r.currentSlide-PI(r)};wt.lazyStartIndex=Ew;var Tw=function(r){return r.currentSlide+II(r)};wt.lazyEndIndex=Tw;var PI=function(r){return r.centerMode?Math.floor(r.slidesToShow/2)+(parseInt(r.centerPadding)>0?1:0):0};wt.lazySlidesOnLeft=PI;var II=function(r){return r.centerMode?Math.floor((r.slidesToShow-1)/2)+1+(parseInt(r.centerPadding)>0?1:0):r.slidesToShow};wt.lazySlidesOnRight=II;var M_=function(r){return r&&r.offsetWidth||0};wt.getWidth=M_;var Sw=function(r){return r&&r.offsetHeight||0};wt.getHeight=Sw;var Aw=function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,h,d,x,E;return h=r.startX-r.curX,d=r.startY-r.curY,x=Math.atan2(d,h),E=Math.round(x*180/Math.PI),E<0&&(E=360-Math.abs(E)),E<=45&&E>=0||E<=360&&E>=315?"left":E>=135&&E<=225?"right":a===!0?E>=35&&E<=135?"up":"down":"vertical"};wt.getSwipeDirection=Aw;var Cw=function(r){var a=!0;return r.infinite||(r.centerMode&&r.currentSlide>=r.slideCount-1||r.slideCount<=r.slidesToShow||r.currentSlide>=r.slideCount-r.slidesToShow)&&(a=!1),a};wt.canGoNext=Cw;var o7=function(r,a){var h={};return a.forEach(function(d){return h[d]=r[d]}),h};wt.extractObject=o7;var s7=function(r){var a=t7.default.Children.count(r.children),h=r.listRef,d=Math.ceil(M_(h)),x=r.trackRef&&r.trackRef.node,E=Math.ceil(M_(x)),s;if(r.vertical)s=d;else{var A=r.centerMode&&parseInt(r.centerPadding)*2;typeof r.centerPadding=="string"&&r.centerPadding.slice(-1)==="%"&&(A*=d/100),s=Math.ceil((d-A)/r.slidesToShow)}var R=h&&Sw(h.querySelector('[data-index="0"]')),U=R*r.slidesToShow,N=r.currentSlide===void 0?r.initialSlide:r.currentSlide;r.rtl&&r.currentSlide===void 0&&(N=a-1-r.initialSlide);var q=r.lazyLoadedList||[],fe=ww(Jr(Jr({},r),{},{currentSlide:N,lazyLoadedList:q}));q=q.concat(fe);var ae={slideCount:a,slideWidth:s,listWidth:d,trackWidth:E,currentSlide:N,slideHeight:R,listHeight:U,lazyLoadedList:q};return r.autoplaying===null&&r.autoplay&&(ae.autoplaying="playing"),ae};wt.initializedState=s7;var a7=function(r){var a=r.waitForAnimate,h=r.animating,d=r.fade,x=r.infinite,E=r.index,s=r.slideCount,A=r.lazyLoad,R=r.currentSlide,U=r.centerMode,N=r.slidesToScroll,q=r.slidesToShow,fe=r.useCSS,ae=r.lazyLoadedList;if(a&&h)return{};var se=E,ve,J,Z,te={},Ee={},ke=x?E:MI(E,0,s-1);if(d){if(!x&&(E<0||E>=s))return{};E<0?se=E+s:E>=s&&(se=E-s),A&&ae.indexOf(se)<0&&(ae=ae.concat(se)),te={animating:!0,currentSlide:se,lazyLoadedList:ae,targetSlide:se},Ee={animating:!1,targetSlide:se}}else ve=se,se<0?(ve=se+s,x?s%N!==0&&(ve=s-s%N):ve=0):!Cw(r)&&se>R?se=ve=R:U&&se>=s?(se=x?s:s-1,ve=x?0:s-1):se>=s&&(ve=se-s,x?s%N!==0&&(ve=0):ve=s-q),!x&&se+q>=s&&(ve=s-q),J=hp(Jr(Jr({},r),{},{slideIndex:se})),Z=hp(Jr(Jr({},r),{},{slideIndex:ve})),x||(J===Z&&(se=ve),J=Z),A&&(ae=ae.concat(ww(Jr(Jr({},r),{},{currentSlide:se})))),fe?(te={animating:!0,currentSlide:ve,trackStyle:Mw(Jr(Jr({},r),{},{left:J})),lazyLoadedList:ae,targetSlide:ke},Ee={animating:!1,currentSlide:ve,trackStyle:up(Jr(Jr({},r),{},{left:Z})),swipeLeft:null,targetSlide:ke}):te={currentSlide:ve,trackStyle:up(Jr(Jr({},r),{},{left:Z})),lazyLoadedList:ae,targetSlide:ke};return{state:te,nextState:Ee}};wt.slideHandler=a7;var l7=function(r,a){var h,d,x,E,s,A=r.slidesToScroll,R=r.slidesToShow,U=r.slideCount,N=r.currentSlide,q=r.targetSlide,fe=r.lazyLoad,ae=r.infinite;if(E=U%A!==0,h=E?0:(U-N)%A,a.message==="previous")x=h===0?A:R-h,s=N-x,fe&&!ae&&(d=N-x,s=d===-1?U-1:d),ae||(s=q-A);else if(a.message==="next")x=h===0?A:h,s=N+x,fe&&!ae&&(s=(N+A)%U+h),ae||(s=q+A);else if(a.message==="dots")s=a.index*a.slidesToScroll;else if(a.message==="children"){if(s=a.index,ae){var se=zI(Jr(Jr({},r),{},{targetSlide:s}));s>a.currentSlide&&se==="left"?s=s-U:s<a.currentSlide&&se==="right"&&(s=s+U)}}else a.message==="index"&&(s=Number(a.index));return s};wt.changeSlide=l7;var c7=function(r,a,h){return r.target.tagName.match("TEXTAREA|INPUT|SELECT")||!a?"":r.keyCode===37?h?"next":"previous":r.keyCode===39?h?"previous":"next":""};wt.keyHandler=c7;var u7=function(r,a,h){return r.target.tagName==="IMG"&&Sc(r),!a||!h&&r.type.indexOf("mouse")!==-1?"":{dragging:!0,touchObject:{startX:r.touches?r.touches[0].pageX:r.clientX,startY:r.touches?r.touches[0].pageY:r.clientY,curX:r.touches?r.touches[0].pageX:r.clientX,curY:r.touches?r.touches[0].pageY:r.clientY}}};wt.swipeStart=u7;var h7=function(r,a){var h=a.scrolling,d=a.animating,x=a.vertical,E=a.swipeToSlide,s=a.verticalSwiping,A=a.rtl,R=a.currentSlide,U=a.edgeFriction,N=a.edgeDragged,q=a.onEdge,fe=a.swiped,ae=a.swiping,se=a.slideCount,ve=a.slidesToScroll,J=a.infinite,Z=a.touchObject,te=a.swipeEvent,Ee=a.listHeight,ke=a.listWidth;if(!h){if(d)return Sc(r);x&&E&&s&&Sc(r);var Fe,We={},Ve=hp(a);Z.curX=r.touches?r.touches[0].pageX:r.clientX,Z.curY=r.touches?r.touches[0].pageY:r.clientY,Z.swipeLength=Math.round(Math.sqrt(Math.pow(Z.curX-Z.startX,2)));var Te=Math.round(Math.sqrt(Math.pow(Z.curY-Z.startY,2)));if(!s&&!ae&&Te>10)return{scrolling:!0};s&&(Z.swipeLength=Te);var dt=(A?-1:1)*(Z.curX>Z.startX?1:-1);s&&(dt=Z.curY>Z.startY?1:-1);var zt=Math.ceil(se/ve),at=Aw(a.touchObject,s),vt=Z.swipeLength;return J||(R===0&&(at==="right"||at==="down")||R+1>=zt&&(at==="left"||at==="up")||!Cw(a)&&(at==="left"||at==="up"))&&(vt=Z.swipeLength*U,N===!1&&q&&(q(at),We.edgeDragged=!0)),!fe&&te&&(te(at),We.swiped=!0),x?Fe=Ve+vt*(Ee/ke)*dt:A?Fe=Ve-vt*dt:Fe=Ve+vt*dt,s&&(Fe=Ve+vt*dt),We=Jr(Jr({},We),{},{touchObject:Z,swipeLeft:Fe,trackStyle:up(Jr(Jr({},a),{},{left:Fe}))}),Math.abs(Z.curX-Z.startX)<Math.abs(Z.curY-Z.startY)*.8||Z.swipeLength>10&&(We.swiping=!0,Sc(r)),We}};wt.swipeMove=h7;var d7=function(r,a){var h=a.dragging,d=a.swipe,x=a.touchObject,E=a.listWidth,s=a.touchThreshold,A=a.verticalSwiping,R=a.listHeight,U=a.swipeToSlide,N=a.scrolling,q=a.onSwipe,fe=a.targetSlide,ae=a.currentSlide,se=a.infinite;if(!h)return d&&Sc(r),{};var ve=A?R/s:E/s,J=Aw(x,A),Z={dragging:!1,edgeDragged:!1,scrolling:!1,swiping:!1,swiped:!1,swipeLeft:null,touchObject:{}};if(N||!x.swipeLength)return Z;if(x.swipeLength>ve){Sc(r),q&&q(J);var te,Ee,ke=se?ae:fe;switch(J){case"left":case"up":Ee=ke+Dx(a),te=U?Rx(a,Ee):Ee,Z.currentDirection=0;break;case"right":case"down":Ee=ke-Dx(a),te=U?Rx(a,Ee):Ee,Z.currentDirection=1;break;default:te=ke}Z.triggerSlideHandler=te}else{var Fe=hp(a);Z.trackStyle=Mw(Jr(Jr({},a),{},{left:Fe}))}return Z};wt.swipeEnd=d7;var kI=function(r){for(var a=r.infinite?r.slideCount*2:r.slideCount,h=r.infinite?r.slidesToShow*-1:0,d=r.infinite?r.slidesToShow*-1:0,x=[];h<a;)x.push(h),h=d+r.slidesToScroll,d+=Math.min(r.slidesToScroll,r.slidesToShow);return x};wt.getNavigableIndexes=kI;var Rx=function(r,a){var h=kI(r),d=0;if(a>h[h.length-1])a=h[h.length-1];else for(var x in h){if(a<h[x]){a=d;break}d=h[x]}return a};wt.checkNavigable=Rx;var Dx=function(r){var a=r.centerMode?r.slideWidth*Math.floor(r.slidesToShow/2):0;if(r.swipeToSlide){var h,d=r.listRef,x=d.querySelectorAll&&d.querySelectorAll(".slick-slide")||[];if(Array.from(x).every(function(A){if(r.vertical){if(A.offsetTop+Sw(A)/2>r.swipeLeft*-1)return h=A,!1}else if(A.offsetLeft-a+M_(A)/2>r.swipeLeft*-1)return h=A,!1;return!0}),!h)return 0;var E=r.rtl===!0?r.slideCount-r.currentSlide:r.currentSlide,s=Math.abs(h.dataset.index-E)||1;return s}else return r.slidesToScroll};wt.getSlideCount=Dx;var D0=function(r,a){return a.reduce(function(h,d){return h&&r.hasOwnProperty(d)},!0)?null:console.error("Keys Missing:",r)};wt.checkSpecKeys=D0;var up=function(r){D0(r,["left","variableWidth","slideCount","slidesToShow","slideWidth"]);var a,h,d=r.slideCount+2*r.slidesToShow;r.vertical?h=d*r.slideHeight:a=OI(r)*r.slideWidth;var x={opacity:1,transition:"",WebkitTransition:""};if(r.useTransform){var E=r.vertical?"translate3d(0px, "+r.left+"px, 0px)":"translate3d("+r.left+"px, 0px, 0px)",s=r.vertical?"translate3d(0px, "+r.left+"px, 0px)":"translate3d("+r.left+"px, 0px, 0px)",A=r.vertical?"translateY("+r.left+"px)":"translateX("+r.left+"px)";x=Jr(Jr({},x),{},{WebkitTransform:E,transform:s,msTransform:A})}else r.vertical?x.top=r.left:x.left=r.left;return r.fade&&(x={opacity:1}),a&&(x.width=a),h&&(x.height=h),window&&!window.addEventListener&&window.attachEvent&&(r.vertical?x.marginTop=r.left+"px":x.marginLeft=r.left+"px"),x};wt.getTrackCSS=up;var Mw=function(r){D0(r,["left","variableWidth","slideCount","slidesToShow","slideWidth","speed","cssEase"]);var a=up(r);return r.useTransform?(a.WebkitTransition="-webkit-transform "+r.speed+"ms "+r.cssEase,a.transition="transform "+r.speed+"ms "+r.cssEase):r.vertical?a.transition="top "+r.speed+"ms "+r.cssEase:a.transition="left "+r.speed+"ms "+r.cssEase,a};wt.getTrackAnimateCSS=Mw;var hp=function(r){if(r.unslick)return 0;D0(r,["slideIndex","trackRef","infinite","centerMode","slideCount","slidesToShow","slidesToScroll","slideWidth","listWidth","variableWidth","slideHeight"]);var a=r.slideIndex,h=r.trackRef,d=r.infinite,x=r.centerMode,E=r.slideCount,s=r.slidesToShow,A=r.slidesToScroll,R=r.slideWidth,U=r.listWidth,N=r.variableWidth,q=r.slideHeight,fe=r.fade,ae=r.vertical,se=0,ve,J,Z=0;if(fe||r.slideCount===1)return 0;var te=0;if(d?(te=-Ff(r),E%A!==0&&a+A>E&&(te=-(a>E?s-(a-E):E%A)),x&&(te+=parseInt(s/2))):(E%A!==0&&a+A>E&&(te=s-E%A),x&&(te=parseInt(s/2))),se=te*R,Z=te*q,ae?ve=a*q*-1+Z:ve=a*R*-1+se,N===!0){var Ee,ke=h&&h.node;if(Ee=a+Ff(r),J=ke&&ke.childNodes[Ee],ve=J?J.offsetLeft*-1:0,x===!0){Ee=d?a+Ff(r):a,J=ke&&ke.children[Ee],ve=0;for(var Fe=0;Fe<Ee;Fe++)ve-=ke&&ke.children[Fe]&&ke.children[Fe].offsetWidth;ve-=parseInt(r.centerPadding),ve+=J&&(U-J.offsetWidth)/2}}return ve};wt.getTrackLeft=hp;var Ff=function(r){return r.unslick||!r.infinite?0:r.variableWidth?r.slideCount:r.slidesToShow+(r.centerMode?1:0)};wt.getPreClones=Ff;var LI=function(r){return r.unslick||!r.infinite?0:r.slideCount};wt.getPostClones=LI;var OI=function(r){return r.slideCount===1?1:Ff(r)+r.slideCount+LI(r)};wt.getTotalSlides=OI;var zI=function(r){return r.targetSlide>r.currentSlide?r.targetSlide>r.currentSlide+RI(r)?"left":"right":r.targetSlide<r.currentSlide-DI(r)?"right":"left"};wt.siblingDirection=zI;var RI=function(r){var a=r.slidesToShow,h=r.centerMode,d=r.rtl,x=r.centerPadding;if(h){var E=(a-1)/2+1;return parseInt(x)>0&&(E+=1),d&&a%2===0&&(E+=1),E}return d?0:a-1};wt.slidesOnRight=RI;var DI=function(r){var a=r.slidesToShow,h=r.centerMode,d=r.rtl,x=r.centerPadding;if(h){var E=(a-1)/2+1;return parseInt(x)>0&&(E+=1),!d&&a%2===0&&(E+=1),E}return d?a-1:0};wt.slidesOnLeft=DI;var f7=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)};wt.canUseDOM=f7;var B0={};function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Bx(e)}Object.defineProperty(B0,"__esModule",{value:!0});B0.Track=void 0;var Ya=BI(Xe),l1=BI(R0),c1=wt;function BI(e){return e&&e.__esModule?e:{default:e}}function Fx(){return Fx=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},Fx.apply(this,arguments)}function p7(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function NA(e,r){for(var a=0;a<r.length;a++){var h=r[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}function m7(e,r,a){return r&&NA(e.prototype,r),a&&NA(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function g7(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Nx(e,r)}function Nx(e,r){return Nx=Object.setPrototypeOf||function(h,d){return h.__proto__=d,h},Nx(e,r)}function _7(e){var r=v7();return function(){var h=P_(e),d;if(r){var x=P_(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return y7(this,d)}}function y7(e,r){if(r&&(Bx(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jx(e)}function jx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P_(e){return P_=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},P_(e)}function jA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);r&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,h)}return a}function Bi(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?jA(Object(a),!0).forEach(function(h){Ux(e,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jA(Object(a)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(a,h))})}return e}function Ux(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}var u1=function(r){var a,h,d,x,E;r.rtl?E=r.slideCount-1-r.index:E=r.index,d=E<0||E>=r.slideCount,r.centerMode?(x=Math.floor(r.slidesToShow/2),h=(E-r.currentSlide)%r.slideCount===0,E>r.currentSlide-x-1&&E<=r.currentSlide+x&&(a=!0)):a=r.currentSlide<=E&&E<r.currentSlide+r.slidesToShow;var s;r.targetSlide<0?s=r.targetSlide+r.slideCount:r.targetSlide>=r.slideCount?s=r.targetSlide-r.slideCount:s=r.targetSlide;var A=E===s;return{"slick-slide":!0,"slick-active":a,"slick-center":h,"slick-cloned":d,"slick-current":A}},x7=function(r){var a={};return(r.variableWidth===void 0||r.variableWidth===!1)&&(a.width=r.slideWidth),r.fade&&(a.position="relative",r.vertical?a.top=-r.index*parseInt(r.slideHeight):a.left=-r.index*parseInt(r.slideWidth),a.opacity=r.currentSlide===r.index?1:0,r.useCSS&&(a.transition="opacity "+r.speed+"ms "+r.cssEase+", visibility "+r.speed+"ms "+r.cssEase)),a},h1=function(r,a){return r.key||a},b7=function(r){var a,h=[],d=[],x=[],E=Ya.default.Children.count(r.children),s=(0,c1.lazyStartIndex)(r),A=(0,c1.lazyEndIndex)(r);return Ya.default.Children.forEach(r.children,function(R,U){var N,q={message:"children",index:U,slidesToScroll:r.slidesToScroll,currentSlide:r.currentSlide};!r.lazyLoad||r.lazyLoad&&r.lazyLoadedList.indexOf(U)>=0?N=R:N=Ya.default.createElement("div",null);var fe=x7(Bi(Bi({},r),{},{index:U})),ae=N.props.className||"",se=u1(Bi(Bi({},r),{},{index:U}));if(h.push(Ya.default.cloneElement(N,{key:"original"+h1(N,U),"data-index":U,className:(0,l1.default)(se,ae),tabIndex:"-1","aria-hidden":!se["slick-active"],style:Bi(Bi({outline:"none"},N.props.style||{}),fe),onClick:function(Z){N.props&&N.props.onClick&&N.props.onClick(Z),r.focusOnSelect&&r.focusOnSelect(q)}})),r.infinite&&r.fade===!1){var ve=E-U;ve<=(0,c1.getPreClones)(r)&&E!==r.slidesToShow&&(a=-ve,a>=s&&(N=R),se=u1(Bi(Bi({},r),{},{index:a})),d.push(Ya.default.cloneElement(N,{key:"precloned"+h1(N,a),"data-index":a,tabIndex:"-1",className:(0,l1.default)(se,ae),"aria-hidden":!se["slick-active"],style:Bi(Bi({},N.props.style||{}),fe),onClick:function(Z){N.props&&N.props.onClick&&N.props.onClick(Z),r.focusOnSelect&&r.focusOnSelect(q)}}))),E!==r.slidesToShow&&(a=E+U,a<A&&(N=R),se=u1(Bi(Bi({},r),{},{index:a})),x.push(Ya.default.cloneElement(N,{key:"postcloned"+h1(N,a),"data-index":a,tabIndex:"-1",className:(0,l1.default)(se,ae),"aria-hidden":!se["slick-active"],style:Bi(Bi({},N.props.style||{}),fe),onClick:function(Z){N.props&&N.props.onClick&&N.props.onClick(Z),r.focusOnSelect&&r.focusOnSelect(q)}})))}}),r.rtl?d.concat(h,x).reverse():d.concat(h,x)},w7=function(e){g7(a,e);var r=_7(a);function a(){var h;p7(this,a);for(var d=arguments.length,x=new Array(d),E=0;E<d;E++)x[E]=arguments[E];return h=r.call.apply(r,[this].concat(x)),Ux(jx(h),"node",null),Ux(jx(h),"handleRef",function(s){h.node=s}),h}return m7(a,[{key:"render",value:function(){var d=b7(this.props),x=this.props,E=x.onMouseEnter,s=x.onMouseOver,A=x.onMouseLeave,R={onMouseEnter:E,onMouseOver:s,onMouseLeave:A};return Ya.default.createElement("div",Fx({ref:this.handleRef,className:"slick-track",style:this.props.trackStyle},R),d)}}]),a}(Ya.default.PureComponent);B0.Track=w7;var F0={};function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Vx(e)}Object.defineProperty(F0,"__esModule",{value:!0});F0.Dots=void 0;var Pg=FI(Xe),E7=FI(R0),UA=wt;function FI(e){return e&&e.__esModule?e:{default:e}}function VA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);r&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,h)}return a}function T7(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?VA(Object(a),!0).forEach(function(h){S7(e,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):VA(Object(a)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(a,h))})}return e}function S7(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function A7(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function $A(e,r){for(var a=0;a<r.length;a++){var h=r[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}function C7(e,r,a){return r&&$A(e.prototype,r),a&&$A(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function M7(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&$x(e,r)}function $x(e,r){return $x=Object.setPrototypeOf||function(h,d){return h.__proto__=d,h},$x(e,r)}function P7(e){var r=L7();return function(){var h=I_(e),d;if(r){var x=I_(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return I7(this,d)}}function I7(e,r){if(r&&(Vx(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k7(e)}function k7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function I_(e){return I_=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},I_(e)}var O7=function(r){var a;return r.infinite?a=Math.ceil(r.slideCount/r.slidesToScroll):a=Math.ceil((r.slideCount-r.slidesToShow)/r.slidesToScroll)+1,a},z7=function(e){M7(a,e);var r=P7(a);function a(){return A7(this,a),r.apply(this,arguments)}return C7(a,[{key:"clickHandler",value:function(d,x){x.preventDefault(),this.props.clickHandler(d)}},{key:"render",value:function(){for(var d=this.props,x=d.onMouseEnter,E=d.onMouseOver,s=d.onMouseLeave,A=d.infinite,R=d.slidesToScroll,U=d.slidesToShow,N=d.slideCount,q=d.currentSlide,fe=O7({slideCount:N,slidesToScroll:R,slidesToShow:U,infinite:A}),ae={onMouseEnter:x,onMouseOver:E,onMouseLeave:s},se=[],ve=0;ve<fe;ve++){var J=(ve+1)*R-1,Z=A?J:(0,UA.clamp)(J,0,N-1),te=Z-(R-1),Ee=A?te:(0,UA.clamp)(te,0,N-1),ke=(0,E7.default)({"slick-active":A?q>=Ee&&q<=Z:q===Ee}),Fe={message:"dots",index:ve,slidesToScroll:R,currentSlide:q},We=this.clickHandler.bind(this,Fe);se=se.concat(Pg.default.createElement("li",{key:ve,className:ke},Pg.default.cloneElement(this.props.customPaging(ve),{onClick:We})))}return Pg.default.cloneElement(this.props.appendDots(se),T7({className:this.props.dotsClass},ae))}}]),a}(Pg.default.PureComponent);F0.Dots=z7;var bh={};function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Gx(e)}Object.defineProperty(bh,"__esModule",{value:!0});bh.PrevArrow=bh.NextArrow=void 0;var uh=jI(Xe),NI=jI(R0),R7=wt;function jI(e){return e&&e.__esModule?e:{default:e}}function k_(){return k_=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},k_.apply(this,arguments)}function GA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);r&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,h)}return a}function L_(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?GA(Object(a),!0).forEach(function(h){D7(e,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):GA(Object(a)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(a,h))})}return e}function D7(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function UI(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ZA(e,r){for(var a=0;a<r.length;a++){var h=r[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}function VI(e,r,a){return r&&ZA(e.prototype,r),a&&ZA(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function $I(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Zx(e,r)}function Zx(e,r){return Zx=Object.setPrototypeOf||function(h,d){return h.__proto__=d,h},Zx(e,r)}function GI(e){var r=N7();return function(){var h=O_(e),d;if(r){var x=O_(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return B7(this,d)}}function B7(e,r){if(r&&(Gx(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F7(e)}function F7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O_(e){return O_=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},O_(e)}var j7=function(e){$I(a,e);var r=GI(a);function a(){return UI(this,a),r.apply(this,arguments)}return VI(a,[{key:"clickHandler",value:function(d,x){x&&x.preventDefault(),this.props.clickHandler(d,x)}},{key:"render",value:function(){var d={"slick-arrow":!0,"slick-prev":!0},x=this.clickHandler.bind(this,{message:"previous"});!this.props.infinite&&(this.props.currentSlide===0||this.props.slideCount<=this.props.slidesToShow)&&(d["slick-disabled"]=!0,x=null);var E={key:"0","data-role":"none",className:(0,NI.default)(d),style:{display:"block"},onClick:x},s={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},A;return this.props.prevArrow?A=uh.default.cloneElement(this.props.prevArrow,L_(L_({},E),s)):A=uh.default.createElement("button",k_({key:"0",type:"button"},E)," ","Previous"),A}}]),a}(uh.default.PureComponent);bh.PrevArrow=j7;var U7=function(e){$I(a,e);var r=GI(a);function a(){return UI(this,a),r.apply(this,arguments)}return VI(a,[{key:"clickHandler",value:function(d,x){x&&x.preventDefault(),this.props.clickHandler(d,x)}},{key:"render",value:function(){var d={"slick-arrow":!0,"slick-next":!0},x=this.clickHandler.bind(this,{message:"next"});(0,R7.canGoNext)(this.props)||(d["slick-disabled"]=!0,x=null);var E={key:"1","data-role":"none",className:(0,NI.default)(d),style:{display:"block"},onClick:x},s={currentSlide:this.props.currentSlide,slideCount:this.props.slideCount},A;return this.props.nextArrow?A=uh.default.cloneElement(this.props.nextArrow,L_(L_({},E),s)):A=uh.default.createElement("button",k_({key:"1",type:"button"},E)," ","Next"),A}}]),a}(uh.default.PureComponent);bh.NextArrow=U7;var ZI=function(){if(typeof Map<"u")return Map;function e(r,a){var h=-1;return r.some(function(d,x){return d[0]===a?(h=x,!0):!1}),h}return function(){function r(){this.__entries__=[]}return Object.defineProperty(r.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),r.prototype.get=function(a){var h=e(this.__entries__,a),d=this.__entries__[h];return d&&d[1]},r.prototype.set=function(a,h){var d=e(this.__entries__,a);~d?this.__entries__[d][1]=h:this.__entries__.push([a,h])},r.prototype.delete=function(a){var h=this.__entries__,d=e(h,a);~d&&h.splice(d,1)},r.prototype.has=function(a){return!!~e(this.__entries__,a)},r.prototype.clear=function(){this.__entries__.splice(0)},r.prototype.forEach=function(a,h){h===void 0&&(h=null);for(var d=0,x=this.__entries__;d<x.length;d++){var E=x[d];a.call(h,E[1],E[0])}},r}()}(),Hx=typeof window<"u"&&typeof document<"u"&&window.document===document,z_=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),V7=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(z_):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),$7=2;function G7(e,r){var a=!1,h=!1,d=0;function x(){a&&(a=!1,e()),h&&s()}function E(){V7(x)}function s(){var A=Date.now();if(a){if(A-d<$7)return;h=!0}else a=!0,h=!1,setTimeout(E,r);d=A}return s}var Z7=20,H7=["top","right","bottom","left","width","height","size","weight"],q7=typeof MutationObserver<"u",W7=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=G7(this.refresh.bind(this),Z7)}return e.prototype.addObserver=function(r){~this.observers_.indexOf(r)||this.observers_.push(r),this.connected_||this.connect_()},e.prototype.removeObserver=function(r){var a=this.observers_,h=a.indexOf(r);~h&&a.splice(h,1),!a.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var r=this.updateObservers_();r&&this.refresh()},e.prototype.updateObservers_=function(){var r=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return r.forEach(function(a){return a.broadcastActive()}),r.length>0},e.prototype.connect_=function(){!Hx||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),q7?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Hx||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(r){var a=r.propertyName,h=a===void 0?"":a,d=H7.some(function(x){return!!~h.indexOf(x)});d&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),HI=function(e,r){for(var a=0,h=Object.keys(r);a<h.length;a++){var d=h[a];Object.defineProperty(e,d,{value:r[d],enumerable:!1,writable:!1,configurable:!0})}return e},wh=function(e){var r=e&&e.ownerDocument&&e.ownerDocument.defaultView;return r||z_},qI=N0(0,0,0,0);function R_(e){return parseFloat(e)||0}function HA(e){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return r.reduce(function(h,d){var x=e["border-"+d+"-width"];return h+R_(x)},0)}function X7(e){for(var r=["top","right","bottom","left"],a={},h=0,d=r;h<d.length;h++){var x=d[h],E=e["padding-"+x];a[x]=R_(E)}return a}function K7(e){var r=e.getBBox();return N0(0,0,r.width,r.height)}function Y7(e){var r=e.clientWidth,a=e.clientHeight;if(!r&&!a)return qI;var h=wh(e).getComputedStyle(e),d=X7(h),x=d.left+d.right,E=d.top+d.bottom,s=R_(h.width),A=R_(h.height);if(h.boxSizing==="border-box"&&(Math.round(s+x)!==r&&(s-=HA(h,"left","right")+x),Math.round(A+E)!==a&&(A-=HA(h,"top","bottom")+E)),!J7(e)){var R=Math.round(s+x)-r,U=Math.round(A+E)-a;Math.abs(R)!==1&&(s-=R),Math.abs(U)!==1&&(A-=U)}return N0(d.left,d.top,s,A)}var Q7=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof wh(e).SVGGraphicsElement}:function(e){return e instanceof wh(e).SVGElement&&typeof e.getBBox=="function"}}();function J7(e){return e===wh(e).document.documentElement}function eV(e){return Hx?Q7(e)?K7(e):Y7(e):qI}function tV(e){var r=e.x,a=e.y,h=e.width,d=e.height,x=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,E=Object.create(x.prototype);return HI(E,{x:r,y:a,width:h,height:d,top:a,right:r+h,bottom:d+a,left:r}),E}function N0(e,r,a,h){return{x:e,y:r,width:a,height:h}}var rV=function(){function e(r){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=N0(0,0,0,0),this.target=r}return e.prototype.isActive=function(){var r=eV(this.target);return this.contentRect_=r,r.width!==this.broadcastWidth||r.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var r=this.contentRect_;return this.broadcastWidth=r.width,this.broadcastHeight=r.height,r},e}(),nV=function(){function e(r,a){var h=tV(a);HI(this,{target:r,contentRect:h})}return e}(),iV=function(){function e(r,a,h){if(this.activeObservations_=[],this.observations_=new ZI,typeof r!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=r,this.controller_=a,this.callbackCtx_=h}return e.prototype.observe=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof wh(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(r)||(a.set(r,new rV(r)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(r){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(r instanceof wh(r).Element))throw new TypeError('parameter 1 is not of type "Element".');var a=this.observations_;a.has(r)&&(a.delete(r),a.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var r=this;this.clearActive(),this.observations_.forEach(function(a){a.isActive()&&r.activeObservations_.push(a)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var r=this.callbackCtx_,a=this.activeObservations_.map(function(h){return new nV(h.target,h.broadcastRect())});this.callback_.call(r,a,r),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),WI=typeof WeakMap<"u"?new WeakMap:new ZI,XI=function(){function e(r){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=W7.getInstance(),h=new iV(r,a,this);WI.set(this,h)}return e}();["observe","unobserve","disconnect"].forEach(function(e){XI.prototype[e]=function(){var r;return(r=WI.get(this))[e].apply(r,arguments)}});var oV=function(){return typeof z_.ResizeObserver<"u"?z_.ResizeObserver:XI}();const sV=Object.freeze(Object.defineProperty({__proto__:null,default:oV},Symbol.toStringTag,{value:"Module"})),aV=Wx(sV);Object.defineProperty(z0,"__esModule",{value:!0});z0.InnerSlider=void 0;var vi=Pp(Xe),lV=Pp(AI),cV=Pp(RP),uV=Pp(R0),hn=wt,hV=B0,dV=F0,qA=bh,fV=Pp(aV);function Pp(e){return e&&e.__esModule?e:{default:e}}function D_(e){"@babel/helpers - typeof";return D_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},D_(e)}function B_(){return B_=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(e[h]=a[h])}return e},B_.apply(this,arguments)}function pV(e,r){if(e==null)return{};var a=mV(e,r),h,d;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(e);for(d=0;d<x.length;d++)h=x[d],!(r.indexOf(h)>=0)&&Object.prototype.propertyIsEnumerable.call(e,h)&&(a[h]=e[h])}return a}function mV(e,r){if(e==null)return{};var a={},h=Object.keys(e),d,x;for(x=0;x<h.length;x++)d=h[x],!(r.indexOf(d)>=0)&&(a[d]=e[d]);return a}function WA(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);r&&(h=h.filter(function(d){return Object.getOwnPropertyDescriptor(e,d).enumerable})),a.push.apply(a,h)}return a}function $t(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?WA(Object(a),!0).forEach(function(h){cr(e,h,a[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):WA(Object(a)).forEach(function(h){Object.defineProperty(e,h,Object.getOwnPropertyDescriptor(a,h))})}return e}function gV(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function XA(e,r){for(var a=0;a<r.length;a++){var h=r[a];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}function _V(e,r,a){return r&&XA(e.prototype,r),a&&XA(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function yV(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&qx(e,r)}function qx(e,r){return qx=Object.setPrototypeOf||function(h,d){return h.__proto__=d,h},qx(e,r)}function vV(e){var r=bV();return function(){var h=F_(e),d;if(r){var x=F_(this).constructor;d=Reflect.construct(h,arguments,x)}else d=h.apply(this,arguments);return xV(this,d)}}function xV(e,r){if(r&&(D_(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lr(e)}function lr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bV(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function F_(e){return F_=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},F_(e)}function cr(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}var wV=function(e){yV(a,e);var r=vV(a);function a(h){var d;gV(this,a),d=r.call(this,h),cr(lr(d),"listRefHandler",function(E){return d.list=E}),cr(lr(d),"trackRefHandler",function(E){return d.track=E}),cr(lr(d),"adaptHeight",function(){if(d.props.adaptiveHeight&&d.list){var E=d.list.querySelector('[data-index="'.concat(d.state.currentSlide,'"]'));d.list.style.height=(0,hn.getHeight)(E)+"px"}}),cr(lr(d),"componentDidMount",function(){if(d.props.onInit&&d.props.onInit(),d.props.lazyLoad){var E=(0,hn.getOnDemandLazySlides)($t($t({},d.props),d.state));E.length>0&&(d.setState(function(A){return{lazyLoadedList:A.lazyLoadedList.concat(E)}}),d.props.onLazyLoad&&d.props.onLazyLoad(E))}var s=$t({listRef:d.list,trackRef:d.track},d.props);d.updateState(s,!0,function(){d.adaptHeight(),d.props.autoplay&&d.autoPlay("update")}),d.props.lazyLoad==="progressive"&&(d.lazyLoadTimer=setInterval(d.progressiveLazyLoad,1e3)),d.ro=new fV.default(function(){d.state.animating?(d.onWindowResized(!1),d.callbackTimers.push(setTimeout(function(){return d.onWindowResized()},d.props.speed))):d.onWindowResized()}),d.ro.observe(d.list),document.querySelectorAll&&Array.prototype.forEach.call(document.querySelectorAll(".slick-slide"),function(A){A.onfocus=d.props.pauseOnFocus?d.onSlideFocus:null,A.onblur=d.props.pauseOnFocus?d.onSlideBlur:null}),window.addEventListener?window.addEventListener("resize",d.onWindowResized):window.attachEvent("onresize",d.onWindowResized)}),cr(lr(d),"componentWillUnmount",function(){d.animationEndCallback&&clearTimeout(d.animationEndCallback),d.lazyLoadTimer&&clearInterval(d.lazyLoadTimer),d.callbackTimers.length&&(d.callbackTimers.forEach(function(E){return clearTimeout(E)}),d.callbackTimers=[]),window.addEventListener?window.removeEventListener("resize",d.onWindowResized):window.detachEvent("onresize",d.onWindowResized),d.autoplayTimer&&clearInterval(d.autoplayTimer),d.ro.disconnect()}),cr(lr(d),"componentDidUpdate",function(E){if(d.checkImagesLoad(),d.props.onReInit&&d.props.onReInit(),d.props.lazyLoad){var s=(0,hn.getOnDemandLazySlides)($t($t({},d.props),d.state));s.length>0&&(d.setState(function(U){return{lazyLoadedList:U.lazyLoadedList.concat(s)}}),d.props.onLazyLoad&&d.props.onLazyLoad(s))}d.adaptHeight();var A=$t($t({listRef:d.list,trackRef:d.track},d.props),d.state),R=d.didPropsChange(E);R&&d.updateState(A,R,function(){d.state.currentSlide>=vi.default.Children.count(d.props.children)&&d.changeSlide({message:"index",index:vi.default.Children.count(d.props.children)-d.props.slidesToShow,currentSlide:d.state.currentSlide}),d.props.autoplay?d.autoPlay("update"):d.pause("paused")})}),cr(lr(d),"onWindowResized",function(E){d.debouncedResize&&d.debouncedResize.cancel(),d.debouncedResize=(0,cV.default)(function(){return d.resizeWindow(E)},50),d.debouncedResize()}),cr(lr(d),"resizeWindow",function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,s=!!(d.track&&d.track.node);if(s){var A=$t($t({listRef:d.list,trackRef:d.track},d.props),d.state);d.updateState(A,E,function(){d.props.autoplay?d.autoPlay("update"):d.pause("paused")}),d.setState({animating:!1}),clearTimeout(d.animationEndCallback),delete d.animationEndCallback}}),cr(lr(d),"updateState",function(E,s,A){var R=(0,hn.initializedState)(E);E=$t($t($t({},E),R),{},{slideIndex:R.currentSlide});var U=(0,hn.getTrackLeft)(E);E=$t($t({},E),{},{left:U});var N=(0,hn.getTrackCSS)(E);(s||vi.default.Children.count(d.props.children)!==vi.default.Children.count(E.children))&&(R.trackStyle=N),d.setState(R,A)}),cr(lr(d),"ssrInit",function(){if(d.props.variableWidth){var E=0,s=0,A=[],R=(0,hn.getPreClones)($t($t($t({},d.props),d.state),{},{slideCount:d.props.children.length})),U=(0,hn.getPostClones)($t($t($t({},d.props),d.state),{},{slideCount:d.props.children.length}));d.props.children.forEach(function(We){A.push(We.props.style.width),E+=We.props.style.width});for(var N=0;N<R;N++)s+=A[A.length-1-N],E+=A[A.length-1-N];for(var q=0;q<U;q++)E+=A[q];for(var fe=0;fe<d.state.currentSlide;fe++)s+=A[fe];var ae={width:E+"px",left:-s+"px"};if(d.props.centerMode){var se="".concat(A[d.state.currentSlide],"px");ae.left="calc(".concat(ae.left," + (100% - ").concat(se,") / 2 ) ")}return{trackStyle:ae}}var ve=vi.default.Children.count(d.props.children),J=$t($t($t({},d.props),d.state),{},{slideCount:ve}),Z=(0,hn.getPreClones)(J)+(0,hn.getPostClones)(J)+ve,te=100/d.props.slidesToShow*Z,Ee=100/Z,ke=-Ee*((0,hn.getPreClones)(J)+d.state.currentSlide)*te/100;d.props.centerMode&&(ke+=(100-Ee*te/100)/2);var Fe={width:te+"%",left:ke+"%"};return{slideWidth:Ee+"%",trackStyle:Fe}}),cr(lr(d),"checkImagesLoad",function(){var E=d.list&&d.list.querySelectorAll&&d.list.querySelectorAll(".slick-slide img")||[],s=E.length,A=0;Array.prototype.forEach.call(E,function(R){var U=function(){return++A&&A>=s&&d.onWindowResized()};if(!R.onclick)R.onclick=function(){return R.parentNode.focus()};else{var N=R.onclick;R.onclick=function(){N(),R.parentNode.focus()}}R.onload||(d.props.lazyLoad?R.onload=function(){d.adaptHeight(),d.callbackTimers.push(setTimeout(d.onWindowResized,d.props.speed))}:(R.onload=U,R.onerror=function(){U(),d.props.onLazyLoadError&&d.props.onLazyLoadError()}))})}),cr(lr(d),"progressiveLazyLoad",function(){for(var E=[],s=$t($t({},d.props),d.state),A=d.state.currentSlide;A<d.state.slideCount+(0,hn.getPostClones)(s);A++)if(d.state.lazyLoadedList.indexOf(A)<0){E.push(A);break}for(var R=d.state.currentSlide-1;R>=-(0,hn.getPreClones)(s);R--)if(d.state.lazyLoadedList.indexOf(R)<0){E.push(R);break}E.length>0?(d.setState(function(U){return{lazyLoadedList:U.lazyLoadedList.concat(E)}}),d.props.onLazyLoad&&d.props.onLazyLoad(E)):d.lazyLoadTimer&&(clearInterval(d.lazyLoadTimer),delete d.lazyLoadTimer)}),cr(lr(d),"slideHandler",function(E){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=d.props,R=A.asNavFor,U=A.beforeChange,N=A.onLazyLoad,q=A.speed,fe=A.afterChange,ae=d.state.currentSlide,se=(0,hn.slideHandler)($t($t($t({index:E},d.props),d.state),{},{trackRef:d.track,useCSS:d.props.useCSS&&!s})),ve=se.state,J=se.nextState;if(ve){U&&U(ae,ve.currentSlide);var Z=ve.lazyLoadedList.filter(function(te){return d.state.lazyLoadedList.indexOf(te)<0});N&&Z.length>0&&N(Z),!d.props.waitForAnimate&&d.animationEndCallback&&(clearTimeout(d.animationEndCallback),fe&&fe(ae),delete d.animationEndCallback),d.setState(ve,function(){R&&d.asNavForIndex!==E&&(d.asNavForIndex=E,R.innerSlider.slideHandler(E)),J&&(d.animationEndCallback=setTimeout(function(){var te=J.animating,Ee=pV(J,["animating"]);d.setState(Ee,function(){d.callbackTimers.push(setTimeout(function(){return d.setState({animating:te})},10)),fe&&fe(ve.currentSlide),delete d.animationEndCallback})},q))})}}),cr(lr(d),"changeSlide",function(E){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=$t($t({},d.props),d.state),R=(0,hn.changeSlide)(A,E);if(!(R!==0&&!R)&&(s===!0?d.slideHandler(R,s):d.slideHandler(R),d.props.autoplay&&d.autoPlay("update"),d.props.focusOnSelect)){var U=d.list.querySelectorAll(".slick-current");U[0]&&U[0].focus()}}),cr(lr(d),"clickHandler",function(E){d.clickable===!1&&(E.stopPropagation(),E.preventDefault()),d.clickable=!0}),cr(lr(d),"keyHandler",function(E){var s=(0,hn.keyHandler)(E,d.props.accessibility,d.props.rtl);s!==""&&d.changeSlide({message:s})}),cr(lr(d),"selectHandler",function(E){d.changeSlide(E)}),cr(lr(d),"disableBodyScroll",function(){var E=function(A){A=A||window.event,A.preventDefault&&A.preventDefault(),A.returnValue=!1};window.ontouchmove=E}),cr(lr(d),"enableBodyScroll",function(){window.ontouchmove=null}),cr(lr(d),"swipeStart",function(E){d.props.verticalSwiping&&d.disableBodyScroll();var s=(0,hn.swipeStart)(E,d.props.swipe,d.props.draggable);s!==""&&d.setState(s)}),cr(lr(d),"swipeMove",function(E){var s=(0,hn.swipeMove)(E,$t($t($t({},d.props),d.state),{},{trackRef:d.track,listRef:d.list,slideIndex:d.state.currentSlide}));s&&(s.swiping&&(d.clickable=!1),d.setState(s))}),cr(lr(d),"swipeEnd",function(E){var s=(0,hn.swipeEnd)(E,$t($t($t({},d.props),d.state),{},{trackRef:d.track,listRef:d.list,slideIndex:d.state.currentSlide}));if(s){var A=s.triggerSlideHandler;delete s.triggerSlideHandler,d.setState(s),A!==void 0&&(d.slideHandler(A),d.props.verticalSwiping&&d.enableBodyScroll())}}),cr(lr(d),"touchEnd",function(E){d.swipeEnd(E),d.clickable=!0}),cr(lr(d),"slickPrev",function(){d.callbackTimers.push(setTimeout(function(){return d.changeSlide({message:"previous"})},0))}),cr(lr(d),"slickNext",function(){d.callbackTimers.push(setTimeout(function(){return d.changeSlide({message:"next"})},0))}),cr(lr(d),"slickGoTo",function(E){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(E=Number(E),isNaN(E))return"";d.callbackTimers.push(setTimeout(function(){return d.changeSlide({message:"index",index:E,currentSlide:d.state.currentSlide},s)},0))}),cr(lr(d),"play",function(){var E;if(d.props.rtl)E=d.state.currentSlide-d.props.slidesToScroll;else if((0,hn.canGoNext)($t($t({},d.props),d.state)))E=d.state.currentSlide+d.props.slidesToScroll;else return!1;d.slideHandler(E)}),cr(lr(d),"autoPlay",function(E){d.autoplayTimer&&clearInterval(d.autoplayTimer);var s=d.state.autoplaying;if(E==="update"){if(s==="hovered"||s==="focused"||s==="paused")return}else if(E==="leave"){if(s==="paused"||s==="focused")return}else if(E==="blur"&&(s==="paused"||s==="hovered"))return;d.autoplayTimer=setInterval(d.play,d.props.autoplaySpeed+50),d.setState({autoplaying:"playing"})}),cr(lr(d),"pause",function(E){d.autoplayTimer&&(clearInterval(d.autoplayTimer),d.autoplayTimer=null);var s=d.state.autoplaying;E==="paused"?d.setState({autoplaying:"paused"}):E==="focused"?(s==="hovered"||s==="playing")&&d.setState({autoplaying:"focused"}):s==="playing"&&d.setState({autoplaying:"hovered"})}),cr(lr(d),"onDotsOver",function(){return d.props.autoplay&&d.pause("hovered")}),cr(lr(d),"onDotsLeave",function(){return d.props.autoplay&&d.state.autoplaying==="hovered"&&d.autoPlay("leave")}),cr(lr(d),"onTrackOver",function(){return d.props.autoplay&&d.pause("hovered")}),cr(lr(d),"onTrackLeave",function(){return d.props.autoplay&&d.state.autoplaying==="hovered"&&d.autoPlay("leave")}),cr(lr(d),"onSlideFocus",function(){return d.props.autoplay&&d.pause("focused")}),cr(lr(d),"onSlideBlur",function(){return d.props.autoplay&&d.state.autoplaying==="focused"&&d.autoPlay("blur")}),cr(lr(d),"render",function(){var E=(0,uV.default)("slick-slider",d.props.className,{"slick-vertical":d.props.vertical,"slick-initialized":!0}),s=$t($t({},d.props),d.state),A=(0,hn.extractObject)(s,["fade","cssEase","speed","infinite","centerMode","focusOnSelect","currentSlide","lazyLoad","lazyLoadedList","rtl","slideWidth","slideHeight","listHeight","vertical","slidesToShow","slidesToScroll","slideCount","trackStyle","variableWidth","unslick","centerPadding","targetSlide","useCSS"]),R=d.props.pauseOnHover;A=$t($t({},A),{},{onMouseEnter:R?d.onTrackOver:null,onMouseLeave:R?d.onTrackLeave:null,onMouseOver:R?d.onTrackOver:null,focusOnSelect:d.props.focusOnSelect&&d.clickable?d.selectHandler:null});var U;if(d.props.dots===!0&&d.state.slideCount>=d.props.slidesToShow){var N=(0,hn.extractObject)(s,["dotsClass","slideCount","slidesToShow","currentSlide","slidesToScroll","clickHandler","children","customPaging","infinite","appendDots"]),q=d.props.pauseOnDotsHover;N=$t($t({},N),{},{clickHandler:d.changeSlide,onMouseEnter:q?d.onDotsLeave:null,onMouseOver:q?d.onDotsOver:null,onMouseLeave:q?d.onDotsLeave:null}),U=vi.default.createElement(dV.Dots,N)}var fe,ae,se=(0,hn.extractObject)(s,["infinite","centerMode","currentSlide","slideCount","slidesToShow","prevArrow","nextArrow"]);se.clickHandler=d.changeSlide,d.props.arrows&&(fe=vi.default.createElement(qA.PrevArrow,se),ae=vi.default.createElement(qA.NextArrow,se));var ve=null;d.props.vertical&&(ve={height:d.state.listHeight});var J=null;d.props.vertical===!1?d.props.centerMode===!0&&(J={padding:"0px "+d.props.centerPadding}):d.props.centerMode===!0&&(J={padding:d.props.centerPadding+" 0px"});var Z=$t($t({},ve),J),te=d.props.touchMove,Ee={className:"slick-list",style:Z,onClick:d.clickHandler,onMouseDown:te?d.swipeStart:null,onMouseMove:d.state.dragging&&te?d.swipeMove:null,onMouseUp:te?d.swipeEnd:null,onMouseLeave:d.state.dragging&&te?d.swipeEnd:null,onTouchStart:te?d.swipeStart:null,onTouchMove:d.state.dragging&&te?d.swipeMove:null,onTouchEnd:te?d.touchEnd:null,onTouchCancel:d.state.dragging&&te?d.swipeEnd:null,onKeyDown:d.props.accessibility?d.keyHandler:null},ke={className:E,dir:"ltr",style:d.props.style};return d.props.unslick&&(Ee={className:"slick-list"},ke={className:E}),vi.default.createElement("div",ke,d.props.unslick?"":fe,vi.default.createElement("div",B_({ref:d.listRefHandler},Ee),vi.default.createElement(hV.Track,B_({ref:d.trackRefHandler},A),d.props.children)),d.props.unslick?"":ae,d.props.unslick?"":U)}),d.list=null,d.track=null,d.state=$t($t({},lV.default),{},{currentSlide:d.props.initialSlide,slideCount:vi.default.Children.count(d.props.children)}),d.callbackTimers=[],d.clickable=!0,d.debouncedResize=null;var x=d.ssrInit();return d.state=$t($t({},d.state),x),d}return _V(a,[{key:"didPropsChange",value:function(d){for(var x=!1,E=0,s=Object.keys(this.props);E<s.length;E++){var A=s[E];if(!d.hasOwnProperty(A)){x=!0;break}if(!(D_(d[A])==="object"||typeof d[A]=="function")&&d[A]!==this.props[A]){x=!0;break}}return x||vi.default.Children.count(this.props.children)!==vi.default.Children.count(d.children)}}]),a}(vi.default.Component);z0.InnerSlider=wV;var EV=function(e){return e.replace(/[A-Z]/g,function(r){return"-"+r.toLowerCase()}).toLowerCase()},TV=EV,SV=TV,AV=function(e){var r=/[height|width]$/;return r.test(e)},KA=function(e){var r="",a=Object.keys(e);return a.forEach(function(h,d){var x=e[h];h=SV(h),AV(h)&&typeof x=="number"&&(x=x+"px"),x===!0?r+=h:x===!1?r+="not "+h:r+="("+h+": "+x+")",d<a.length-1&&(r+=" and ")}),r},CV=function(e){var r="";return typeof e=="string"?e:e instanceof Array?(e.forEach(function(a,h){r+=KA(a),h<e.length-1&&(r+=", ")}),r):KA(e)},MV=CV,KI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(Xe);function a(x){return x&&x.__esModule?x:{default:x}}var h={accessibility:!0,adaptiveHeight:!1,afterChange:null,appendDots:function(E){return r.default.createElement("ul",{style:{display:"block"}},E)},arrows:!0,autoplay:!1,autoplaySpeed:3e3,beforeChange:null,centerMode:!1,centerPadding:"50px",className:"",cssEase:"ease",customPaging:function(E){return r.default.createElement("button",null,E+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:null,nextArrow:null,onEdge:null,onInit:null,onLazyLoadError:null,onReInit:null,pauseOnDotsHover:!1,pauseOnFocus:!1,pauseOnHover:!0,prevArrow:null,responsive:null,rows:1,rtl:!1,slide:"div",slidesPerRow:1,slidesToScroll:1,slidesToShow:1,speed:500,swipe:!0,swipeEvent:null,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},d=h;e.default=d})(KI);var d1,YA;function PV(){if(YA)return d1;YA=1;function e(r){this.options=r,!r.deferSetup&&this.setup()}return e.prototype={constructor:e,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(r){return this.options===r||this.options.match===r}},d1=e,d1}var f1,QA;function YI(){if(QA)return f1;QA=1;function e(h,d){var x=0,E=h.length,s;for(x;x<E&&(s=d(h[x],x),s!==!1);x++);}function r(h){return Object.prototype.toString.apply(h)==="[object Array]"}function a(h){return typeof h=="function"}return f1={isFunction:a,isArray:r,each:e},f1}var p1,JA;function IV(){if(JA)return p1;JA=1;var e=PV(),r=YI().each;function a(h,d){this.query=h,this.isUnconditional=d,this.handlers=[],this.mql=window.matchMedia(h);var x=this;this.listener=function(E){x.mql=E.currentTarget||E,x.assess()},this.mql.addListener(this.listener)}return a.prototype={constuctor:a,addHandler:function(h){var d=new e(h);this.handlers.push(d),this.matches()&&d.on()},removeHandler:function(h){var d=this.handlers;r(d,function(x,E){if(x.equals(h))return x.destroy(),!d.splice(E,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){r(this.handlers,function(h){h.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var h=this.matches()?"on":"off";r(this.handlers,function(d){d[h]()})}},p1=a,p1}var m1,eC;function kV(){if(eC)return m1;eC=1;var e=IV(),r=YI(),a=r.each,h=r.isFunction,d=r.isArray;function x(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}return x.prototype={constructor:x,register:function(E,s,A){var R=this.queries,U=A&&this.browserIsIncapable;return R[E]||(R[E]=new e(E,U)),h(s)&&(s={match:s}),d(s)||(s=[s]),a(s,function(N){h(N)&&(N={match:N}),R[E].addHandler(N)}),this},unregister:function(E,s){var A=this.queries[E];return A&&(s?A.removeHandler(s):(A.clear(),delete this.queries[E])),this}},m1=x,m1}var g1,tC;function LV(){if(tC)return g1;tC=1;var e=kV();return g1=new e,g1}(function(e){function r(Ve){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},r(Ve)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(Xe),h=z0,d=s(MV),x=s(KI),E=wt;function s(Ve){return Ve&&Ve.__esModule?Ve:{default:Ve}}function A(){return A=Object.assign||function(Ve){for(var Te=1;Te<arguments.length;Te++){var dt=arguments[Te];for(var zt in dt)Object.prototype.hasOwnProperty.call(dt,zt)&&(Ve[zt]=dt[zt])}return Ve},A.apply(this,arguments)}function R(Ve,Te){var dt=Object.keys(Ve);if(Object.getOwnPropertySymbols){var zt=Object.getOwnPropertySymbols(Ve);Te&&(zt=zt.filter(function(at){return Object.getOwnPropertyDescriptor(Ve,at).enumerable})),dt.push.apply(dt,zt)}return dt}function U(Ve){for(var Te=1;Te<arguments.length;Te++){var dt=arguments[Te]!=null?arguments[Te]:{};Te%2?R(Object(dt),!0).forEach(function(zt){ke(Ve,zt,dt[zt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ve,Object.getOwnPropertyDescriptors(dt)):R(Object(dt)).forEach(function(zt){Object.defineProperty(Ve,zt,Object.getOwnPropertyDescriptor(dt,zt))})}return Ve}function N(Ve,Te){if(!(Ve instanceof Te))throw new TypeError("Cannot call a class as a function")}function q(Ve,Te){for(var dt=0;dt<Te.length;dt++){var zt=Te[dt];zt.enumerable=zt.enumerable||!1,zt.configurable=!0,"value"in zt&&(zt.writable=!0),Object.defineProperty(Ve,zt.key,zt)}}function fe(Ve,Te,dt){return Te&&q(Ve.prototype,Te),dt&&q(Ve,dt),Object.defineProperty(Ve,"prototype",{writable:!1}),Ve}function ae(Ve,Te){if(typeof Te!="function"&&Te!==null)throw new TypeError("Super expression must either be null or a function");Ve.prototype=Object.create(Te&&Te.prototype,{constructor:{value:Ve,writable:!0,configurable:!0}}),Object.defineProperty(Ve,"prototype",{writable:!1}),Te&&se(Ve,Te)}function se(Ve,Te){return se=Object.setPrototypeOf||function(zt,at){return zt.__proto__=at,zt},se(Ve,Te)}function ve(Ve){var Te=te();return function(){var zt=Ee(Ve),at;if(Te){var vt=Ee(this).constructor;at=Reflect.construct(zt,arguments,vt)}else at=zt.apply(this,arguments);return J(this,at)}}function J(Ve,Te){if(Te&&(r(Te)==="object"||typeof Te=="function"))return Te;if(Te!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z(Ve)}function Z(Ve){if(Ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ve}function te(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ee(Ve){return Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(dt){return dt.__proto__||Object.getPrototypeOf(dt)},Ee(Ve)}function ke(Ve,Te,dt){return Te in Ve?Object.defineProperty(Ve,Te,{value:dt,enumerable:!0,configurable:!0,writable:!0}):Ve[Te]=dt,Ve}var Fe=(0,E.canUseDOM)()&&LV(),We=function(Ve){ae(dt,Ve);var Te=ve(dt);function dt(zt){var at;return N(this,dt),at=Te.call(this,zt),ke(Z(at),"innerSliderRefHandler",function(vt){return at.innerSlider=vt}),ke(Z(at),"slickPrev",function(){return at.innerSlider.slickPrev()}),ke(Z(at),"slickNext",function(){return at.innerSlider.slickNext()}),ke(Z(at),"slickGoTo",function(vt){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return at.innerSlider.slickGoTo(vt,Ot)}),ke(Z(at),"slickPause",function(){return at.innerSlider.pause("paused")}),ke(Z(at),"slickPlay",function(){return at.innerSlider.autoPlay("play")}),at.state={breakpoint:null},at._responsiveMediaHandlers=[],at}return fe(dt,[{key:"media",value:function(at,vt){Fe.register(at,vt),this._responsiveMediaHandlers.push({query:at,handler:vt})}},{key:"componentDidMount",value:function(){var at=this;if(this.props.responsive){var vt=this.props.responsive.map(function(St){return St.breakpoint});vt.sort(function(St,Jt){return St-Jt}),vt.forEach(function(St,Jt){var Ze;Jt===0?Ze=(0,d.default)({minWidth:0,maxWidth:St}):Ze=(0,d.default)({minWidth:vt[Jt-1]+1,maxWidth:St}),(0,E.canUseDOM)()&&at.media(Ze,function(){at.setState({breakpoint:St})})});var Ot=(0,d.default)({minWidth:vt.slice(-1)[0]});(0,E.canUseDOM)()&&this.media(Ot,function(){at.setState({breakpoint:null})})}}},{key:"componentWillUnmount",value:function(){this._responsiveMediaHandlers.forEach(function(at){Fe.unregister(at.query,at.handler)})}},{key:"render",value:function(){var at=this,vt,Ot;this.state.breakpoint?(Ot=this.props.responsive.filter(function(Lr){return Lr.breakpoint===at.state.breakpoint}),vt=Ot[0].settings==="unslick"?"unslick":U(U(U({},x.default),this.props),Ot[0].settings)):vt=U(U({},x.default),this.props),vt.centerMode&&(vt.slidesToScroll>1,vt.slidesToScroll=1),vt.fade&&(vt.slidesToShow>1,vt.slidesToScroll>1,vt.slidesToShow=1,vt.slidesToScroll=1);var St=a.default.Children.toArray(this.props.children);St=St.filter(function(Lr){return typeof Lr=="string"?!!Lr.trim():!!Lr}),vt.variableWidth&&(vt.rows>1||vt.slidesPerRow>1)&&(console.warn("variableWidth is not supported in case of rows > 1 or slidesPerRow > 1"),vt.variableWidth=!1);for(var Jt=[],Ze=null,Oe=0;Oe<St.length;Oe+=vt.rows*vt.slidesPerRow){for(var Et=[],_t=Oe;_t<Oe+vt.rows*vt.slidesPerRow;_t+=vt.slidesPerRow){for(var It=[],qt=_t;qt<_t+vt.slidesPerRow&&(vt.variableWidth&&St[qt].props.style&&(Ze=St[qt].props.style.width),!(qt>=St.length));qt+=1)It.push(a.default.cloneElement(St[qt],{key:100*Oe+10*_t+qt,tabIndex:-1,style:{width:"".concat(100/vt.slidesPerRow,"%"),display:"inline-block"}}));Et.push(a.default.createElement("div",{key:10*Oe+_t},It))}vt.variableWidth?Jt.push(a.default.createElement("div",{key:Oe,style:{width:Ze}},Et)):Jt.push(a.default.createElement("div",{key:Oe},Et))}if(vt==="unslick"){var nr="regular slider "+(this.props.className||"");return a.default.createElement("div",{className:nr},St)}else Jt.length<=vt.slidesToShow&&(vt.unslick=!0);return a.default.createElement(h.InnerSlider,A({style:this.props.style,ref:this.innerSliderRefHandler},vt),Jt)}}]),dt}(a.default.Component);e.default=We})(SI);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(SI);function a(d){return d&&d.__esModule?d:{default:d}}var h=r.default;e.default=h})(TI);const QI=dp(TI),_1="/assets/partners1-6eb0c85b.png",y1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJoAAAAxCAYAAAAiJLA6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAjsSURBVHgB7ZxfaBxFHMd/e3dpLvEiDSRiogUr1KpgwYCCraa2YH0tWATRREPf+uCrD+1jH8yrYt5KaxIoiA/ts6hNahQUFBRs2j4E/NdCCwnkckmTvR3ne9nJza0zu7N7s5ertx8Y0u7tzszNfnd+f2b2iDI6mt4jl4d7j86+RCmTo4yOxilsXaIWkAmtgykd/fwM/zNM3tYTlDKZ0DoUmExGzhlqEZnQOhTZZDq5fB+lTCa0DmTHZPowYpnQMuzSapMpyITWYaiizJzjDFPKZELrIIIms5VkQusQwkymx+hRSplMaB1CRGI2CwYymifSZDIndaEVYpw7wstexfEbvNwh+6C9ouL495Qeg7wcUBz/0y8PHdsmcys0ynQclrrpjCO0VlMktdDSpKBps53HKZRWrWVG8dAO4P+dgSMX+ja6uj6iJmAsx02iZxJlDpdenz5PTbBJ1dnNaxOLus8zobUp9xdOrz7y6vRNylMTYvOMz2SMTlICGHNWuemd2pzTiwxkwUAbs/bd+Ax31GeoXWHO39Vq9wdrc+ORfcyE1uaszY9N8j8/UZvBeJ96qpunHiy8fdPk/DRNJ+oe4mWAlx7adrJdXlZ5KdN2FLcRuKZE9T7p+iZHvq5fl9zmoH9OX6COdV5WaDtC3ghcU5LaV1EMtFv22w72q9+vo0/q35bfHtq+p7kuSMP36nG3PlzP7/mSHJb6vjETGOWmKnPvTVViXOPEODdOegM3+zmKFvKSXwSHKV6kecdvHzzJy9Nk9vDgutu0fUOH/L7GASkWIdaif32/wXW4Zokax+s4qfuH74VxhDip+9gXB/Peg0tOC3Za6IA/liN2tjw//g3FJA3TuZ+XF8jshuPcuDdZV88zZD5DQ1wj1PyMXvTrMRGZOB/fd5/BuegjxrGW13vwLTdRXu5j2i24P0bVwltJRAZsC22/X+KAATUZeB3FBG2CUpPtAl1SOQr0t2BwDtjnF6pcf/cqzBa1GOY5V+GPVRbe+YcSYlNoYTccJgo+yrrm8wOUPDkb1iZMEEzVPc05zQgNZk3X52W/7RXN58J/Na0b41NzW+AbUWuDg8nK9bGzSLdQE9gMBp7XHA/6YbpZD8f+4KXL/z9EUNDUJyiTXmg/UqPTj/qCy0uon0l1YpYbVNQF4ciigYhV/iqA7ycvV6HOlxXn6QIP0a8gh8j/Ti0JDripZI5zjgvbiqhtzWjBqEwgZhQZ3QyDG3yX6sJ0Sc2SVFCP6qa4iutFtKkqor77pGYl0C7qVjnlEGRwTbRMjZGxwHQGR50IDCDgmi+I2YVVCxOMnKZmGR0Oo0XUb0tkwNaMpjNBS5rjuBmDir5ArLqbHQfUBacbN0fMahCHzQX5W/Tf8dvQnKt7aKL4mTTmF/5SaXT6LHPoE7IJY7PFqvvZ/YVxqyK2JTTV043B1Q18WXMcT2xcoWFAVLPDoF+E2Vsmdf4rKeWIz0V+TuT14oKHdCXsBESAvUdnpxzymn4HQCwlrc2/P7NG9rEltJKm7uMUjyQBgWp2lOn3i/DlIBCYUZjdDbKDLCp8hz5qfueJ2dYrN3+FFdhYs/k1LrJFk6WkpAhzFSSYcTepxwZJbo7I9g8Zng9BICiAuYdpakZsBaqnH2wGVsJ3jCZfPWMjicv9vWcpRRAMjCjKAdoduigZcJZhatZjXCOSrUkFgusRTZrkxFKh+9jMQcfxEu26CAKxYmsSpYStAXI1dcWdLeIIJYhY2oGZHPD/Rn0/iGUf6YOWMKJyf/AdxfomlsaS+GmhFDz2KVmkUujGrJZKjg43QieSOKjqgMjS3HatAm3eobp/AzOJG/wY6W90EgFAYDq/EKKF32gr6FCC9wCY5VfneFDRcqGpplBdghGzECK6oI9UlOpPC3nnhYzwcUQO6y9SJ2xBEnMxoDkOgalmR6tb0vEegEcuAgCyCqumlgDGjVKlB3AcvocYtDA/RGz9UTnjOKZ7qUO1mI7Uhm65SO6bK/17RHGOakcJ+gGxJbnpwe+u8yXvaa61++5DnAAAi+GmKwhO/iClBIIBXXQJcY36JWzRGtcjo+9q6ihqjg8pyhZFA4Hu9YvuBj6uOKZ72UVOTOpmX9E/0a7uoetRHAtLvcSm97WZkyYBAPJi/M/k2vzYm/zfi2RAmpEnhLYc8nmBwv03ca1YwFZdjxkH4hC7NF4ktXDFxkSBLjM9SPXoeIjUSc1+qgtSLI8d0tRXDvRBhVhpEO3qBBl8sNCu1QjeybHo5CzLfY0tPSIv1lvdnDARG2bJ3jcupPKTCRjAFb8kcYplccHMit20Mhh4MSOEcSPwfwjAZDZAH1R9N2kTyKYdfp1JcIQHTPWw4LsepkbTrqOHYhIZAIiF8PnGNUqsjfLUxUQlv+ciT8yGzlreRh4PVOLtQDrEovotig9u8F3p/xjc3yiZ869ablkmM8K245i0K6dgTBPVYmu2jqAlcDXnGBP1c1PYp1bbM6ZZCIfYTGa2fC6XyowmhIbB/d38spoIbiuOox5sZYmTD0M9qkhthczzW79S/Lflde1iHEz6b3qebrdKlFvSSN5VLp7jJRHmdp3APrWoPWNCbLUAQYPjUCoBgfxFMTvh5gpHXYVYJwz7eQA87T/4dTxFahPhSvWEJXXFjIO65BdXRDuuVN8Nv//CaaeE7eL4L7Q9DvKLJuJ6V3GearyWqT5T43PVOPSTemZsEPB2ANBo8mrOPnMnK9cnrlAMamI7cnnCybsXVdGo56UTEIS9nCKiK4Ty+OLm62+NiGgPAy3eCIqzjpoEOb8m2i2TvUV0XXuiLYjHSv4QJtP/WYO6SWNstqe2lSf5rtdavQqxYY9bZW7sFbJMnLegMnaB3tHZ8yKdgQ2JnpObtLUhUSu2PVsnKl+dthoQZC8QtzE1IXCRiZxYeX78lM1dr9g8iZ20QZ/NjzytkgmtjYHJhLMv58RsoxJbGpFnZjrblNLo9HFuJldtzmBhyGaUR55XytfGz5FFMqFl7CDExmfR1cr82CmySGY6M3YQZpTPaLv2swsZHQR+5yPN3bYZGanxLxsT5mMaNDDZAAAAAElFTkSuQmCC",v1="/assets/partners3-77e4e7f5.png",OV=()=>{const e={dots:!1,infinite:!0,autoplay:!0,slidesToShow:6,slidesToScroll:1,initialSlide:0,responsive:[{breakpoint:1024,settings:{slidesToShow:4,slidesToScroll:1,infinite:!0,dots:!1}},{breakpoint:600,settings:{slidesToShow:2,slidesToScroll:1,initialSlide:2,dots:!1}},{breakpoint:480,settings:{slidesToShow:2,slidesToScroll:1,dots:!1}}]};return we.jsx("section",{className:"w-full lg:px-20 px-6 my-16 lg:my-0",children:we.jsxs(QI,{...e,children:[we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:_1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"}),we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:y1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"}),we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:v1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"}),we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:_1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"}),we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:y1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"}),we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:v1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"}),we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:_1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"}),we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:y1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"}),we.jsx(Fi,{cardClass:"p-2 bg-white rounded-lg cursor-pointer flex item-center justify-center",imageAlt:"partenrsLogo",imageSrc:v1,imageWrapperClass:"w-[120px] h-[50px]",cover:"object-contain"})]})})},zV="/assets/profile1-eb7ff9fe.jpeg",RV="/assets/profile2-e95942ba.jpeg",DV="/assets/profile3-d2e45eb3.jpeg",BV="/assets/profile4-f57b204f.jpeg",FV=()=>{const e=Xe.useRef(),r=()=>{e.current&&e.current.slickNext()},a=()=>{e.current&&e.current.slickPrev()},h={dots:!1,infinite:!0,slidesToShow:1,slidesToScroll:1,vertical:!0,verticalSwiping:!0},d=Xe.useCallback(x=>{switch(x){case 0:return RV;case 1:return zV;case 2:return DV;case 3:return BV;default:return""}},[]);return we.jsx("section",{className:"w-full h-auto flex flex-col items-start justify-center relative lg:px-24 md:px-10 px-6 mt-36 gap-5",children:we.jsxs("main",{className:"w-full grid md:grid-cols-2 lg:gap-0 gap-8 md:gap-5",children:[we.jsxs("div",{className:"w-full flex flex-col gap-6",children:[we.jsx(mr,{as:"p",className:"font-light text-base text-color3/80 tracking-widest",children:Qv.firstText}),we.jsx(mr,{as:"h1",className:"lg:text-5xl md:text-3xl text-4xl text-color3 font-medium",children:Qv.secondText})]}),we.jsxs("div",{className:"w-full lg:h-[400px] flex justify-center gap-4 items-center",children:[we.jsx("div",{className:"lg:h-[250px] w-[90%]",children:we.jsx(QI,{ref:x=>e.current=x,...h,children:Qv.feedBacks.map((x,E)=>we.jsx("div",{className:"w-full",children:we.jsxs(Fi,{cardClass:"bg-white shadow border-[1px] border-color3/10 relative rounded-xl p-4 lg:h-[200px] h-[260px] lg:mb-4 w-full flex gap-4 justify-start",imageAlt:x.person,imageSrc:d(E),imageWrapperClass:"w-20 h-20 rounded-full absolute lg:bottom-4 bottom-3 right-4 overflow-hidden",cover:"object-cover object-top",textWrapperClass:"flex flex-col justify-center gap-6",children:[we.jsx(mr,{as:"q",className:"text-[0.84rem] font-light text-color3",children:x.text}),we.jsxs("div",{className:"flex flex-col gap-2",children:[we.jsx(mr,{as:"h4",className:"text-base text-color3 font-medium",children:x.person}),we.jsx(mr,{as:"p",className:"text-sm text-color3 font-light",children:x.location})]})]},E)}))})}),we.jsxs("div",{className:"flex flex-col gap-4 pb-5",children:[we.jsx(Lc,{onClick:a,id:"prev",className:"cursor-pointer outline-none border-none bg-color2/30 text-color3 hover:bg-color2 p-2 rounded-full",type:"button",children:we.jsx(J3,{size:18,color:"currentColor",weight:"fill"})}),we.jsx(Lc,{onClick:r,id:"next",className:"cursor-pointer outline-none border-none bg-color2/30 text-color3 hover:bg-color2 p-2 rounded-full",type:"button",children:we.jsx(Q3,{size:18,color:"currentColor",weight:"fill"})})]})]})]})})},NV=()=>we.jsxs(we.Fragment,{children:[we.jsx(PP,{}),we.jsx(IP,{}),we.jsx(EI,{}),we.jsx(MP,{}),we.jsx(FV,{}),we.jsx(OV,{}),we.jsx(e7,{})]}),jV=()=>we.jsxs("footer",{className:"w-full flex flex-col bg-white",children:[we.jsxs("section",{className:"w-full h-auto grid lg:grid-cols-5 md:grid-cols-3 lg:px-20 md:px-12 px-6 py-16 gap-7 md:gap-4 lg:gap-0",children:[we.jsxs("div",{className:"flex flex-col items-start gap-4",children:[we.jsx(kc,{className:"w-28",image:vx,alt:"Logo",as:"a",href:"/"}),we.jsx(mr,{className:"text-sm text-color4",as:"p",children:Jv.underLogoText})]}),we.jsxs("div",{className:"flex flex-col md:items-center gap-4 md:mt-8",children:[we.jsx(mr,{className:"text-xl text-color3",as:"h2",children:Jv.quickLinks.caption}),we.jsx("ul",{className:"flex flex-col gap-2",children:Jv.quickLinks.links.map((e,r)=>we.jsx(Ju,{className:"text-sm",children:we.jsx(A3,{to:e.url,className:"text-color4 transition-all duration-300 hover:underline",children:e.name})},r))})]}),""]}),we.jsx(mr,{className:"text-center bg-color4 text-white text-xs py-6 font-light",children:"Copyright 2023. adoptatree.com. All rights reserved."})]});function UV(){const e=Ch();return Xe.useEffect(()=>{W3.scrollToTop({duration:0})},[e.pathname]),we.jsxs("div",{className:"w-full bg-white text-gray-950 font-poppins",children:[we.jsx(oF,{}),we.jsxs(F5,{children:[we.jsx(Sf,{path:"/",element:we.jsx(dF,{})}),we.jsx(Sf,{path:"/adopt-a-tree",element:we.jsx(Pj,{})}),we.jsx(Sf,{path:"/buy-a-tree",element:we.jsx(KU,{})}),we.jsx(Sf,{path:"/plant-a-tree",element:we.jsx(NV,{})})]}),we.jsx(jV,{})]})}b1.createRoot(document.getElementById("root")).render(we.jsx(ze.StrictMode,{children:we.jsx(G5,{children:we.jsx(UV,{})})}));
